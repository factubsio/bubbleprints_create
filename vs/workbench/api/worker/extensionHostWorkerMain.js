/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var am=function(e,t){return am=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},am(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");am(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}export var __assign=function(){return __assign=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]]);return i}export function __decorate(e,t,i,r){var s=arguments.length,n=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}export function __param(e,t){return function(i,r){t(i,r,e)}}export function __esDecorate(e,t,i,r,s,n){function o(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),h,f=!1,g=i.length-1;g>=0;g--){var m={};for(var w in r)m[w]=w==="access"?{}:r[w];for(var w in r.access)m.access[w]=r.access[w];m.addInitializer=function(C){if(f)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(C||null))};var S=(0,i[g])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(h=o(S.get))&&(u.get=h),(h=o(S.set))&&(u.set=h),(h=o(S.init))&&s.unshift(h)}else(h=o(S))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,r.name,u),f=!0}export function __runInitializers(e,t,i){for(var r=arguments.length>2,s=0;s<t.length;s++)i=r?t[s].call(e,i):t[s].call(e);return r?i:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,i){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}export function __generator(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,s=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){i.label=l[1];break}if(l[0]===6&&i.label<n[1]){i.label=n[1],n=l;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(l);break}n[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],s=0}finally{r=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,i,r){r===void 0&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]};export function __exportStar(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(t,e,i)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r}export function __spreadArray(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,n;r<s;r++)(n||!(r in t))&&(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(m){return Promise.resolve(m).then(g,h)}}function a(g,m){r[g]&&(s[g]=function(w){return new Promise(function(S,C){n.push([g,w,S,C])>1||c(g,w)})},m&&(s[g]=m(s[g])))}function c(g,m){try{l(r[g](m))}catch(w){f(n[0][3],w)}}function l(g){g.value instanceof __await?Promise.resolve(g.value.v).then(u,h):f(n[0][2],g)}function u(g){c("next",g)}function h(g){c("throw",g)}function f(g,m){g(m),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,i;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,n){t[s]=e[s]?function(o){return(i=!i)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var lP=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return lP(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)}export function __classPrivateFieldSet(e,t,i,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,i):s?s.value=i:t.set(e,i),i}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t}var uP=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};export function __disposeResources(e){function t(r){e.error=e.hasError?new uP(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function i(){for(;e.stack.length;){var r=e.stack.pop();try{var s=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(s).then(i,function(n){return t(n),i()})}catch(n){t(n)}}if(e.hasError)throw e.error}return i()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var qs;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Running=1]="Running",e[e.Completed=2]="Completed"})(qs||(qs={}));var It=class{constructor(e){this.d=e,this.a=qs.Uninitialized}get hasValue(){return this.a===qs.Completed}get value(){if(this.a===qs.Uninitialized){this.a=qs.Running;try{this.b=this.d()}catch(e){this.c=e}finally{this.a=qs.Completed}}else if(this.a===qs.Running)throw new Error("Cannot read the value of a lazy that is being initialized");if(this.c)throw this.c;return this.b}get rawValue(){return this.b}},hP=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?jn.isErrorNoTelemetry(e)?new jn(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},Vc=new hP;function cm(e){Vc.setUnexpectedErrorHandler(e)}function Gc(e){Vc.onUnexpectedError(e)}function Bt(e){qr(e)||Vc.onUnexpectedError(e)}function lm(e){qr(e)||Vc.onUnexpectedExternalError(e)}function ea(e){if(e instanceof Error){const{name:t,message:i,cause:r}=e,s=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:s,noTelemetry:jn.isErrorNoTelemetry(e),cause:r?ea(r):void 0,code:e.code}}return e}function q4(e){let t;return e.noTelemetry?t=new jn:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=q4(e.cause)),t}var kh="Canceled";function qr(e){return e instanceof oi?!0:e instanceof Error&&e.name===kh&&e.message===kh}var oi=class extends Error{constructor(){super(kh),this.name=this.message}},z4=class _g extends Error{static{this.a="PendingMigrationError"}static is(t){return t instanceof _g||t instanceof Error&&t.name===_g.a}constructor(t){super(t),this.name=_g.a}};function V4(){const e=new Error(kh);return e.name=e.message,e}function Ce(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function um(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var Un=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},dP=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},hm=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},jn=class g4 extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof g4)return t;const i=new g4;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},qt=class TD extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,TD.prototype)}};function fP(e,t,i=e.length-1){const r=pP(e,t,i);if(r!==-1)return e[r]}function pP(e,t,i=e.length-1){for(let r=i;r>=0;r--){const s=e[r];if(t(s,r))return r}return-1}function gP(e,t,i=0,r=e.length){let s=i,n=r;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}var Mq=class RD{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(RD.assertInvariants){if(this.d){for(const r of this.e)if(this.d(r)&&!t(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const i=gP(this.e,t,this.c);return this.c=i+1,i===-1?void 0:this.e[i]}};function wi(e,t,i=(r,s)=>r===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(!i(e[r],t[r]))return!1;return!0}function mP(e,t){const i=[];let r;for(const s of e.slice(0).sort(t))!r||t(r[0],s)!==0?(r=[s],i.push(r)):r.push(s);return i}function G4(e,t,i){const r=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=r[r.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):r.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=i(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return r}function vP(e,t,i){const r=G4(e,t,i),s=[],n=[];for(const o of r)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function mt(e){return e.filter(t=>!!t)}function wP(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function dm(e){return!Array.isArray(e)||e.length===0}function Jc(e){return Array.isArray(e)&&e.length>0}function zs(e,t=i=>i){const i=new Set;return e.filter(r=>{const s=t(r);return i.has(s)?!1:(i.add(s),!0)})}function J4(e,t){let i;if(typeof t=="number"){let r=t;i=()=>{const s=Math.sin(r++)*179426549;return s-Math.floor(s)}}else i=Math.random;for(let r=e.length-1;r>0;r-=1){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}}function fm(e,t){return Array.isArray(e)?e.map(t):t(e)}function nr(e){return Array.isArray(e)?e:[e]}var pm;(function(e){function t(n){return n<0}e.isLessThan=t;function i(n){return n<=0}e.isLessThanOrEqual=i;function r(n){return n>0}e.isGreaterThan=r;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(pm||(pm={}));function bP(e,t){return(i,r)=>t(e(i),e(r))}var yP=(e,t)=>e-t,Oq=class Bg{static{this.empty=new Bg(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(i=>(t(i),!0))}toArray(){const t=[];return this.iterate(i=>(t.push(i),!0)),t}filter(t){return new Bg(i=>this.iterate(r=>t(r)?i(r):!0))}map(t){return new Bg(i=>this.iterate(r=>i(t(r))))}some(t){let i=!1;return this.iterate(r=>(i=t(r),!i)),i}findFirst(t){let i;return this.iterate(r=>t(r)?(i=r,!1):!0),i}findLast(t){let i;return this.iterate(r=>(t(r)&&(i=r),!0)),i}findLastMaxBy(t){let i,r=!0;return this.iterate(s=>((r||pm.isGreaterThan(t(s,i)))&&(r=!1,i=s),!0)),i}},Q4;function Z4(e,t){const i=Object.create(null);for(const r of e){const s=t(r);let n=i[s];n||(n=i[s]=[]),n.push(r)}return i}function SP(e,t){const i=[],r=[];for(const s of e)t.has(s)||i.push(s);for(const s of t)e.has(s)||r.push(s);return{removed:i,added:r}}var Fq=class{static{Q4=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[Q4]="SetWithKey";for(const i of e)this.add(i)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},X4,Y4,K4;function EP(e,t,i){let r=e.get(t);return r===void 0&&(r=i,e.set(t,r)),r}var CP=class{constructor(e,t){this.uri=e,this.value=t}};function xP(e){return Array.isArray(e)}var wt=class fh{static{this.c=t=>t.toString()}constructor(t,i){if(this[X4]="ResourceMap",t instanceof fh)this.d=new Map(t.d),this.e=i??fh.c;else if(xP(t)){this.d=new Map,this.e=i??fh.c;for(const[r,s]of t)this.set(r,s)}else this.d=new Map,this.e=t??fh.c}set(t,i){return this.d.set(this.e(t),new CP(t,i)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[r,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(X4=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},Qc=class{constructor(e,t){this[Y4]="ResourceSet",!e||typeof e=="function"?this.c=new wt(e):(this.c=new wt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((i,r)=>e.call(t,r,r,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(Y4=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},e5;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(e5||(e5={}));var kP=class{constructor(){this[K4]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const i=this.c.get(e);if(i)return t!==0&&this.n(i,t),i.value}set(e,t,i=0){let r=this.c.get(e);if(r)r.value=t,i!==0&&this.n(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.l(r);break;case 1:this.k(r);break;case 2:this.l(r);break;default:this.l(r);break}this.c.set(e,r),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.m(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.m(e),this.f--,e.value}forEach(e,t){const i=this.g;let r=this.d;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}[(K4=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.next,i--;this.d=t,this.f=i,t&&(t.previous=void 0),this.g++}j(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.previous,i--;this.e=t,this.f=i,t&&(t.next=void 0),this.g++}k(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}l(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}m(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this.g++}n(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const i=e.next,r=e.previous;e===this.e?(r.next=void 0,this.e=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const i=e.next,r=e.previous;e===this.d?(i.previous=void 0,this.d=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}},$P=class extends kP{constructor(e,t=1){super(),this.o=e,this.p=Math.min(Math.max(0,t),1)}get limit(){return this.o}set limit(e){this.o=e,this.q()}get ratio(){return this.p}set ratio(e){this.p=Math.min(Math.max(0,e),1),this.q()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}q(){this.size>this.o&&this.r(Math.round(this.o*this.p))}},ta=class extends $P{constructor(e,t=1){super(e,t)}r(e){this.h(e)}set(e,t){return super.set(e,t),this.q(),this}},t5=class{constructor(){this.c=new Map}add(e,t){let i=this.c.get(e);i||(i=new Set,this.c.set(e,i)),i.add(t)}delete(e,t){const i=this.c.get(e);i&&(i.delete(t),i.size===0&&this.c.delete(e))}forEach(e,t){const i=this.c.get(e);i&&i.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function i5(e,t){const i=this;let r=!1,s;return function(){if(r)return s;if(r=!0,t)try{s=e.apply(i,arguments)}finally{t()}else s=e.apply(i,arguments);return s}}function fi(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function gm(e,t="Unreachable"){throw new Error(t)}function mm(e,t="unexpected state"){if(!e)throw typeof t=="string"?new qt(`Assertion Failed: ${t}`):t}function r5(e){if(!e()){debugger;e(),Bt(new qt("Assertion Failed"))}}function Oe(e){return typeof e=="string"}function IP(e){return DP(e,Oe)}function DP(e,t){return Array.isArray(e)&&e.every(t)}function bt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function PP(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function Hn(e){return typeof e=="number"&&!isNaN(e)}function AP(e){return!!e&&typeof e[Symbol.iterator]=="function"}function Zc(e){return typeof e>"u"}function Gi(e){return!Tt(e)}function Tt(e){return Zc(e)||e===null}function s5(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function ia(e){return mm(e!=null,"Argument is `undefined` or `null`."),e}var TP=Object.prototype.hasOwnProperty;function vm(e){if(!bt(e))return!1;for(const t in e)if(TP.call(e,t))return!1;return!0}function n5(e){return typeof e=="function"}function RP(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++)o5(e[r],t[r])}function o5(e,t){if(Oe(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(n5(t)){try{if(e instanceof t)return}catch{}if(!Tt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Vs(e,t){for(const i in t)if(!(i in e))return!1;return!0}var Dt;(function(e){function t(F){return!!F&&typeof F=="object"&&typeof F[Symbol.iterator]=="function"}e.is=t;const i=Object.freeze([]);function r(){return i}e.empty=r;function*s(F){yield F}e.single=s;function n(F){return t(F)?F:s(F)}e.wrap=n;function o(F){return F??i}e.from=o;function*a(F){for(let z=F.length-1;z>=0;z--)yield F[z]}e.reverse=a;function c(F){return!F||F[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(F){return F[Symbol.iterator]().next().value}e.first=l;function u(F,z){let Z=0;for(const Le of F)if(z(Le,Z++))return!0;return!1}e.some=u;function h(F,z){let Z=0;for(const Le of F)if(!z(Le,Z++))return!1;return!0}e.every=h;function f(F,z){for(const Z of F)if(z(Z))return Z}e.find=f;function*g(F,z){for(const Z of F)z(Z)&&(yield Z)}e.filter=g;function*m(F,z){let Z=0;for(const Le of F)yield z(Le,Z++)}e.map=m;function*w(F,z){let Z=0;for(const Le of F)yield*z(Le,Z++)}e.flatMap=w;function*S(...F){for(const z of F)AP(z)?yield*z:yield z}e.concat=S;function C(F,z,Z){let Le=Z;for(const it of F)Le=z(Le,it);return Le}e.reduce=C;function k(F){let z=0;for(const Z of F)z++;return z}e.length=k;function*A(F,z,Z=F.length){for(z<-F.length&&(z=0),z<0&&(z+=F.length),Z<0?Z+=F.length:Z>F.length&&(Z=F.length);z<Z;z++)yield F[z]}e.slice=A;function G(F,z=Number.POSITIVE_INFINITY){const Z=[];if(z===0)return[Z,F];const Le=F[Symbol.iterator]();for(let it=0;it<z;it++){const Pe=Le.next();if(Pe.done)return[Z,e.empty()];Z.push(Pe.value)}return[Z,{[Symbol.iterator](){return Le}}]}e.consume=G;async function H(F){const z=[];for await(const Z of F)z.push(Z);return z}e.asyncToArray=H;async function K(F){let z=[];for await(const Z of F)z=z.concat(Z);return z}e.asyncToArrayFlat=K})(Dt||(Dt={}));var LP=!1,Wn=null,Uq=class LD{constructor(){this.b=new Map}static{this.a=0}c(t){let i=this.b.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:LD.a++},this.b.set(t,i)),i}trackDisposable(t){const i=this.c(t);i.source||(i.source=new Error().stack)}setParent(t,i){const r=this.c(t);r.parent=i}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,i){const r=i.get(t);if(r)return r;const s=t.parent?this.f(this.c(t.parent),i):t;return i.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,r])=>r.source!==null&&!this.f(r,t).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(t=10,i){let r;if(i)r=i;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(r=l.filter(h=>!(h.parent&&u.has(h.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function s(c){function l(h,f){for(;h.length>0&&f.some(g=>typeof g=="string"?g===h[0]:h[0].match(g));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new t5;for(const c of r){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}r.sort(bP(c=>c.idx,yP));let o="",a=0;for(const c of r.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let f=l[h];f=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${r.length} leaks) at ${f}`;const m=n.get(l.slice(0,h).join(`
`)),w=Z4([...m].map(S=>s(S)[h]),S=>S);delete w[l[h]];for(const[S,C]of Object.entries(w))C&&u.unshift(`    - stacktraces of ${C.length} other leaks continue with ${S}`);u.unshift(f)}o+=`


==================== Leaking disposable ${a}/${r.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return r.length>t&&(o+=`


... and ${r.length-t} more leaking disposables

`),{leaks:r,details:o}}};function NP(e){Wn=e}if(LP){const e="__is_disposable_tracked__";NP(new class{trackDisposable(t){const i=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(i)},3e3)}setParent(t,i){if(t&&t!==Y.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==Y.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function ra(e){return Wn?.trackDisposable(e),e}function sa(e){Wn?.markAsDisposed(e)}function _n(e,t){Wn?.setParent(e,t)}function MP(e,t){if(Wn)for(const i of e)Wn.setParent(i,t)}function wm(e){return Wn?.markAsSingleton(e),e}function a5(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function or(e){if(Dt.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function bm(...e){const t=se(()=>or(e));return MP(e,t),t}var OP=class{constructor(e){this.a=!1,this.b=e,ra(this)}dispose(){if(!this.a){if(!this.b)throw new Error("Unbound disposable context: Need to use an arrow function to preserve the value of this");this.a=!0,sa(this),this.b()}}};function se(e){return new OP(e)}var ae=class ND{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,ra(this)}dispose(){this.g||(sa(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{or(this.f)}finally{this.f.clear()}}add(t){if(!t||t===Y.None)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return _n(t,this),this.g?ND.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.delete(t)&&_n(t,null)}assertNotDisposed(){this.g&&Bt(new qt("Object disposed"))}},Y=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.B=new ae,ra(this),_n(this.B,this)}dispose(){sa(this),this.B.dispose()}D(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.B.add(e)}},ms=class{constructor(){this.b=!1,ra(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&_n(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,sa(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&_n(e,null),e}},Xc=class{constructor(e=new Map){this.b=!1,this.a=e,ra(this)}dispose(){sa(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{or(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,i=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this.a.get(e)?.dispose(),this.a.set(e,t),_n(t,this)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return t&&_n(t,null),this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}},FP=class extends Xc{constructor(){super(new wt)}};function c5(e,t){return new UP(e,t)}var UP=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?Bt(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let i;switch(e){case"data":i=this.c.data;break;case"end":i=this.c.end;break;case"error":i=this.c.error;break}if(i){const r=i.indexOf(t);r>=0&&i.splice(r,1)}}j(){if(this.b.data.length===0)return;if(typeof this.e=="function"){const t=this.e(this.b.data);this.g(t)}else for(const t of this.b.data)this.g(t);this.b.data.length=0;const e=[...this.d];this.d.length=0,e.forEach(t=>t())}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function jP(e,t){const i=[];let r;for(;(r=e.read())!==null;)i.push(r);return t(i)}function l5(e,t){return new Promise((i,r)=>{const s=[];u5(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?r(n):i(void 0)},onEnd:()=>{i(t?t(s):void 0)}})})}function u5(e,t,i){e.on("error",r=>{i?.isCancellationRequested||t.onError(r)}),e.on("end",()=>{i?.isCancellationRequested||t.onEnd()}),e.on("data",r=>{i?.isCancellationRequested||t.onData(r)})}function HP(e,t){const i=c5(t);return i.end(e),i}var Yc=typeof Buffer<"u",WP=new It(()=>new Uint8Array(256)),ym,Sm,re=class mr{static alloc(t){return Yc?new mr(Buffer.allocUnsafe(t)):new mr(new Uint8Array(t))}static wrap(t){return Yc&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new mr(t)}static fromString(t,i){return!(i?.dontUseNodeBuffer||!1)&&Yc?new mr(Buffer.from(t)):(ym||(ym=new TextEncoder),new mr(ym.encode(t)))}static fromByteArray(t){const i=mr.alloc(t.length);for(let r=0,s=t.length;r<s;r++)i.buffer[r]=t[r];return i}static concat(t,i){if(typeof i>"u"){i=0;for(let n=0,o=t.length;n<o;n++)i+=t[n].byteLength}const r=mr.alloc(i);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];r.set(a,s),s+=a.byteLength}return r}static isNativeBuffer(t){return Yc&&Buffer.isBuffer(t)}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=mr.alloc(this.byteLength);return t.set(this),t}toString(){return Yc?this.buffer.toString():(Sm||(Sm=new TextDecoder(void 0,{ignoreBOM:!0})),Sm.decode(this.buffer))}slice(t,i){return new mr(this.buffer.subarray(t,i))}set(t,i){if(t instanceof mr)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return $h(this.buffer,t)}writeUInt32BE(t,i){Ih(this.buffer,t,i)}readUInt32LE(t){return zP(this.buffer,t)}writeUInt32LE(t,i){VP(this.buffer,t,i)}readUInt8(t){return GP(this.buffer,t)}writeUInt8(t,i){JP(this.buffer,t,i)}indexOf(t,i=0){return _P(this.buffer,t instanceof mr?t.buffer:t,i)}equals(t){return this===t?!0:this.byteLength!==t.byteLength?!1:this.buffer.every((i,r)=>i===t.buffer[r])}};function _P(e,t,i=0){const r=t.byteLength,s=e.byteLength;if(r===0)return 0;if(r===1)return e.indexOf(t[0]);if(r>s-i)return-1;const n=WP.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=i+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function BP(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function qP(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255}function $h(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Ih(e,t,i){e[i+3]=t,t=t>>>8,e[i+2]=t,t=t>>>8,e[i+1]=t,t=t>>>8,e[i]=t}function zP(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function VP(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255,t=t>>>8,e[i+2]=t&255,t=t>>>8,e[i+3]=t&255}function GP(e,t){return e[t]}function JP(e,t,i){e[i]=t}function QP(e){return jP(e,t=>re.concat(t))}function h5(e){return l5(e,t=>re.concat(t))}function ZP(e){return HP(e,t=>re.concat(t))}function Bn(e){let t=0,i=0,r=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(i){case 3:s[r++]=t|a,i=0;break;case 2:s[r++]=t|a>>>2,t=a<<6,i=3;break;case 1:s[r++]=t|a>>>4,t=a<<4,i=2;break;default:t=a<<2,i=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=r;for(;i>0;)n(0);return re.wrap(s).slice(0,o)}var XP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",YP="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function Kc({buffer:e},t=!0,i=!1){const r=i?YP:XP;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[(c<<2|l>>>6)&63],s+=r[l&63]}if(n===1){const a=e[o+0];s+=r[a>>>2],s+=r[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[c<<2&63],t&&(s+="=")}return s}var d5="0123456789abcdef";function Em({buffer:e}){let t="";for(let i=0;i<e.length;i++){const r=e[i];t+=d5[r>>>4],t+=d5[r&15]}return t}function KP(e){if(e.length%2!==0)throw new SyntaxError("Hex string must have an even length");const t=new Uint8Array(e.length>>1);for(let i=0;i<e.length;)t[i>>1]=f5(e,i++)<<4|f5(e,i++);return re.wrap(t)}function f5(e,t){const i=e.charCodeAt(t);if(i>=48&&i<=57)return i-48;if(i>=97&&i<=102)return i-87;if(i>=65&&i<=70)return i-55;throw new SyntaxError(`Invalid hex character at position ${t}`)}var xt=class qg{static{this.Undefined=new qg(void 0)}constructor(t){this.element=t,this.next=qg.Undefined,this.prev=qg.Undefined}},Gs=class{constructor(){this.a=xt.Undefined,this.b=xt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===xt.Undefined}clear(){let e=this.a;for(;e!==xt.Undefined;){const t=e.next;e.prev=xt.Undefined,e.next=xt.Undefined,e=t}this.a=xt.Undefined,this.b=xt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const i=new xt(e);if(this.a===xt.Undefined)this.a=i,this.b=i;else if(t){const s=this.b;this.b=i,i.prev=s,s.next=i}else{const s=this.a;this.a=i,i.next=s,s.prev=i}this.c+=1;let r=!1;return()=>{r||(r=!0,this.e(i))}}shift(){if(this.a!==xt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==xt.Undefined){const e=this.b.element;return this.e(this.b),e}}peek(){if(this.b!==xt.Undefined)return this.b.element}e(e){if(e.prev!==xt.Undefined&&e.next!==xt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===xt.Undefined&&e.next===xt.Undefined?(this.a=xt.Undefined,this.b=xt.Undefined):e.next===xt.Undefined?(this.b=this.b.prev,this.b.next=xt.Undefined):e.prev===xt.Undefined&&(this.a=this.a.next,this.a.prev=xt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==xt.Undefined;)yield e.element,e=e.next}},eA=globalThis.performance.now.bind(globalThis.performance),qn=class MD{static create(t){return new MD(t)}constructor(t){this.c=t===!1?Date.now:eA,this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},p5=!1,tA=!1,Ke;(function(e){e.None=()=>Y.None;function t(q){if(tA){const{onDidAddListener:W}=q,_=Cm.create();let J=0;q.onDidAddListener=()=>{++J===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),_.print()),W?.()}}}function i(q,W,_){return g(q,()=>{},0,void 0,W??!0,void 0,_)}e.defer=i;function r(q){return(W,_=null,J)=>{let X=!1,pe;return pe=q($e=>{if(!X)return pe?pe.dispose():X=!0,W.call(_,$e)},null,J),X&&pe.dispose(),pe}}e.once=r;function s(q,W){return e.once(e.filter(q,W))}e.onceIf=s;function n(q,W,_){return h((J,X=null,pe)=>q($e=>J.call(X,W($e)),null,pe),_)}e.map=n;function o(q,W,_){return h((J,X=null,pe)=>q($e=>{W($e),J.call(X,$e)},null,pe),_)}e.forEach=o;function a(q,W,_){return h((J,X=null,pe)=>q($e=>W($e)&&J.call(X,$e),null,pe),_)}e.filter=a;function c(q){return q}e.signal=c;function l(...q){return(W,_=null,J)=>{const X=bm(...q.map(pe=>pe($e=>W.call(_,$e))));return f(X,J)}}e.any=l;function u(q,W,_,J){let X=_;return n(q,pe=>(X=W(X,pe),X),J)}e.reduce=u;function h(q,W){let _;const J={onWillAddFirstListener(){_=q(X.fire,X)},onDidRemoveLastListener(){_?.dispose()}};W||t(J);const X=new P(J);return W?.add(X),X.event}function f(q,W){return W instanceof Array?W.push(q):W&&W.add(q),q}function g(q,W,_=100,J=!1,X=!1,pe,$e){let Ie,lt,At,Qe=0,Et;const ui={leakWarningThreshold:pe,onWillAddFirstListener(){Ie=q(ir=>{Qe++,lt=W(lt,ir),J&&!At&&(Wt.fire(lt),lt=void 0),Et=()=>{const _s=lt;lt=void 0,At=void 0,(!J||Qe>1)&&Wt.fire(_s),Qe=0},typeof _=="number"?(At&&clearTimeout(At),At=setTimeout(Et,_)):At===void 0&&(At=null,queueMicrotask(Et))})},onWillRemoveListener(){X&&Qe>0&&Et?.()},onDidRemoveLastListener(){Et=void 0,Ie.dispose()}};$e||t(ui);const Wt=new P(ui);return $e?.add(Wt),Wt.event}e.debounce=g;function m(q,W=0,_,J){return e.debounce(q,(X,pe)=>X?(X.push(pe),X):[pe],W,void 0,_??!0,void 0,J)}e.accumulate=m;function w(q,W=(J,X)=>J===X,_){let J=!0,X;return a(q,pe=>{const $e=J||!W(pe,X);return J=!1,X=pe,$e},_)}e.latch=w;function S(q,W,_){return[e.filter(q,W,_),e.filter(q,J=>!W(J),_)]}e.split=S;function C(q,W=!1,_=[],J){let X=_.slice(),pe=q(lt=>{X?X.push(lt):Ie.fire(lt)});J&&J.add(pe);const $e=()=>{X?.forEach(lt=>Ie.fire(lt)),X=null},Ie=new P({onWillAddFirstListener(){pe||(pe=q(lt=>Ie.fire(lt)),J&&J.add(pe))},onDidAddFirstListener(){X&&(W?setTimeout($e):$e())},onDidRemoveLastListener(){pe&&pe.dispose(),pe=null}});return J&&J.add(Ie),Ie.event}e.buffer=C;function k(q,W){return(J,X,pe)=>{const $e=W(new G);return q(function(Ie){const lt=$e.evaluate(Ie);lt!==A&&J.call(X,lt)},void 0,pe)}}e.chain=k;const A=Symbol("HaltChainable");class G{constructor(){this.f=[]}map(W){return this.f.push(W),this}forEach(W){return this.f.push(_=>(W(_),_)),this}filter(W){return this.f.push(_=>W(_)?_:A),this}reduce(W,_){let J=_;return this.f.push(X=>(J=W(J,X),J)),this}latch(W=(_,J)=>_===J){let _=!0,J;return this.f.push(X=>{const pe=_||!W(X,J);return _=!1,J=X,pe?X:A}),this}evaluate(W){for(const _ of this.f)if(W=_(W),W===A)break;return W}}function H(q,W,_=J=>J){const J=(...Ie)=>$e.fire(_(...Ie)),X=()=>q.on(W,J),pe=()=>q.removeListener(W,J),$e=new P({onWillAddFirstListener:X,onDidRemoveLastListener:pe});return $e.event}e.fromNodeEventEmitter=H;function K(q,W,_=J=>J){const J=(...Ie)=>$e.fire(_(...Ie)),X=()=>q.addEventListener(W,J),pe=()=>q.removeEventListener(W,J),$e=new P({onWillAddFirstListener:X,onDidRemoveLastListener:pe});return $e.event}e.fromDOMEventEmitter=K;function F(q,W){let _,J;const X=new Promise(pe=>{J=r(q)(pe),xm(J,W),_=()=>{v5(J,W)}});return X.cancel=_,W&&X.finally(()=>v5(J,W)),X}e.toPromise=F;function z(q,W){return q(_=>W.fire(_))}e.forward=z;function Z(q,W,_){return W(_),q(J=>W(J))}e.runAndSubscribe=Z;class Le{constructor(W,_){this._observable=W,this.f=0,this.g=!1;const J={onWillAddFirstListener:()=>{W.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{W.removeObserver(this)}};_||t(J),this.emitter=new P(J),_&&_.add(this.emitter)}beginUpdate(W){this.f++}handlePossibleChange(W){}handleChange(W,_){this.g=!0}endUpdate(W){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function it(q,W){return new Le(q,W).emitter.event}e.fromObservable=it;function Pe(q){return(W,_,J)=>{let X=0,pe=!1;const $e={beginUpdate(){X++},endUpdate(){X--,X===0&&(q.reportChanges(),pe&&(pe=!1,W.call(_)))},handlePossibleChange(){},handleChange(){pe=!0}};q.addObserver($e),q.reportChanges();const Ie={dispose(){q.removeObserver($e)}};return xm(Ie,J),Ie}}e.fromObservableLight=Pe})(Ke||(Ke={}));var iA=class m4{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${m4.f++}`,m4.all.add(this)}start(t){this.g=new qn,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},g5=-1,rA=class OD{static{this.f=1}constructor(t,i,r=(OD.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=i,this.name=r,this.h=0}dispose(){this.g?.clear()}check(t,i){const r=this.threshold;if(r<=0||i<r)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=r*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new sA(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,i=0;for(const[r,s]of this.g)(!t||i<s)&&(t=[r,s],i=s);return t}},Cm=class FD{static create(){const t=new Error;return new FD(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},sA=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},nA=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},oA=0,Dh=class{constructor(e){this.value=e,this.id=oA++}},aA=2,m5=(e,t)=>{if(e instanceof Dh)t(e);else for(let i=0;i<e.length;i++){const r=e[i];r&&t(r)}},P=class{constructor(e){this.A=0,this.g=e,this.j=g5>0||this.g?.leakWarningThreshold?new rA(e?.onListenerError??Bt,this.g?.leakWarningThreshold??g5):void 0,this.m=this.g?._profName?new iA(this.g._profName):void 0,this.z=this.g?.deliveryQueue}dispose(){if(!this.q){if(this.q=!0,this.z?.current===this&&this.z.reset(),this.w){if(p5){const e=this.w;queueMicrotask(()=>{m5(e,t=>t.stack?.print())})}this.w=void 0,this.A=0}this.g?.onDidRemoveLastListener?.(),this.j?.dispose()}}get event(){return this.u??=(e,t,i)=>{if(this.j&&this.A>this.j.threshold**2){const a=`[${this.j.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.A} vs ${this.j.threshold})`;console.warn(a);const c=this.j.getMostFrequentStack()??["UNKNOWN stack",-1],l=new nA(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.g?.onListenerError||Bt)(l),Y.None}if(this.q)return Y.None;t&&(e=e.bind(t));const r=new Dh(e);let s,n;this.j&&this.A>=Math.ceil(this.j.threshold*.2)&&(r.stack=Cm.create(),s=this.j.check(r.stack,this.A+1)),p5&&(r.stack=n??Cm.create()),this.w?this.w instanceof Dh?(this.z??=new cA,this.w=[this.w,r]):this.w.push(r):(this.g?.onWillAddFirstListener?.(this),this.w=r,this.g?.onDidAddFirstListener?.(this)),this.g?.onDidAddListener?.(this),this.A++;const o=se(()=>{s?.(),this.B(r)});return xm(o,i),o},this.u}B(e){if(this.g?.onWillRemoveListener?.(this),!this.w)return;if(this.A===1){this.w=void 0,this.g?.onDidRemoveLastListener?.(this),this.A=0;return}const t=this.w,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this.q),console.log("size?",this.A),console.log("arr?",JSON.stringify(this.w)),new Error("Attempted to dispose unknown listener");this.A--,t[i]=void 0;const r=this.z.current===this;if(this.A*aA<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:r&&s<this.z.end&&(this.z.end--,s<this.z.i&&this.z.i--);t.length=s}}C(e,t){if(!e)return;const i=this.g?.onListenerError||Bt;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}D(e){const t=e.current.w;for(;e.i<e.end;)this.C(t[e.i++],e.value);e.reset()}fire(e){if(this.z?.current&&(this.D(this.z),this.m?.stop()),this.m?.start(this.A),this.w)if(this.w instanceof Dh)this.C(this.w,e);else{const t=this.z;t.enqueue(this,e,this.w.length),this.D(t)}this.m?.stop()}hasListeners(){return this.A>0}},cA=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},el=class extends P{async fireAsync(e,t,i){if(this.w)for(this.f||(this.f=new Gs),m5(this.w,r=>this.f.push([r.value,e]));this.f.size>0&&!t.isCancellationRequested;){const[r,s]=this.f.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");i&&(a=i(a,r)),n.push(a)}};try{r(o)}catch(a){Bt(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&Bt(c.reason)})}}},Ph=class extends P{get isPaused(){return this.f!==0}constructor(e){super(e),this.f=0,this.h=new Gs,this.s=e?.merge}pause(){this.f++}resume(){if(this.f!==0&&--this.f===0)if(this.s){if(this.h.size>0){const e=Array.from(this.h);this.h.clear(),super.fire(this.s(e))}}else for(;!this.f&&this.h.size!==0;)super.fire(this.h.shift())}fire(e){this.A&&(this.f!==0?this.h.push(e):super.fire(e))}},lA=class extends Ph{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},uA=class extends P{constructor(e){super(e),this.f=[],this.h=e?.merge}fire(e){this.hasListeners()&&(this.f.push(e),this.f.length===1&&queueMicrotask(()=>{this.h?super.fire(this.h(this.f)):this.f.forEach(t=>super.fire(t)),this.f=[]}))}};function xm(e,t){t instanceof ae?t.add(e):Array.isArray(t)&&t.push(e)}function v5(e,t){if(t instanceof ae)t.delete(e);else if(Array.isArray(t)){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}e.dispose()}var tl;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(tl||(tl={}));var w5;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(w5||(w5={}));var b5;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(b5||(b5={}));function y5(e){const t=re.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function hA(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var S5;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(S5||(S5={}));function km(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function i(s,n){t.push(s,n?.startTime??Date.now())}function r(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:i,getMarks:r}}function dA(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?km():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=(performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart)??0);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return km(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),km()}function fA(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=dA()),e.MonacoPerformanceMarks}var E5=fA(globalThis),bi=E5.mark,pA=E5.getMarks;function gA(){return globalThis._VSCODE_NLS_MESSAGES}function C5(){return globalThis._VSCODE_NLS_LANGUAGE}var mA=C5()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Ah(e,t){let i;return t.length===0?i=e:i=e.replace(/\{(\d+)\}/g,(r,s)=>{const n=s[0],o=t[n];let a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),mA&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function d(e,t,...i){return Ah(typeof e=="number"?x5(e,t):t,i)}function x5(e,t){const i=gA()?.[e];if(typeof i!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}function Th(e,t,...i){let r;typeof e=="number"?r=x5(e,t):r=t;const s=Ah(r,i);return{value:s,original:t===r?s:Ah(t,i)}}var Js="en",il=!1,rl=!1,sl=!1,vA=!1,k5=!1,$m=!1,wA=!1,Im=!1,$5=!1,I5=!1,Rh=void 0,Lh=Js,D5=Js,bA=void 0,vs=void 0,ws=globalThis,Li=void 0;typeof ws.vscode<"u"&&typeof ws.vscode.process<"u"?Li=ws.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Li=process);var P5=typeof Li?.versions?.electron=="string",yA=P5&&Li?.type==="renderer";if(typeof Li=="object"){il=Li.platform==="win32",rl=Li.platform==="darwin",sl=Li.platform==="linux",vA=sl&&!!Li.env.SNAP&&!!Li.env.SNAP_REVISION,wA=P5,$5=!!Li.env.CI||!!Li.env.BUILD_ARTIFACTSTAGINGDIRECTORY||!!Li.env.GITHUB_WORKSPACE,Rh=Js,Lh=Js;const e=Li.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Rh=t.userLocale,D5=t.osLocale,Lh=t.resolvedLanguage||Js,bA=t.languagePack?.translationsConfigFile}catch{}k5=!0}else typeof navigator=="object"&&!yA?(vs=navigator.userAgent,il=vs.indexOf("Windows")>=0,rl=vs.indexOf("Macintosh")>=0,Im=(vs.indexOf("Macintosh")>=0||vs.indexOf("iPad")>=0||vs.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,sl=vs.indexOf("Linux")>=0,I5=vs?.indexOf("Mobi")>=0,$m=!0,Lh=C5()||Js,Rh=navigator.language.toLowerCase(),D5=Rh):console.error("Unable to resolve platform.");var A5;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(A5||(A5={}));function SA(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var Dm=0;rl?Dm=1:il?Dm=3:sl&&(Dm=2);var ai=il,yi=rl,Qs=sl,T5=k5,zn=$m,EA=$m&&typeof ws.importScripts=="function",CA=EA?ws.origin:void 0,xA=Im,kA=I5,Vn=$5,zr=vs,Zs=Lh,R5;(function(e){function t(){return Zs}e.value=t;function i(){return Zs.length===2?Zs==="en":Zs.length>=3?Zs[0]==="e"&&Zs[1]==="n"&&Zs[2]==="-":!1}e.isDefaultVariant=i;function r(){return Zs==="en"}e.isDefault=r})(R5||(R5={}));var $A=typeof ws.postMessage=="function"&&!ws.importScripts,L5=(()=>{if($A){const e=[];ws.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n.id===i.data.vscodeScheduleAsyncWork){e.splice(r,1),n.callback();return}}});let t=0;return i=>{const r=++t;e.push({id:r,callback:i}),ws.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})(),N5;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(N5||(N5={}));var nl=rl||Im?2:il?1:3,M5=!0,O5=!1;function F5(){if(!O5){O5=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,M5=new Uint16Array(e.buffer)[0]===513}return M5}var Pm=!!(zr&&zr.indexOf("Chrome")>=0),IA=!!(zr&&zr.indexOf("Firefox")>=0),DA=!!(!Pm&&zr&&zr.indexOf("Safari")>=0),U5=!!(zr&&zr.indexOf("Edg/")>=0),jq=!!(zr&&zr.indexOf("Android")>=0),Gn,Am=globalThis.vscode;if(typeof Am<"u"&&typeof Am.process<"u"){const e=Am.process;Gn={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Gn={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Gn={get platform(){return ai?"win32":yi?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var na=Gn.cwd,oa=Gn.env,PA=Gn.platform,Hq=Gn.arch,AA=65,TA=97,RA=90,LA=122,Jn=46,Kt=47,Ni=92,bs=58,NA=63,j5=class extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${r} of type ${t}`;n+=`. Received type ${typeof i}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function MA(e,t){if(e===null||typeof e!="object")throw new j5(t,"Object",e)}function Rt(e,t){if(typeof e!="string")throw new j5(t,"string",e)}var Mi=PA==="win32";function Te(e){return e===Kt||e===Ni}function Tm(e){return e===Kt}function ys(e){return e>=AA&&e<=RA||e>=TA&&e<=LA}function Nh(e,t,i,r){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(r(c))break;c=Kt}if(r(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==Jn||s.charCodeAt(s.length-2)!==Jn){if(s.length>2){const u=s.lastIndexOf(i);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(i)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${i}..`:"..",n=2)}else s.length>0?s+=`${i}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===Jn&&a!==-1?++a:a=-1}return s}function OA(e){return e?`${e[0]==="."?"":"."}${e}`:""}function H5(e,t){MA(t,"pathObject");const i=t.dir||t.root,r=t.base||`${t.name||""}${OA(t.ext)}`;return i?i===t.root?`${i}${r}`:`${i}${e}${r}`:r}var Lt={resolve(...e){let t="",i="",r=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],Rt(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=na():(n=oa[`=${t}`]||na(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===Ni)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Te(u)&&(a=1,l=!0);else if(Te(u))if(l=!0,Te(n.charCodeAt(1))){let h=2,f=h;for(;h<o&&!Te(n.charCodeAt(h));)h++;if(h<o&&h!==f){const g=n.slice(f,h);for(f=h;h<o&&Te(n.charCodeAt(h));)h++;if(h<o&&h!==f){for(f=h;h<o&&!Te(n.charCodeAt(h));)h++;(h===o||h!==f)&&(c=`\\\\${g}\\${n.slice(f,h)}`,a=h)}}}else a=1;else ys(u)&&n.charCodeAt(1)===bs&&(c=n.slice(0,2),a=2,o>2&&Te(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(i=`${n.slice(a)}\\${i}`,r=l,l&&t.length>0)break}return i=Nh(i,!r,"\\",Te),r?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){Rt(e,"path");const t=e.length;if(t===0)return".";let i=0,r,s=!1;const n=e.charCodeAt(0);if(t===1)return Tm(n)?"\\":e;if(Te(n))if(s=!0,Te(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Te(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Te(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Te(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(r=`\\\\${l}\\${e.slice(c,a)}`,i=a)}}}else i=1;else ys(n)&&e.charCodeAt(1)===bs&&(r=e.slice(0,2),i=2,t>2&&Te(e.charCodeAt(2))&&(s=!0,i=3));let o=i<t?Nh(e.slice(i),!s,"\\",Te):"";if(o.length===0&&!s&&(o="."),o.length>0&&Te(e.charCodeAt(t-1))&&(o+="\\"),!s&&r===void 0&&e.includes(":")){if(o.length>=2&&ys(o.charCodeAt(0))&&o.charCodeAt(1)===bs)return`.\\${o}`;let a=e.indexOf(":");do if(a===t-1||Te(e.charCodeAt(a+1)))return`.\\${o}`;while((a=e.indexOf(":",a+1))!==-1)}return r===void 0?s?`\\${o}`:o:s?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){Rt(e,"path");const t=e.length;if(t===0)return!1;const i=e.charCodeAt(0);return Te(i)||t>2&&ys(i)&&e.charCodeAt(1)===bs&&Te(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,i;for(let n=0;n<e.length;++n){const o=e[n];Rt(o,"path"),o.length>0&&(t===void 0?t=i=o:t+=`\\${o}`)}if(t===void 0)return".";let r=!0,s=0;if(typeof i=="string"&&Te(i.charCodeAt(0))){++s;const n=i.length;n>1&&Te(i.charCodeAt(1))&&(++s,n>2&&(Te(i.charCodeAt(2))?++s:r=!1))}if(r){for(;s<t.length&&Te(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return Lt.normalize(t)},relative(e,t){if(Rt(e,"from"),Rt(t,"to"),e===t)return"";const i=Lt.resolve(e),r=Lt.resolve(t);if(i===r||(e=i.toLowerCase(),t=r.toLowerCase(),e===t))return"";if(i.length!==e.length||r.length!==t.length){const m=i.split("\\"),w=r.split("\\");m[m.length-1]===""&&m.pop(),w[w.length-1]===""&&w.pop();const S=m.length,C=w.length,k=S<C?S:C;let A;for(A=0;A<k&&m[A].toLowerCase()===w[A].toLowerCase();A++);return A===0?r:A===k?C>k?w.slice(A).join("\\"):S>k?"..\\".repeat(S-1-A)+"..":"":"..\\".repeat(S-A)+w.slice(A).join("\\")}let s=0;for(;s<e.length&&e.charCodeAt(s)===Ni;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===Ni;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===Ni;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===Ni;)c--;const l=c-a,u=o<l?o:l;let h=-1,f=0;for(;f<u;f++){const m=e.charCodeAt(s+f);if(m!==t.charCodeAt(a+f))break;m===Ni&&(h=f)}if(f!==u){if(h===-1)return r}else{if(l>u){if(t.charCodeAt(a+f)===Ni)return r.slice(a+f+1);if(f===2)return r.slice(a+f)}o>u&&(e.charCodeAt(s+f)===Ni?h=f:f===2&&(h=3)),h===-1&&(h=0)}let g="";for(f=s+h+1;f<=n;++f)(f===n||e.charCodeAt(f)===Ni)&&(g+=g.length===0?"..":"\\..");return a+=h,g.length>0?`${g}${r.slice(a,c)}`:(r.charCodeAt(a)===Ni&&++a,r.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Lt.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Ni){if(t.charCodeAt(1)===Ni){const i=t.charCodeAt(2);if(i!==NA&&i!==Jn)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(ys(t.charCodeAt(0))&&t.charCodeAt(1)===bs&&t.charCodeAt(2)===Ni)return`\\\\?\\${t}`;return t},dirname(e){Rt(e,"path");const t=e.length;if(t===0)return".";let i=-1,r=0;const s=e.charCodeAt(0);if(t===1)return Te(s)?e:".";if(Te(s)){if(i=r=1,Te(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Te(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Te(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Te(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(i=r=a+1)}}}}else ys(s)&&e.charCodeAt(1)===bs&&(i=t>2&&Te(e.charCodeAt(2))?3:2,r=i);let n=-1,o=!0;for(let a=t-1;a>=r;--a)if(Te(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(i===-1)return".";n=i}return e.slice(0,n)},basename(e,t){t!==void 0&&Rt(t,"suffix"),Rt(e,"path");let i=0,r=-1,s=!0,n;if(e.length>=2&&ys(e.charCodeAt(0))&&e.charCodeAt(1)===bs&&(i=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const c=e.charCodeAt(n);if(Te(c)){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=i;--n)if(Te(e.charCodeAt(n))){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){Rt(e,"path");let t=0,i=-1,r=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===bs&&ys(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Te(c)){if(!n){r=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===Jn?i===-1?i=a:o!==1&&(o=1):i!==-1&&(o=-1)}return i===-1||s===-1||o===0||o===1&&i===s-1&&i===r+1?"":e.slice(i,s)},format:H5.bind(null,"\\"),parse(e){Rt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.length;let r=0,s=e.charCodeAt(0);if(i===1)return Te(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Te(s)){if(r=1,Te(e.charCodeAt(1))){let h=2,f=h;for(;h<i&&!Te(e.charCodeAt(h));)h++;if(h<i&&h!==f){for(f=h;h<i&&Te(e.charCodeAt(h));)h++;if(h<i&&h!==f){for(f=h;h<i&&!Te(e.charCodeAt(h));)h++;h===i?r=h:h!==f&&(r=h+1)}}}}else if(ys(s)&&e.charCodeAt(1)===bs){if(i<=2)return t.root=t.dir=e,t;if(r=2,Te(e.charCodeAt(2))){if(i===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let n=-1,o=r,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(s=e.charCodeAt(l),Te(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===Jn?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},FA=(()=>{if(Mi){const e=/\\/g;return()=>{const t=na().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>na()})(),We={resolve(...e){let t="",i=!1;for(let r=e.length-1;r>=0&&!i;r--){const s=e[r];Rt(s,`paths[${r}]`),s.length!==0&&(t=`${s}/${t}`,i=s.charCodeAt(0)===Kt)}if(!i){const r=FA();t=`${r}/${t}`,i=r.charCodeAt(0)===Kt}return t=Nh(t,!i,"/",Tm),i?`/${t}`:t.length>0?t:"."},normalize(e){if(Rt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Kt,i=e.charCodeAt(e.length-1)===Kt;return e=Nh(e,!t,"/",Tm),e.length===0?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Rt(e,"path"),e.length>0&&e.charCodeAt(0)===Kt},join(...e){if(e.length===0)return".";const t=[];for(let i=0;i<e.length;++i){const r=e[i];Rt(r,"path"),r.length>0&&t.push(r)}return t.length===0?".":We.normalize(t.join("/"))},relative(e,t){if(Rt(e,"from"),Rt(t,"to"),e===t||(e=We.resolve(e),t=We.resolve(t),e===t))return"";const i=1,r=e.length,s=r-i,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(i+l);if(h!==t.charCodeAt(n+l))break;h===Kt&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===Kt)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(i+l)===Kt?c=l:l===0&&(c=0));let u="";for(l=i+c+1;l<=r;++l)(l===r||e.charCodeAt(l)===Kt)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Rt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Kt;let i=-1,r=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===Kt){if(!r){i=s;break}}else r=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename(e,t){t!==void 0&&Rt(t,"suffix"),Rt(e,"path");let i=0,r=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===Kt){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===Kt){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){Rt(e,"path");let t=-1,i=0,r=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e[o];if(a==="/"){if(!s){i=o+1;break}continue}r===-1&&(s=!1,r=o+1),a==="."?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||r===-1||n===0||n===1&&t===r-1&&t===i+1?"":e.slice(t,r)},format:H5.bind(null,"/"),parse(e){Rt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.charCodeAt(0)===Kt;let r;i?(t.root="/",r=1):r=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=r;--c){const u=e.charCodeAt(c);if(u===Kt){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===Jn?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&i?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};We.win32=Lt.win32=Lt,We.posix=Lt.posix=We;var aa=Mi?Lt.normalize:We.normalize,Mh=Mi?Lt.isAbsolute:We.isAbsolute,Rm=Mi?Lt.join:We.join,UA=Mi?Lt.resolve:We.resolve,ol=Mi?Lt.relative:We.relative,Qn=Mi?Lt.dirname:We.dirname,Si=Mi?Lt.basename:We.basename,Oh=Mi?Lt.extname:We.extname,Wq=Mi?Lt.format:We.format,_q=Mi?Lt.parse:We.parse,Bq=Mi?Lt.toNamespacedPath:We.toNamespacedPath,ar=Mi?Lt.sep:We.sep,qq=Mi?Lt.delimiter:We.delimiter,jA=/^\w[\w\d+.-]*$/,HA=/^\//,WA=/^\/\//;function _A(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!jA.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!HA.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(WA.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function BA(e,t){return!e&&!t?"file":e}function qA(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==Sr&&(t=Sr+t):t=Sr;break}return t}var ft="",Sr="/",zA=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,y=class zg{static isUri(t){return t instanceof zg?!0:!t||typeof t!="object"?!1:typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function"}constructor(t,i,r,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ft,this.authority=t.authority||ft,this.path=t.path||ft,this.query=t.query||ft,this.fragment=t.fragment||ft):(this.scheme=BA(t,o),this.authority=i||ft,this.path=qA(this.scheme,r||ft),this.query=s||ft,this.fragment=n||ft,_A(this,o))}get fsPath(){return Uh(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:r,path:s,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=ft),r===void 0?r=this.authority:r===null&&(r=ft),s===void 0?s=this.path:s===null&&(s=ft),n===void 0?n=this.query:n===null&&(n=ft),o===void 0?o=this.fragment:o===null&&(o=ft),i===this.scheme&&r===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new ca(i,r,s,n,o)}static parse(t,i=!1){const r=zA.exec(t);return r?new ca(r[2]||ft,jh(r[4]||ft),jh(r[5]||ft),jh(r[7]||ft),jh(r[9]||ft),i):new ca(ft,ft,ft,ft,ft)}static file(t){let i=ft;if(ai&&(t=t.replace(/\\/g,Sr)),t[0]===Sr&&t[1]===Sr){const r=t.indexOf(Sr,2);r===-1?(i=t.substring(2),t=Sr):(i=t.substring(2,r),t=t.substring(r)||Sr)}return new ca("file",i,t,ft,ft)}static from(t,i){return new ca(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(t,...i){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return ai&&t.scheme==="file"?r=zg.file(Lt.join(Uh(t,!0),...i)).path:r=We.join(t.path,...i),t.with({path:r})}toString(t=!1){return Lm(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof zg)return t;{const i=new ca(t);return i._formatted=t.external??null,i._fsPath=t._sep===W5?t.fsPath??null:null,i}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function Fh(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var W5=ai?1:void 0,ca=class extends y{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Uh(this,!1)),this._fsPath}toString(e=!1){return e?Lm(this,!0):(this._formatted||(this._formatted=Lm(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=W5),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},_5={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function B5(e,t,i){let r,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||i&&o===91||i&&o===93||i&&o===58)s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r!==void 0&&(r+=e.charAt(n));else{r===void 0&&(r=e.substr(0,n));const a=_5[o];a!==void 0?(s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r+=a):s===-1&&(s=n)}}return s!==-1&&(r+=encodeURIComponent(e.substring(s))),r!==void 0?r:e}function VA(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r===35||r===63?(t===void 0&&(t=e.substr(0,i)),t+=_5[r]):t!==void 0&&(t+=e[i])}return t!==void 0?t:e}function Uh(e,t){let i;return e.authority&&e.path.length>1&&e.scheme==="file"?i=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?i=e.path.substr(1):i=e.path[1].toLowerCase()+e.path.substr(2):i=e.path,ai&&(i=i.replace(/\//g,"\\")),i}function Lm(e,t){const i=t?VA:B5;let r="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(r+=s,r+=":"),(n||s==="file")&&(r+=Sr,r+=Sr),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?r+=i(u,!1,!1):(r+=i(u.substr(0,l),!1,!1),r+=":",r+=i(u.substr(l+1),!1,!0)),r+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?r+=i(n,!1,!0):(r+=i(n.substr(0,l),!1,!0),r+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}r+=i(o,!0,!1)}return a&&(r+="?",r+=i(a,!1,!1)),c&&(r+="#",r+=t?c:B5(c,!1,!1)),r}function q5(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+q5(e.substr(3)):e}}var z5=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function jh(e){return e.match(z5)?e.replace(z5,t=>q5(t)):e}var V5=class UD{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++UD.count}},G5=[];function L(e){const t=new V5(e);return G5[t.nid]=t,t}function Hh(e){return G5[e].sid}var ei=class{constructor(e){this.value=e}},J5;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(J5||(J5={}));var Q5;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(Q5||(Q5={}));var Z5;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(Z5||(Z5={}));var X5;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(X5||(X5={}));var Y5;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(Y5||(Y5={}));var K5;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(K5||(K5={}));var e6;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(e6||(e6={}));var Nm;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(Nm||(Nm={}));var zq=class jD{static{this.a=0}static mixin(t){return t._id=jD.a++,t}},t6;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(t6||(t6={}));var i6;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(i6||(i6={}));var r6;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(r6||(r6={}));var V={MainThreadAuthentication:L("MainThreadAuthentication"),MainThreadBulkEdits:L("MainThreadBulkEdits"),MainThreadLanguageModels:L("MainThreadLanguageModels"),MainThreadEmbeddings:L("MainThreadEmbeddings"),MainThreadChatAgents2:L("MainThreadChatAgents2"),MainThreadCodeMapper:L("MainThreadCodeMapper"),MainThreadLanguageModelTools:L("MainThreadChatSkills"),MainThreadClipboard:L("MainThreadClipboard"),MainThreadCommands:L("MainThreadCommands"),MainThreadComments:L("MainThreadComments"),MainThreadConfiguration:L("MainThreadConfiguration"),MainThreadConsole:L("MainThreadConsole"),MainThreadDebugService:L("MainThreadDebugService"),MainThreadDecorations:L("MainThreadDecorations"),MainThreadDiagnostics:L("MainThreadDiagnostics"),MainThreadDialogs:L("MainThreadDiaglogs"),MainThreadDocuments:L("MainThreadDocuments"),MainThreadDocumentContentProviders:L("MainThreadDocumentContentProviders"),MainThreadTextEditors:L("MainThreadTextEditors"),MainThreadEditorInsets:L("MainThreadEditorInsets"),MainThreadEditorTabs:L("MainThreadEditorTabs"),MainThreadErrors:L("MainThreadErrors"),MainThreadTreeViews:L("MainThreadTreeViews"),MainThreadDownloadService:L("MainThreadDownloadService"),MainThreadLanguageFeatures:L("MainThreadLanguageFeatures"),MainThreadLanguages:L("MainThreadLanguages"),MainThreadLogger:L("MainThreadLogger"),MainThreadMessageService:L("MainThreadMessageService"),MainThreadOutputService:L("MainThreadOutputService"),MainThreadProgress:L("MainThreadProgress"),MainThreadQuickDiff:L("MainThreadQuickDiff"),MainThreadQuickOpen:L("MainThreadQuickOpen"),MainThreadStatusBar:L("MainThreadStatusBar"),MainThreadSecretState:L("MainThreadSecretState"),MainThreadStorage:L("MainThreadStorage"),MainThreadSpeech:L("MainThreadSpeechProvider"),MainThreadTelemetry:L("MainThreadTelemetry"),MainThreadTerminalService:L("MainThreadTerminalService"),MainThreadTerminalShellIntegration:L("MainThreadTerminalShellIntegration"),MainThreadWebviews:L("MainThreadWebviews"),MainThreadWebviewPanels:L("MainThreadWebviewPanels"),MainThreadWebviewViews:L("MainThreadWebviewViews"),MainThreadCustomEditors:L("MainThreadCustomEditors"),MainThreadUrls:L("MainThreadUrls"),MainThreadUriOpeners:L("MainThreadUriOpeners"),MainThreadProfileContentHandlers:L("MainThreadProfileContentHandlers"),MainThreadWorkspace:L("MainThreadWorkspace"),MainThreadFileSystem:L("MainThreadFileSystem"),MainThreadFileSystemEventService:L("MainThreadFileSystemEventService"),MainThreadExtensionService:L("MainThreadExtensionService"),MainThreadSCM:L("MainThreadSCM"),MainThreadSearch:L("MainThreadSearch"),MainThreadShare:L("MainThreadShare"),MainThreadTask:L("MainThreadTask"),MainThreadWindow:L("MainThreadWindow"),MainThreadLabelService:L("MainThreadLabelService"),MainThreadNotebook:L("MainThreadNotebook"),MainThreadNotebookDocuments:L("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:L("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:L("MainThreadNotebookKernels"),MainThreadNotebookRenderers:L("MainThreadNotebookRenderers"),MainThreadInteractive:L("MainThreadInteractive"),MainThreadTheming:L("MainThreadTheming"),MainThreadTunnelService:L("MainThreadTunnelService"),MainThreadManagedSockets:L("MainThreadManagedSockets"),MainThreadTimeline:L("MainThreadTimeline"),MainThreadTesting:L("MainThreadTesting"),MainThreadLocalization:L("MainThreadLocalizationShape"),MainThreadMcp:L("MainThreadMcpShape"),MainThreadAiRelatedInformation:L("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:L("MainThreadAiEmbeddingVector"),MainThreadChatStatus:L("MainThreadChatStatus"),MainThreadAiSettingsSearch:L("MainThreadAiSettingsSearch"),MainThreadDataChannels:L("MainThreadDataChannels"),MainThreadChatSessions:L("MainThreadChatSessions"),MainThreadChatOutputRenderer:L("MainThreadChatOutputRenderer"),MainThreadChatContext:L("MainThreadChatContext")},te={ExtHostCodeMapper:L("ExtHostCodeMapper"),ExtHostCommands:L("ExtHostCommands"),ExtHostConfiguration:L("ExtHostConfiguration"),ExtHostDiagnostics:L("ExtHostDiagnostics"),ExtHostDebugService:L("ExtHostDebugService"),ExtHostDecorations:L("ExtHostDecorations"),ExtHostDocumentsAndEditors:L("ExtHostDocumentsAndEditors"),ExtHostDocuments:L("ExtHostDocuments"),ExtHostDocumentContentProviders:L("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:L("ExtHostDocumentSaveParticipant"),ExtHostEditors:L("ExtHostEditors"),ExtHostTreeViews:L("ExtHostTreeViews"),ExtHostFileSystem:L("ExtHostFileSystem"),ExtHostFileSystemInfo:L("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:L("ExtHostFileSystemEventService"),ExtHostLanguages:L("ExtHostLanguages"),ExtHostLanguageFeatures:L("ExtHostLanguageFeatures"),ExtHostQuickOpen:L("ExtHostQuickOpen"),ExtHostQuickDiff:L("ExtHostQuickDiff"),ExtHostStatusBar:L("ExtHostStatusBar"),ExtHostShare:L("ExtHostShare"),ExtHostExtensionService:L("ExtHostExtensionService"),ExtHostLogLevelServiceShape:L("ExtHostLogLevelServiceShape"),ExtHostTerminalService:L("ExtHostTerminalService"),ExtHostTerminalShellIntegration:L("ExtHostTerminalShellIntegration"),ExtHostSCM:L("ExtHostSCM"),ExtHostSearch:L("ExtHostSearch"),ExtHostTask:L("ExtHostTask"),ExtHostWorkspace:L("ExtHostWorkspace"),ExtHostWindow:L("ExtHostWindow"),ExtHostWebviews:L("ExtHostWebviews"),ExtHostWebviewPanels:L("ExtHostWebviewPanels"),ExtHostCustomEditors:L("ExtHostCustomEditors"),ExtHostWebviewViews:L("ExtHostWebviewViews"),ExtHostEditorInsets:L("ExtHostEditorInsets"),ExtHostEditorTabs:L("ExtHostEditorTabs"),ExtHostProgress:L("ExtHostProgress"),ExtHostComments:L("ExtHostComments"),ExtHostSecretState:L("ExtHostSecretState"),ExtHostStorage:L("ExtHostStorage"),ExtHostUrls:L("ExtHostUrls"),ExtHostUriOpeners:L("ExtHostUriOpeners"),ExtHostChatOutputRenderer:L("ExtHostChatOutputRenderer"),ExtHostProfileContentHandlers:L("ExtHostProfileContentHandlers"),ExtHostOutputService:L("ExtHostOutputService"),ExtHostLabelService:L("ExtHostLabelService"),ExtHostNotebook:L("ExtHostNotebook"),ExtHostNotebookDocuments:L("ExtHostNotebookDocuments"),ExtHostNotebookEditors:L("ExtHostNotebookEditors"),ExtHostNotebookKernels:L("ExtHostNotebookKernels"),ExtHostNotebookRenderers:L("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:L("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:L("ExtHostInteractive"),ExtHostChatAgents2:L("ExtHostChatAgents"),ExtHostLanguageModelTools:L("ExtHostChatSkills"),ExtHostChatProvider:L("ExtHostChatProvider"),ExtHostChatContext:L("ExtHostChatContext"),ExtHostSpeech:L("ExtHostSpeech"),ExtHostEmbeddings:L("ExtHostEmbeddings"),ExtHostAiRelatedInformation:L("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:L("ExtHostAiEmbeddingVector"),ExtHostAiSettingsSearch:L("ExtHostAiSettingsSearch"),ExtHostTheming:L("ExtHostTheming"),ExtHostTunnelService:L("ExtHostTunnelService"),ExtHostManagedSockets:L("ExtHostManagedSockets"),ExtHostAuthentication:L("ExtHostAuthentication"),ExtHostTimeline:L("ExtHostTimeline"),ExtHostTesting:L("ExtHostTesting"),ExtHostTelemetry:L("ExtHostTelemetry"),ExtHostLocalization:L("ExtHostLocalization"),ExtHostMcp:L("ExtHostMcp"),ExtHostDataChannels:L("ExtHostDataChannels"),ExtHostChatSessions:L("ExtHostChatSessions")},s6=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),Be;(function(e){function t(i){return i===e.None||i===e.Cancelled||i instanceof Wh?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Ke.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:s6})})(Be||(Be={}));var Wh=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?s6:(this.b||(this.b=new P),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},rt=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new Wh),this.f}cancel(){this.f?this.f instanceof Wh&&this.f.cancel():this.f=Be.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof Wh&&this.f.dispose():this.f=Be.None}};function GA(e){return e}var JA=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=GA):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}};function al(e){return!e||typeof e!="string"?!0:e.trim().length===0}var QA=/{([^}]+)}/g;function n6(e,t){return Object.keys(t).length===0?e:e.replace(QA,(i,r)=>t[r]??i)}function Zn(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function ZA(e,t){let i=0,r=e.indexOf(t);for(;r!==-1;)i++,r=e.indexOf(t,r+t.length);return i}function XA(e,t){if(!e||!t)return e;const i=t.length;let r=0;if(i===1){const s=t.charCodeAt(0);for(;r<e.length&&e.charCodeAt(r)===s;)r++}else for(;e.startsWith(t,r);)r+=i;return e.substring(r)}function Mm(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(i===1){let n=r;const o=t.charCodeAt(0);for(;n>0&&e.charCodeAt(n-1)===o;)n--;return e.substring(0,n)}let s=r;for(;s>0&&e.endsWith(t,s);)s-=i;return e.substring(0,s)}function YA(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=Zn(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(e,r)}function o6(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function a6(e){return e.split(/\r\n|\r|\n/)}function Om(e){for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}return-1}function KA(e,t=e.length-1){for(let i=t;i>=0;i--){const r=e.charCodeAt(i);if(r!==32&&r!==9)return i}return-1}function Xn(e,t){return e<t?-1:e>t?1:0}function Fm(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){const c=e.charCodeAt(i),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function Um(e,t){return la(e,t,0,e.length,0,t.length)}function la(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){let c=e.charCodeAt(i),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return Fm(e.toLowerCase(),t.toLowerCase(),i,r,s,n);c6(c)&&(c-=32),c6(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function c6(e){return e>=97&&e<=122}function Ss(e,t){return e.length===t.length&&la(e,t)===0}function jm(e,t){const i=t.length;return i<=e.length&&la(e,t,0,i)===0}function eT(e,t){const i=e.length,r=i-t.length;return r>=0&&la(e,t,r,i)===0}function tT(e,t){const i=Math.min(e.length,t.length);let r;for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function _h(e){return 55296<=e&&e<=56319}function Bh(e){return 56320<=e&&e<=57343}function Hm(e,t){return(e-55296<<10)+(t-56320)+65536}function l6(e,t,i){const r=e.charCodeAt(i);if(_h(r)&&i+1<t){const s=e.charCodeAt(i+1);if(Bh(s))return Hm(r,s)}return r}function iT(e,t){const i=e.charCodeAt(t-1);if(Bh(i)&&t>1){const r=e.charCodeAt(t-2);if(_h(r))return Hm(r,i)}return i}var rT=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=iT(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=l6(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},sT=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new rT(e,t)}nextGraphemeLength(){const e=m6.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(p6(r,n)){t.setOffset(s);break}r=n}return t.offset-i}prevGraphemeLength(){const e=m6.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(p6(n,r)){t.setOffset(s);break}r=n}return i-t.offset}eol(){return this.c.eol()}};function u6(e,t){return new sT(e,t).nextGraphemeLength()}var Wm=void 0;function nT(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function h6(e){return Wm||(Wm=nT()),Wm.test(e)}var oT=/^[\t\n\r\x20-\x7E]*$/;function aT(e){return oT.test(e)}var cT=/[\u2028\u2029]/;function d6(e){return cT.test(e)}var lT=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,uT=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,hT=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,Vq=new RegExp("(?:"+[lT.source,uT.source,hT.source].join("|")+")","g"),dT="\uFEFF";function fT(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function f6(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function pT(e,t=1){if(t===0)return"";let i=-1;do i=e.indexOf(`
`,i+1),t--;while(t>0&&i>=0);return i===-1?e:(e[i-1]==="\r"&&i--,e.substr(0,i))}function p6(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var g6;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(g6||(g6={}));var m6=class ph{static{this.c=null}static getInstance(){return ph.c||(ph.c=new ph),ph.c}constructor(){this.d=gT()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const i=this.d,r=i.length/3;let s=1;for(;s<=r;)if(t<i[3*s])s=2*s;else if(t>i[3*s+1])s=2*s+1;else return i[3*s+2];return 0}};function gT(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var v6;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap",e[e.space=32]="space"})(v6||(v6={}));var Gq=class gh{static{this.c=new It(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.d=new JA(t=>{const i=t.split(",");function r(h){const f=new Map;for(let g=0;g<h.length;g+=2)f.set(h[g],h[g+1]);return f}function s(h,f){const g=new Map(h);for(const[m,w]of f)g.set(m,w);return g}function n(h,f){if(!h)return f;const g=new Map;for(const[m,w]of h)f.has(m)&&g.set(m,w);return g}const o=this.c.value;let a=i.filter(h=>!h.startsWith("_")&&Object.hasOwn(o,h));a.length===0&&(a=["_default"]);let c;for(const h of a){const f=r(o[h]);c=n(c,f)}const l=r(o._common),u=s(l,c);return new gh(u)})}static getInstance(t){return gh.d.get(Array.from(t).join(","))}static{this.e=new It(()=>Object.keys(gh.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return gh.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},Jq=class mh{static c(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this.d=void 0}static e(){return this.d||(this.d=new Set([...Object.values(mh.c())].flat())),this.d}static isInvisibleCharacter(t){return mh.e().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&(mh.isInvisibleCharacter(r)||r===32))return!0}return!1}static get codePoints(){return mh.e()}};function Xs(e){return e===47||e===92}function w6(e){return e.replace(/[\\/]/g,We.sep)}function mT(e){return e.indexOf("/")===-1&&(e=w6(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function b6(e,t=We.sep){if(!e)return"";const i=e.length,r=e.charCodeAt(0);if(Xs(r)){if(Xs(e.charCodeAt(1))&&!Xs(e.charCodeAt(2))){let n=3;const o=n;for(;n<i&&!Xs(e.charCodeAt(n));n++);if(o!==n&&!Xs(e.charCodeAt(n+1))){for(n+=1;n<i;n++)if(Xs(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(y6(r)&&e.charCodeAt(1)===58)return Xs(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<i;s++)if(Xs(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var vT=/[\\/:\*\?"<>\|]/g,wT=/[/]/g,bT=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function yT(e,t=ai){const i=t?vT:wT;return!(!e||e.length===0||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e))||t&&bT.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function qh(e,t,i,r=ar){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!jm(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===r&&n--,e.charAt(n)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function y6(e){return e>=65&&e<=90||e>=97&&e<=122}function ST(e,t=ai){return t?y6(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}var B;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatEditor="vscode-chat-editor",e.vscodeChatInput="chatSessionInput",e.vscodeLocalChatSession="vscode-chat-session",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view",e.chatEditingSnapshotScheme="chat-editing-snapshot-text-model",e.chatEditingModel="chat-editing-text-model",e.copilotPr="copilot-pr"})(B||(B={}));function _m(e,t){return y.isUri(e)?Ss(e.scheme,t):jm(e,t+":")}function ET(e,...t){return t.some(i=>_m(e,i))}var CT="tkn",xT=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=We.join(t??"/",$T(e))}getServerRootPath(){return this.f}get g(){return We.join(this.f,B.vscodeRemoteResource)}set(e,t,i){this.a[e]=t,this.b[e]=i}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return Bt(o),e}const t=e.authority;let i=this.a[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${CT}=${encodeURIComponent(s)}`),y.from({scheme:zn?this.d:B.vscodeRemoteResource,authority:`${i}:${r}`,path:this.g,query:n})}},kT=new xT;function $T(e){return`${e.quality??"oss"}-${e.commit??"dev"}`}var IT="vs/../../node_modules",DT="vs/../../node_modules.asar",S6="vscode-app",PT=class Vg{static{this.a=S6}asBrowserUri(t){const i=this.b(t);return this.uriToBrowserUri(i)}uriToBrowserUri(t){return t.scheme===B.vscodeRemote?kT.rewrite(t):t.scheme===B.file&&(T5||CA===`${B.vscodeFileResource}://${Vg.a}`)?t.with({scheme:B.vscodeFileResource,authority:t.authority||Vg.a,query:null,fragment:null}):t}asFileUri(t){const i=this.b(t);return this.uriToFileUri(i)}uriToFileUri(t){return t.scheme===B.vscodeFileResource?t.with({scheme:B.file,authority:t.authority!==Vg.a?t.authority:null,query:null,fragment:null}):t}b(t){if(y.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return y.joinPath(y.parse(i,!0),t);const r=Rm(i,t);return y.file(r)}throw new Error("Cannot determine URI for module id!")}},E6=new PT,Qq=Object.freeze({"Cache-Control":"no-cache, no-store"}),Zq=Object.freeze({"Document-Policy":"include-js-call-stacks-in-crash-reports"}),C6;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";function r(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:y.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(i);if(a)return t.get(a)}e.getHeadersFromQuery=r;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(i,c):n[i]=c}e.addSearchParam=s})(C6||(C6={}));function Er(e){return Uh(e,!0)}var ua=class{constructor(e){this.a=e}compare(e,t,i=!1){return e===t?0:Xn(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===B.file)return qh(Er(e),Er(t),this.a(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(k6(e.authority,t.authority))return qh(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return y.joinPath(e,...t)}basenameOrAuthority(e){return Ji(e)||e.authority}basename(e){return We.basename(e.path)}extname(e){return We.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===B.file?t=y.file(Qn(Er(e))).path:(t=We.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===B.file?t=y.file(aa(Er(e))).path:t=We.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!k6(e.authority,t.authority))return;if(e.scheme===B.file){const s=ol(Er(e),Er(t));return ai?w6(s):s}let i=e.path||"/";const r=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(i.length,r.length);s<n&&!(i.charCodeAt(s)!==r.charCodeAt(s)&&i.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);i=r.substr(0,s)+i.substr(s)}return We.relative(i,r)}resolvePath(e,t){if(e.scheme===B.file){const i=y.file(UA(Er(e),t));return e.with({authority:i.authority,path:i.path})}return t=mT(t),e.with({path:We.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Ss(e,t)}hasTrailingPathSeparator(e,t=ar){if(e.scheme===B.file){const i=Er(e);return i.length>b6(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ar){return $6(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ar){let i=!1;if(e.scheme===B.file){const r=Er(e);i=r!==void 0&&r.length===b6(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return!i&&!$6(e,t)?e.with({path:e.path+"/"}):e}},Ve=new ua(()=>!1),AT=new ua(e=>e.scheme===B.file?!Qs:!0),TT=new ua(e=>!0),ha=Ve.isEqual.bind(Ve),Xq=Ve.isEqualOrParent.bind(Ve),Yq=Ve.getComparisonKey.bind(Ve),Bm=Ve.basenameOrAuthority.bind(Ve),Ji=Ve.basename.bind(Ve),RT=Ve.extname.bind(Ve),cl=Ve.dirname.bind(Ve),Qt=Ve.joinPath.bind(Ve),Kq=Ve.normalizePath.bind(Ve),x6=Ve.relativePath.bind(Ve),ez=Ve.resolvePath.bind(Ve),LT=Ve.isAbsolutePath.bind(Ve),k6=Ve.isEqualAuthority.bind(Ve),$6=Ve.hasTrailingPathSeparator.bind(Ve),tz=Ve.removeTrailingPathSeparator.bind(Ve),iz=Ve.addTrailingPathSeparator.bind(Ve),I6;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(i){const r=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&r.set(a,c)});const n=i.path.substring(0,i.path.indexOf(";"));return n&&r.set(e.META_DATA_MIME,n),r}e.parseMetaData=t})(I6||(I6={}));var NT=Symbol("MicrotaskDelay");function Ys(e){return!!e&&typeof e.then=="function"}function MT(e){const t=new rt,i=e(t.token);let r=!1;const s=new Promise((n,o)=>{const a=t.token.onCancellationRequested(()=>{r=!0,a.dispose(),o(new oi)});Promise.resolve(i).then(c=>{a.dispose(),t.dispose(),r?a5(c)&&c.dispose():n(c)},c=>{a.dispose(),t.dispose(),o(c)})});return new class{cancel(){t.cancel(),t.dispose()}then(n,o){return s.then(n,o)}catch(n){return this.then(void 0,n)}finally(n){return s.finally(n)}}}function OT(e,t,i){return new Promise((r,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),r(i)});e.then(r,s).finally(()=>n.dispose())})}function qm(e,t){return new Promise((i,r)=>{const s=t.onCancellationRequested(()=>{s.dispose(),r(new oi)});e.then(i,r).finally(()=>s.dispose())})}function ti(e){return new Promise((t,i)=>{const r=e();Ys(r)?r.then(t,i):t(r)})}function FT(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}var UT=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=new rt}queue(e){if(this.f.token.isCancellationRequested)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f.token.isCancellationRequested)return;const i=this.queue(this.d);return this.d=null,i};this.b=new Promise(i=>{this.a.then(t,t).then(i)})}return new Promise((t,i)=>{this.b.then(t,i)})}return this.a=e(this.f.token),new Promise((t,i)=>{this.a.then(r=>{this.a=null,t(r)},r=>{this.a=null,i(r)})})}dispose(){this.f.cancel()}},jT=class{constructor(){this.a=Promise.resolve(null)}queue(e){return this.a=this.a.then(()=>e(),()=>e())}},D6=class{constructor(){this.a=new Map}queue(e,t){const r=(this.a.get(e)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.a.get(e)===r&&this.a.delete(e)});return this.a.set(e,r),r}peek(e){return this.a.get(e)||void 0}keys(){return this.a.keys()}},HT=(e,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},WT=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},_T=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((r,s)=>{this.d=r,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const r=this.g;return this.g=null,r()}}));const i=()=>{this.a=null,this.d?.(null)};return this.a=t===NT?WT(i):HT(t,i),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new oi),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},P6=class{constructor(e){this.a=new _T(e),this.b=new UT}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},Cr=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function Qi(e,t){return t?new Promise((i,r)=>{const s=setTimeout(()=>{n.dispose(),i()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),r(new oi)})}):MT(i=>Qi(e,i))}function BT(e,t=0,i){const r=setTimeout(()=>{e(),i&&s.dispose()},t),s=se(()=>{clearTimeout(r),i?.delete(s)});return i?.add(s),s}var qT=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new P}whenIdle(){return this.size>0?Ke.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,i)=>{this.g.push({factory:e,c:t,e:i}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},zT=class extends qT{constructor(){super(1)}},VT=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new Vr;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=Ve){const i=t.getComparisonKey(e);return this.a.get(i)?.size??0}queueFor(e,t,i=Ve){const r=i.getComparisonKey(e);let s=this.a.get(r);if(!s){s=new zT;const n=this.f++,o=Ke.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(r),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new Xc),this.d.set(n,o),this.a.set(r,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},GT=class{constructor(){this.g=void 0,this.j=!1}cancel(){this.g?.dispose(),this.g=void 0}cancelAndSet(e,t,i=globalThis){if(this.j)throw new qt("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.g=se(()=>{i.clearInterval(r),this.g=void 0})}dispose(){this.cancel(),this.j=!0}},Yn=class{constructor(e,t){this.b=void 0,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=void 0)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=void 0,this.a&&this.h()}h(){this.a?.()}},A6,zh;(function(){const e=globalThis;typeof e.requestIdleCallback!="function"||typeof e.cancelIdleCallback!="function"?zh=(t,i,r)=>{L5(()=>{if(s)return;const n=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let s=!1;return{dispose(){s||(s=!0)}}}:zh=(t,i,r)=>{const s=t.requestIdleCallback(i,typeof r=="number"?{timeout:r}:void 0);let n=!1;return{dispose(){n||(n=!0,t.cancelIdleCallback(s))}}},A6=(t,i)=>zh(globalThis,t,i)})();var JT=class{constructor(e,t){this.l=!1,this.g=()=>{try{this.m=t()}catch(i){this.o=i}finally{this.l=!0}},this.j=zh(e,()=>this.g())}dispose(){this.j.dispose()}get value(){if(this.l||(this.j.dispose(),this.g()),this.o)throw this.o;return this.m}get isInitialized(){return this.l}},QT=class extends JT{constructor(e){super(globalThis,e)}},T6;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(T6||(T6={}));var Vr=class HD{static fromPromise(t){const i=new HD;return i.settleWith(t),i}get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return this.isSettled?Promise.resolve():new Promise(i=>{this.a(t),this.d={outcome:0,value:t},i()})}error(t){return this.isSettled?Promise.resolve():new Promise(i=>{this.b(t),this.d={outcome:1,value:t},i()})}settleWith(t){return t.then(i=>this.complete(i),i=>this.error(i))}cancel(){return this.error(new oi)}},da;(function(e){async function t(r){let s;const n=await Promise.all(r.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function i(r){return new Promise(async(s,n)=>{try{await r(s,n)}catch(o){n(o)}})}e.withAsyncBody=i})(da||(da={}));var R6;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(R6||(R6={}));var zm=class tr{static fromArray(t){return new tr(i=>{i.emitMany(t)})}static fromPromise(t){return new tr(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new tr(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new tr(async i=>{await Promise.all(t.map(async r=>{for await(const s of r)i.emitOne(s)}))})}static{this.EMPTY=tr.fromArray([])}constructor(t,i){this.a=0,this.b=[],this.d=null,this.f=i,this.g=new P,queueMicrotask(async()=>{const r={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(r)),this.k()}catch(s){this.l(s)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await Ke.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new tr(async r=>{for await(const s of t)r.emitOne(i(s))})}map(t){return tr.map(this,t)}static filter(t,i){return new tr(async r=>{for await(const s of t)i(s)&&r.emitOne(s)})}filter(t){return tr.filter(this,t)}static coalesce(t){return tr.filter(t,i=>!!i)}coalesce(){return tr.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return tr.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},ZT=class{constructor(e){this.a=new Vr,this.b=new zm(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=s=>r.reject(s),this.f=s=>r.emitOne(s),this.g=s=>r.emitMany(s),this.a.p},e);let t,i;this.d=r=>{t||(t=r)},this.f=r=>{i||(i=[]),i.push(r)},this.g=r=>{i?r.forEach(s=>i.push(s)):i=r.slice()}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}emitMany(e){this.g(e)}},XT=class{constructor(){this.a=[],this.b=[]}get hasFinalValue(){return!!this.d}produce(e){if(this.f(),this.a.length>0){const t=this.a.shift();this.g(t,e)}else this.b.push(e)}produceFinal(e){this.f(),this.d=e;for(const t of this.a)this.g(t,e);this.a.length=0}f(){if(this.d)throw new qt("ProducerConsumer: cannot produce after final value has been set")}g(e,t){t.ok?e.complete(t.value):e.error(t.error)}consume(){if(this.b.length>0||this.d){const e=this.b.length>0?this.b.shift():this.d;return e.ok?Promise.resolve(e.value):Promise.reject(e.error)}else{const e=new Vr;return this.a.push(e),e.p}}},L6=class _i{constructor(t,i){this.b=i,this.a=new XT,this.g={next:()=>this.a.consume(),return:()=>(this.b?.(),Promise.resolve({done:!0,value:void 0})),throw:async r=>(this.f(r),{done:!0,value:void 0})},queueMicrotask(async()=>{const r=t({emitOne:s=>this.a.produce({ok:!0,value:{done:!1,value:s}}),emitMany:s=>{for(const n of s)this.a.produce({ok:!0,value:{done:!1,value:n}})},reject:s=>this.f(s)});if(!this.a.hasFinalValue)try{await r,this.d()}catch(s){this.f(s)}})}static fromArray(t){return new _i(i=>{i.emitMany(t)})}static fromPromise(t){return new _i(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new _i(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new _i(async i=>{await Promise.all(t.map(async r=>{for await(const s of r)i.emitOne(s)}))})}static{this.EMPTY=_i.fromArray([])}static map(t,i){return new _i(async r=>{for await(const s of t)r.emitOne(i(s))})}static tee(t){let i,r;const s=new Vr,n=async()=>{if(!(!i||!r))try{for await(const c of t)i.emitOne(c),r.emitOne(c)}catch(c){i.reject(c),r.reject(c)}finally{s.complete()}},o=new _i(async c=>(i=c,n(),s.p)),a=new _i(async c=>(r=c,n(),s.p));return[o,a]}map(t){return _i.map(this,t)}static coalesce(t){return _i.filter(t,i=>!!i)}coalesce(){return _i.coalesce(this)}static filter(t,i){return new _i(async r=>{for await(const s of t)i(s)&&r.emitOne(s)})}filter(t){return _i.filter(this,t)}d(){this.a.hasFinalValue||this.a.produceFinal({ok:!0,value:{done:!0,value:void 0}})}f(t){this.a.hasFinalValue||this.a.produceFinal({ok:!1,error:t})}[Symbol.asyncIterator](){return this.g}},rz=Symbol("AsyncReaderEndOfStream"),sz=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function N6(e,t,i,r){if(!e||r>200)return null;if(typeof e=="object"){if(e.$mid===1)return i?y.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof re)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=N6(e[s],t,i,r+1);n!==null&&(e[s]=n)}}return null}function ll(e,t){const i=N6(e,t,!1,0);return i===null?e:i}var M6=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):Bt(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},YT=class extends M6{constructor(){super(),this.h=!0,this.i=new oi}},O6;function Vm(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var Gm="$$ref$$",KT={[Gm]:-1};function F6(e,t=null,i=!1){const r=[];return{jsonString:(i?Vm:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return KT;if(typeof o=="object"){if(o instanceof re){const a=r.push(o)-1;return{[Gm]:a}}if(t)return t(n,o)}return o}),referencedBuffers:r}}function U6(e,t,i){return JSON.parse(e,(r,s)=>{if(s){const n=s[Gm];if(typeof n=="number")return t[n];if(i&&s.$mid===1)return i.transformIncoming(s)}return s})}function j6(e,t){return JSON.stringify(e,t)}function e2(e){return e?(t,i)=>i&&i.$mid===1?e.transformOutgoing(i):i:null}var H6;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(H6||(H6={}));var W6;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(W6||(W6={}));var t2=()=>{},i2=Symbol.for("rpcProtocol"),r2=Symbol.for("rpcProxy"),s2=class v4 extends Y{static{O6=i2}static{this.a=3*1e3}constructor(t,i=null,r=null){super(),this[O6]=!0,this.b=this.D(new P),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=i,this.g=r,this.h=e2(this.g),this.j=!1,this.m=[],this.q=[];for(let s=0,n=V5.count;s<n;s++)this.m[s]=null,this.q[s]=null;this.s=0,this.t=Object.create(null),this.u={},this.w=0,this.y=0,this.z=0,this.C=this.D(new Yn(()=>this.H(),1e3)),this.D(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.u).forEach(t=>{const i=this.u[t];delete this.u[t],i.resolveErr(V4())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.y===0&&(this.z=Date.now()+v4.a),this.y++,this.C.isScheduled()||this.C.schedule()}G(t){this.z=Date.now()+v4.a,this.y--,this.y===0&&this.C.cancel(),this.I(0)}H(){this.y!==0&&(Date.now()>this.z?this.I(1):this.C.schedule())}I(t){this.w!==t&&(this.w=t,this.b.fire(this.w))}get responsiveState(){return this.w}transformIncomingURIs(t){return this.g?ll(t,this.g):t}getProxy(t){const{nid:i,sid:r}=t;return this.q[i]||(this.q[i]=this.J(i,r)),this.q[i]}J(t,i){const r={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===r2?i:s[n])};return new Proxy(Object.create(null),r)}set(t,i){return this.m[t.nid]=i,i}assertRegistered(t){for(let i=0,r=t.length;i<r;i++){const s=t[i];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const i=t.byteLength,r=Pt.read(t,0),s=r.readUInt8(),n=r.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=cr.deserializeRequestJSONArgs(r);this.g&&(c=ll(c,this.g)),this.M(i,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=cr.deserializeRequestMixedArgs(r);this.g&&(c=ll(c,this.g)),this.M(i,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(i,n,0,"ack"),this.G(n);break}case 6:{this.N(i,n);break}case 7:{this.O(i,n,void 0);break}case 9:{let o=cr.deserializeReplyOKJSON(r);this.g&&(o=ll(o,this.g)),this.O(i,n,o);break}case 10:{const o=cr.deserializeReplyOKJSONWithBuffers(r,this.g);this.O(i,n,o);break}case 8:{const o=cr.deserializeReplyOKVSBuffer(r);this.O(i,n,o);break}case 11:{let o=cr.deserializeReplyErrError(r);this.g&&(o=ll(o,this.g)),this.P(i,n,o);break}case 12:{this.P(i,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,i,r,s,n,o){this.f?.logIncoming(t,i,1,`receiveRequest ${Hh(r)}.${s}(`,n);const a=String(i);let c,l;if(o){const h=new rt;n.push(h.token),c=this.Q(r,s,n),l=()=>h.cancel()}else c=this.Q(r,s,n),l=t2;this.t[a]=l;const u=cr.serializeAcknowledged(i);this.f?.logOutgoing(u.byteLength,i,1,"ack"),this.c.send(u),c.then(h=>{delete this.t[a];const f=cr.serializeReplyOK(i,h,this.h);this.f?.logOutgoing(f.byteLength,i,1,"reply:",h),this.c.send(f)},h=>{delete this.t[a];const f=cr.serializeReplyErr(i,h);this.f?.logOutgoing(f.byteLength,i,1,"replyErr:",h),this.c.send(f)})}N(t,i){this.f?.logIncoming(t,i,1,"receiveCancel");const r=String(i);this.t[r]?.()}O(t,i,r){this.f?.logIncoming(t,i,0,"receiveReply:",r);const s=String(i);if(!this.u.hasOwnProperty(s))return;const n=this.u[s];delete this.u[s],n.resolveOk(r)}P(t,i,r){this.f?.logIncoming(t,i,0,"receiveReplyErr:",r);const s=String(i);if(!this.u.hasOwnProperty(s))return;const n=this.u[s];delete this.u[s];let o;r&&(r.$isError?(o=new Error,o.name=r.name,o.message=r.message,o.stack=r.stack):o=r),n.resolveErr(o)}Q(t,i,r){try{return Promise.resolve(this.S(t,i,r))}catch(s){return Promise.reject(s)}}S(t,i,r){const s=this.m[t];if(!s)throw new Error("Unknown actor "+Hh(t));const n=s[i];if(typeof n!="function")throw new Error("Unknown method "+i+" on actor "+Hh(t));return n.apply(s,r)}U(t,i,r){if(this.j)return new YT;let s=null;if(r.length>0&&Be.isCancellationToken(r[r.length-1])&&(s=r.pop()),s&&s.isCancellationRequested)return Promise.reject(V4());const n=cr.serializeRequestArguments(r,this.h),o=++this.s,a=String(o),c=new M6,l=new ae;s&&l.add(s.onCancellationRequested(()=>{const h=cr.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.u[a]=new n2(c,l),this.F(o);const u=cr.serializeRequest(o,t,i,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${Hh(t)}.${i}(`,r),this.c.send(u),c}},n2=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},Pt=class w4{static alloc(t,i,r){const s=new w4(re.alloc(r+1+4),0);return s.writeUInt8(t),s.writeUInt32(i),s}static read(t,i){return new w4(t,i)}get buffer(){return this.a}constructor(t,i){this.a=t,this.b=i}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t);return this.b+=t,i}static sizeMixedArray(t){let i=0;i+=1;for(let r=0,s=t.length;r<s;r++){const n=t[r];switch(i+=1,n.type){case 1:i+=this.sizeLongString(n.value);break;case 2:i+=this.sizeVSBuffer(n.value);break;case 3:i+=this.sizeUInt32,i+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)i+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return i}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let i=0,r=t.length;i<r;i++){const s=t[i];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const i=new Array(t);for(let r=0;r<t;r++)switch(this.readUInt8()){case 1:i[r]=this.readLongString();break;case 2:i[r]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());i[r]=new ei(U6(o,a,null));break}case 4:i[r]=void 0;break}return i}},_6;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(_6||(_6={}));var cr=class{static a(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof re||e[t]instanceof ei||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const i=[];for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n instanceof re)i[r]={type:2,value:n};else if(typeof n>"u")i[r]={type:4};else if(n instanceof ei){const{jsonString:o,referencedBuffers:a}=F6(n.value,t);i[r]={type:3,value:re.fromString(o),buffers:a}}else i[r]={type:1,value:re.fromString(j6(n,t))}}return{type:1,args:i}}return{type:0,args:j6(e,t)}}static serializeRequest(e,t,i,r,s){switch(r.type){case 0:return this.b(e,t,i,r.args,s);case 1:return this.c(e,t,i,r.args,s)}}static b(e,t,i,r,s){const n=re.fromString(i),o=re.fromString(r);let a=0;a+=Pt.sizeUInt8(),a+=Pt.sizeShortString(n),a+=Pt.sizeLongString(o);const c=Pt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(r)}}static c(e,t,i,r,s){const n=re.fromString(i);let o=0;o+=Pt.sizeUInt8(),o+=Pt.sizeShortString(n),o+=Pt.sizeMixedArray(r);const a=Pt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(r),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readMixedArray(),s=new Array(r.length);for(let n=0,o=r.length;n<o;n++){const a=r[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:i,args:s}}static serializeAcknowledged(e){return Pt.alloc(5,e,0).buffer}static serializeCancel(e){return Pt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this.d(e);if(t instanceof re)return this.e(e,t);if(t instanceof ei){const{jsonString:r,referencedBuffers:s}=F6(t.value,i,!0);return this.g(e,r,s)}else return this.f(e,Vm(t,i))}static d(e){return Pt.alloc(7,e,0).buffer}static e(e,t){let i=0;i+=Pt.sizeVSBuffer(t);const r=Pt.alloc(8,e,i);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const i=re.fromString(t);let r=0;r+=Pt.sizeLongString(i);const s=Pt.alloc(9,e,r);return s.writeLongString(i),s.buffer}static g(e,t,i){const r=re.fromString(t);let s=0;s+=Pt.sizeUInt32,s+=Pt.sizeLongString(r);for(const o of i)s+=Pt.sizeVSBuffer(o);const n=Pt.alloc(10,e,s);n.writeUInt32(i.length),n.writeLongString(r);for(const o of i)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),r=e.readLongString(),s=[];for(let n=0;n<i;++n)s.push(e.readVSBuffer());return new ei(U6(r,s,t))}static serializeReplyErr(e,t){const i=t?Vm(ea(t),null):void 0;if(typeof i!="string")return this.h(e);const r=re.fromString(i);let s=0;s+=Pt.sizeLongString(r);const n=Pt.alloc(11,e,s);return n.writeLongString(r),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return Pt.alloc(12,e,0).buffer}},B6;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(B6||(B6={}));var q6;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(q6||(q6={}));var xr;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(i){return i[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(xr||(xr={}));var Kn=U("instantiationService");function o2(e,t,i){t[xr.DI_TARGET]===t?t[xr.DI_DEPENDENCIES].push({id:e,index:i}):(t[xr.DI_DEPENDENCIES]=[{id:e,index:i}],t[xr.DI_TARGET]=t)}function U(e){if(xr.serviceIds.has(e))return xr.serviceIds.get(e);const t=function(i,r,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");o2(t,i,s)};return t.toString=()=>e,xr.serviceIds.set(e,t),t}function nz(e){return e}function Jm(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var z6=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],V6;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(V6||(V6={}));var G6;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(G6||(G6={}));var qe=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,r=typeof t=="string"?t:t.value;return Ss(i,r)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},eo=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(qe.toKey(e))}delete(e){return this.c.delete(qe.toKey(e))}has(e){return this.c.has(qe.toKey(e))}},Ks=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(qe.toKey(e))}get(e){return this.c.get(qe.toKey(e))}has(e){return this.c.has(qe.toKey(e))}set(e,t){this.c.set(qe.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},J6=class extends Error{constructor(e,t,i){super(`Error in extension ${qe.toKey(e)}: ${i??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}},oz=U("IBuiltinExtensionsScannerService");function Qm(e,t){return t&&(e.stack||e.stacktrace)?d(110,null,Z6(e),Q6(e.stack)||Q6(e.stacktrace)):Z6(e)}function Q6(e){return Array.isArray(e)?e.join(`
`):e}function Z6(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(111,null,e.message):e.message||d(112,null)}function fa(e=null,t=!1){if(!e)return d(113,null);if(Array.isArray(e)){const i=mt(e),r=fa(i[0],t);return i.length>1?d(114,null,r,i.length):r}if(Oe(e))return e;if(e.detail){const i=e.detail;if(i.error)return Qm(i.error,t);if(i.exception)return Qm(i.exception,t)}return e.stack?Qm(e,t):e.message?e.message:d(115,null)}function ul(e){return Zm(e,0)}function Zm(e,t){switch(typeof e){case"object":return e===null?Es(349,t):Array.isArray(e)?c2(e,t):l2(e,t);case"string":return Xm(e,t);case"boolean":return a2(e,t);case"number":return Es(e,t);case"undefined":return Es(937,t);default:return Es(617,t)}}function Es(e,t){return(t<<5)-t+e|0}function a2(e,t){return Es(e?433:863,t)}function Xm(e,t){t=Es(149417,t);for(let i=0,r=e.length;i<r;i++)t=Es(e.charCodeAt(i),t);return t}function c2(e,t){return t=Es(104579,t),e.reduce((i,r)=>Zm(r,i),t)}function l2(e,t){return t=Es(181387,t),Object.keys(e).sort().reduce((i,r)=>(i=Xm(r,i),Zm(e[r],i)),t)}var X6;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(X6||(X6={}));function Ym(e,t,i=32){const r=i-t,s=~((1<<r)-1);return(e<<t|(s&e)>>>r)>>>0}function hl(e,t=32){return e instanceof ArrayBuffer?Em(re.wrap(new Uint8Array(e))):(e>>>0).toString(16).padStart(t/4,"0")}var az=class WD{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const i=t.length;if(i===0)return;const r=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(_h(o))if(a+1<i){const l=t.charCodeAt(a+1);Bh(l)?(a++,c=Hm(o,l)):c=65533}else{n=o;break}else Bh(o)&&(c=65533);if(s=this.w(r,s,c),a++,a<i)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,i,r){return r<128?t[i++]=r:r<2048?(t[i++]=192|(r&1984)>>>6,t[i++]=128|(r&63)>>>0):r<65536?(t[i++]=224|(r&61440)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0):(t[i++]=240|(r&1835008)>>>18,t[i++]=128|(r&258048)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0),i>=64&&(this.y(),i-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),i}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),hl(this.h)+hl(this.l)+hl(this.m)+hl(this.n)+hl(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=WD.g,i=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,i.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,Ym(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let r=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=Ym(r,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=Ym(s,30),s=r,r=u;this.h=this.h+r&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},Y6;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(Y6||(Y6={}));function Km(...e){switch(e.length){case 1:return d(1874,null,e[0]);case 2:return d(1875,null,e[0],e[1]);case 3:return d(1876,null,e[0],e[1],e[2]);default:return}}var u2=d(1877,null),h2=d(1878,null),dl=class b4{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw um(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const i=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:i})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const i=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:i})}else this.h(126)?this.k(9):this.l(Km("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Km("&&"));break;case 124:this.h(124)?this.k(16):this.l(Km("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const i=this.d,r=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:r};this.g.push({offset:i,lexeme:r,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const i=this.c.substring(this.d,this.e),r=b4.b.get(i);r?this.k(r):this.f.push({type:17,lexeme:i,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(u2);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,i=!1,r=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(h2);return}const n=this.c.charCodeAt(t);if(i)i=!1;else if(n===47&&!r){t++;break}else n===91?r=!0:n===92?i=!0:n===93&&(r=!1);t++}for(;t<this.c.length&&b4.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},Zt=new Map;Zt.set("false",!1),Zt.set("true",!0),Zt.set("isMac",yi),Zt.set("isLinux",Qs),Zt.set("isWindows",ai),Zt.set("isWeb",zn),Zt.set("isMacNative",yi&&!zn),Zt.set("isEdge",U5),Zt.set("isFirefox",IA),Zt.set("isChrome",Pm),Zt.set("isSafari",DA);var d2=Object.prototype.hasOwnProperty,K6;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(K6||(K6={}));var f2={regexParsingWithErrorRecovery:!0},p2=d(1854,null),g2=d(1855,null),m2=d(1856,null),eS=d(1857,null),v2=d(1858,null),w2=d(1859,null),b2=d(1860,null),y2=d(1861,null),tS=class vh{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=f2){this.k=t,this.d=new dl,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:p2,offset:0,lexeme:"",additionalInfo:g2});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const i=this.l();if(!this.E()){const r=this.D(),s=r.type===17?w2:void 0;throw this.h.push({message:v2,offset:r.offset,lexeme:dl.getLexeme(r),additionalInfo:s}),vh.c}return i}catch(i){if(i!==vh.c)throw i;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const i=this.o();t.push(i)}return t.length===1?t[0]:yt.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const i=this.s();t.push(i)}return t.length===1?t[0]:yt.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),Ei.INSTANCE;case 12:return this.z(),Oi.INSTANCE;case 0:{this.z();const i=this.l();return this.A(1,eS),i?.negate()}case 17:return this.z(),gl.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),yt.true();case 12:return this.z(),yt.false();case 0:{this.z();const i=this.l();return this.A(1,eS),i}case 17:{const i=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return n1.create(i,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let f=0;f<s.lexeme.length;f++)s.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let f=0;f<o.lexeme.length;f++)o.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--}if(a<0)break;n.push(dl.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return yt.regex(i,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!al(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return n1.create(i,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,m2);const s=this.u();return yt.notIn(i,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return yt.equals(i,s);switch(s){case"true":return yt.has(i);case"false":return yt.not(i);default:return yt.equals(i,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return yt.notEquals(i,s);switch(s){case"true":return yt.not(i);case"false":return yt.has(i);default:return yt.notEquals(i,s)}}case 5:return this.z(),r1.create(i,this.u());case 6:return this.z(),s1.create(i,this.u());case 7:return this.z(),Gh.create(i,this.u());case 8:return this.z(),i1.create(i,this.u());case 13:return this.z(),yt.in(i,this.u());default:return yt.has(i)}}case 20:throw this.h.push({message:b2,offset:t.offset,lexeme:"",additionalInfo:y2}),vh.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,i){if(this.C(t))return this.z();throw this.B(i,this.D())}B(t,i,r){const s=d(1862,null,t,dl.getLexeme(i)),n=i.offset,o=dl.getLexeme(i);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:r}),vh.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},yt=class{static false(){return Ei.INSTANCE}static true(){return Oi.INSTANCE}static has(e){return pl.create(e)}static equals(e,t){return e1.create(e,t)}static notEquals(e,t){return t1.create(e,t)}static regex(e,t){return n1.create(e,t)}static in(e,t){return iS.create(e,t)}static notIn(e,t){return rS.create(e,t)}static not(e){return gl.create(e)}static and(...e){return nS.create(e,null,!0)}static or(...e){return o1.create(e,null,!0)}static greater(e,t){return Gh.create(e,t)}static greaterEquals(e,t){return i1.create(e,t)}static smaller(e,t){return r1.create(e,t)}static smallerEquals(e,t){return s1.create(e,t)}static{this.c=new tS({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function S2(e){const t=new tS({regexParsingWithErrorRecovery:!1});return e.map(i=>(t.parse(i),t.lexingErrors.length>0?t.lexingErrors.map(r=>({errorMessage:r.additionalInfo?d(1863,null,r.additionalInfo):d(1864,null),offset:r.offset,length:r.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(r=>({errorMessage:r.additionalInfo?`${r.message}. ${r.additionalInfo}`:r.message,offset:r.offset,length:r.lexeme.length})):[]))}function fl(e,t){return e.cmp(t)}var Ei=class _D{static{this.INSTANCE=new _D}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Oi.INSTANCE}},Oi=class BD{static{this.INSTANCE=new BD}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return Ei.INSTANCE}},pl=class qD{static create(t,i=null){const r=Zt.get(t);return typeof r=="boolean"?r?Oi.INSTANCE:Ei.INSTANCE:new qD(t,i)}constructor(t,i){this.key=t,this.c=i,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:oS(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=Zt.get(this.key);return typeof t=="boolean"?t?Oi.INSTANCE:Ei.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=gl.create(this.key,this)),this.c}},e1=class zD{static create(t,i,r=null){if(typeof i=="boolean")return i?pl.create(t,r):gl.create(t,r);const s=Zt.get(t);return typeof s=="boolean"?i===(s?"true":"false")?Oi.INSTANCE:Ei.INSTANCE:new zD(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:io(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Zt.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?Oi.INSTANCE:Ei.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=t1.create(this.c,this.d,this)),this.f}},iS=class VD{static create(t,i){return new VD(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:io(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.f),r=t.getValue(this.d);return Array.isArray(i)?i.includes(r):typeof r=="string"&&typeof i=="object"&&i!==null?d2.call(i,r):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=rS.create(this.d,this.f)),this.c}},rS=class GD{static create(t,i){return new GD(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=11,this.c=iS.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},t1=class JD{static create(t,i,r=null){if(typeof i=="boolean")return i?gl.create(t,r):pl.create(t,r);const s=Zt.get(t);return typeof s=="boolean"?i===(s?"true":"false")?Ei.INSTANCE:Oi.INSTANCE:new JD(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:io(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Zt.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?Ei.INSTANCE:Oi.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=e1.create(this.c,this.d,this)),this.f}},gl=class QD{static create(t,i=null){const r=Zt.get(t);return typeof r=="boolean"?r?Ei.INSTANCE:Oi.INSTANCE:new QD(t,i)}constructor(t,i){this.c=t,this.d=i,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:oS(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=Zt.get(this.c);return typeof t=="boolean"?t?Ei.INSTANCE:Oi.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=pl.create(this.c,this)),this.d}};function Vh(e,t){if(typeof e=="string"){const i=parseFloat(e);isNaN(i)||(e=i)}return typeof e=="string"||typeof e=="number"?t(e):Ei.INSTANCE}var Gh=class ZD{static create(t,i,r=null){return Vh(i,s=>new ZD(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:io(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=s1.create(this.c,this.d,this)),this.f}},i1=class XD{static create(t,i,r=null){return Vh(i,s=>new XD(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:io(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=r1.create(this.c,this.d,this)),this.f}},r1=class YD{static create(t,i,r=null){return Vh(i,s=>new YD(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:io(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=i1.create(this.c,this.d,this)),this.f}},s1=class KD{static create(t,i,r=null){return Vh(i,s=>new KD(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:io(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Gh.create(this.c,this.d,this)),this.f}},n1=class e3{static create(t,i){return new e3(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return i<r?-1:i>r?1:0}equals(t){if(t.type===this.type){const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return this.d===t.d&&i===r}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.d);return this.f?this.f.test(i):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=E2.create(this)),this.c}},E2=class y4{static create(t){return new y4(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new y4(this.c.map(t))}negate(){return this.c}};function sS(e){let t=null;for(let i=0,r=e.length;i<r;i++){const s=e[i].substituteConstants();if(e[i]!==s&&t===null){t=[];for(let n=0;n<i;n++)t[n]=e[n]}t!==null&&(t[i]=s)}return t===null?e:t}var nS=class Oc{static create(t,i,r){return Oc.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=fl(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=sS(this.expr);return t===this.expr?this:Oc.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static d(t,i,r){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return Ei.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return Oi.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(fl);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=o1.create(o.expr.map(u=>Oc.create([u,a],null,r)),null,c);l&&(s.push(l),s.sort(fl))}if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Ei.INSTANCE;if(s.length===1)return s[0]}return new Oc(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new Oc(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());this.c=o1.create(t,this,!0)}return this.c}},o1=class Qo{static create(t,i,r){return Qo.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=fl(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=sS(this.expr);return t===this.expr?this:Qo.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(this.expr[i].evaluate(t))return!0;return!1}static d(t,i,r){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Oi.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return Ei.INSTANCE;s.sort(fl)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Oi.INSTANCE;if(s.length===1)return s[0]}return new Qo(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new Qo(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),r=t.shift(),s=[];for(const n of aS(i))for(const o of aS(r))s.push(nS.create([n,o],null,!1));t.unshift(Qo.create(s,null,!1))}this.c=Qo.create(t,this,!0)}return this.c}},x=class Gg extends pl{static{this.d=[]}static all(){return Gg.d.values()}constructor(t,i,r){super(t,null),this.f=i,typeof r=="object"?Gg.d.push({...r,key:t}):r!==!0&&Gg.d.push({key:t,description:r,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return e1.create(this.key,t)}notEqualsTo(t){return t1.create(this.key,t)}greater(t){return Gh.create(this.key,t)}},to=U("contextKeyService");function oS(e,t){return e<t?-1:e>t?1:0}function io(e,t,i,r){return e<i?-1:e>i?1:t<r?-1:t>r?1:0}function aS(e){return e.type===9?e.expr:[e]}var De=U("logService"),ro=U("loggerService"),de;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(de||(de={}));var C2=de.Info;function a1(e,t){return e!==de.Off&&e<=t}function x2(e,t,i){switch(t){case de.Trace:e.trace(i);break;case de.Debug:e.debug(i);break;case de.Info:e.info(i);break;case de.Warning:e.warn(i);break;case de.Error:e.error(i);break;case de.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function pa(e,t=!1){let i="";for(let r=0;r<e.length;r++){let s=e[r];if(s instanceof Error&&(s=fa(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}i+=(r>0?" ":"")+s}return i}var cS=class extends Y{constructor(){super(...arguments),this.b=C2,this.c=this.D(new P)}get onDidChangeLogLevel(){return this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return a1(this.b,e)}g(e){return this.B.isDisposed?!1:this.f(e)}},lS=class extends cS{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g(de.Trace)&&this.m(de.Trace,pa([e,...t],!0))}debug(e,...t){this.g(de.Debug)&&this.m(de.Debug,pa([e,...t]))}info(e,...t){this.g(de.Info)&&this.m(de.Info,pa([e,...t]))}warn(e,...t){this.g(de.Warning)&&this.m(de.Warning,pa([e,...t]))}error(e,...t){if(this.g(de.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.m(de.Error,pa(i))}else this.m(de.Error,pa([e,...t]))}flush(){}},k2=class extends cS{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.h)i.trace(e,...t)}debug(e,...t){for(const i of this.h)i.debug(e,...t)}info(e,...t){for(const i of this.h)i.info(e,...t)}warn(e,...t){for(const i of this.h)i.warn(e,...t)}error(e,...t){for(const i of this.h)i.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},$2=class extends Y{constructor(e,t,i){if(super(),this.j=e,this.m=t,this.b=new wt,this.f=this.D(new P),this.onDidChangeLoggers=this.f.event,this.g=this.D(new P),this.onDidChangeLogLevel=this.g.event,this.h=this.D(new P),this.onDidChangeVisibility=this.h.event,i)for(const r of i)this.b.set(r.resource,{logger:void 0,info:r})}n(e){return Oe(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.n(e)?.logger}createLogger(e,t){const i=this.q(e),r=Oe(e)?e:t?.id??ul(i.toString()).toString(16);let s=this.b.get(i)?.logger;const n=t?.logLevel==="always"?de.Trace:t?.logLevel;s||(s=this.s(i,n??this.getLogLevel(i)??this.j,{...t,id:r}));const o={logger:s,info:{resource:i,id:r,logLevel:n,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(i,o),s}q(e){return Oe(e)?Qt(this.m,`${e.replace(/[\\/:\*\?"<>\|]/g,"")}.log`):e}setLogLevel(e,t){if(y.isUri(e)){const i=e,r=t,s=this.b.get(i);s&&r!==s.info.logLevel&&(s.info.logLevel=r===this.j?void 0:r,s.logger?.setLevel(r),this.b.set(s.info.resource,s),this.g.fire([i,r]))}else{this.j=e;for(const[i,r]of this.b.entries())this.b.get(i)?.info.logLevel===void 0&&r.logger?.setLevel(this.j);this.g.fire(this.j)}}setVisibility(e,t){const i=this.n(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this.b.set(i.info.resource,i),this.h.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.j}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.f.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.q(e),i=this.b.get(t);i&&(i.logger&&i.logger.dispose(),this.b.delete(t),this.f.fire({added:[],removed:[i.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function I2(e){switch(e){case de.Trace:return"trace";case de.Debug:return"debug";case de.Info:return"info";case de.Warning:return"warn";case de.Error:return"error";case de.Off:return"off"}}var cz=new x("logLevel",I2(de.Info)),Gr=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},uS=[],hS;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(hS||(hS={}));function Ge(e,t,i){t instanceof Gr||(t=new Gr(t,[],!!i)),uS.push([e,t])}function D2(){return uS}var c1=class{constructor(...e){this.a=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this.a.get(e);return this.a.set(e,t),i}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},Mt=U("IExtHostInitDataService"),P2=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},dS=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const i of this.a.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let i=this.a.get(t);return i||(i=new P2(t,e),this.a.set(t,i)),i}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,i]of this.a)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const i=new Set([e]),r=this.c(t,i);if(r)return r}}c(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this.c(r,t);if(s)return s;t.delete(i)}}},A2=!1,fS=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},T2=class S4{constructor(t=new c1,i=!1,r,s=A2){this.i=t,this.j=i,this.k=r,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(Kn,this),this._globalGraph=s?r?._globalGraph??new dS(n=>n):void 0}dispose(){if(!this.f){this.f=!0,or(this.h),this.h.clear();for(const t of this.g)a5(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,i){this.m();const r=this,s=new class extends S4{dispose(){r.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),i?.add(s),s}invokeFunction(t,...i){this.m();const r=l1.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw um("service accessor is only valid during the invocation of its target method");const a=this.s(o,r);return a||this.y(`[invokeFunction] unknown service '${o}'`,!1),a}},...i)}finally{s=!0,r.stop()}}createInstance(t,...i){this.m();let r,s;return t instanceof Gr?(r=l1.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(i),r)):(r=l1.traceCreation(this.l,t),s=this.o(t,i,r)),r.stop(),s}o(t,i=[],r){const s=xr.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,r);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const a=o-i.length;a>0?i=i.concat(new Array(a)):i=i.slice(0,o)}return Reflect.construct(t,i.concat(n))}q(t,i){if(this.i.get(t)instanceof Gr)this.i.set(t,i);else if(this.k)this.k.q(t,i);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const i=this.i.get(t);return!i&&this.k?this.k.r(t):i}s(t,i){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const r=this.r(t);return r instanceof Gr?this.u(t,r,i.branch(t,!0)):(i.branch(t,!1),r)}u(t,i,r){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,i,r)}finally{this.t.delete(t)}}v(t,i,r){const s=new dS(c=>c.id.toString());let n=0;const o=[{id:t,desc:i,_trace:r}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new fS(s);for(const l of xr.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Gr){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new fS(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Gr){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,i,r=[],s,n){if(this.i.get(t)instanceof Gr)return this.x(t,i,r,s,n,this.g);if(this.k)return this.k.w(t,i,r,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}x(t,i,r=[],s,n,o){if(s){const a=new S4(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new QT(()=>{const u=a.o(i,r,n);for(const[h,f]of c){const g=u[h];if(typeof g=="function")for(const m of f)m.disposable=g.apply(u,m.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let m=c.get(h);return m||(m=new Gs,c.set(h,m)),(S,C,k)=>{if(l.isInitialized)return l.value[h](S,C,k);{const A={listener:[S,C,k],disposable:void 0},G=m.push(A);return se(()=>{G(),A.disposable?.dispose()})}}}if(h in u)return u[h];const f=l.value;let g=f[h];return typeof g!="function"||(g=g.bind(f),u[h]=g),g},set(u,h,f){return l.value[h]=f,!0},getPrototypeOf(u){return i.prototype}})}else{const a=this.o(i,r,n);return o.add(a),a}}y(t,i){if(i&&console.warn(t),this.j)throw new Error(t)}},pS;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(pS||(pS={}));var l1=class ds{static{this.all=new Set}static{this.c=new class extends ds{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,i){return t?new ds(2,i.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):ds.c}static traceCreation(t,i){return t?new ds(1,i.name):ds.c}static{this.f=0}constructor(t,i){this.type=t,this.name=i,this.g=Date.now(),this.h=[]}branch(t,i){const r=new ds(3,t.toString());return this.h.push([t,i,r]),r}stop(){const t=Date.now()-this.g;ds.f+=t;let i=!1;function r(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){i=!0,a.push(`${c}CREATES -> ${l}`);const f=r(n+1,h);f&&a.push(f)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${ds.f.toFixed(2)}ms)`];(t>2||i)&&ds.all.add(s.join(`
`))}},Ne=U("IExtHostRpcService"),R2=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},Jh=U("IURITransformerService"),L2=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},N2=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),i=this.b.charCodeAt(this.c);return t-i}value(){return this.b[this.c]}},M2=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?Fm(e,this.b,0,e.length,this.c,this.d):la(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},gS=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const i=this.b.charCodeAt(t);if(!(i===47||this.f&&i===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?Fm(e,this.b,0,e.length,this.d,this.e):la(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},mS;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(mS||(mS={}));var vS=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new gS(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return Um(e,this.c.scheme);if(this.d[this.e]===2)return Um(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return Xn(e,this.c.query);if(this.d[this.e]===5)return Xn(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},so=class E4{static{this.Val=Symbol("undefined_placeholder")}static wrap(t){return t===void 0?E4.Val:t}static unwrap(t){return t===E4.Val?void 0:t}},Qh=class{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},wS;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(wS||(wS={}));var en=class wh{static forUris(t=()=>!1,i=()=>!1){return new wh(new vS(t,i))}static forPaths(t=!1){return new wh(new gS(void 0,!t))}static forStrings(){return new wh(new N2)}static forConfigKeys(){return new wh(new M2)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,i){if(i){const r=i.slice(0);J4(r);for(const s of r)this.set(s,t)}else{const r=t.slice(0);J4(r);for(const s of r)this.set(s[0],s[1])}}set(t,i){const r=this.b.reset(t);let s;this.c||(this.c=new Qh,this.c.segment=r.value());const n=[];for(s=this.c;;){const a=r.cmp(s.segment);if(a>0)s.left||(s.left=new Qh,s.left.segment=r.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new Qh,s.right.segment=r.value()),n.push([1,s]),s=s.right;else if(r.hasNext())r.next(),s.mid||(s.mid=new Qh,s.mid.segment=r.value()),n.push([0,s]),s=s.mid;else break}const o=so.unwrap(s.value);s.value=so.wrap(i),s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return so.unwrap(this.d(t)?.value)}d(t){const i=this.b.reset(t);let r=this.c;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else break}return r}has(t){const i=this.d(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,i){const r=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=r.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(r.hasNext())r.next(),s.push([0,n]),n=n.mid;else break}if(n){if(i?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=[[1,n]],a=this.f(n.right,o);if(a.key){n.key=a.key,n.value=a.value,n.segment=a.segment;const c=a.right;if(o.length>1){const[u,h]=o[o.length-1];switch(u){case-1:h.left=c;break;case 0:mm(!1);case 1:mm(!1)}}else n.right=c;const l=this.g(o);if(s.length>0){const[u,h]=s[s.length-1];switch(u){case-1:h.left=l;break;case 0:h.mid=l;break;case 1:h.right=l;break}}else this.c=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}this.c=this.g(s)??this.c}}f(t,i){for(;t.left;)i.push([-1,t]),t=t.left;return t}g(t){for(let i=t.length-1;i>=0;i--){const r=t[i][1];r.updateHeight();const s=r.balanceFactor();if(s>1?(r.right.balanceFactor()>=0||(r.right=r.right.rotateRight()),t[i][1]=r.rotateLeft()):s<-1&&(r.left.balanceFactor()<=0||(r.left=r.left.rotateLeft()),t[i][1]=r.rotateRight()),i>0)switch(t[i-1][0]){case-1:t[i-1][1].left=t[i][1];break;case 1:t[i-1][1].right=t[i][1];break;case 0:t[i-1][1].mid=t[i][1];break}else return t[0][1]}}findSubstr(t){const i=this.b.reset(t);let r=this.c,s;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),s=so.unwrap(r.value)||s,r=r.mid;else break}return r&&so.unwrap(r.value)||s}findSuperstr(t){return this.h(t,!1)}h(t,i){const r=this.b.reset(t);let s=this.c;for(;s;){const n=r.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(r.hasNext())r.next(),s=s.mid;else return s.mid?this.j(s.mid):i?so.unwrap(s.value):void 0}}hasElementOrSubtree(t){return this.h(t,!0)!==void 0}forEach(t){for(const[i,r]of this)t(r,i)}*[Symbol.iterator](){yield*this.j(this.c)}j(t){const i=[];return this.l(t,i),i[Symbol.iterator]()}l(t,i){t&&(t.left&&this.l(t.left,i),t.value!==void 0&&i.push([t.key,so.unwrap(t.value)]),t.mid&&this.l(t.mid,i),t.right&&this.l(t.right,i))}_isBalanced(){const t=i=>{if(!i)return!0;const r=i.balanceFactor();return r<-1||r>1?!1:t(i.left)&&t(i.right)};return t(this.c)}};function ot(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([i,r])=>{t[i]=r&&typeof r=="object"?ot(r):r}),t}function u1(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const i=t.shift();Object.freeze(i);for(const r in i)if(bS.call(i,r)){const s=i[r];typeof s=="object"&&!Object.isFrozen(s)&&!PP(s)&&t.push(s)}}return e}var bS=Object.prototype.hasOwnProperty;function ga(e,t){return h1(e,t,new Set)}function h1(e,t,i){if(Tt(e))return e;const r=t(e);if(typeof r<"u")return r;if(Array.isArray(e)){const s=[];for(const n of e)s.push(h1(n,t,i));return s}if(bt(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const s={};for(const n in e)bS.call(e,n)&&(s[n]=h1(e[n],t,i));return i.delete(e),s}return e}function no(e,t,i=!0){return bt(e)?(bt(t)&&Object.keys(t).forEach(r=>{r in e?i&&(bt(e[r])&&bt(t[r])?no(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function Ci(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!Ci(e[i],t[i]))return!1}else{const s=[];for(r in e)s.push(r);s.sort();const n=[];for(r in t)n.push(r);if(n.sort(),!Ci(s,n))return!1;for(i=0;i<s.length;i++)if(!Ci(e[s[i]],t[s[i]]))return!1}return!0}function O2(e){const t=new Set;return JSON.stringify(e,(i,r)=>{if(bt(r)||Array.isArray(r)){if(t.has(r))return"[Circular]";t.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}function yS(e,t){const i=Object.create(null);for(const[r,s]of Object.entries(e))t(r,s)&&(i[r]=s);return i}var F2=class{constructor(){this.a=0}getNext(){return this.a++}},ml;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(ml||(ml={})),function(e){const t="error",i="warning",r="warn",s="info",n="ignore";function o(c){return c?Ss(t,c)?e.Error:Ss(i,c)||Ss(r,c)?e.Warning:Ss(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return i;case e.Info:return s;default:return n}}e.toString=a}(ml||(ml={}));var St=ml,U2=St,lz=U("notificationService"),SS;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.SILENT=2]="SILENT",e[e.URGENT=3]="URGENT"})(SS||(SS={}));var ES;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(ES||(ES={}));var CS;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(CS||(CS={}));var Zh=U("contextService");function j2(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.uri)}function H2(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.configPath)}var xS;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(xS||(xS={}));var W2=class{get folders(){return this.g}set folders(e){this.g=e,this.n()}constructor(e,t,i,r,s){this.h=e,this.j=i,this.k=r,this.l=s,this.c=en.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=en.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},kS=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Qt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function d1(e){return new kS({uri:e,index:0,name:Bm(e)},{uri:e.toString()})}var $S="code-workspace",uz=`.${$S}`,hz=[{name:d(2776,null),extensions:[$S]}],_2=class{constructor(){this.a=new Set(Object.keys(B)),this.b=new Map,this.extUri=new ua(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},ma=U("IExtHostFileSystemInfo"),ci=function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=0,s="";return s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s}}(),f1=Object.freeze({create:e=>zs(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>f1.split(e).filter(t=>!t.startsWith("#"))}),dz=new Uint32Array(10),IS;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(IS||(IS={}));var DS;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(DS||(DS={}));var PS;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(PS||(PS={}));var fz=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),pz=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),gz=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),mz=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),vz=new ta(1e4),B2=new ta(1e4);function q2(e){return V2(e,"NFD",B2)}var z2=/[^\u0000-\u0080]/;function V2(e,t,i){if(!e)return e;const r=i.get(e);if(r)return r;let s;return z2.test(e)?s=e.normalize(t):s=e,i.set(e,s),s}var wz=function(){const e=new ta(1e4),t=/[\u0300-\u036f]/g;return function(i){const r=e.get(i);if(r)return r;const s=q2(i).replace(t,""),n=(s.length===i.length?s:i).toLowerCase();return e.set(i,n),n}}();function AS(...e){return function(t,i){for(let r=0,s=e.length;r<s;r++){const n=e[r](t,i);if(n)return n}return null}}var bz=RS.bind(void 0,!1),TS=RS.bind(void 0,!0);function RS(e,t,i){if(!i||i.length<t.length)return null;let r;return e?r=jm(i,t):r=i.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function G2(e,t){if(e.length>t.length)return null;const i=t.toLowerCase().indexOf(e.toLowerCase());return i===-1?null:[{start:i,end:i+e.length}]}function J2(e,t){return e.length>t.length?null:p1(e.toLowerCase(),t.toLowerCase(),0,0)}function p1(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]===t[r]){let s=null;return(s=p1(e,t,i+1,r+1))?NS({start:r,end:r+1},s):null}return p1(e,t,i,r+1)}function g1(e){return 97<=e&&e<=122}function Xh(e){return 65<=e&&e<=90}function m1(e){return 48<=e&&e<=57}function Q2(e){return e===32||e===9||e===10||e===13}var Z2=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>Z2.add(e.charCodeAt(0)));function LS(e){return g1(e)||Xh(e)||m1(e)}function NS(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function MS(e,t){for(let i=t;i<e.length;i++){const r=e.charCodeAt(i);if(Xh(r)||m1(r)||i>0&&!LS(e.charCodeAt(i-1)))return i}return e.length}function v1(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]!==t[r].toLowerCase())return null;{let s=null,n=r+1;for(s=v1(e,t,i+1,r+1);!s&&(n=MS(t,n))<t.length;)s=v1(e,t,i+1,n),n++;return s===null?null:NS({start:r,end:r+1},s)}}function X2(e){let t=0,i=0,r=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),Xh(n)&&t++,g1(n)&&i++,LS(n)&&r++,m1(n)&&s++;const o=t/e.length,a=i/e.length,c=r/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function Y2(e){const{upperPercent:t,lowerPercent:i}=e;return i===0&&t>.6}function K2(e){const{upperPercent:t,lowerPercent:i,alphaPercent:r,numericPercent:s}=e;return i>.2&&t<.8&&r>.6&&s<.2}function eR(e){let t=0,i=0,r=0,s=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n),Xh(r)&&t++,g1(r)&&i++,Q2(r)&&s++;return(t===0||i===0)&&s===0?e.length<=30:t<=5}function OS(e,t){if(!t||(t=t.trim(),t.length===0)||!eR(e))return null;t.length>60&&(t=t.substring(0,60));const i=X2(t);if(!K2(i)){if(!Y2(i))return null;t=t.toLowerCase()}let r=null,s=0;for(e=e.toLowerCase();s<t.length&&(r=v1(e,t,0,s))===null;)s=MS(t,s+1);return r}var yz=AS(TS,OS,G2),Sz=AS(TS,OS,J2),Ez=new ta(1e4),Yh=128;function w1(){const e=[],t=[];for(let i=0;i<=Yh;i++)t[i]=0;for(let i=0;i<=Yh;i++)e.push(t.slice(0));return e}function FS(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var Cz=FS(2*Yh),xz=FS(2*Yh),kz=w1(),$z=w1(),Iz=w1(),US;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(US||(US={}));var jS;(function(e){e.Default=[-100,0];function t(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}e.isDefault=t})(jS||(jS={}));var Dz=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},b1=Object.create(null);function p(e,t){if(Oe(t)){const i=b1[t];if(i===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return b1[e]=t,{id:e}}function tR(){return b1}var iR={add:p("add",6e4),plus:p("plus",6e4),gistNew:p("gist-new",6e4),repoCreate:p("repo-create",6e4),lightbulb:p("lightbulb",60001),lightBulb:p("light-bulb",60001),repo:p("repo",60002),repoDelete:p("repo-delete",60002),gistFork:p("gist-fork",60003),repoForked:p("repo-forked",60003),gitPullRequest:p("git-pull-request",60004),gitPullRequestAbandoned:p("git-pull-request-abandoned",60004),recordKeys:p("record-keys",60005),keyboard:p("keyboard",60005),tag:p("tag",60006),gitPullRequestLabel:p("git-pull-request-label",60006),tagAdd:p("tag-add",60006),tagRemove:p("tag-remove",60006),person:p("person",60007),personFollow:p("person-follow",60007),personOutline:p("person-outline",60007),personFilled:p("person-filled",60007),sourceControl:p("source-control",60008),mirror:p("mirror",60009),mirrorPublic:p("mirror-public",60009),star:p("star",60010),starAdd:p("star-add",60010),starDelete:p("star-delete",60010),starEmpty:p("star-empty",60010),comment:p("comment",60011),commentAdd:p("comment-add",60011),alert:p("alert",60012),warning:p("warning",60012),search:p("search",60013),searchSave:p("search-save",60013),logOut:p("log-out",60014),signOut:p("sign-out",60014),logIn:p("log-in",60015),signIn:p("sign-in",60015),eye:p("eye",60016),eyeUnwatch:p("eye-unwatch",60016),eyeWatch:p("eye-watch",60016),circleFilled:p("circle-filled",60017),primitiveDot:p("primitive-dot",60017),closeDirty:p("close-dirty",60017),debugBreakpoint:p("debug-breakpoint",60017),debugBreakpointDisabled:p("debug-breakpoint-disabled",60017),debugHint:p("debug-hint",60017),terminalDecorationSuccess:p("terminal-decoration-success",60017),primitiveSquare:p("primitive-square",60018),edit:p("edit",60019),pencil:p("pencil",60019),info:p("info",60020),issueOpened:p("issue-opened",60020),gistPrivate:p("gist-private",60021),gitForkPrivate:p("git-fork-private",60021),lock:p("lock",60021),mirrorPrivate:p("mirror-private",60021),close:p("close",60022),removeClose:p("remove-close",60022),x:p("x",60022),repoSync:p("repo-sync",60023),sync:p("sync",60023),clone:p("clone",60024),desktopDownload:p("desktop-download",60024),beaker:p("beaker",60025),microscope:p("microscope",60025),vm:p("vm",60026),deviceDesktop:p("device-desktop",60026),file:p("file",60027),more:p("more",60028),ellipsis:p("ellipsis",60028),kebabHorizontal:p("kebab-horizontal",60028),mailReply:p("mail-reply",60029),reply:p("reply",60029),organization:p("organization",60030),organizationFilled:p("organization-filled",60030),organizationOutline:p("organization-outline",60030),newFile:p("new-file",60031),fileAdd:p("file-add",60031),newFolder:p("new-folder",60032),fileDirectoryCreate:p("file-directory-create",60032),trash:p("trash",60033),trashcan:p("trashcan",60033),history:p("history",60034),clock:p("clock",60034),folder:p("folder",60035),fileDirectory:p("file-directory",60035),symbolFolder:p("symbol-folder",60035),logoGithub:p("logo-github",60036),markGithub:p("mark-github",60036),github:p("github",60036),terminal:p("terminal",60037),console:p("console",60037),repl:p("repl",60037),zap:p("zap",60038),symbolEvent:p("symbol-event",60038),error:p("error",60039),stop:p("stop",60039),variable:p("variable",60040),symbolVariable:p("symbol-variable",60040),array:p("array",60042),symbolArray:p("symbol-array",60042),symbolModule:p("symbol-module",60043),symbolPackage:p("symbol-package",60043),symbolNamespace:p("symbol-namespace",60043),symbolObject:p("symbol-object",60043),symbolMethod:p("symbol-method",60044),symbolFunction:p("symbol-function",60044),symbolConstructor:p("symbol-constructor",60044),symbolBoolean:p("symbol-boolean",60047),symbolNull:p("symbol-null",60047),symbolNumeric:p("symbol-numeric",60048),symbolNumber:p("symbol-number",60048),symbolStructure:p("symbol-structure",60049),symbolStruct:p("symbol-struct",60049),symbolParameter:p("symbol-parameter",60050),symbolTypeParameter:p("symbol-type-parameter",60050),symbolKey:p("symbol-key",60051),symbolText:p("symbol-text",60051),symbolReference:p("symbol-reference",60052),goToFile:p("go-to-file",60052),symbolEnum:p("symbol-enum",60053),symbolValue:p("symbol-value",60053),symbolRuler:p("symbol-ruler",60054),symbolUnit:p("symbol-unit",60054),activateBreakpoints:p("activate-breakpoints",60055),archive:p("archive",60056),arrowBoth:p("arrow-both",60057),arrowDown:p("arrow-down",60058),arrowLeft:p("arrow-left",60059),arrowRight:p("arrow-right",60060),arrowSmallDown:p("arrow-small-down",60061),arrowSmallLeft:p("arrow-small-left",60062),arrowSmallRight:p("arrow-small-right",60063),arrowSmallUp:p("arrow-small-up",60064),arrowUp:p("arrow-up",60065),bell:p("bell",60066),bold:p("bold",60067),book:p("book",60068),bookmark:p("bookmark",60069),debugBreakpointConditionalUnverified:p("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:p("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:p("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:p("debug-breakpoint-data-unverified",60072),debugBreakpointData:p("debug-breakpoint-data",60073),debugBreakpointDataDisabled:p("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:p("debug-breakpoint-log-unverified",60074),debugBreakpointLog:p("debug-breakpoint-log",60075),debugBreakpointLogDisabled:p("debug-breakpoint-log-disabled",60075),briefcase:p("briefcase",60076),broadcast:p("broadcast",60077),browser:p("browser",60078),bug:p("bug",60079),calendar:p("calendar",60080),caseSensitive:p("case-sensitive",60081),check:p("check",60082),checklist:p("checklist",60083),chevronDown:p("chevron-down",60084),chevronLeft:p("chevron-left",60085),chevronRight:p("chevron-right",60086),chevronUp:p("chevron-up",60087),chromeClose:p("chrome-close",60088),chromeMaximize:p("chrome-maximize",60089),chromeMinimize:p("chrome-minimize",60090),chromeRestore:p("chrome-restore",60091),circleOutline:p("circle-outline",60092),circle:p("circle",60092),debugBreakpointUnverified:p("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:p("terminal-decoration-incomplete",60092),circleSlash:p("circle-slash",60093),circuitBoard:p("circuit-board",60094),clearAll:p("clear-all",60095),clippy:p("clippy",60096),closeAll:p("close-all",60097),cloudDownload:p("cloud-download",60098),cloudUpload:p("cloud-upload",60099),code:p("code",60100),collapseAll:p("collapse-all",60101),colorMode:p("color-mode",60102),commentDiscussion:p("comment-discussion",60103),creditCard:p("credit-card",60105),dash:p("dash",60108),dashboard:p("dashboard",60109),database:p("database",60110),debugContinue:p("debug-continue",60111),debugDisconnect:p("debug-disconnect",60112),debugPause:p("debug-pause",60113),debugRestart:p("debug-restart",60114),debugStart:p("debug-start",60115),debugStepInto:p("debug-step-into",60116),debugStepOut:p("debug-step-out",60117),debugStepOver:p("debug-step-over",60118),debugStop:p("debug-stop",60119),debug:p("debug",60120),deviceCameraVideo:p("device-camera-video",60121),deviceCamera:p("device-camera",60122),deviceMobile:p("device-mobile",60123),diffAdded:p("diff-added",60124),diffIgnored:p("diff-ignored",60125),diffModified:p("diff-modified",60126),diffRemoved:p("diff-removed",60127),diffRenamed:p("diff-renamed",60128),diff:p("diff",60129),diffSidebyside:p("diff-sidebyside",60129),discard:p("discard",60130),editorLayout:p("editor-layout",60131),emptyWindow:p("empty-window",60132),exclude:p("exclude",60133),extensions:p("extensions",60134),eyeClosed:p("eye-closed",60135),fileBinary:p("file-binary",60136),fileCode:p("file-code",60137),fileMedia:p("file-media",60138),filePdf:p("file-pdf",60139),fileSubmodule:p("file-submodule",60140),fileSymlinkDirectory:p("file-symlink-directory",60141),fileSymlinkFile:p("file-symlink-file",60142),fileZip:p("file-zip",60143),files:p("files",60144),filter:p("filter",60145),flame:p("flame",60146),foldDown:p("fold-down",60147),foldUp:p("fold-up",60148),fold:p("fold",60149),folderActive:p("folder-active",60150),folderOpened:p("folder-opened",60151),gear:p("gear",60152),gift:p("gift",60153),gistSecret:p("gist-secret",60154),gist:p("gist",60155),gitCommit:p("git-commit",60156),gitCompare:p("git-compare",60157),compareChanges:p("compare-changes",60157),gitMerge:p("git-merge",60158),githubAction:p("github-action",60159),githubAlt:p("github-alt",60160),globe:p("globe",60161),grabber:p("grabber",60162),graph:p("graph",60163),gripper:p("gripper",60164),heart:p("heart",60165),home:p("home",60166),horizontalRule:p("horizontal-rule",60167),hubot:p("hubot",60168),inbox:p("inbox",60169),issueReopened:p("issue-reopened",60171),issues:p("issues",60172),italic:p("italic",60173),jersey:p("jersey",60174),json:p("json",60175),bracket:p("bracket",60175),kebabVertical:p("kebab-vertical",60176),key:p("key",60177),law:p("law",60178),lightbulbAutofix:p("lightbulb-autofix",60179),linkExternal:p("link-external",60180),link:p("link",60181),listOrdered:p("list-ordered",60182),listUnordered:p("list-unordered",60183),liveShare:p("live-share",60184),loading:p("loading",60185),location:p("location",60186),mailRead:p("mail-read",60187),mail:p("mail",60188),markdown:p("markdown",60189),megaphone:p("megaphone",60190),mention:p("mention",60191),milestone:p("milestone",60192),gitPullRequestMilestone:p("git-pull-request-milestone",60192),mortarBoard:p("mortar-board",60193),move:p("move",60194),multipleWindows:p("multiple-windows",60195),mute:p("mute",60196),noNewline:p("no-newline",60197),note:p("note",60198),octoface:p("octoface",60199),openPreview:p("open-preview",60200),package:p("package",60201),paintcan:p("paintcan",60202),pin:p("pin",60203),play:p("play",60204),run:p("run",60204),plug:p("plug",60205),preserveCase:p("preserve-case",60206),preview:p("preview",60207),project:p("project",60208),pulse:p("pulse",60209),question:p("question",60210),quote:p("quote",60211),radioTower:p("radio-tower",60212),reactions:p("reactions",60213),references:p("references",60214),refresh:p("refresh",60215),regex:p("regex",60216),remoteExplorer:p("remote-explorer",60217),remote:p("remote",60218),remove:p("remove",60219),replaceAll:p("replace-all",60220),replace:p("replace",60221),repoClone:p("repo-clone",60222),repoForcePush:p("repo-force-push",60223),repoPull:p("repo-pull",60224),repoPush:p("repo-push",60225),report:p("report",60226),requestChanges:p("request-changes",60227),rocket:p("rocket",60228),rootFolderOpened:p("root-folder-opened",60229),rootFolder:p("root-folder",60230),rss:p("rss",60231),ruby:p("ruby",60232),saveAll:p("save-all",60233),saveAs:p("save-as",60234),save:p("save",60235),screenFull:p("screen-full",60236),screenNormal:p("screen-normal",60237),searchStop:p("search-stop",60238),server:p("server",60240),settingsGear:p("settings-gear",60241),settings:p("settings",60242),shield:p("shield",60243),smiley:p("smiley",60244),sortPrecedence:p("sort-precedence",60245),splitHorizontal:p("split-horizontal",60246),splitVertical:p("split-vertical",60247),squirrel:p("squirrel",60248),starFull:p("star-full",60249),starHalf:p("star-half",60250),symbolClass:p("symbol-class",60251),symbolColor:p("symbol-color",60252),symbolConstant:p("symbol-constant",60253),symbolEnumMember:p("symbol-enum-member",60254),symbolField:p("symbol-field",60255),symbolFile:p("symbol-file",60256),symbolInterface:p("symbol-interface",60257),symbolKeyword:p("symbol-keyword",60258),symbolMisc:p("symbol-misc",60259),symbolOperator:p("symbol-operator",60260),symbolProperty:p("symbol-property",60261),wrench:p("wrench",60261),wrenchSubaction:p("wrench-subaction",60261),symbolSnippet:p("symbol-snippet",60262),tasklist:p("tasklist",60263),telescope:p("telescope",60264),textSize:p("text-size",60265),threeBars:p("three-bars",60266),thumbsdown:p("thumbsdown",60267),thumbsup:p("thumbsup",60268),tools:p("tools",60269),triangleDown:p("triangle-down",60270),triangleLeft:p("triangle-left",60271),triangleRight:p("triangle-right",60272),triangleUp:p("triangle-up",60273),twitter:p("twitter",60274),unfold:p("unfold",60275),unlock:p("unlock",60276),unmute:p("unmute",60277),unverified:p("unverified",60278),verified:p("verified",60279),versions:p("versions",60280),vmActive:p("vm-active",60281),vmOutline:p("vm-outline",60282),vmRunning:p("vm-running",60283),watch:p("watch",60284),whitespace:p("whitespace",60285),wholeWord:p("whole-word",60286),window:p("window",60287),wordWrap:p("word-wrap",60288),zoomIn:p("zoom-in",60289),zoomOut:p("zoom-out",60290),listFilter:p("list-filter",60291),listFlat:p("list-flat",60292),listSelection:p("list-selection",60293),selection:p("selection",60293),listTree:p("list-tree",60294),debugBreakpointFunctionUnverified:p("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:p("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:p("debug-breakpoint-function-disabled",60296),debugStackframeActive:p("debug-stackframe-active",60297),circleSmallFilled:p("circle-small-filled",60298),debugStackframeDot:p("debug-stackframe-dot",60298),terminalDecorationMark:p("terminal-decoration-mark",60298),debugStackframe:p("debug-stackframe",60299),debugStackframeFocused:p("debug-stackframe-focused",60299),debugBreakpointUnsupported:p("debug-breakpoint-unsupported",60300),symbolString:p("symbol-string",60301),debugReverseContinue:p("debug-reverse-continue",60302),debugStepBack:p("debug-step-back",60303),debugRestartFrame:p("debug-restart-frame",60304),debugAlt:p("debug-alt",60305),callIncoming:p("call-incoming",60306),callOutgoing:p("call-outgoing",60307),menu:p("menu",60308),expandAll:p("expand-all",60309),feedback:p("feedback",60310),gitPullRequestReviewer:p("git-pull-request-reviewer",60310),groupByRefType:p("group-by-ref-type",60311),ungroupByRefType:p("ungroup-by-ref-type",60312),account:p("account",60313),gitPullRequestAssignee:p("git-pull-request-assignee",60313),bellDot:p("bell-dot",60314),debugConsole:p("debug-console",60315),library:p("library",60316),output:p("output",60317),runAll:p("run-all",60318),syncIgnored:p("sync-ignored",60319),pinned:p("pinned",60320),githubInverted:p("github-inverted",60321),serverProcess:p("server-process",60322),serverEnvironment:p("server-environment",60323),pass:p("pass",60324),issueClosed:p("issue-closed",60324),stopCircle:p("stop-circle",60325),playCircle:p("play-circle",60326),record:p("record",60327),debugAltSmall:p("debug-alt-small",60328),vmConnect:p("vm-connect",60329),cloud:p("cloud",60330),merge:p("merge",60331),export:p("export",60332),graphLeft:p("graph-left",60333),magnet:p("magnet",60334),notebook:p("notebook",60335),redo:p("redo",60336),checkAll:p("check-all",60337),pinnedDirty:p("pinned-dirty",60338),passFilled:p("pass-filled",60339),circleLargeFilled:p("circle-large-filled",60340),circleLarge:p("circle-large",60341),circleLargeOutline:p("circle-large-outline",60341),combine:p("combine",60342),gather:p("gather",60342),table:p("table",60343),variableGroup:p("variable-group",60344),typeHierarchy:p("type-hierarchy",60345),typeHierarchySub:p("type-hierarchy-sub",60346),typeHierarchySuper:p("type-hierarchy-super",60347),gitPullRequestCreate:p("git-pull-request-create",60348),runAbove:p("run-above",60349),runBelow:p("run-below",60350),notebookTemplate:p("notebook-template",60351),debugRerun:p("debug-rerun",60352),workspaceTrusted:p("workspace-trusted",60353),workspaceUntrusted:p("workspace-untrusted",60354),workspaceUnknown:p("workspace-unknown",60355),terminalCmd:p("terminal-cmd",60356),terminalDebian:p("terminal-debian",60357),terminalLinux:p("terminal-linux",60358),terminalPowershell:p("terminal-powershell",60359),terminalTmux:p("terminal-tmux",60360),terminalUbuntu:p("terminal-ubuntu",60361),terminalBash:p("terminal-bash",60362),arrowSwap:p("arrow-swap",60363),copy:p("copy",60364),personAdd:p("person-add",60365),filterFilled:p("filter-filled",60366),wand:p("wand",60367),debugLineByLine:p("debug-line-by-line",60368),inspect:p("inspect",60369),layers:p("layers",60370),layersDot:p("layers-dot",60371),layersActive:p("layers-active",60372),compass:p("compass",60373),compassDot:p("compass-dot",60374),compassActive:p("compass-active",60375),azure:p("azure",60376),issueDraft:p("issue-draft",60377),gitPullRequestClosed:p("git-pull-request-closed",60378),gitPullRequestDraft:p("git-pull-request-draft",60379),debugAll:p("debug-all",60380),debugCoverage:p("debug-coverage",60381),runErrors:p("run-errors",60382),folderLibrary:p("folder-library",60383),debugContinueSmall:p("debug-continue-small",60384),beakerStop:p("beaker-stop",60385),graphLine:p("graph-line",60386),graphScatter:p("graph-scatter",60387),pieChart:p("pie-chart",60388),bracketDot:p("bracket-dot",60389),bracketError:p("bracket-error",60390),lockSmall:p("lock-small",60391),azureDevops:p("azure-devops",60392),verifiedFilled:p("verified-filled",60393),newline:p("newline",60394),layout:p("layout",60395),layoutActivitybarLeft:p("layout-activitybar-left",60396),layoutActivitybarRight:p("layout-activitybar-right",60397),layoutPanelLeft:p("layout-panel-left",60398),layoutPanelCenter:p("layout-panel-center",60399),layoutPanelJustify:p("layout-panel-justify",60400),layoutPanelRight:p("layout-panel-right",60401),layoutPanel:p("layout-panel",60402),layoutSidebarLeft:p("layout-sidebar-left",60403),layoutSidebarRight:p("layout-sidebar-right",60404),layoutStatusbar:p("layout-statusbar",60405),layoutMenubar:p("layout-menubar",60406),layoutCentered:p("layout-centered",60407),target:p("target",60408),indent:p("indent",60409),recordSmall:p("record-small",60410),errorSmall:p("error-small",60411),terminalDecorationError:p("terminal-decoration-error",60411),arrowCircleDown:p("arrow-circle-down",60412),arrowCircleLeft:p("arrow-circle-left",60413),arrowCircleRight:p("arrow-circle-right",60414),arrowCircleUp:p("arrow-circle-up",60415),layoutSidebarRightOff:p("layout-sidebar-right-off",60416),layoutPanelOff:p("layout-panel-off",60417),layoutSidebarLeftOff:p("layout-sidebar-left-off",60418),blank:p("blank",60419),heartFilled:p("heart-filled",60420),map:p("map",60421),mapHorizontal:p("map-horizontal",60421),foldHorizontal:p("fold-horizontal",60421),mapFilled:p("map-filled",60422),mapHorizontalFilled:p("map-horizontal-filled",60422),foldHorizontalFilled:p("fold-horizontal-filled",60422),circleSmall:p("circle-small",60423),bellSlash:p("bell-slash",60424),bellSlashDot:p("bell-slash-dot",60425),commentUnresolved:p("comment-unresolved",60426),gitPullRequestGoToChanges:p("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:p("git-pull-request-new-changes",60428),searchFuzzy:p("search-fuzzy",60429),commentDraft:p("comment-draft",60430),send:p("send",60431),sparkle:p("sparkle",60432),insert:p("insert",60433),mic:p("mic",60434),thumbsdownFilled:p("thumbsdown-filled",60435),thumbsupFilled:p("thumbsup-filled",60436),coffee:p("coffee",60437),snake:p("snake",60438),game:p("game",60439),vr:p("vr",60440),chip:p("chip",60441),piano:p("piano",60442),music:p("music",60443),micFilled:p("mic-filled",60444),repoFetch:p("repo-fetch",60445),copilot:p("copilot",60446),lightbulbSparkle:p("lightbulb-sparkle",60447),robot:p("robot",60448),sparkleFilled:p("sparkle-filled",60449),diffSingle:p("diff-single",60450),diffMultiple:p("diff-multiple",60451),surroundWith:p("surround-with",60452),share:p("share",60453),gitStash:p("git-stash",60454),gitStashApply:p("git-stash-apply",60455),gitStashPop:p("git-stash-pop",60456),vscode:p("vscode",60457),vscodeInsiders:p("vscode-insiders",60458),codeOss:p("code-oss",60459),runCoverage:p("run-coverage",60460),runAllCoverage:p("run-all-coverage",60461),coverage:p("coverage",60462),githubProject:p("github-project",60463),mapVertical:p("map-vertical",60464),foldVertical:p("fold-vertical",60464),mapVerticalFilled:p("map-vertical-filled",60465),foldVerticalFilled:p("fold-vertical-filled",60465),goToSearch:p("go-to-search",60466),percentage:p("percentage",60467),sortPercentage:p("sort-percentage",60467),attach:p("attach",60468),goToEditingSession:p("go-to-editing-session",60469),editSession:p("edit-session",60470),codeReview:p("code-review",60471),copilotWarning:p("copilot-warning",60472),python:p("python",60473),copilotLarge:p("copilot-large",60474),copilotWarningLarge:p("copilot-warning-large",60475),keyboardTab:p("keyboard-tab",60476),copilotBlocked:p("copilot-blocked",60477),copilotNotConnected:p("copilot-not-connected",60478),flag:p("flag",60479),lightbulbEmpty:p("lightbulb-empty",60480),symbolMethodArrow:p("symbol-method-arrow",60481),copilotUnavailable:p("copilot-unavailable",60482),repoPinned:p("repo-pinned",60483),keyboardTabAbove:p("keyboard-tab-above",60484),keyboardTabBelow:p("keyboard-tab-below",60485),gitPullRequestDone:p("git-pull-request-done",60486),mcp:p("mcp",60487),extensionsLarge:p("extensions-large",60488),layoutPanelDock:p("layout-panel-dock",60489),layoutSidebarLeftDock:p("layout-sidebar-left-dock",60490),layoutSidebarRightDock:p("layout-sidebar-right-dock",60491),copilotInProgress:p("copilot-in-progress",60492),copilotError:p("copilot-error",60493),copilotSuccess:p("copilot-success",60494),chatSparkle:p("chat-sparkle",60495),searchSparkle:p("search-sparkle",60496),editSparkle:p("edit-sparkle",60497),copilotSnooze:p("copilot-snooze",60498),sendToRemoteAgent:p("send-to-remote-agent",60499),commentDiscussionSparkle:p("comment-discussion-sparkle",60500),chatSparkleWarning:p("chat-sparkle-warning",60501),chatSparkleError:p("chat-sparkle-error",60502),collection:p("collection",60503),newCollection:p("new-collection",60504),thinking:p("thinking",60505),build:p("build",60506),commentDiscussionQuote:p("comment-discussion-quote",60507),cursor:p("cursor",60508),eraser:p("eraser",60509),fileText:p("file-text",60510),quotes:p("quotes",60512),rename:p("rename",60513),runWithDeps:p("run-with-deps",60514),debugConnected:p("debug-connected",60515),strikethrough:p("strikethrough",60516),openInProduct:p("open-in-product",60517),indexZero:p("index-zero",60518),agent:p("agent",60519),editCode:p("edit-code",60520),repoSelected:p("repo-selected",60521),skip:p("skip",60522),mergeInto:p("merge-into",60523),gitBranchChanges:p("git-branch-changes",60524),gitBranchStagedChanges:p("git-branch-staged-changes",60525),gitBranchConflicts:p("git-branch-conflicts",60526),gitBranch:p("git-branch",60527),gitBranchCreate:p("git-branch-create",60527),gitBranchDelete:p("git-branch-delete",60527),searchLarge:p("search-large",60528),terminalGitBash:p("terminal-git-bash",60529),windowActive:p("window-active",60530),forward:p("forward",60531),download:p("download",60532),clockface:p("clockface",60533),unarchive:p("unarchive",60534),sessionInProgress:p("session-in-progress",60535),collectionSmall:p("collection-small",60536),vmSmall:p("vm-small",60537),cloudSmall:p("cloud-small",60538),addSmall:p("add-small",60539),removeSmall:p("remove-small",60540),worktreeSmall:p("worktree-small",60541),worktree:p("worktree",60542)},rR={dialogError:p("dialog-error","error"),dialogWarning:p("dialog-warning","warning"),dialogInfo:p("dialog-info","info"),dialogClose:p("dialog-close","close"),treeItemExpanded:p("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:p("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:p("tree-filter-on-type-off","list-selection"),treeFilterClear:p("tree-filter-clear","close"),treeItemLoading:p("tree-item-loading","loading"),menuSelection:p("menu-selection","check"),menuSubmenu:p("menu-submenu","chevron-right"),menuBarMore:p("menubar-more","more"),scrollbarButtonLeft:p("scrollbar-button-left","triangle-left"),scrollbarButtonRight:p("scrollbar-button-right","triangle-right"),scrollbarButtonUp:p("scrollbar-button-up","triangle-up"),scrollbarButtonDown:p("scrollbar-button-down","triangle-down"),toolBarMore:p("toolbar-more","more"),quickInputBack:p("quick-input-back","arrow-left"),dropDownButton:p("drop-down-button",60084),symbolCustomColor:p("symbol-customcolor",60252),exportIcon:p("export",60332),workspaceUnspecified:p("workspace-unspecified",60355),newLine:p("newline",60394),thumbsDownFilled:p("thumbsdown-filled",60435),thumbsUpFilled:p("thumbsup-filled",60436),gitFetch:p("git-fetch",60445),lightbulbSparkleAutofix:p("lightbulb-sparkle-autofix",60447),debugBreakpointPending:p("debug-breakpoint-pending",60377)},ie={...iR,...rR},va;(function(e){function t(i){return!!i&&typeof i=="object"&&typeof i.id=="string"}e.isThemeColor=t})(va||(va={}));var vt;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(m){const w=t.exec(m.id);if(!w)return i(ie.error);const[,S,C]=w,k=["codicon","codicon-"+S];return C&&k.push("codicon-modifier-"+C.substring(1)),k}e.asClassNameArray=i;function r(m){return i(m).join(" ")}e.asClassName=r;function s(m){return"."+i(m).join(".")}e.asCSSSelector=s;function n(m){return!!m&&typeof m=="object"&&typeof m.id=="string"&&(typeof m.color>"u"||va.isThemeColor(m.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(m){const w=o.exec(m);if(!w)return;const[,S]=w;return{id:S}}e.fromString=a;function c(m){return{id:m}}e.fromId=c;function l(m,w){let S=m.id;const C=S.lastIndexOf("~");return C!==-1&&(S=S.substring(0,C)),w&&(S=`${S}~${w}`),{id:S}}e.modify=l;function u(m){const w=m.id.lastIndexOf("~");if(w!==-1)return m.id.substring(w+1)}e.getModifier=u;function h(m,w){return m.id===w.id&&m.color?.id===w.color?.id}e.isEqual=h;function f(m){return m?.id===ie.file.id}e.isFile=f;function g(m){return m?.id===ie.folder.id}e.isFolder=g})(vt||(vt={}));var y1=new RegExp(`\\$\\(${vt.iconNameExpression}(?:${vt.iconModifierExpression})?\\)`,"g"),sR=new RegExp(`(\\\\)?${y1.source}`,"g");function nR(e){return e.replace(sR,(t,i)=>i?t:`\\${t}`)}var Pz=new RegExp(`\\\\${y1.source}`,"g"),Az=new RegExp(`(\\s)?(\\\\)?${y1.source}(\\s)?`,"g"),Tz=new RegExp(`\\$\\(${vt.iconNameCharacter}+\\)`,"g"),HS;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(HS||(HS={}));var tn=class t3{static lift(t){const i=new t3(t.value,t);return i.uris=t.uris,i.baseUri=t.baseUri?y.revive(t.baseUri):void 0,i}constructor(t="",i=!1){if(this.value=t,typeof this.value!="string")throw Ce("value");typeof i=="boolean"?(this.isTrusted=i,this.supportThemeIcons=!1,this.supportHtml=!1,this.supportAlertSyntax=!1):(this.isTrusted=i.isTrusted??void 0,this.supportThemeIcons=i.supportThemeIcons??!1,this.supportHtml=i.supportHtml??!1,this.supportAlertSyntax=i.supportAlertSyntax??!1)}appendText(t,i=0){return this.value+=oR(this.supportThemeIcons?nR(t):t).replace(/([ \t]+)/g,(r,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,i===1?`\\
`:`

`),this}appendMarkdown(t){return this.value+=t,this}appendCodeblock(t,i){return this.value+=`
${aR(i,t)}
`,this}appendLink(t,i,r){return this.value+="[",this.value+=this.c(i,"]"),this.value+="](",this.value+=this.c(String(t),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(t,i){const r=new RegExp(Zn(i),"g");return t.replace(r,(s,n)=>t.charAt(n-1)!=="\\"?`\\${s}`:s)}};function rn(e){return e instanceof tn?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0)&&(typeof e.supportAlertSyntax=="boolean"||e.supportAlertSyntax===void 0):!1}function oR(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function aR(e,t){const i=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,r=i>=3?i+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join(`
`)}function cR(e){const t=[],i=e.split("|").map(s=>s.trim());e=i[0];const r=i[1];if(r){const s=/height=(\d+)/.exec(r),n=/width=(\d+)/.exec(r),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function S1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var oo=S1();function WS(e){oo=e}var _S=/[&<>"']/,lR=new RegExp(_S.source,"g"),BS=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,uR=new RegExp(BS.source,"g"),hR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qS=e=>hR[e];function Zi(e,t){if(t){if(_S.test(e))return e.replace(lR,qS)}else if(BS.test(e))return e.replace(uR,qS);return e}var dR=/(^|[^\[])\^/g;function ut(e,t){let i=typeof e=="string"?e:e.source;t=t||"";const r={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(dR,"$1"),i=i.replace(s,o),r},getRegex:()=>new RegExp(i,t)};return r}function zS(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var vl={exec:()=>null};function VS(e,t){const i=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=i.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function wl(e,t,i){const r=e.length;if(r===0)return"";let s=0;for(;s<r;){const n=e.charAt(r-s-1);if(n===t&&!i)s++;else if(n!==t&&i)s++;else break}return e.slice(0,r-s)}function fR(e,t){if(e.indexOf(t[1])===-1)return-1;let i=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&(i--,i<0))return r;return-1}function GS(e,t,i,r){const s=t.href,n=t.title?Zi(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:i,href:s,title:n,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:i,href:s,title:n,text:Zi(o)}}function pR(e,t){const i=e.match(/^(\s+)(?:```)/);if(i===null)return t;const r=i[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}var Kh=class{options;rules;lexer;constructor(e){this.options=e||oo}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:wl(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=pR(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=wl(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:wl(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=wl(t[0],`
`).split(`
`),r="",s="";const n=[];for(;i.length>0;){let o=!1;const a=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))a.push(i[c]),o=!0;else if(!o)a.push(i[c]);else break;i=i.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,i.length===0)break;const f=n[n.length-1];if(f?.type==="code")break;if(f?.type==="blockquote"){const g=f,m=g.raw+`
`+i.join(`
`),w=this.blockquote(m);n[n.length-1]=w,r=r.substring(0,r.length-g.raw.length)+w.raw,s=s.substring(0,s.length-g.text.length)+w.text;break}else if(f?.type==="list"){const g=f,m=g.raw+`
`+i.join(`
`),w=this.list(m);n[n.length-1]=w,r=r.substring(0,r.length-f.raw.length)+w.raw,s=s.substring(0,s.length-g.raw.length)+w.raw,i=m.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const n=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,S=>" ".repeat(3*S.length)),h=e.split(`
`,1)[0],f=!u.trim(),g=0;if(this.options.pedantic?(g=2,l=u.trimStart()):f?g=t[1].length+1:(g=t[2].search(/[^ ]/),g=g>4?1:g,l=u.slice(g),g+=t[1].length),f&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const S=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),C=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),k=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),A=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const G=e.split(`
`,1)[0];if(h=G,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),k.test(h)||A.test(h)||S.test(h)||C.test(e))break;if(h.search(/[^ ]/)>=g||!h.trim())l+=`
`+h.slice(g);else{if(f||u.search(/[^ ]/)>=4||k.test(u)||A.test(u)||C.test(u))break;l+=`
`+h}!f&&!h.trim()&&(f=!0),c+=G+`
`,e=e.substring(G.length+1),u=h.slice(g)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let m=null,w;this.options.gfm&&(m=/^\[[ xX]\] /.exec(l),m&&(w=m[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!m,checked:w,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=VS(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<i.length;o++)n.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(VS(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Zi(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const n=wl(i.slice(0,-1),"\\");if((i.length-n.length)%2===0)return}else{const n=fR(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);n&&(r=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),GS(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const r=(i[2]||i[1]).replace(/\s+/g," "),s=t[r.toLowerCase()];if(!s){const n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return GS(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const n=[...r[0]].length-1;let o,a,c=n,l=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(r=u.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){c+=a;continue}else if((r[5]||r[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...r[0]][0].length,f=e.slice(0,n+r.index+h+a);if(Math.min(n,a)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const g=f.slice(2,-2);return{type:"strong",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Zi(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return t[2]==="@"?(i=Zi(t[1]),r="mailto:"+i):(i=Zi(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=Zi(t[0]),r="mailto:"+i;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);i=Zi(t[0]),t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=Zi(t[0]),{type:"text",raw:t[0],text:i}}}},gR=/^(?: *(?:\n|$))+/,mR=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,vR=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,bl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,wR=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,JS=/(?:[*+-]|\d{1,9}[.)])/,QS=ut(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,JS).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),E1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,bR=/^[^\n]+/,C1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,yR=ut(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",C1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),SR=ut(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,JS).getRegex(),ed="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",x1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ER=ut("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",x1).replace("tag",ed).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ZS=ut(E1).replace("hr",bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex(),CR=ut(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ZS).getRegex(),k1={blockquote:CR,code:mR,def:yR,fences:vR,heading:wR,hr:bl,html:ER,lheading:QS,list:SR,newline:gR,paragraph:ZS,table:vl,text:bR},XS=ut("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex(),xR={...k1,table:XS,paragraph:ut(E1).replace("hr",bl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",XS).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ed).getRegex()},kR={...k1,html:ut(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",x1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:vl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ut(E1).replace("hr",bl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",QS).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},YS=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,$R=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,KS=/^( {2,}|\\)\n(?!\s*$)/,IR=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,yl="\\p{P}\\p{S}",DR=ut(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,yl).getRegex(),PR=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,AR=ut(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,yl).getRegex(),TR=ut("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,yl).getRegex(),RR=ut("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,yl).getRegex(),LR=ut(/\\([punct])/,"gu").replace(/punct/g,yl).getRegex(),NR=ut(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),MR=ut(x1).replace("(?:-->|$)","-->").getRegex(),OR=ut("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",MR).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),td=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,FR=ut(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",td).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),e7=ut(/^!?\[(label)\]\[(ref)\]/).replace("label",td).replace("ref",C1).getRegex(),t7=ut(/^!?\[(ref)\](?:\[\])?/).replace("ref",C1).getRegex(),UR=ut("reflink|nolink(?!\\()","g").replace("reflink",e7).replace("nolink",t7).getRegex(),$1={_backpedal:vl,anyPunctuation:LR,autolink:NR,blockSkip:PR,br:KS,code:$R,del:vl,emStrongLDelim:AR,emStrongRDelimAst:TR,emStrongRDelimUnd:RR,escape:YS,link:FR,nolink:t7,punctuation:DR,reflink:e7,reflinkSearch:UR,tag:OR,text:IR,url:vl},jR={...$1,link:ut(/^!?\[(label)\]\((.*?)\)/).replace("label",td).getRegex(),reflink:ut(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",td).getRegex()},I1={...$1,escape:ut(YS).replace("])","~|])").getRegex(),url:ut(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},HR={...I1,br:ut(KS).replace("{2,}","*").getRegex(),text:ut(I1.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},id={normal:k1,gfm:xR,pedantic:kR},Sl={normal:$1,gfm:I1,breaks:HR,pedantic:jR},ao=class C4{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||oo,this.options.tokenizer=this.options.tokenizer||new Kh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:id.normal,inline:Sl.normal};this.options.pedantic?(i.block=id.pedantic,i.inline=Sl.pedantic):this.options.gfm&&(i.block=id.gfm,this.options.breaks?i.inline=Sl.breaks:i.inline=Sl.gfm),this.tokenizer.rules=i}static get rules(){return{block:id,inline:Sl}}static lex(t,i){return new C4(i).lex(t)}static lexInline(t,i){return new C4(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){const r=this.inlineQueue[i];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,i=[],r=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=i[i.length-1],r&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s),r=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let r,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,i))?(t=t.substring(r.raw.length),i.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.emStrong(t,o,l)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),i.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),i.push(r);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(n)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,s=i[i.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return i}},rd=class{options;parser;constructor(e){this.options=e||oo}space(e){return""}code({text:e,lang:t,escaped:i}){const r=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+Zi(r)+'">'+(i?s:Zi(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:Zi(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let r="";for(let o=0;o<e.items.length;o++){const a=e.items[o];r+=this.listitem(a)}const s=t?"ol":"ul",n=t&&i!==1?' start="'+i+'"':"";return"<"+s+n+`>
`+r+"</"+s+`>
`}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);t+=this.tablerow({text:i});let r="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];i="";for(let o=0;o<n.length;o++)i+=this.tablecell(n[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const r=this.parser.parseInline(i),s=zS(e);if(s===null)return r;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>",n}image({href:e,title:t,text:i}){const r=zS(e);if(r===null)return i;e=r;let s=`<img src="${e}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},D1=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},co=class x4{options;renderer;textRenderer;constructor(t){this.options=t||oo,this.options.renderer=this.options.renderer||new rd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new D1}static parse(t,i){return new x4(i).parse(t)}static parseInline(t,i){return new x4(i).parseInline(t)}parse(t,i=!0){let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=c||"";continue}}const o=n;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);i?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):r+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(t,i){i=i||this.renderer;let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=a||"";continue}}const o=n;switch(o.type){case"escape":{r+=i.text(o);break}case"html":{r+=i.html(o);break}case"link":{r+=i.link(o);break}case"image":{r+=i.image(o);break}case"strong":{r+=i.strong(o);break}case"em":{r+=i.em(o);break}case"codespan":{r+=i.codespan(o);break}case"br":{r+=i.br(o);break}case"del":{r+=i.del(o);break}case"text":{r+=i.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},sd=class{options;constructor(e){this.options=e||oo}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},WR=class{defaults=S1();options=this.setOptions;parse=this.parseMarkdown(ao.lex,co.parse);parseInline=this.parseMarkdown(ao.lexInline,co.parseInline);Parser=co;Renderer=rd;TextRenderer=D1;Lexer=ao;Tokenizer=Kh;Hooks=sd;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const n of s.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)i=i.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=r;i=i.concat(this.walkTokens(s.items,t));break}default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);i=i.concat(this.walkTokens(o,t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new rd(this.defaults);for(const n in i.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=i.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new Kh(this.defaults);for(const n in i.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=i.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new sd;for(const n in i.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=i.hooks[o],c=s[o];sd.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,n=i.walkTokens;r.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return ao.lex(e,t??this.defaults)}parser(e,t){return co.parse(e,t??this.defaults)}parseMarkdown(e,t){return(r,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+Zi(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}},lo=new WR;function at(e,t){return lo.parse(e,t)}at.options=at.setOptions=function(e){return lo.setOptions(e),at.defaults=lo.defaults,WS(at.defaults),at},at.getDefaults=S1,at.defaults=oo,at.use=function(...e){return lo.use(...e),at.defaults=lo.defaults,WS(at.defaults),at},at.walkTokens=function(e,t){return lo.walkTokens(e,t)},at.parseInline=lo.parseInline,at.Parser=co,at.parser=co.parse,at.Renderer=rd,at.TextRenderer=D1,at.Lexer=ao,at.lexer=ao.lex,at.Tokenizer=Kh,at.Hooks=sd,at.parse=at;var Rz=at.options,Lz=at.setOptions,Nz=at.use,Mz=at.walkTokens,Oz=at.parseInline,Fz=co.parse,Uz=ao.lex;function _R(e){return JSON.stringify(e,BR)}function i7(e){let t=JSON.parse(e);return t=Xt(t),t}function BR(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function Xt(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return y.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof re||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=Xt(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=Xt(e[i],t+1))}return e}var kr=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),qR=/^(.+)\/(.+?)(;.+)?$/;function r7(e,t){const i=qR.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}function s7(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var pi=Symbol("unset"),zR=class{constructor(){this.root=new P1,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||Dt.empty()}get entries(){return this.root.children?.entries()||Dt.empty()}insert(e,t,i){this.c(e,r=>r._value=t,i)}mutate(e,t){this.c(e,i=>i._value=t(i._value===pi?void 0:i._value))}mutatePath(e,t){this.c(e,()=>{},i=>t(i))}delete(e){const t=this.b(e);if(!t)return;let i=t.length-1;const r=t[i].node._value;if(r!==pi){for(this.a--,t[i].node._value=pi;i>0;i--){const{node:s,part:n}=t[i];if(s.children?.size||s._value!==pi)break;t[i-1].node.children.delete(n)}return r}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const i=t[t.length-1].node;for(let r=t.length-1;r>0;r--){const s=t[r-1];if(s.node.children.delete(t[r].part),s.node.children.size>0||s.node._value!==pi)break}for(const r of n7(i))r._value!==pi&&(this.a--,yield r._value);i===this.root&&(this.root._value=pi,this.root.children=void 0)}find(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return;t=r}return t._value===pi?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;if(r._value!==pi)return!0;t=r}return!1}hasKeyOrChildren(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return!0}hasKey(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return t._value!==pi}b(e){const t=[{part:"",node:this.root}];let i=0;for(const r of e){const s=t[i].node.children?.get(r);if(!s)return;t.push({part:r,node:s}),i++}return t}c(e,t,i){let r=this.root;for(const o of e){if(r.children)if(r.children.has(o))r=r.children.get(o);else{const a=new P1;r.children.set(o,a),r=a}else{const a=new P1;r.children=new Map([[o,a]]),r=a}i?.(r)}const s=r._value===pi?0:1;t(r);const n=r._value===pi?0:1;this.a+=n-s}*values(){for(const{_value:e}of n7(this.root))e!==pi&&(yield e)}};function*n7(e){const t=[e];for(;t.length>0;){const i=t.pop();if(yield i,i.children)for(const r of i.children.values())t.push(r)}}var P1=class{constructor(){this._value=pi}get value(){return this._value===pi?void 0:this._value}set value(e){this._value=e===void 0?pi:e}},Xi=class Zo{constructor(t,i){this.lineNumber=t,this.column=i}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new Zo(t,i)}delta(t=0,i=0){return this.with(Math.max(1,this.lineNumber+t),Math.max(1,this.column+i))}equals(t){return Zo.equals(this,t)}static equals(t,i){return!t&&!i?!0:!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(t){return Zo.isBefore(this,t)}static isBefore(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<i.column}isBeforeOrEqual(t){return Zo.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<=i.column}static compare(t,i){const r=t.lineNumber|0,s=i.lineNumber|0;if(r===s){const n=t.column|0,o=i.column|0;return n-o}return r-s}clone(){return new Zo(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new Zo(t.lineNumber,t.column)}static isIPosition(t){return!!t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Xe=class Ht{constructor(t,i,r,s){t>r||t===r&&i>s?(this.startLineNumber=r,this.startColumn=s,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=r,this.endColumn=s)}isEmpty(){return Ht.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Ht.containsPosition(this,t)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<t.startColumn||i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<=t.startColumn||i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(t){return Ht.containsRange(this,t)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(t){return Ht.strictContainsRange(this,t)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(t){return Ht.plusRange(this,t)}static plusRange(t,i){let r,s,n,o;return i.startLineNumber<t.startLineNumber?(r=i.startLineNumber,s=i.startColumn):i.startLineNumber===t.startLineNumber?(r=i.startLineNumber,s=Math.min(i.startColumn,t.startColumn)):(r=t.startLineNumber,s=t.startColumn),i.endLineNumber>t.endLineNumber?(n=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(n=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Ht(r,s,n,o)}intersectRanges(t){return Ht.intersectRanges(this,t)}static intersectRanges(t,i){let r=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,c=i.startColumn,l=i.endLineNumber,u=i.endColumn;return r<a?(r=a,s=c):r===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),r>n||r===n&&s>o?null:new Ht(r,s,n,o)}equalsRange(t){return Ht.equalsRange(this,t)}static equalsRange(t,i){return!t&&!i?!0:!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return Ht.getEndPosition(this)}static getEndPosition(t){return new Xi(t.endLineNumber,t.endColumn)}getStartPosition(){return Ht.getStartPosition(this)}static getStartPosition(t){return new Xi(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new Ht(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new Ht(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return Ht.collapseToStart(this)}static collapseToStart(t){return new Ht(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Ht.collapseToEnd(this)}static collapseToEnd(t){return new Ht(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Ht(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,i=t){return new Ht(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new Ht(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return!!t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static areOnlyIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber-1||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn-1||i.endLineNumber<t.startLineNumber-1||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn-1)}static compareRangesUsingStarts(t,i){if(t&&i){const n=t.startLineNumber|0,o=i.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=i.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=i.endLineNumber|0;if(l===u){const h=t.endColumn|0,f=i.endColumn|0;return h-f}return l-u}return a-c}return n-o}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},VR=class{constructor(){this.a=new Map,this.b=new Map,this.c=new P,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),se(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const i=new GR(this,e,t);return this.b.set(e,i),se(()=>{const r=this.b.get(e);!r||r!==i||(this.b.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this.b.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this.b.get(e);return!!(!i||i.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},GR=class extends Y{get isResolved(){return this.c}constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.D(this.f.register(this.g,e))}},o7;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(o7||(o7={}));var a7;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Tool=27]="Tool",e[e.Snippet=28]="Snippet"})(a7||(a7={}));var c7;(function(e){const t=new Map;t.set(0,ie.symbolMethod),t.set(1,ie.symbolFunction),t.set(2,ie.symbolConstructor),t.set(3,ie.symbolField),t.set(4,ie.symbolVariable),t.set(5,ie.symbolClass),t.set(6,ie.symbolStruct),t.set(7,ie.symbolInterface),t.set(8,ie.symbolModule),t.set(9,ie.symbolProperty),t.set(10,ie.symbolEvent),t.set(11,ie.symbolOperator),t.set(12,ie.symbolUnit),t.set(13,ie.symbolValue),t.set(15,ie.symbolEnum),t.set(14,ie.symbolConstant),t.set(15,ie.symbolEnum),t.set(16,ie.symbolEnumMember),t.set(17,ie.symbolKeyword),t.set(28,ie.symbolSnippet),t.set(18,ie.symbolText),t.set(19,ie.symbolColor),t.set(20,ie.symbolFile),t.set(21,ie.symbolReference),t.set(22,ie.symbolCustomColor),t.set(23,ie.symbolFolder),t.set(24,ie.symbolTypeParameter),t.set(25,ie.account),t.set(26,ie.issues),t.set(27,ie.tools);function i(o){let a=t.get(o);return a||(console.info("No codicon found for CompletionItemKind "+o),a=ie.symbolProperty),a}e.toIcon=i;function r(o){switch(o){case 0:return d(848,null);case 1:return d(849,null);case 2:return d(850,null);case 3:return d(851,null);case 4:return d(852,null);case 5:return d(853,null);case 6:return d(854,null);case 7:return d(855,null);case 8:return d(856,null);case 9:return d(857,null);case 10:return d(858,null);case 11:return d(859,null);case 12:return d(860,null);case 13:return d(861,null);case 14:return d(862,null);case 15:return d(863,null);case 16:return d(864,null);case 17:return d(865,null);case 18:return d(866,null);case 19:return d(867,null);case 20:return d(868,null);case 21:return d(869,null);case 22:return d(870,null);case 23:return d(871,null);case 24:return d(872,null);case 25:return d(873,null);case 26:return d(874,null);case 27:return d(875,null);case 28:return d(876,null);default:return""}}e.toLabel=r;const s=new Map;s.set("method",0),s.set("function",1),s.set("constructor",2),s.set("field",3),s.set("variable",4),s.set("class",5),s.set("struct",6),s.set("interface",7),s.set("module",8),s.set("property",9),s.set("event",10),s.set("operator",11),s.set("unit",12),s.set("value",13),s.set("constant",14),s.set("enum",15),s.set("enum-member",16),s.set("enumMember",16),s.set("keyword",17),s.set("snippet",28),s.set("text",18),s.set("color",19),s.set("file",20),s.set("reference",21),s.set("customcolor",22),s.set("folder",23),s.set("type-parameter",24),s.set("typeParameter",24),s.set("account",25),s.set("issue",26),s.set("tool",27);function n(o,a){let c=s.get(o);return typeof c>"u"&&!a&&(c=9),c}e.fromString=n})(c7||(c7={}));var l7;(function(e){e[e.Deprecated=1]="Deprecated"})(l7||(l7={}));var u7;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(u7||(u7={}));var h7;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(h7||(h7={}));var d7;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(d7||(d7={}));var nd;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(nd||(nd={}));var wa;(function(e){e[e.Code=1]="Code",e[e.Label=2]="Label"})(wa||(wa={}));var od;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(od||(od={}));var f7;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(f7||(f7={}));var p7;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(p7||(p7={}));var g7;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(g7||(g7={}));var m7;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(m7||(m7={}));function JR(e){return!!e&&y.isUri(e.uri)&&Xe.isIRange(e.range)&&(Xe.isIRange(e.originSelectionRange)||Xe.isIRange(e.targetSelectionRange))}function QR(e){return!!e&&y.isUri(e.uri)&&Xe.isIRange(e.range)}var v7;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(v7||(v7={}));var jz={17:d(877,null),16:d(878,null),4:d(879,null),13:d(880,null),8:d(881,null),9:d(882,null),21:d(883,null),23:d(884,null),7:d(885,null),0:d(886,null),11:d(887,null),10:d(888,null),19:d(889,null),5:d(890,null),1:d(891,null),2:d(892,null),20:d(893,null),15:d(894,null),18:d(895,null),24:d(896,null),3:d(897,null),6:d(898,null),14:d(899,null),22:d(900,null),25:d(901,null),12:d(902,null)},w7;(function(e){e[e.Deprecated=1]="Deprecated"})(w7||(w7={}));var A1;(function(e){const t=new Map;t.set(0,ie.symbolFile),t.set(1,ie.symbolModule),t.set(2,ie.symbolNamespace),t.set(3,ie.symbolPackage),t.set(4,ie.symbolClass),t.set(5,ie.symbolMethod),t.set(6,ie.symbolProperty),t.set(7,ie.symbolField),t.set(8,ie.symbolConstructor),t.set(9,ie.symbolEnum),t.set(10,ie.symbolInterface),t.set(11,ie.symbolFunction),t.set(12,ie.symbolVariable),t.set(13,ie.symbolConstant),t.set(14,ie.symbolString),t.set(15,ie.symbolNumber),t.set(16,ie.symbolBoolean),t.set(17,ie.symbolArray),t.set(18,ie.symbolObject),t.set(19,ie.symbolKey),t.set(20,ie.symbolNull),t.set(21,ie.symbolEnumMember),t.set(22,ie.symbolStruct),t.set(23,ie.symbolEvent),t.set(24,ie.symbolOperator),t.set(25,ie.symbolTypeParameter);function i(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=ie.symbolProperty),o}e.toIcon=i;const r=new Map;r.set(0,20),r.set(1,8),r.set(2,8),r.set(3,8),r.set(4,5),r.set(5,0),r.set(6,9),r.set(7,3),r.set(8,2),r.set(9,15),r.set(10,7),r.set(11,1),r.set(12,4),r.set(13,14),r.set(14,18),r.set(15,13),r.set(16,13),r.set(17,13),r.set(18,13),r.set(19,17),r.set(20,13),r.set(21,16),r.set(22,6),r.set(23,10),r.set(24,11),r.set(25,24);function s(n){let o=r.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=s})(A1||(A1={}));var ba=class Mn{static{this.Comment=new Mn("comment")}static{this.Imports=new Mn("imports")}static{this.Region=new Mn("region")}static fromValue(t){switch(t){case"comment":return Mn.Comment;case"imports":return Mn.Imports;case"region":return Mn.Region}return new Mn(t)}constructor(t){this.value=t}},b7;(function(e){e[e.AIGenerated=1]="AIGenerated"})(b7||(b7={}));var ad;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(ad||(ad={}));var T1;(function(e){function t(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}e.is=t})(T1||(T1={}));var ya;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(ya||(ya={}));var El;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(El||(El={}));var Cl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Cl||(Cl={}));var y7;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(y7||(y7={}));var S7;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(S7||(S7={}));var E7;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(E7||(E7={}));var Hz=new VR,C7;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(C7||(C7={}));var x7;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(x7||(x7={}));var xi;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(xi||(xi={})),function(e){function t(c,l){return l-c}e.compare=t;const i=Object.create(null);i[e.Error]=d(2179,null),i[e.Warning]=d(2180,null),i[e.Info]=d(2181,null);function r(c){return i[c]||""}e.toString=r;const s=Object.create(null);s[e.Error]=d(2182,null),s[e.Warning]=d(2183,null),s[e.Info]=d(2184,null);function n(c){return s[c]||""}e.toStringPlural=n;function o(c){switch(c){case St.Error:return e.Error;case St.Warning:return e.Warning;case St.Info:return e.Info;case St.Ignore:return e.Hint}}e.fromSeverity=o;function a(c){switch(c){case e.Error:return St.Error;case e.Warning:return St.Warning;case e.Info:return St.Info;case e.Hint:return St.Ignore}}e.toSeverity=a}(xi||(xi={}));var k7;(function(e){const t="";function i(s){return r(s,!0)}e.makeKey=i;function r(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(xi.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=r})(k7||(k7={}));var Wz=U("markerService"),ZR=class{constructor(){this.a=new Map}add(e,t){fi(Oe(e)),fi(bt(t)),fi(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}dispose(){this.a.forEach(e=>{n5(e.dispose)&&e.dispose()}),this.a.clear()}},Nt=new ZR,R1=U("fileService"),uo;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(uo||(uo={}));var Sa;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(Sa||(Sa={}));var $7;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})($7||($7={}));var I7;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone",e[e.FileRealpath=262144]="FileRealpath"})(I7||(I7={}));var ye;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(ye||(ye={}));var D7=class i3 extends Error{static create(t,i){const r=new i3(t.toString(),i);return P7(r,i),r}constructor(t,i){super(t),this.code=i}};function P7(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function cd(e){if(!e)return ye.Unknown;if(e instanceof D7)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return ye.Unknown;switch(t[1]){case ye.FileExists:return ye.FileExists;case ye.FileIsADirectory:return ye.FileIsADirectory;case ye.FileNotADirectory:return ye.FileNotADirectory;case ye.FileNotFound:return ye.FileNotFound;case ye.FileTooLarge:return ye.FileTooLarge;case ye.FileWriteLocked:return ye.FileWriteLocked;case ye.NoPermissions:return ye.NoPermissions;case ye.Unavailable:return ye.Unavailable}return ye.Unknown}function XR(e){if(e instanceof ld)return e.fileOperationResult;switch(cd(e)){case ye.FileNotFound:return 1;case ye.FileIsADirectory:return 0;case ye.FileNotADirectory:return 9;case ye.FileWriteLocked:return 5;case ye.NoPermissions:return 6;case ye.FileExists:return 4;case ye.FileTooLarge:return 7;default:return 10}}var A7;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(A7||(A7={}));var T7;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(T7||(T7={}));var _z=class Jg{static{this.a=null}constructor(t,i){this.c=i,this.b=void 0,this.d=new It(()=>{const r=en.forUris(()=>this.c);return r.fill(this.rawAdded.map(s=>[s,!0])),r}),this.f=new It(()=>{const r=en.forUris(()=>this.c);return r.fill(this.rawUpdated.map(s=>[s,!0])),r}),this.g=new It(()=>{const r=en.forUris(()=>this.c);return r.fill(this.rawDeleted.map(s=>[s,!0])),r}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const r of t){switch(r.type){case 1:this.rawAdded.push(r.resource);break;case 0:this.rawUpdated.push(r.resource);break;case 2:this.rawDeleted.push(r.resource);break}this.b!==Jg.a&&(typeof r.cId=="number"?this.b===void 0?this.b=r.cId:this.b!==r.cId&&(this.b=Jg.a):this.b!==void 0&&(this.b=Jg.a))}}contains(t,...i){return this.h(t,{includeChildren:!1},...i)}affects(t,...i){return this.h(t,{includeChildren:!0},...i)}h(t,i,...r){if(!t)return!1;const s=r.length>0;return!!((!s||r.includes(1))&&(this.d.value.get(t)||i.includeChildren&&this.d.value.findSuperstr(t))||(!s||r.includes(0))&&(this.f.value.get(t)||i.includeChildren&&this.f.value.findSuperstr(t))||(!s||r.includes(2))&&(this.g.value.findSubstr(t)||i.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}},ld=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},R7;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(R7||(R7={}));var L7;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(L7||(L7={}));var YR="";function N7(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var Bz=class Ri{static{this.KB=1024}static{this.MB=Ri.KB*Ri.KB}static{this.GB=Ri.MB*Ri.KB}static{this.TB=Ri.GB*Ri.KB}static formatSize(t){return Hn(t)||(t=0),t<Ri.KB?d(2090,null,t.toFixed(0)):t<Ri.MB?d(2091,null,(t/Ri.KB).toFixed(2)):t<Ri.GB?d(2092,null,(t/Ri.MB).toFixed(2)):t<Ri.TB?d(2093,null,(t/Ri.GB).toFixed(2)):d(2094,null,(t/Ri.TB).toFixed(2))}},KR=class extends Y{get onDidChange(){return this.j.event}constructor(e,t="",i="",r=!0,s){super(),this.j=this.D(new P),this.z=!0,this.m=e,this.n=t,this.w=i,this.z=r,this.F=s}get id(){return this.m}get label(){return this.n}set label(e){this.G(e)}G(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.H(e)}H(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.I(e)}I(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.J(e)}J(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.L(e)}L(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.F&&await this.F(e)}},qz=class k4{constructor(){this.id=k4.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const r of t)r.length&&(i.length?i=[...i,new k4,...r]:i=r);return i}static{this.ID="vs.actions.separator"}async run(){}},zz=class r3 extends KR{static{this.ID="vs.actions.empty"}constructor(){super(r3.ID,d(44,null),void 0,!1)}},eL={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},tL={id:"default",displayName:d(4484,null),providerDisplayName:d(4485,null)},iL="workbench.editors.textDiffEditor",rL="workbench.editors.binaryResourceDiffEditor",M7;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(M7||(M7={}));var O7;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(O7||(O7={}));function L1(e,t,i){for(const r of i.visibleEditorPanes)if(r.group.id===t&&e.matches(r.input))return r.getViewState()}function sL(e){if($r(e))return!1;const t=e;return y.isUri(t?.resource)}function Cs(e){if($r(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function xl(e){if($r(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function ho(e){if($r(e)||Cs(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function fo(e){if($r(e))return!1;const t=e;return y.isUri(t?.base?.resource)&&y.isUri(t?.input1?.resource)&&y.isUri(t?.input2?.resource)&&y.isUri(t?.result?.resource)}var F7;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(F7||(F7={}));var U7;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(U7||(U7={}));var nL=class{constructor(){this.a=new Map}registerSource(e,t){let i=this.a.get(e);return i||(i={source:e,label:t},this.a.set(e,i)),i.source}getSourceLabel(e){return this.a.get(e)?.label??e}},Vz=new nL,j7;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(j7||(j7={}));var H7=class extends Y{};function $r(e){return e instanceof H7}function oL(e){const t=e;return y.isUri(t?.preferredResource)}function aL(e){const t=e;return $r(t?.primary)&&$r(t?.secondary)}function W7(e){const t=e;return $r(t?.modified)&&$r(t?.original)}var _7;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(_7||(_7={}));var B7;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(B7||(B7={}));var sn;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(sn||(sn={}));var cL=class{getOriginalUri(e,t){if(!e)return;if(fo(e))return N1.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===sn.BOTH)return{primary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===sn.ANY)return this.getOriginalUri(r,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===sn.PRIMARY?r:s}}if(Cs(e)||xl(e)||ho(e)||fo(e))return;const i=oL(e)?e.preferredResource:e.resource;return!i||!t?.filterByScheme?i:this.b(i,t.filterByScheme)}a(e){return aL(e)||ho(e)?{primary:e.primary,secondary:e.secondary}:W7(e)||Cs(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(fo(e))return N1.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===sn.BOTH)return{primary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===sn.ANY)return this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===sn.PRIMARY?r:s}}if(Cs(e)||xl(e)||ho(e)||fo(e))return;const i=e.resource;return!i||!t?.filterByScheme?i:this.b(i,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(i=>e.scheme===i))return e}else if(t===e.scheme)return e}},q7;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(q7||(q7={}));var N1=new cL,z7;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(z7||(z7={}));var lL=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(Kn);for(const[i,r]of this.c)this.e(i,r,t);this.c.clear()}e(e,t,i){const r=i.createInstance(t);this.d.set(e,r)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return ia(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),se(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};Nt.add(eL.EditorFactory,new lL);var V7;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(V7||(V7={}));var G7;(function(e){e[e.Failed=0]="Failed",e[e.Completed=1]="Completed",e[e.InProgress=2]="InProgress",e[e.NeedsInput=3]="NeedsInput"})(G7||(G7={}));var J7="local",Gz=U("chatSessionsService"),Jr;(function(e){e.scheme=B.vscodeLocalChatSession;function t(n){const o=Kc(re.wrap(new TextEncoder().encode(n)),!1,!0);return y.from({scheme:e.scheme,authority:J7,path:"/"+o})}e.forSession=t;function i(n){const o=s(n);return o?.chatSessionType===J7?o.sessionId:void 0}e.parseLocalSessionId=i;function r(n){return!!i(n)}e.isLocalSession=r;function s(n){if(n.scheme!==e.scheme||!n.authority)return;const o=n.path.split("/");if(o.length!==2)return;const a=n.authority,c=Bn(o[1]);return{chatSessionType:a,sessionId:new TextDecoder().decode(c.buffer)}}})(Jr||(Jr={}));function M1(e){const t=Jr.parseLocalSessionId(e);return t||e.toString()}var Q7;(function(e){e[e.NotOmitted=0]="NotOmitted",e[e.Partial=1]="Partial",e[e.Full=2]="Full"})(Q7||(Q7={}));var O1;(function(e){e.icon=ie.error;function t(n){return{filterUri:n.resource,owner:n.owner,problemMessage:n.message,filterRange:{startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn}}}e.fromMarker=t;function i(n){return{id:r(n),name:s(n),icon:e.icon,value:n,kind:"diagnostic",...n}}e.toEntry=i;function r(n){return[n.filterUri,n.owner,n.filterSeverity,n.filterRange?.startLineNumber,n.filterRange?.startColumn].join(":")}e.id=r;function s(n){let o;if(function(c){c[c.MaxChars=30]="MaxChars",c[c.MaxSpaceLookback=10]="MaxSpaceLookback"}(o||(o={})),n.problemMessage){if(n.problemMessage.length<30)return n.problemMessage;const c=n.problemMessage.lastIndexOf(" ",30);return c===-1||c+10<30?n.problemMessage.substring(0,30)+"\u2026":n.problemMessage.substring(0,c)+"\u2026"}let a=d(6521,null);return n.filterUri&&(a=d(6522,null,Ji(n.filterUri))),a}e.label=s})(O1||(O1={}));var F1;(function(e){function t(i){return y.isUri(i.value)?i.value:QR(i.value)?i.value.uri:void 0}e.toUri=t})(F1||(F1={}));function uL(e){return e.kind==="image"}function U1(e){return e.kind==="promptFile"}function hL(e){return e.kind==="promptText"}var nn;(function(e){e.Instruction="vscode.prompt.instructions.root",e.InstructionReference="vscode.prompt.instructions",e.PromptFile="vscode.prompt.file"})(nn||(nn={}));function ud(e,t,i,r=!1,s){return{id:`${t}__${e.toString()}`,name:`prompt:${Ji(e)}`,value:e,kind:"promptFile",modelDescription:"Prompt instructions file",isRoot:t!==nn.InstructionReference,originLabel:i,toolReferences:s,automaticallyAdded:r}}function dL(e,t=!1,i){return{id:"vscode.prompt.instructions.text",name:"prompt:instructionsList",value:e,kind:"promptText",modelDescription:"Prompt instructions list",automaticallyAdded:t,toolReferences:i}}function fL(e,t){return{kind:"tool",id:e.id,icon:vt.isThemeIcon(e.icon)?e.icon:void 0,name:e.displayName,value:void 0,range:t}}var Z7=class{constructor(e){this.a=new Set,this.b=[],e&&this.add(...e)}add(...e){for(const t of e)this.a.has(t.id)||(this.a.add(t.id),this.b.push(t))}insertFirst(e){this.a.has(e.id)||(this.a.add(e.id),this.b.unshift(e))}remove(e){this.a.delete(e.id),this.b=this.b.filter(t=>t.id!==e.id)}has(e){return this.a.has(e.id)}asArray(){return this.b.slice(0)}get length(){return this.b.length}},on;(function(e){e.AgentEnabled="chat.agent.enabled",e.Edits2Enabled="chat.edits2.enabled",e.ExtensionToolsEnabled="chat.extensionTools.enabled",e.EditRequests="chat.editRequests",e.GlobalAutoApprove="chat.tools.global.autoApprove",e.AutoApproveEdits="chat.tools.edits.autoApprove",e.AutoApprovedUrls="chat.tools.urls.autoApprove",e.EligibleForAutoApproval="chat.tools.eligibleForAutoApproval",e.EnableMath="chat.math.enabled",e.CheckpointsEnabled="chat.checkpoints.enabled",e.ThinkingStyle="chat.agent.thinkingStyle",e.ThinkingGenerateTitles="chat.agent.thinking.generateTitles",e.TodosShowWidget="chat.tools.todos.showWidget",e.NotifyWindowOnResponseReceived="chat.notifyWindowOnResponseReceived",e.ChatViewSessionsEnabled="chat.viewSessions.enabled",e.ChatViewSessionsOrientation="chat.viewSessions.orientation",e.ChatViewTitleEnabled="chat.viewTitle.enabled",e.ChatViewWelcomeEnabled="chat.viewWelcome.enabled",e.SubagentToolCustomAgents="chat.customAgentInSubagent.enabled",e.ShowCodeBlockProgressAnimation="chat.agent.codeBlockProgress",e.RestoreLastPanelSession="chat.restoreLastPanelSession",e.ExitAfterDelegation="chat.exitAfterDelegation",e.SuspendThrottling="chat.suspendThrottling"})(on||(on={}));var lr;(function(e){e.Ask="ask",e.Edit="edit",e.Agent="agent"})(lr||(lr={}));var X7;(function(e){e.Collapsed="collapsed",e.CollapsedPreview="collapsedPreview",e.FixedScrolling="fixedScrolling"})(X7||(X7={}));var Y7;(function(e){e.Off="off",e.WithThinking="withThinking",e.Always="always"})(Y7||(Y7={}));var Yt;(function(e){e.Chat="panel",e.Terminal="terminal",e.Notebook="notebook",e.EditorInline="editor"})(Yt||(Yt={})),function(e){function t(i){switch(i){case"panel":return e.Chat;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.EditorInline}return e.Chat}e.fromRaw=t}(Yt||(Yt={}));var Jz=new Set([B.vscodeChatEditor,B.walkThrough,B.vscodeLocalChatSession,B.vscodeSettings,B.webviewPanel,B.vscodeUserData,B.extension,"ccreq","openai-codex"]),Qz=new x("inModelsEditor",!1),Zz=new x("inModelsSearch",!1),xs=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return pL(e,this)}},K7=new Map,j1=new WeakMap;function pL(e,t){const i=j1.get(e);if(i)return i;const r=gL(e,t);if(r){let s=K7.get(r)??0;s++,K7.set(r,s);const n=s===1?r:`${r}#${s}`;return j1.set(e,n),n}}function gL(e,t){const i=j1.get(e);if(i)return i;const r=t.owner?vL(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return r+s}else return r+n;const o=t.referenceFn;if(o!==void 0&&(s=H1(o),s!==void 0))return r+s;if(t.owner!==void 0){const a=mL(t.owner,e);if(a!==void 0)return r+a}}function mL(e,t){for(const i in e)if(e[i]===t)return i}var eE=new Map,tE=new WeakMap;function vL(e){const t=tE.get(e);if(t)return t;const i=iE(e)??"Object";let r=eE.get(i)??0;r++,eE.set(i,r);const s=r===1?i:`${i}#${r}`;return tE.set(e,s),s}function iE(e){const t=e.constructor;if(t)return t.name==="Object"?void 0:t.name}function H1(e){const t=e.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(r?r[1]:void 0)?.trim()}function Qr(e,t){return e===t}function wL(){return(e,t)=>e===t}function bL(e,t,i){return wi(e,t,i??Qr)}function yL(e){return(t,i)=>wi(t,i,e??Qr)}function kl(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!kl(e[i],t[i]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const i=e,r=t,s=Object.keys(i),n=Object.keys(r),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!kl(i[a],r[a]))return!1;return!0}return!1}function SL(){return(e,t)=>kl(e,t)}function EL(e,t){return JSON.stringify(e)===JSON.stringify(t)}function CL(){return(e,t)=>JSON.stringify(e)===JSON.stringify(t)}function xL(){return(e,t)=>e.equals(t)}function kL(e,t,i){return e==null||t===void 0||t===null?t===e:i(e,t)}function $L(e){return(t,i)=>t==null||i===void 0||i===null?i===t:e(t,i)}var rE;(function(e){e.strict=Qr,e.strictC=wL,e.array=bL,e.arrayC=yL,e.structural=kl,e.structuralC=SL,e.jsonStringify=EL,e.jsonStringifyC=CL,e.thisC=xL,e.ifDefined=kL,e.ifDefinedC=$L})(rE||(rE={}));function sE(e){const t=new Error("BugIndicatingErrorRecovery: "+e);Bt(t),console.error("recovered from an error that indicates a bug",t)}var po;function W1(e){po?po instanceof nE?po.loggers.push(e):po=new nE([po,e]):po=e}function Ot(){return po}var _1=void 0;function IL(e){_1=e}function DL(e){_1&&_1(e)}var nE=class{constructor(e){this.loggers=e}handleObservableCreated(e,t){for(const i of this.loggers)i.handleObservableCreated(e,t)}handleOnListenerCountChanged(e,t){for(const i of this.loggers)i.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const i of this.loggers)i.handleObservableUpdated(e,t)}handleAutorunCreated(e,t){for(const i of this.loggers)i.handleAutorunCreated(e,t)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,i){for(const r of this.loggers)r.handleAutorunDependencyChanged(e,t,i)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,i){for(const r of this.loggers)r.handleDerivedDependencyChanged(e,t,i)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}};function B1(e,t){const i=new q1(e,t);try{e(i)}finally{i.finish()}}function PL(e,t,i){e?t(e):B1(t,i)}var q1=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],Ot()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():H1(this._fn)}updateObserver(e,t){if(!this.a){sE("Transaction already finished!"),B1(i=>{i.updateObserver(e,t)});return}this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;if(!e){sE("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.a=null,Ot()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this.a}},Ir;(function(e){let t=!1;function i(){t=!0}e.enable=i;function r(){if(!t)return;const s=Error,n=s.stackTraceLimit;s.stackTraceLimit=3;const o=new Error().stack;return s.stackTraceLimit=n,AL.fromStack(o,2)}e.ofCaller=r})(Ir||(Ir={}));var AL=class s3{static fromStack(t,i){const r=t.split(`
`),s=TL(r[i+1]);if(s)return new s3(s.fileName,s.line,s.column,s.id)}constructor(t,i,r,s){this.fileName=t,this.line=i,this.column=r,this.id=s}};function TL(e){const t=e.match(/\((.*):(\d+):(\d+)\)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:e};const i=e.match(/at ([^\(\)]*):(\d+):(\d+)/);if(i)return{fileName:i[1],line:parseInt(i[2]),column:parseInt(i[3]),id:e}}var z1;function RL(e){z1=e}var oE;function LL(e){oE=e}var aE;function NL(e){aE=e}var V1;function ML(e){V1=e}var cE=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t,i=Ir.ofCaller()){const r=t===void 0?void 0:e,s=t===void 0?e:t;return z1({owner:r,debugName:()=>{const n=H1(s);if(n!==void 0)return n;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:s},n=>s(this.read(n),n),i)}flatten(){return z1({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(oE(this,t)),this}keepObserved(e){return e.add(aE(this)),this}get b(){return this.get()}get debug(){return new OL(this)}},OL=class{constructor(e){this.observable=e}getDependencyGraph(){return V1(this.observable,{type:"dependencies"})}getObserverGraph(){return V1(this.observable,{type:"observers"})}},hd=class extends cE{constructor(e){super(),this.f=new Set,Ot()?.handleObservableCreated(this,e)}addObserver(e){const t=this.f.size;this.f.add(e),t===0&&this.g(),t!==this.f.size&&Ot()?.handleOnListenerCountChanged(this,this.f.size)}removeObserver(e){const t=this.f.delete(e);t&&this.f.size===0&&this.h(),t&&Ot()?.handleOnListenerCountChanged(this,this.f.size)}g(){}h(){}log(){const e=!!Ot();return DL(this),e||Ot()?.handleObservableCreated(this,Ir.ofCaller()),this}debugGetObservers(){return this.f}};function Fi(e,t,i=Ir.ofCaller()){let r;return typeof e=="string"?r=new xs(void 0,e,void 0):r=new xs(e,void 0,void 0),new $l(r,t,Qr,i)}var $l=class extends hd{get debugName(){return this.c.getDebugName(this)??"ObservableValue"}constructor(e,t,i,r){super(r),this.c=e,this.d=i,this.a=t,Ot()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this.a}set(e,t,i){if(i===void 0&&this.d(this.a,e))return;let r;t||(t=r=new q1(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.a;this.i(e),Ot()?.handleObservableUpdated(this,{oldValue:s,newValue:e,change:i,didChange:!0,hadValue:!0});for(const n of this.f)t.updateObserver(n,this),n.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this.a}`}i(e){this.a=e}debugGetState(){return{value:this.a}}debugSetValue(e){this.a=e}},FL=class extends hd{get debugName(){return this.e.getDebugName(this)??"LazyObservableValue"}constructor(e,t,i,r){super(r),this.e=e,this.i=i,this.c=!0,this.d=[],this.k=0,this.a=t}get(){return this.j(),this.a}j(){if(!this.c)if(this.c=!0,this.d.length>0){for(const e of this.d){Ot()?.handleObservableUpdated(this,{change:e,didChange:!0,oldValue:"(unknown)",newValue:this.a,hadValue:!0});for(const t of this.f)t.handleChange(this,e)}this.d.length=0}else{Ot()?.handleObservableUpdated(this,{change:void 0,didChange:!0,oldValue:"(unknown)",newValue:this.a,hadValue:!0});for(const e of this.f)e.handleChange(this,void 0)}}l(){if(this.k++,this.k===1)for(const e of this.f)e.beginUpdate(this)}m(){if(this.k--,this.k===0){this.j();const e=[...this.f];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.f.has(e)&&this.k>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.f.has(e)&&this.k>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,i){if(i===void 0&&this.i(this.a,e))return;let r;t||(t=r=new q1(()=>{},()=>`Setting ${this.debugName}`));try{if(this.c=!1,this.n(e),i!==void 0&&this.d.push(i),t.updateObserver({beginUpdate:()=>this.l(),endUpdate:()=>this.m(),handleChange:(s,n)=>{},handlePossibleChange:s=>{}},this),this.k>1)for(const s of this.f)s.handlePossibleChange(this)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this.a}`}n(e){this.a=e}};function UL(e,t,i=Ir.ofCaller()){return e.lazy?new FL(new xs(e.owner,e.debugName,void 0),t,e.equalsFn??Qr,i):new $l(new xs(e.owner,e.debugName,void 0),t,e.equalsFn??Qr,i)}var lE;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(lE||(lE={}));function jL(e){switch(e){case 1:return"dependenciesMightHaveChanged";case 2:return"stale";case 3:return"upToDate";default:return"<unknown>"}}var dd=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r){this._debugNameData=e,this._runFn=t,this.k=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.i=!1,this.j=0,this.p=void 0,this.q=void 0,this.h=this.k?.createChangeSummary(void 0),Ot()?.handleAutorunCreated(this,r),this.l(),ra(this)}dispose(){if(!this.c){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),this.p!==void 0&&this.p.dispose(),this.q!==void 0&&this.q.dispose(),Ot()?.handleAutorunDisposed(this),sa(this)}}l(){const e=this.g;this.g=this.f,this.f=e,this.a=3;try{if(!this.c){Ot()?.handleAutorunStarted(this);const t=this.h,i=this.q;i!==void 0&&(this.q=void 0);try{this.i=!0,this.k&&(this.k.beforeUpdate?.(this,t),this.h=this.k.createChangeSummary(t)),this.p!==void 0&&(this.p.dispose(),this.p=void 0),this._runFn(this,t)}catch(r){Gc(r)}finally{this.i=!1,i!==void 0&&i.dispose()}}}finally{this.c||Ot()?.handleAutorunFinished(this);for(const t of this.g)t.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.a===3&&(this.r(),this.a=1),this.b++}endUpdate(e){try{if(this.b===1){this.j=1;do{if(this.r())return;if(this.a===1){this.a=3;for(const t of this.f)if(t.reportChanges(),this.a===2)break}this.j++,this.a!==3&&this.l()}while(this.a!==3)}}finally{this.b--}r5(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.m(e)&&(this.r(),this.a=1)}handleChange(e,t){if(this.m(e)){Ot()?.handleAutorunDependencyChanged(this,e,t);try{(this.k?this.k.handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.h):!0)&&(this.r(),this.a=2)}catch(i){Gc(i)}}}m(e){return this.f.has(e)&&!this.g.has(e)}n(){if(!this.i)throw new qt("The reader object cannot be used outside its compute function!")}readObservable(e){if(this.n(),this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}get store(){if(this.n(),this.c)throw new qt("Cannot access store after dispose");return this.p===void 0&&(this.p=new ae),this.p}get delayedStore(){if(this.n(),this.c)throw new qt("Cannot access store after dispose");return this.q===void 0&&(this.q=new ae),this.q}debugGetState(){return{isRunning:this.i,updateCount:this.b,dependencies:this.f,state:this.a,stateStr:jL(this.a)}}debugRerun(){this.i?this.a=2:this.l()}r(){return this.j>100?(Gc(new qt(`Autorun '${this.debugName}' is stuck in an infinite update loop.`)),!0):!1}};function fd(e,t=Ir.ofCaller()){return new dd(new xs(void 0,void 0,e),e,void 0,t)}var uE;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(uE||(uE={}));function HL(e){switch(e){case 0:return"initial";case 1:return"dependenciesMightHaveChanged";case 2:return"stale";case 3:return"upToDate";default:return"<unknown>"}}var Yi=class extends hd{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r=void 0,s,n){super(n),this._debugNameData=e,this._computeFn=t,this.w=i,this.x=r,this.y=s,this.a=0,this.c=void 0,this.i=0,this.j=new Set,this.k=new Set,this.l=void 0,this.m=!1,this.n=!1,this.p=!1,this.q=!1,this.s=!1,this.t=void 0,this.u=void 0,this.v=null,this.l=this.w?.createChangeSummary(void 0)}h(){this.a=0,this.c=void 0,Ot()?.handleDerivedCleared(this);for(const e of this.j)e.removeObserver(this);this.j.clear(),this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.u!==void 0&&(this.u.dispose(),this.u=void 0),this.x?.()}get(){if(this.n,this.f.size===0){let t;try{this.s=!0;let i;this.w&&(i=this.w.createChangeSummary(void 0),this.w.beforeUpdate?.(this,i)),t=this._computeFn(this,i)}finally{this.s=!1}return this.h(),t}else{do{if(this.a===1){for(const t of this.j)if(t.reportChanges(),this.a===2)break}this.a===1&&(this.a=3),this.a!==3&&this.A()}while(this.a!==3);return this.c}}A(){let e=!1;this.n=!0,this.p=!1;const t=this.k;this.k=this.j,this.j=t;try{const i=this.l;this.s=!0,this.w&&(this.q=!0,this.w.beforeUpdate?.(this,i),this.q=!1,this.l=this.w?.createChangeSummary(i));const r=this.a!==0,s=this.c;this.a=3;const n=this.u;n!==void 0&&(this.u=void 0);try{this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.c=this._computeFn(this,i)}finally{this.s=!1;for(const o of this.k)o.removeObserver(this);this.k.clear(),n!==void 0&&n.dispose()}e=this.p||r&&!this.y(s,this.c),Ot()?.handleObservableUpdated(this,{oldValue:s,newValue:this.c,change:void 0,didChange:e,hadValue:r})}catch(i){Gc(i)}if(this.n=!1,!this.p&&e)for(const i of this.f)i.handleChange(this,void 0);else this.p=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.m)throw new qt("Cyclic deriveds are not supported yet!");this.i++,this.m=!0;try{const t=this.i===1;if(this.a===3&&(this.a=1,!t))for(const i of this.f)i.handlePossibleChange(this);if(t)for(const i of this.f)i.beginUpdate(this)}finally{this.m=!1}}endUpdate(e){if(this.i--,this.i===0){const t=[...this.f];for(const i of t)i.endUpdate(this);if(this.v){const i=[...this.v];this.v=null;for(const r of i)r.endUpdate(this)}}r5(()=>this.i>=0)}handlePossibleChange(e){if(this.a===3&&this.j.has(e)&&!this.k.has(e)){this.a=1;for(const t of this.f)t.handlePossibleChange(this)}}handleChange(e,t){if(this.j.has(e)&&!this.k.has(e)||this.q){Ot()?.handleDerivedDependencyChanged(this,e,t);let i=!1;try{i=this.w?this.w.handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.l):!0}catch(s){Gc(s)}const r=this.a===3;if(i&&(this.a===1||r)&&(this.a=2,r))for(const s of this.f)s.handlePossibleChange(this)}}B(){if(!this.s)throw new qt("The reader object cannot be used outside its compute function!")}readObservable(e){this.B(),e.addObserver(this);const t=e.get();return this.j.add(e),this.k.delete(e),t}reportChange(e){this.B(),this.p=!0;for(const t of this.f)t.handleChange(this,e)}get store(){return this.B(),this.t===void 0&&(this.t=new ae),this.t}get delayedStore(){return this.B(),this.u===void 0&&(this.u=new ae),this.u}addObserver(e){const t=!this.f.has(e)&&this.i>0;super.addObserver(e),t&&(this.v?.delete(e)||e.beginUpdate(this))}removeObserver(e){this.f.has(e)&&this.i>0&&(this.v||(this.v=new Set),this.v.add(e)),super.removeObserver(e)}debugGetState(){return{state:this.a,stateStr:HL(this.a),updateCount:this.i,isComputing:this.n,dependencies:this.j,value:this.c}}debugSetValue(e){this.c=e}debugRecompute(){this.n?this.a=2:this.A()}setValue(e,t,i){this.c=e;const r=this.f;t.updateObserver(this,this);for(const s of r)s.handleChange(this,i)}};function WL(e,t,i=Ir.ofCaller()){return t!==void 0?new Yi(new xs(e,void 0,t),t,void 0,void 0,Qr,i):new Yi(new xs(void 0,void 0,e),e,void 0,void 0,Qr,i)}function hE(e,t,i=Ir.ofCaller()){return new Yi(new xs(e.owner,e.debugName,e.debugReferenceFn),t,void 0,e.onLastObserverRemoved,e.equalsFn??Qr,i)}RL(hE);function Il(...e){let t,i,r,s;return e.length===2?[i,r]=e:[t,i,r,s]=e,new an(new xs(t,void 0,r),i,r,()=>an.globalTransaction,Qr,s??Ir.ofCaller())}var an=class extends hd{constructor(e,t,i,r,s,n){super(n),this.e=e,this.i=t,this._getValue=i,this.j=r,this.k=s,this.c=!1,this.n=o=>{const a=this._getValue(o),c=this.a,l=!this.c||!this.k(c,a);let u=!1;l&&(this.a=a,this.c&&(u=!0,PL(this.j(),h=>{Ot()?.handleObservableUpdated(this,{oldValue:c,newValue:a,change:void 0,didChange:l,hadValue:this.c});for(const f of this.f)h.updateObserver(f,this),f.handleChange(this,void 0)},()=>{const h=this.l();return"Event fired"+(h?`: ${h}`:"")})),this.c=!0),u||Ot()?.handleObservableUpdated(this,{oldValue:c,newValue:a,change:void 0,didChange:l,hadValue:this.c})}}l(){return this.e.getDebugName(this)}get debugName(){const e=this.l();return"From Event"+(e?`: ${e}`:"")}g(){this.d=this.i(this.n)}h(){this.d.dispose(),this.d=void 0,this.c=!1,this.a=void 0}get(){return this.d?(this.c||this.n(void 0),this.a):this._getValue(void 0)}debugSetValue(e){this.a=e}debugGetState(){return{value:this.a,hasValue:this.c}}};(function(e){e.Observer=an;function t(i,r){let s=!1;an.globalTransaction===void 0&&(an.globalTransaction=i,s=!0);try{r()}finally{s&&(an.globalTransaction=void 0)}}e.batchEventsGlobally=t})(Il||(Il={}));function _L(e){const t=new dE(!1,void 0);return e.addObserver(t),se(()=>{e.removeObserver(t)})}NL(_L);function BL(e,t){const i=new dE(!0,t);e.addObserver(i);try{i.beginUpdate(e)}finally{i.endUpdate(e)}return se(()=>{e.removeObserver(i)})}LL(BL);var dE=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a===1&&this.b&&(this.c?this.c(e.get()):e.reportChanges()),this.a--}handlePossibleChange(e){}handleChange(e,t){}};function fE(e){return new qL(e)}var qL=class extends cE{constructor(e){super(),this.a=e}get debugName(){return this.toString()}get(){return this.a}addObserver(e){}removeObserver(e){}log(){return this}toString(){return`Const: ${this.a}`}},pE=class{constructor(){this.a=new Set,this.b=UL({equalsFn:()=>!1},this),this.observable=this.b}get size(){return this.a.size}has(e){return this.a.has(e)}add(e,t){return this.a.has(e)||(this.a.add(e),this.b.set(this,t)),this}delete(e,t){const i=this.a.delete(e);return i&&this.b.set(this,t),i}clear(e){this.a.size>0&&(this.a.clear(),this.b.set(this,e))}forEach(e,t){this.a.forEach((i,r,s)=>{e.call(t,i,r,this)})}*entries(){for(const e of this.a)yield[e,e]}*keys(){yield*this.a.keys()}*values(){yield*this.a.values()}[Symbol.iterator](){return this.values()}get[Symbol.toStringTag](){return"ObservableSet"}},pd;function zL(e){pd||(pd=new gE,W1(pd)),pd.addFilteredObj(e)}var gE=class{constructor(){this.a=0,this.f=new WeakMap}addFilteredObj(e){this.b||(this.b=new Set),this.b.add(e)}c(e){return this.b?.has(e)??!0}d(e){return VL([Ea(QL("|  ",this.a)),e])}e(e){return e.hadValue?e.didChange?[Ea(" "),ur(Dr(e.oldValue,70),{color:"red",strikeThrough:!0}),Ea(" "),ur(Dr(e.newValue,60),{color:"green"})]:[Ea(" (unchanged)")]:[Ea(" "),ur(Dr(e.newValue,60),{color:"green"}),Ea(" (initial)")]}handleObservableCreated(e){if(e instanceof Yi){const t=e;if(this.f.set(t,new Set),!1){const r=[];t.__debugUpdating=r;const s=t.beginUpdate;t.beginUpdate=o=>(r.push(o),s.apply(t,[o]));const n=t.endUpdate;t.endUpdate=o=>{const a=r.indexOf(o);return a===-1&&console.error("endUpdate called without beginUpdate",t.debugName,o.debugName),r.splice(a,1),n.apply(t,[o])}}}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this.c(e)){if(e instanceof Yi){this._handleDerivedRecomputed(e,t);return}console.log(...this.d([Ca("observable value changed"),ur(e.debugName,{color:"BlueViolet"}),...this.e(t)]))}}formatChanges(e){if(e.size!==0)return ur(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,i){this.c(e)&&this.f.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this.c(e))return;const i=this.f.get(e);i&&(console.log(...this.d([Ca("derived recomputed"),ur(e.debugName,{color:"BlueViolet"}),...this.e(t),this.formatChanges(i),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),i.clear())}handleDerivedCleared(e){this.c(e)&&console.log(...this.d([Ca("derived cleared"),ur(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this.c(e)&&console.log(...this.d([Ca("observable from event triggered"),ur(e.debugName,{color:"BlueViolet"}),...this.e(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this.c(e)&&this.f.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,i){this.c(e)&&this.f.get(e).add(t)}handleAutorunStarted(e){const t=this.f.get(e);t&&(this.c(e)&&console.log(...this.d([Ca("autorun"),ur(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++)}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this.c(e)&&console.log(...this.d([Ca("transaction"),ur(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function VL(e){const t=new Array,i=[];let r="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(r+=`%c${o.text}`,t.push(o.style),o.data&&i.push(...o.data)):"data"in o&&i.push(...o.data)}s(e);const n=[r,...t];return n.push(...i),n}function Ea(e){return ur(e,{color:"black"})}function Ca(e){return ur(ZL(`${e}: `,10),{color:"black",bold:!0})}function ur(e,t={color:"black"}){function i(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const r={color:t.color};return t.strikeThrough&&(r["text-decoration"]="line-through"),t.bold&&(r["font-weight"]="bold"),{text:e,style:i(r)}}function Dr(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?GL(e,t):JL(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function GL(e,t){let i="[ ",r=!0;for(const s of e){if(r||(i+=", "),i.length-5>t){i+="...";break}r=!1,i+=`${Dr(s,t-i.length)}`}return i+=" ]",i}function JL(e,t){if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString){const n=e.toString();return n.length<=t?n:n.substring(0,t-3)+"..."}const i=iE(e);let r=i?i+"(":"{ ",s=!0;for(const[n,o]of Object.entries(e)){if(s||(r+=", "),r.length-5>t){r+="...";break}s=!1,r+=`${n}: ${Dr(o,t-r.length)}`}return r+=i?")":" }",r}function QL(e,t){let i="";for(let r=1;r<=t;r++)i+=e;return i}function ZL(e,t){for(;e.length<t;)e+=" ";return e}var XL=class $4{static createHost(t,i){return new $4(t,i)}static createClient(t,i){return new $4(t,i)}constructor(t,i){this.b=t,this.c=i,this.a=this.b({handleNotification:n=>{const o=n,a=this.c().notifications[o[0]];if(!a)throw new Error(`Unknown notification "${o[0]}"!`);a(...o[1])},handleRequest:n=>{const o=n;try{return{type:"result",value:this.c().requests[o[0]](...o[1])}}catch(a){return{type:"error",value:a}}}});const r=new Proxy({},{get:(n,o)=>async(...a)=>{const c=await this.a.sendRequest([o,a]);if(c.type==="error")throw c.value;return c.value}}),s=new Proxy({},{get:(n,o)=>(...a)=>{this.a.sendNotification([o,a])}});this.api={notifications:s,requests:r}}};function YL(e,t){const i=globalThis;let r=[],s;const{channel:n,handler:o}=KL({sendNotification:c=>{s?s.sendNotification(c):r.push(c)}});let a;return(i.$$debugValueEditor_debugChannels??(i.$$debugValueEditor_debugChannels={}))[e]=c=>{a=t(),s=c;for(const l of r)c.sendNotification(l);return r=[],o},XL.createClient(n,()=>{if(!a)throw new Error("Not supported");return a})}function KL(e){let t;return{channel:r=>(t=r,{sendNotification:s=>{e.sendNotification(s)},sendRequest:s=>{throw new Error("not supported")}}),handler:{handleRequest:r=>r.type==="notification"?t?.handleNotification(r.data):t?.handleRequest(r.data)}}}var eN=class{constructor(){this.a=void 0}throttle(e,t){this.a===void 0&&(this.a=setTimeout(()=>{this.a=void 0,e()},t))}dispose(){this.a!==void 0&&clearTimeout(this.a)}};function mE(e,t){for(const i in t)e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?mE(e[i],t[i]):e[i]=t[i]}function vE(e,t){for(const i in t)t[i]===null?delete e[i]:e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?vE(e[i],t[i]):e[i]=t[i]}var tN=class bh{static{this.a=void 0}static getInstance(){return bh.a===void 0&&(bh.a=new bh),bh.a}j(){const t=[],i=[...this.h];if(i.length===0)return;const r=i.flatMap(n=>n.debugGetUpdatingObservers()??[]).map(n=>n.observer),s=new Set;for(;r.length>0;){const n=r.shift();if(s.has(n))continue;s.add(n);const o=this.m(n,a=>{s.has(a)||r.push(a)});o&&t.push(o)}return{names:i.map(n=>n.getDebugName()??"tx"),affected:t}}k(t){const i=this.f.get(t);if(!i){Bt(new qt("No info found"));return}return i}l(t){const i=this.f.get(t);if(!i){Bt(new qt("No info found"));return}return i}m(t,i){if(t instanceof Yi){const r=[...t.debugGetObservers()];for(const c of r)i(c);const s=this.k(t);if(!s)return;const n=t.debugGetState(),o={name:t.debugName,instanceId:s.instanceId,updateCount:n.updateCount},a=[...s.changedObservables].map(c=>this.f.get(c)?.instanceId).filter(Gi);if(n.isComputing)return{...o,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(n.state){case 0:return{...o,type:"observable/derived",state:"noValue"};case 3:return{...o,type:"observable/derived",state:"upToDate"};case 2:return{...o,type:"observable/derived",state:"stale",changedDependencies:a};case 1:return{...o,type:"observable/derived",state:"possiblyStale"}}}else if(t instanceof dd){const r=this.l(t);if(!r)return;const s={name:t.debugName,instanceId:r.instanceId,updateCount:r.updateCount},n=[...r.changedObservables].map(o=>this.f.get(o).instanceId);if(t.debugGetState().isRunning)return{...s,type:"autorun",state:"updating",changedDependencies:n};switch(t.debugGetState().state){case 3:return{...s,type:"autorun",state:"upToDate"};case 2:return{...s,type:"autorun",state:"stale",changedDependencies:n};case 1:return{...s,type:"autorun",state:"possiblyStale"}}}}n(t){const i=this.k(t);if(i)return{name:t.debugName,instanceId:i.instanceId}}p(t){if(t instanceof Yi)return{name:t.toString(),instanceId:this.k(t)?.instanceId};const i=this.l(t);if(i)return{name:t.toString(),instanceId:i.instanceId}}constructor(){this.b=0,this.c=0,this.e=new Map,this.f=new WeakMap,this.g=new Map,this.h=new Set,this.i=YL("observableDevTools",()=>({notifications:{setDeclarationIdFilter:t=>{},logObservableValue:t=>{console.log("logObservableValue",t)},flushUpdates:()=>{this.v()},resetUpdates:()=>{this.q=null,this.i.api.notifications.handleChange(this.s,!0)}},requests:{getDeclarations:()=>{const t={};for(const i of this.e.values())t[i.id]=i;return{decls:t}},getSummarizedInstances:()=>null,getObservableValueInfo:t=>({observers:[...this.g.get(t).debugGetObservers()].map(r=>this.p(r)).filter(Gi)}),getDerivedInfo:t=>{const i=this.g.get(t);return{dependencies:[...i.debugGetState().dependencies].map(r=>this.n(r)).filter(Gi),observers:[...i.debugGetObservers()].map(r=>this.p(r)).filter(Gi)}},getAutorunInfo:t=>({dependencies:[...this.g.get(t).debugGetState().dependencies].map(r=>this.n(r)).filter(Gi)}),getTransactionState:()=>this.j(),setValue:(t,i)=>{const r=this.g.get(t);if(r instanceof Yi)r.debugSetValue(i);else if(r instanceof $l)r.debugSetValue(i);else if(r instanceof an)r.debugSetValue(i);else throw new qt("Observable is not supported");const s=[...r.debugGetObservers()];for(const n of s)n.beginUpdate(r);for(const n of s)n.handleChange(r,void 0);for(const n of s)n.endUpdate(r)},getValue:t=>{const i=this.g.get(t);if(i instanceof Yi)return Dr(i.debugGetState().value,200);if(i instanceof $l)return Dr(i.debugGetState().value,200)},logValue:t=>{const i=this.g.get(t);if(i&&"get"in i)console.log("Logged Value:",i.get());else throw new qt("Observable is not supported")},rerun:t=>{const i=this.g.get(t);if(i instanceof Yi)i.debugRecompute();else if(i instanceof dd)i.debugRerun();else throw new qt("Observable is not supported")}}})),this.q=null,this.r=new eN,this.s={},this.v=()=>{this.q!==null&&(this.i.api.notifications.handleChange(this.q,!1),this.q=null)},Ir.enable()}u(t){vE(this.s,t),this.q===null?this.q=t:mE(this.q,t),this.r.throttle(this.v,10)}w(t,i){if(!i)return-1;let r=this.e.get(i.id);return r===void 0&&(r={id:this.b++,type:t,url:i.fileName,line:i.line,column:i.column},this.e.set(i.id,r),this.u({decls:{[r.id]:r}})),r.id}handleObservableCreated(t,i){const s={declarationId:this.w("observable/value",i),instanceId:this.c++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this.f.set(t,s)}handleOnListenerCountChanged(t,i){const r=this.k(t);if(r){if(r.listenerCount===0&&i>0){const s=t instanceof Yi?"observable/derived":"observable/value";this.g.set(r.instanceId,t),this.u({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,formattedValue:r.lastValue,type:s,name:t.debugName}}})}else r.listenerCount>0&&i===0&&(this.u({instances:{[r.instanceId]:null}}),this.g.delete(r.instanceId));r.listenerCount=i}}handleObservableUpdated(t,i){if(t instanceof Yi){this._handleDerivedRecomputed(t,i);return}const r=this.k(t);r&&i.didChange&&(r.lastValue=Dr(i.newValue,30),r.listenerCount>0&&this.u({instances:{[r.instanceId]:{formattedValue:r.lastValue}}}))}handleAutorunCreated(t,i){const s={declarationId:this.w("autorun",i),instanceId:this.c++,updateCount:0,changedObservables:new Set};this.f.set(t,s),this.g.set(s.instanceId,t),s&&this.u({instances:{[s.instanceId]:{instanceId:s.instanceId,declarationId:s.declarationId,runCount:0,type:"autorun",name:t.debugName}}})}handleAutorunDisposed(t){const i=this.l(t);i&&(this.u({instances:{[i.instanceId]:null}}),this.f.delete(t),this.g.delete(i.instanceId))}handleAutorunDependencyChanged(t,i,r){const s=this.l(t);s&&s.changedObservables.add(i)}handleAutorunStarted(t){}handleAutorunFinished(t){const i=this.l(t);i&&(i.changedObservables.clear(),i.updateCount++,this.u({instances:{[i.instanceId]:{runCount:i.updateCount}}}))}handleDerivedDependencyChanged(t,i,r){const s=this.k(t);s&&s.changedObservables.add(i)}_handleDerivedRecomputed(t,i){const r=this.k(t);if(!r)return;const s=Dr(i.newValue,30);r.updateCount++,r.changedObservables.clear(),r.lastValue=s,r.listenerCount>0&&this.u({instances:{[r.instanceId]:{formattedValue:s,recomputationCount:r.updateCount}}})}handleDerivedCleared(t){const i=this.k(t);i&&(i.lastValue=void 0,i.changedObservables.clear(),i.listenerCount>0&&this.u({instances:{[i.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(t){this.h.add(t)}handleEndTransaction(t){this.h.delete(t)}};function iN(e,t){const i=t?.debugNamePostProcessor??(n=>n),r=Dl.from(e,i);if(!r)return"";const s=new Set;return t.type==="observers"?bE(r,0,s,t).trim():wE(r,0,s,t).trim()}function wE(e,t,i,r){const s="		".repeat(t),n=[];if(i.has(e.sourceObj))return n.push(`${s}* ${e.type} ${e.name} (already listed)`),n.join(`
`);if(i.add(e.sourceObj),n.push(`${s}* ${e.type} ${e.name}:`),n.push(`${s}  value: ${Dr(e.value,50)}`),n.push(`${s}  state: ${e.state}`),e.dependencies.length>0){n.push(`${s}  dependencies:`);for(const a of e.dependencies){const c=Dl.from(a,r.debugNamePostProcessor??(l=>l))??Dl.unknown(a);n.push(wE(c,t+1,i,r))}}return n.join(`
`)}function bE(e,t,i,r){const s="		".repeat(t),n=[];if(i.has(e.sourceObj))return n.push(`${s}* ${e.type} ${e.name} (already listed)`),n.join(`
`);if(i.add(e.sourceObj),n.push(`${s}* ${e.type} ${e.name}:`),n.push(`${s}  value: ${Dr(e.value,50)}`),n.push(`${s}  state: ${e.state}`),e.observers.length>0){n.push(`${s}  observers:`);for(const a of e.observers){const c=Dl.from(a,r.debugNamePostProcessor??(l=>l))??Dl.unknown(a);n.push(bE(c,t+1,i,r))}}return n.join(`
`)}var Dl=class Fc{static from(t,i){if(t instanceof dd){const r=t.debugGetState();return new Fc(t,i(t.debugName),"autorun",void 0,r.stateStr,Array.from(r.dependencies),[])}else if(t instanceof Yi){const r=t.debugGetState();return new Fc(t,i(t.debugName),"derived",r.value,r.stateStr,Array.from(r.dependencies),Array.from(t.debugGetObservers()))}else if(t instanceof $l){const r=t.debugGetState();return new Fc(t,i(t.debugName),"observableValue",r.value,"upToDate",[],Array.from(t.debugGetObservers()))}else if(t instanceof an){const r=t.debugGetState();return new Fc(t,i(t.debugName),"fromEvent",r.value,r.hasValue?"upToDate":"initial",[],Array.from(t.debugGetObservers()))}}static unknown(t){return new Fc(t,"(unknown)","unknown",void 0,"unknown",[],[])}constructor(t,i,r,s,n,o,a){this.sourceObj=t,this.name=i,this.type=r,this.value=s,this.state=n,this.dependencies=o,this.observers=a}};ML(iN),IL(zL);var rN=!1;rN&&W1(new gE),oa&&oa.VSCODE_DEV_DEBUG_OBSERVABLES&&W1(tN.getInstance());var Pr;(function(e){e.Internal={type:"internal",label:"Built-In"},e.External={type:"external",label:"External"};function t(s){switch(s.type){case"extension":return`extension:${s.extensionId.value}`;case"mcp":return`mcp:${s.collectionId}:${s.definitionId}`;case"user":return`user:${s.file.toString()}`;case"internal":return"internal";case"external":return"external"}}e.toKey=t;function i(s,n){return t(s)===t(n)}e.equals=i;function r(s){return s.type==="internal"?{ordinal:1,label:d(6534,null)}:s.type==="mcp"?{ordinal:2,label:s.label}:s.type==="user"?{ordinal:0,label:d(6535,null)}:{ordinal:3,label:s.label}}e.classify=r})(Pr||(Pr={}));function sN(e){return typeof e=="object"&&typeof e.sessionId=="string"&&y.isUri(e.sessionResource)}var xa;(function(e){e.Hidden="hidden",e.HiddenAfterComplete="hiddenAfterComplete"})(xa||(xa={}));var nN=class{constructor(e,t,i,r,s,n){this.id=e,this.referenceName=t,this.icon=i,this.source=r,this.description=s,this.legacyFullNames=n,this.c=new pE,this.f=new pE,this.isHomogenous=WL(o=>!Dt.some(this.c.observable.read(o),a=>!Pr.equals(a.source,this.source))&&!Dt.some(this.f.observable.read(o),a=>!Pr.equals(a.source,this.source)))}addTool(e,t){return this.c.add(e,t),se(()=>{this.c.delete(e)})}addToolSet(e,t){return e===this?Y.None:(this.f.add(e,t),se(()=>{this.f.delete(e)}))}getTools(e){return Dt.concat(this.c.observable.read(e),...Dt.map(this.f.observable.read(e),t=>t.getTools(e)))}},gd=U("ILanguageModelToolsService"),G1;(function(e){e.execute="execute",e.edit="edit",e.search="search",e.agent="agent",e.read="read",e.web="web",e.todo="todo"})(G1||(G1={}));var md;(function(e){e.runSubagent="runSubagent",e.vscode="vscode"})(md||(md={}));var vd;(function(e){e.LATEST_PROTOCOL_VERSION="2025-11-25",e.JSONRPC_VERSION="2.0",e.PARSE_ERROR=-32700,e.INVALID_REQUEST=-32600,e.METHOD_NOT_FOUND=-32601,e.INVALID_PARAMS=-32602,e.INTERNAL_ERROR=-32603,e.URL_ELICITATION_REQUIRED=-32042})(vd||(vd={}));function oN(e,t){return qe.toKey(e)+"/"+t}var yE;(function(e){e[e.WorkspaceFolder=0]="WorkspaceFolder",e[e.Workspace=100]="Workspace",e[e.User=200]="User",e[e.Extension=300]="Extension",e[e.Filesystem=400]="Filesystem",e[e.RemoteBoost=-50]="RemoteBoost"})(yE||(yE={}));var SE;(function(e){function t(i,r){return i.id===r.id&&i.remoteAuthority===r.remoteAuthority&&i.label===r.label&&i.trustBehavior===r.trustBehavior}e.equals=t})(SE||(SE={}));var EE;(function(e){e[e.Initial=0]="Initial",e[e.Dynamic=1]="Dynamic"})(EE||(EE={}));var CE;(function(e){function t(s){return s}e.toSerialized=t;function i(s){return{id:s.id,label:s.label,cacheNonce:s.cacheNonce,staticMetadata:s.staticMetadata,launch:Pl.fromSerialized(s.launch),variableReplacement:s.variableReplacement?J1.fromSerialized(s.variableReplacement):void 0}}e.fromSerialized=i;function r(s,n){return s.id===n.id&&s.label===n.label&&s.cacheNonce===n.cacheNonce&&wi(s.roots,n.roots,(o,a)=>o.toString()===a.toString())&&Ci(s.launch,n.launch)&&Ci(s.presentation,n.presentation)&&Ci(s.variableReplacement,n.variableReplacement)&&Ci(s.devMode,n.devMode)}e.equals=r})(CE||(CE={}));var J1;(function(e){function t(r){return r}e.toSerialized=t;function i(r){return{section:r.section,folder:r.folder?{...r.folder,uri:y.revive(r.folder.uri)}:void 0,target:r.target}}e.fromSerialized=i})(J1||(J1={}));var xE;(function(e){e.Empty={working:!1,starting:[],serversRequiringInteraction:[]}})(xE||(xE={}));var kE;(function(e){e[e.HasUnknown=0]="HasUnknown",e[e.LoadingUnknown=1]="LoadingUnknown",e[e.AllKnown=2]="AllKnown"})(kE||(kE={}));var Xz=U("IMcpService"),$E;(function(e){let t;(function(i){i[i.Trusted=0]="Trusted",i[i.TrustedOnNonce=1]="TrustedOnNonce",i[i.Untrusted=2]="Untrusted",i[i.Unknown=3]="Unknown"})(t=e.Kind||(e.Kind={}))})($E||($E={}));var IE;(function(e){e[e.Unknown=0]="Unknown",e[e.Cached=1]="Cached",e[e.Outdated=2]="Outdated",e[e.RefreshingFromUnknown=3]="RefreshingFromUnknown",e[e.RefreshingFromCached=4]="RefreshingFromCached",e[e.Live=5]="Live"})(IE||(IE={}));var DE;(function(e){e[e.Stdio=1]="Stdio",e[e.HTTP=2]="HTTP"})(DE||(DE={}));var Pl;(function(e){function t(s){return s}e.toSerialized=t;function i(s){switch(s.type){case 2:return{type:s.type,uri:y.revive(s.uri),headers:s.headers,authentication:s.authentication};case 1:return{type:s.type,cwd:s.cwd,command:s.command,args:s.args,env:s.env,envFile:s.envFile}}}e.fromSerialized=i;async function r(s){const n=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(JSON.stringify(s)));return Em(re.wrap(new Uint8Array(n)))}e.hash=r})(Pl||(Pl={}));var PE;(function(e){let t;(function(i){i[i.Stopped=0]="Stopped",i[i.Starting=1]="Starting",i[i.Running=2]="Running",i[i.Error=3]="Error"})(t=e.Kind||(e.Kind={})),e.toString=i=>{switch(i.state){case 0:return d(10003,null);case 1:return d(10004,null);case 2:return d(10005,null);case 3:return d(10006,null,i.message);default:gm(i)}},e.toKindString=i=>{switch(i){case 0:return"stopped";case 1:return"starting";case 2:return"running";case 3:return"error";default:gm(i)}},e.canBeStarted=i=>i===3||i===0,e.isRunning=i=>!e.canBeStarted(i.state)})(PE||(PE={}));var AE=class n3 extends Error{static{this.d="User interaction required: "}static is(t){return t.message.startsWith(this.d)}constructor(t){super(`${n3.d}${t}`),this.reason=t}},TE;(function(e){e[e.Disabled=0]="Disabled",e[e.DisabledByAccess=1]="DisabledByAccess",e[e.Enabled=2]="Enabled"})(TE||(TE={}));var RE;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(RE||(RE={}));var LE;(function(e){e.Readme="readme",e.Manifest="manifest",e.Configuration="configuration"})(LE||(LE={}));var aN=U("IMcpWorkbenchService"),NE=class extends Y{constructor(t,i){super(),this.f=t,this.D(i.onChange(this.update,this))}set mcpServer(t){this.f.forEach(i=>i.mcpServer=t)}update(t){for(const i of this.f)t&&i.mcpServer?t.id===i.mcpServer.id&&(i.mcpServer=t):i.update()}};NE=__decorate([__param(1,aN)],NE);var Kz=new x("mcpServersGalleryStatus","unavailable"),eV=new x("hasInstalledMcpServers",!0),ME;(function(e){e.scheme="mcp-resource";const t="dylo78gyp";function i(s,n){return typeof n=="string"&&(n=y.parse(n)),n.with({scheme:e.scheme,authority:Em(re.fromString(s.id)),path:["",n.scheme,n.authority||t].join("/")+n.path})}e.fromServer=i;function r(s){if(typeof s=="string"&&(s=y.parse(s)),s.scheme!==e.scheme)throw new Error(`Invalid MCP resource URI: ${s.toString()}`);const n=s.path.split("/");if(n.length<3)throw new Error(`Invalid MCP resource URI: ${s.toString()}`);const[,o,a,...c]=n,l=new URL(`${o}://${a.toLowerCase()===t?"":a}`);return l.pathname=c.length?"/"+c.join("/"):"",l.search=s.query,l.hash=s.fragment,{definitionId:KP(s.authority).toString(),resourceURL:l}}e.toServer=r})(ME||(ME={}));var OE;(function(e){e[e.Logging=1]="Logging",e[e.Completions=2]="Completions",e[e.Prompts=4]="Prompts",e[e.PromptsListChanged=8]="PromptsListChanged",e[e.Resources=16]="Resources",e[e.ResourcesSubscribe=32]="ResourcesSubscribe",e[e.ResourcesListChanged=64]="ResourcesListChanged",e[e.Tools=128]="Tools",e[e.ToolsListChanged=256]="ToolsListChanged"})(OE||(OE={}));var tV=U("IMcpServerSampling"),FE;(function(e){e.Prefix="mcp_",e[e.MaxPrefixLen=18]="MaxPrefixLen",e[e.MaxLength=64]="MaxLength"})(FE||(FE={}));var UE;(function(e){e[e.Form=0]="Form",e[e.URL=1]="URL"})(UE||(UE={}));var iV=U("IMcpElicitationService"),go="**",Q1="/",wd="[/\\\\]",bd="[^/\\\\]",cN=/\//g;function jE(e,t){switch(e){case 0:return"";case 1:return`${bd}*?`;default:return`(?:${wd}|${bd}+${wd}${t?`|${wd}${bd}+`:""})*?`}}function yd(e,t){if(!e)return[];const i=[];let r=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!r&&!s){i.push(n),n="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&i.push(n),i}function HE(e){if(!e)return"";let t="";const i=yd(e,Q1);if(i.every(r=>r===go))t=".*";else{let r=!1;i.forEach((s,n)=>{if(s===go){if(r)return;t+=jE(2,n===i.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===Q1?h="":h=Zn(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const f=`(?:${yd(a,",").map(g=>HE(g)).join("|")})`;t+=f,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=bd;continue;case"*":t+=jE(1);continue;default:t+=Zn(u)}}n<i.length-1&&(i[n+1]!==go||n+2<i.length)&&(t+=wd)}r=s===go})}return t}var lN=/^\*\*\/\*\.[\w\.-]+$/,uN=/^\*\*\/([\w\.-]+)\/?$/,hN=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,dN=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,fN=/^\*\*((\/[\w\.-]+)+)\/?$/,pN=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,WE=new ta(1e4),_E=function(){return!1},Zr=function(){return null};function Z1(e,t){if(!e)return Zr;let i;typeof e!="string"?i=e.pattern:i=e,i=i.trim();const r=t.ignoreCase??!1,s={...t,equals:r?Ss:(c,l)=>c===l,endsWith:r?eT:(c,l)=>c.endsWith(l),isEqualOrParent:(c,l)=>qh(c,l,!Qs||r)},n=`${r?i.toLowerCase():i}_${!!t.trimForExclusions}_${r}`;let o=WE.get(n);if(o)return BE(o,e,s);let a;return lN.test(i)?o=gN(i.substring(4),i,s):(a=uN.exec(X1(i,s)))?o=mN(a[1],i,s):(t.trimForExclusions?dN:hN).test(i)?o=vN(i,s):(a=fN.exec(X1(i,s)))?o=qE(a[1].substring(1),i,!0,s):(a=pN.exec(X1(i,s)))?o=qE(a[1],i,!1,s):o=wN(i,s),WE.set(n,o),BE(o,e,s)}function BE(e,t,i){if(typeof t=="string")return e;const r=function(s,n){return i.isEqualOrParent(s,t.base)?e(XA(s.substring(t.base.length),ar),n):null};return r.allBasenames=e.allBasenames,r.allPaths=e.allPaths,r.basenames=e.basenames,r.patterns=e.patterns,r}function X1(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substring(0,e.length-2):e}function gN(e,t,i){return function(r,s){return typeof r=="string"&&i.endsWith(r,e)?t:null}}function mN(e,t,i){const r=`/${e}`,s=`\\${e}`,n=function(a,c){return typeof a!="string"?null:c?i.equals(c,e)?t:null:i.equals(a,e)||i.endsWith(a,r)||i.endsWith(a,s)?t:null},o=[e];return n.basenames=o,n.patterns=[t],n.allBasenames=o,n}function vN(e,t){const i=zE(e.slice(1,-1).split(",").map(a=>Z1(a,t)).filter(a=>a!==Zr),e),r=i.length;if(!r)return Zr;if(r===1)return i[0];const s=function(a,c){for(let l=0,u=i.length;l<u;l++)if(i[l](a,c))return e;return null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function qE(e,t,i,r){const s=ar===We.sep,n=s?e:e.replace(cN,ar),o=ar+n,a=We.sep+e;let c;return i?c=function(l,u){return typeof l=="string"&&(r.equals(l,n)||r.endsWith(l,o)||!s&&(r.equals(l,e)||r.endsWith(l,a)))?t:null}:c=function(l,u){return typeof l=="string"&&(r.equals(l,n)||!s&&r.equals(l,e))?t:null},c.allPaths=[(i?"*/":"./")+e],c}function wN(e,t){try{const i=new RegExp(`^${HE(e)}$`,t.ignoreCase?"i":void 0);return function(r){return i.lastIndex=0,typeof r=="string"&&i.test(r)?e:null}}catch{return Zr}}function ka(e,t,i){return!e||typeof t!="string"?!1:$a(e,i)(t)}function $a(e,t={}){if(!e)return _E;if(typeof e=="string"||bN(e)){const i=Z1(e,t);if(i===Zr)return _E;const r=function(s,n){return!!i(s,n)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return yN(e,t)}function bN(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function yN(e,t){const i=zE(Object.getOwnPropertyNames(e).map(a=>SN(a,e[a],t)).filter(a=>a!==Zr)),r=i.length;if(!r)return Zr;if(!i.some(a=>!!a.requiresSiblings)){if(r===1)return i[0];const a=function(u,h){let f;for(let g=0,m=i.length;g<m;g++){const w=i[g](u,h);if(typeof w=="string")return w;Ys(w)&&(f||(f=[]),f.push(w))}return f?(async()=>{for(const g of f){const m=await g;if(typeof m=="string")return m}return null})():null},c=i.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=i.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let f=0,g=i.length;f<g;f++){const m=i[f];m.requiresSiblings&&l&&(c||(c=Si(a)),u||(u=c.substring(0,c.length-Oh(a).length)));const w=m(a,c,u,l);if(typeof w=="string")return w;Ys(w)&&(h||(h=[]),h.push(w))}return h?(async()=>{for(const f of h){const g=await f;if(typeof g=="string")return g}return null})():null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function SN(e,t,i){if(t===!1)return Zr;const r=Z1(e,i);if(r===Zr)return Zr;if(typeof t=="boolean")return r;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!r(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return Ys(h)?h.then(f=>f?e:null):h?e:null};return n.requiresSiblings=!0,n}}return r}function zE(e,t){const i=e.filter(a=>!!a.basenames);if(i.length<2)return e;const r=i.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=r.length;a<c;a++)s.push(t)}else s=i.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substring(u)}const l=r.indexOf(c);return l!==-1?s[l]:null};n.basenames=r,n.patterns=s,n.allBasenames=r;const o=e.filter(a=>!a.basenames);return o.push(n),o}var EN=U("notebookDocumentService"),Y1=["W","X","Y","Z","a","b","c","d","e","f"],CN=new RegExp(`^[${Y1.join("")}]+`),VE=7;function K1(e){if(e.scheme!==B.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(CN,""),VE),r=Bn(e.fragment.substring(t+1)).toString();if(!isNaN(i))return{handle:i,notebook:e.with({scheme:r,fragment:null})}}function xN(e,t){const i=t.toString(VE),s=`${i.length<Y1.length?Y1[i.length-1]:"z"}${i}s${Kc(re.fromString(e.scheme),!0,!0)}`;return e.with({scheme:B.vscodeNotebookCell,fragment:s})}function kN(e){if(e.scheme!==B.vscodeNotebookMetadata)return;const t=Bn(e.fragment).toString();return e.with({scheme:t,fragment:null})}function $N(e){const t=`${Kc(re.fromString(e.scheme),!0,!0)}`;return e.with({scheme:B.vscodeNotebookMetadata,fragment:t})}function GE(e){if(e.scheme!==B.vscodeNotebookCellOutput)return;const t=new URLSearchParams(e.query),i=t.get("openIn");if(!i)return;const r=t.get("outputId")??void 0,s=K1(e.with({scheme:B.vscodeNotebookCell,query:null})),n=t.get("outputIndex")?parseInt(t.get("outputIndex")||"",10):void 0,o=s?s.notebook:e.with({scheme:t.get("notebookScheme")||B.file,fragment:null,query:null}),a=t.get("cellIndex")?parseInt(t.get("cellIndex")||"",10):void 0;return{notebook:o,openIn:i,outputId:r,outputIndex:n,cellHandle:s?.handle,cellFragment:e.fragment,cellIndex:a}}var IN=class{constructor(){this.a=new wt}getNotebook(e){if(e.scheme===B.vscodeNotebookCell){const t=K1(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}if(e.scheme===B.vscodeNotebookCellOutput){const t=GE(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Ge(EN,IN,1);var Ia;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Ia||(Ia={}));var rV=["application/json","application/javascript","text/html","image/svg+xml",kr.latex,kr.markdown,"image/png","image/jpeg",kr.text],sV=[kr.latex,kr.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",kr.text],JE;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(JE||(JE={}));var QE;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(QE||(QE={}));var ZE;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(ZE||(ZE={}));var XE;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(XE||(XE={}));var YE;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(YE||(YE={}));var Ar;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(Ar||(Ar={}));var KE;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(KE||(KE={}));var eC;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(eC||(eC={}));var tC;(function(e){e.scheme=B.vscodeNotebookMetadata;function t(r){return $N(r)}e.generate=t;function i(r){return kN(r)}e.parse=i})(tC||(tC={}));var ev;(function(e){e.scheme=B.vscodeNotebookCell;function t(l,u){return xN(l,u)}e.generate=t;function i(l){return K1(l)}e.parse=i;function r(l,u){return l.with({scheme:B.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"editor",outputId:u??"",notebookScheme:l.scheme!==B.file?l.scheme:""}).toString()})}e.generateCellOutputUriWithId=r;function s(l,u,h){return l.with({scheme:B.vscodeNotebookCellOutput,fragment:u.fragment,query:new URLSearchParams({openIn:"notebook",outputIndex:String(h)}).toString()})}e.generateCellOutputUriWithIndex=s;function n(l,u,h,f,g){return l.with({scheme:B.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"notebookOutputEditor",notebook:l.toString(),cellIndex:String(h),outputId:f,outputIndex:String(g)}).toString()})}e.generateOutputEditorUri=n;function o(l){return GE(l)}e.parseCellOutputUri=o;function a(l,u,h){return e.generate(l,u).with({scheme:h})}e.generateCellPropertyUri=a;function c(l,u){if(l.scheme===u)return e.parse(l.with({scheme:e.scheme}))}e.parseCellPropertyUri=c})(ev||(ev={}));var nV=new x("notebookEditorCursorAtBoundary","none"),oV=new x("notebookEditorCursorAtLineBoundary","none"),iC;(function(e){e.default="default",e.option="option"})(iC||(iC={}));var rC;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(rC||(rC={}));var sC;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(sC||(sC={}));var aV=class Qg{static{this.d="notebook/"}static create(t,i){return`${Qg.d}${t}/${i??t}`}static parse(t){if(t.startsWith(Qg.d)){const i=t.substring(Qg.d.length).split("/");if(i.length===2)return{notebookType:i[0],viewType:i[1]}}}},DN=new TextDecoder;function PN(e){const t=[];let i=!1;for(const o of e)(t.length===0||i)&&(t.push(o),i=!0);let r=TN(t);const s=re.concat(t.map(o=>re.wrap(o))),n=ON(s);return r=r||n.byteLength!==s.byteLength,{data:n,didCompression:r}}var Sd="\x1B[A",tv=Sd.split("").map(e=>e.charCodeAt(0)),AN=10;function TN(e){let t=!1;return e.forEach((i,r)=>{if(r===0||i.length<Sd.length)return;const s=e[r-1],n=i.subarray(0,Sd.length);if(n[0]===tv[0]&&n[1]===tv[1]&&n[2]===tv[2]){const o=s.lastIndexOf(AN);if(o===-1)return;t=!0,e[r-1]=s.subarray(0,o),e[r]=i.subarray(Sd.length)}}),t}function RN(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function LN(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i=i+t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}var NN=8,MN=13;function ON(e){return!e.buffer.includes(NN)&&!e.buffer.includes(MN)?e:re.fromString(LN(RN(DN.decode(e.buffer))))}var nC;(function(e){e.Delimiter="\0"})(nC||(nC={}));var oC;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(oC||(oC={}));var Fe=class vr{static fromExtHostTestItem(t,i,r=t.parent){if(t._isRoot)return new vr([i]);const s=[t.id];for(let n=r;n&&n.id!==i;n=n.parent)s.push(n.id);return s.push(i),new vr(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const i=t.indexOf("\0");return i===-1?t:t.slice(0,i)}static fromString(t){return new vr(t.split("\0"))}static join(t,i){return new vr([...t.path,i])}static split(t){return t.split("\0")}static joinToString(t,i){return t.toString()+"\0"+i}static parentId(t){const i=t.lastIndexOf("\0");return i===-1?void 0:t.slice(0,i)}static localId(t){const i=t.lastIndexOf("\0");return i===-1?t:t.slice(i+1)}static isChild(t,i){return i[t.length]==="\0"&&i.startsWith(t)}static compare(t,i){return t===i?0:vr.isChild(t,i)?2:vr.isChild(i,t)?3:1}static getLengthOfCommonPrefix(t,i){if(t===0)return 0;let r=0;for(;r<t-1;){for(let s=1;s<t;s++){const n=i(s-1),o=i(s);if(n.path[r]!==o.path[r])return r}r++}return r}constructor(t,i=t.length){if(this.path=t,this.d=i,t.length===0||i<1)throw new Error("cannot create test with empty path")}get rootId(){return new vr(this.path,1)}get parentId(){return this.d>1?new vr(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new vr(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new vr(this.path,t)}compare(t){if(typeof t=="string")return vr.compare(this.toString(),t);for(let i=0;i<t.d&&i<this.d;i++)if(t.path[i]!==this.path[i])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},aC;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(aC||(aC={}));var cC;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(cC||(cC={}));var lC;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(lC||(lC={}));var uC;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(uC||(uC={}));var cV={2:d(13974,null),4:d(13975,null),8:d(13976,null)},FN=e=>"runId"in e,Da;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({range:Xe.lift(i.range),uri:t.asCanonicalUri(y.revive(i.uri))})})(Da||(Da={}));var hC;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(hC||(hC={}));var Ed;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,i)=>({label:i.label,uri:i.uri?t.asCanonicalUri(y.revive(i.uri)):void 0,position:i.position?Xi.lift(i.position):void 0})})(Ed||(Ed={}));var Cd;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Da.serialize(t.location),stackTrace:t.stackTrace?.map(Ed.serialize)}),e.deserialize=(t,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&Da.deserialize(t,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(r=>Ed.deserialize(t,r))})})(Cd||(Cd={}));var xd;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Da.serialize(t.location)}),e.deserialize=(t,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&Da.deserialize(t,i.location)})})(xd||(xd={}));var kd;(function(e){e.serialize=t=>t.type===0?Cd.serialize(t):xd.serialize(t),e.deserialize=(t,i)=>i.type===0?Cd.deserialize(t,i):xd.deserialize(t,i),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(kd||(kd={}));var Al;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(kd.serialize)}),e.deserialize=(t,i)=>({state:i.state,duration:i.duration,messages:i.messages.map(r=>kd.deserialize(t,r))})})(Al||(Al={}));var dC="\0",$d=(e,t)=>e+dC+t,fC=e=>{const t=e.indexOf(dC);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Id;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?t.asCanonicalUri(y.revive(i.uri)):void 0,range:i.range?Xe.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})})(Id||(Id={}));var pC;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(pC||(pC={}));var cn;(function(e){e.serialize=t=>({expand:t.expand,item:Id.serialize(t.item)}),e.deserialize=(t,i)=>({controllerId:Fe.root(i.item.extId),expand:i.expand,item:Id.deserialize(t,i.item)})})(cn||(cn={}));var Tl;(function(e){e.serialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.uri!==void 0&&(i.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(i.range=t.item.range?.toJSON()),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}},e.deserialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.range!==void 0&&(i.range=t.item.range?Xe.lift(t.item.range):null),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}}})(Tl||(Tl={}));var iv=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},gC;(function(e){e.serializeWithoutMessages=t=>({...cn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Al.serializeWithoutMessages)}),e.serialize=t=>({...cn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Al.serialize)}),e.deserialize=(t,i)=>({...cn.deserialize(t,i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(r=>Al.deserialize(t,r)),retired:!0})})(gC||(gC={}));var rv;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,i)=>{t.covered+=i.covered,t.total+=i.total}})(rv||(rv={}));var mC;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:t.asCanonicalUri(y.revive(i.uri))}),e.empty=(t,i)=>({id:t,uri:i,statement:rv.empty()})})(mC||(mC={}));function sv(e){return{...e,location:e.location?.toJSON()}}function nv(e){return e.location=e.location?Xi.isIPosition(e.location)?Xi.lift(e.location):Xe.lift(e.location):void 0,e}var vC;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(vC||(vC={}));var wC;(function(e){e.serialize=t=>t.type===0?Pd.serialize(t):Ad.serialize(t),e.deserialize=t=>t.type===0?Pd.deserialize(t):Ad.deserialize(t)})(wC||(wC={}));var Dd;(function(e){e.serialize=sv,e.deserialize=nv})(Dd||(Dd={}));var Pd;(function(e){e.serialize=sv,e.deserialize=nv})(Pd||(Pd={}));var Ad;(function(e){e.serialize=t=>({...sv(t),branches:t.branches?.map(Dd.serialize)}),e.deserialize=t=>({...nv(t),branches:t.branches?.map(Dd.deserialize)})})(Ad||(Ad={}));var bC;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(bC||(bC={}));var Td;(function(e){e.deserialize=(t,i)=>i.op===0?{op:i.op,item:cn.deserialize(t,i.item)}:i.op===1?{op:i.op,item:Tl.deserialize(i.item)}:i.op===2?{op:i.op,uri:t.asCanonicalUri(y.revive(i.uri)),docv:i.docv}:i,e.serialize=t=>t.op===0?{op:t.op,item:cn.serialize(t.item)}:t.op===1?{op:t.op,item:Tl.serialize(t.item)}:t})(Td||(Td={}));var UN=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const i of e)switch(i.op){case 0:this.p(cn.deserialize(this.l,i.item),t);break;case 1:this.q(Tl.deserialize(i.item),t);break;case 3:this.v(i.itemId,t);break;case 5:this.w(i.itemId);break;case 4:this.updatePendingRoots(i.amount);break;case 6:this.f.set(i.tag.id,i.tag);break;case 7:this.f.delete(i.id);break}t.complete?.()}p(e,t){const i=Fe.parentId(e.item.extId)?.toString();let r;if(!i)r=this.y(e),this.h.add(r),this.g.set(e.item.extId,r);else if(this.g.has(i)){const s=this.g.get(i);s.children.add(e.item.extId),r=this.y(e,s),this.g.set(e.item.extId,r)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(r),e.expand===2&&this.j++,r}q(e,t){const i=this.g.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===2&&this.j--,e.expand===2&&this.j++),iv(i,e),t.update?.(i),i}v(e,t){const i=this.g.get(e);if(!i)return;const r=Fe.parentId(i.item.extId)?.toString();r?this.g.get(r).children.delete(i.item.extId):this.h.delete(i);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==i),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},lV=U("IAiSettingsSearchService"),ln;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(ln||(ln={}));var jN=U("editorGroupsService"),yC;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(yC||(yC={}));var SC;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(SC||(SC={}));var EC;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(EC||(EC={}));var CC;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(CC||(CC={}));var xC;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(xC||(xC={}));var kC;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(kC||(kC={}));var $C;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})($C||($C={}));var IC=U("editorService"),HN=-1,WN=-2,un;(function(e){e.Extensions="Extensions",e.IntegratedTerminal="IntegratedTerminal",e.InteractiveSession="InteractiveSession",e.Telemetry="Telemetry",e.Update="Update"})(un||(un={}));var uV={[un.Extensions]:{name:{key:"extensionsConfigurationTitle",value:d(145,null)}},[un.IntegratedTerminal]:{name:{key:"terminalIntegratedConfigurationTitle",value:d(146,null)}},[un.InteractiveSession]:{name:{key:"interactiveSessionConfigurationTitle",value:d(147,null)}},[un.Telemetry]:{name:{key:"telemetryConfigurationTitle",value:d(148,null)}},[un.Update]:{name:{key:"updateConfigurationTitle",value:d(149,null)}}},Ki=U("configurationService"),DC;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(DC||(DC={}));function ov(e,t){const i=Object.create(null);for(const r in e)PC(i,r,e[r],t);return i}function PC(e,t,i,r){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=i}catch{r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function _N(e,t){const i=t.split(".");AC(e,i)}function AC(e,t){if(!e)return;const i=e,r=t.shift();if(t.length===0){delete i[r];return}if(Object.keys(i).indexOf(r)!==-1){const s=i[r];typeof s=="object"&&!Array.isArray(s)&&(AC(s,t),Object.keys(s).length===0&&delete i[r])}}function Rd(e,t,i){function r(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=r(e,s);return typeof n>"u"?i:n}function BN(e){return e.replace(/^\[/,"").replace(/]$/g,"").replace(/\]\[/g,", ")}function qN(e){let t=!1;const i=new Map,r=new Map;if(zN(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const f=i.get(h);if(!f){const g={schemas:[u]};return i.set(h,g),r.set(u,g),!0}return f.schemas.push(u),r.set(u,f),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,f)=>{if(f!==u){const g=r.get(f);if(g&&g.schemas.length>1)return g.id||(g.id=`_${o.length}`,o.push(g.schemas[0])),{$ref:`#/${n}/${g.id}`}}return f})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function Pa(e){return typeof e=="object"&&e!==null}function zN(e,t){if(!e||typeof e!="object")return;const i=(...c)=>{for(const l of c)Pa(l)&&o.push(l)},r=(...c)=>{for(const l of c)if(Pa(l))for(const u in l){const h=l[u];Pa(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)Pa(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)Pa(l)&&o.push(l);else Pa(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),r(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var Ld={JSONContribution:"base.contributions.json"};function TC(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var VN=class extends Y{constructor(){super(...arguments),this.a={},this.b={},this.c=this.D(new P),this.onDidChangeSchema=this.c.event,this.f=this.D(new P),this.onDidChangeSchemaAssociations=this.f.event}registerSchema(e,t,i){const r=TC(e);this.a[r]=t,this.c.fire(e),i&&i.add(se(()=>{delete this.a[r],this.c.fire(e)}))}registerSchemaAssociation(e,t){const i=TC(e);return this.b[i]||(this.b[i]=[]),this.b[i].includes(t)||(this.b[i].push(t),this.f.fire()),se(()=>{const r=this.b[i];if(r){const s=r.indexOf(t);s!==-1&&(r.splice(s,1),r.length===0&&delete this.b[i],this.f.fire())}})}notifySchemaChanged(e){this.c.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?qN(t):void 0}hasSchemaContent(e){return!!this.a[e]}getSchemaAssociations(){return this.b}},GN=new VN;Nt.add(Ld.JSONContribution,GN);var Ui,av=globalThis.vscode;if(typeof av<"u"&&typeof av.context<"u"){const e=av.context.configuration();if(e)Ui=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Ui=globalThis._VSCODE_PRODUCT_JSON,oa.VSCODE_DEV&&Object.assign(Ui,{nameShort:`${Ui.nameShort} Dev`,nameLong:`${Ui.nameLong} Dev`,dataFolderName:`${Ui.dataFolderName}-dev`,serverDataFolderName:Ui.serverDataFolderName?`${Ui.serverDataFolderName}-dev`:void 0}),!Ui.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Ui,{version:e.version})}}else Ui={nameShort:"Code - OSS",nameLong:"Code - OSS",applicationName:"code-oss",dataFolderName:".vscode-oss",win32MutexName:"vscodeoss",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverGreeting:[],serverLicense:[],serverLicensePrompt:"",serverApplicationName:"code-server-oss",serverDataFolderName:".vscode-server-oss",tunnelApplicationName:"code-tunnel-oss",win32DirName:"Microsoft Code OSS",win32NameVersion:"Microsoft Code OSS",win32RegValueName:"CodeOSS",win32x64AppId:"{{D77B7E06-80BA-4137-BCF4-654B95CCEBC5}",win32arm64AppId:"{{D1ACE434-89C5-48D1-88D3-E2991DF85475}",win32x64UserAppId:"{{CC6B787D-37A0-49E8-AE24-8559A032BE0C}",win32arm64UserAppId:"{{3AEBF0C8-F733-4AD4-BADE-FDB816D53D7B}",win32AppUserModelId:"Microsoft.CodeOSS",win32ShellNameShort:"C&ode - OSS",win32TunnelServiceMutex:"vscodeoss-tunnelservice",win32TunnelMutex:"vscodeoss-tunnel",darwinBundleIdentifier:"com.visualstudio.code.oss",darwinProfileUUID:"47827DD9-4734-49A0-AF80-7E19B11495CC",darwinProfilePayloadUUID:"CF808BE7-53F3-46C6-A7E2-7EDB98A5E959",linuxIconName:"code-oss",licenseFileName:"LICENSE.txt",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",nodejsRepository:"https://nodejs.org",urlProtocol:"code-oss",webviewContentExternalBaseUrlTemplate:"https://{{uuid}}.vscode-cdn.net/insider/ef65ac1ba57f57f2a3961bfe94aa20481caca4c6/out/vs/workbench/contrib/webview/browser/pre/",builtInExtensions:[{name:"ms-vscode.js-debug-companion",version:"1.1.3",sha256:"7380a890787452f14b2db7835dfa94de538caf358ebc263f9d46dd68ac52de93",repo:"https://github.com/microsoft/vscode-js-debug-companion",metadata:{id:"99cb0b7f-7354-4278-b8da-6cc79972169d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.js-debug",version:"1.105.0",sha256:"0c45b90342e8aafd4ff2963b4006de64208ca58c2fd01fea7a710fe61dcfd12a",repo:"https://github.com/microsoft/vscode-js-debug",metadata:{id:"25629058-ddac-4e17-abba-74678e126c5d",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}},{name:"ms-vscode.vscode-js-profile-table",version:"1.0.10",sha256:"7361748ddf9fd09d8a2ed1f2a2d7376a2cf9aae708692820b799708385c38e08",repo:"https://github.com/microsoft/vscode-js-profile-visualizer",metadata:{id:"7e52b41b-71ad-457b-ab7e-0620f1fc4feb",publisherId:{publisherId:"5f5636e7-69ed-4afe-b5d6-8d231fb3d3ee",publisherName:"ms-vscode",displayName:"Microsoft",flags:"verified"},publisherDisplayName:"Microsoft"}}],defaultChatAgent:{extensionId:"GitHub.copilot",chatExtensionId:"GitHub.copilot-chat",documentationUrl:"https://aka.ms/github-copilot-overview",termsStatementUrl:"https://aka.ms/github-copilot-terms-statement",privacyStatementUrl:"https://aka.ms/github-copilot-privacy-statement",skusDocumentationUrl:"https://aka.ms/github-copilot-plans",publicCodeMatchesUrl:"https://aka.ms/github-copilot-match-public-code",manageSettingsUrl:"https://aka.ms/github-copilot-settings",managePlanUrl:"https://aka.ms/github-copilot-manage-plan",manageOverageUrl:"https://aka.ms/github-copilot-manage-overage",upgradePlanUrl:"https://aka.ms/github-copilot-upgrade-plan",signUpUrl:"https://aka.ms/github-sign-up",provider:{default:{id:"github",name:"GitHub"},enterprise:{id:"github-enterprise",name:"GHE.com"},google:{id:"google",name:"Google"},apple:{id:"apple",name:"Apple"}},providerUriSetting:"github-enterprise.uri",providerScopes:[["read:user","user:email","repo","workflow"],["user:email"],["read:user"]],entitlementUrl:"https://api.github.com/copilot_internal/user",entitlementSignupLimitedUrl:"https://api.github.com/copilot_internal/subscribe_limited_user",chatQuotaExceededContext:"github.copilot.chat.quotaExceeded",completionsQuotaExceededContext:"github.copilot.completions.quotaExceeded",walkthroughCommand:"github.copilot.open.walkthrough",completionsMenuCommand:"github.copilot.toggleStatusMenu",completionsRefreshTokenCommand:"github.copilot.signIn",chatRefreshTokenCommand:"github.copilot.refreshToken",generateCommitMessageCommand:"github.copilot.git.generateCommitMessage",resolveMergeConflictsCommand:"github.copilot.git.resolveMergeConflicts",completionsAdvancedSetting:"github.copilot.advanced",completionsEnablementSetting:"github.copilot.enable",nextEditSuggestionsSetting:"github.copilot.nextEditSuggestions.enabled"},trustedExtensionAuthAccess:{github:["GitHub.copilot-chat"],"github-enterprise":["GitHub.copilot-chat"]},version:"1.108.0",commit:"2064368b65eca34492249241745ca3b9d4b7bc5d",date:"2025-12-31T14:47:27.055Z"},Object.keys(Ui).length===0&&Object.assign(Ui,{version:"1.104.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});var gi=Ui,RC;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(RC||(RC={}));var hn={Configuration:"base.contributions.configuration"},LC;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(LC||(LC={}));var Nd={properties:{},patternProperties:{}},Md={properties:{},patternProperties:{}},Od={properties:{},patternProperties:{}},Fd={properties:{},patternProperties:{}},Ud={properties:{},patternProperties:{}},jd={properties:{},patternProperties:{}},Rl={properties:{},patternProperties:{}},mo="vscode://schemas/settings/resourceLanguage",Hd=Nt.as(Ld.JSONContribution),JN=class extends Y{constructor(){super(),this.a=[],this.n=new Set,this.q=this.D(new P),this.onDidSchemaChange=this.q.event,this.r=this.D(new P),this.onDidUpdateConfiguration=this.r.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1843,null),properties:{}},this.f=[this.c],this.m={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.g={},this.h=new Map,this.j={},Hd.registerSchema(mo,this.m),this.N()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){const i=new Set;this.F(e,t,i),Hd.registerSchema(mo,this.m),this.q.fire(),this.r.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.G(e,t),Hd.registerSchema(mo,this.m),this.q.fire(),this.r.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.G(t,i),this.F(e,!1,i),Hd.registerSchema(mo,this.m),this.q.fire(),this.r.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.s(e,t),this.q.fire(),this.r.fire({properties:t,defaultsOverrides:!0})}s(e,t){this.a.push(...e);const i=[];for(const{overrides:r,source:s}of e)for(const n in r){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=r[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),Xr.test(n)){const c=this.y(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.w(n,c,s),i.push(...Ll(n))}else{const c=this.z(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.g[n];l&&(this.O(n,l),this.J(n,l))}}this.C(i)}deregisterDefaultConfigurations(e){const t=new Set;this.u(e,t),this.q.fire(),this.r.fire({properties:t,defaultsOverrides:!0})}u(e,t){for(const i of e){const r=this.a.indexOf(i);r!==-1&&this.a.splice(r,1)}for(const{overrides:i,source:r}of e)for(const s in i){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>r?a.source?.id===r.id:a.value===i[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),Xr.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.y(s,c.value,c.source,a);a&&!vm(a.value)?(n.configurationDefaultOverrideValue=a,this.w(s,a,r)):(this.b.delete(s),delete this.g[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.z(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.g[s];c&&(this.O(s,c),this.J(s,c))}t.add(s)}}this.M()}w(e,t,i){const r={section:{id:this.c.id,title:this.c.title,order:this.c.order,extensionInfo:this.c.extensionInfo},type:"object",default:t.value,description:d(1844,null,BN(e)),$ref:mo,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.g[e]=r,this.c.properties[e]=r}y(e,t,i,r){const s=r?.value||{},n=r?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(bt(a)&&(Zc(s[o])||bt(s[o]))){if(s[o]={...s[o]??{},...a},i)for(const l in a)n.set(`${o}.${l}`,i)}else s[o]=a,i?n.set(o,i):n.delete(o)}return{value:s,source:n}}z(e,t,i,r){const s=this.g[e],n=r?.value??s?.defaultDefaultValue;let o=i;if(bt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(Zc(n)||bt(n)))){if(o=r?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&o.set(`${e}.${c}`,i);t={...bt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.u(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.s(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.G(e.removedConfigurations,i),e.addedConfigurations&&this.F(e.addedConfigurations,!1,i),this.q.fire(),this.r.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.q.fire()}registerOverrideIdentifiers(e){this.C(e),this.q.fire()}C(e){for(const t of e)this.n.add(t);this.M()}F(e,t,i){e.forEach(r=>{this.H(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.f.push(r),this.I(r)})}G(e,t){const i=r=>{if(r.properties)for(const s in r.properties){t.add(s);const n=this.g[s];n?.policy?.name&&this.h.delete(n.policy.name),delete this.g[s],this.L(s,r.properties[s])}r.allOf?.forEach(s=>i(s))};for(const r of e){i(r);const s=this.f.indexOf(r);s!==-1&&this.f.splice(s,1)}}H(e,t=!0,i,r,s=4,n){s=Tt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(l.section={id:e.id,title:e.title,order:e.order,extensionInfo:e.extensionInfo},t&&ZN(c,l,i?.id)){delete o[c];continue}l.source=i,l.defaultDefaultValue=o[c].default,this.O(c,l),Xr.test(c)?l.scope=void 0:(l.scope=Tt(l.scope)?s:l.scope,l.restricted=Tt(l.restricted)?!!r?.includes(c):l.restricted),l.experiment?l.tags?.some(f=>f.toLowerCase()==="onexp")||(l.tags=l.tags??[],l.tags.push("onExP")):l.tags?.some(f=>f.toLowerCase()==="onexp")&&(console.error(`Invalid tag 'onExP' found for property '${c}'. Please use 'experiment' property instead.`),l.experiment={mode:"startup"});const u=o[c].hasOwnProperty("included")&&!o[c].included,h=o[c].policy?.name;u?(this.j[c]=o[c],h&&(this.h.set(h,c),n.add(c)),delete o[c]):(n.add(c),h&&this.h.set(h,c),this.g[c]=o[c],!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage))}const a=e.allOf;if(a)for(const c of a)this.H(c,t,i,r,s,n)}getConfigurations(){return this.f}getConfigurationProperties(){return this.g}getPolicyConfigurations(){return this.h}getExcludedConfigurationProperties(){return this.j}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,i]of this.b)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}I(e){const t=i=>{const r=i.properties;if(r)for(const n in r)this.J(n,r[n]);i.allOf?.forEach(t)};t(e)}J(e,t){switch(Nd.properties[e]=t,t.scope){case 1:Md.properties[e]=t;break;case 2:Fd.properties[e]=t;break;case 3:Od.properties[e]=t;break;case 7:Ud.properties[e]=t;break;case 4:jd.properties[e]=t;break;case 5:Rl.properties[e]=t;break;case 6:Rl.properties[e]=t,this.m.properties[e]=t;break}}L(e,t){switch(delete Nd.properties[e],t.scope){case 1:delete Md.properties[e];break;case 2:delete Fd.properties[e];break;case 3:delete Od.properties[e];break;case 7:delete Ud.properties[e];break;case 4:delete jd.properties[e];break;case 5:case 6:delete Rl.properties[e],delete this.m.properties[e];break}}M(){for(const e of this.n.values()){const t=`[${e}]`,i={type:"object",description:d(1845,null),errorMessage:d(1846,null),$ref:mo};this.O(t,i),Nd.properties[t]=i,Md.properties[t]=i,Od.properties[t]=i,Fd.properties[t]=i,Ud.properties[t]=i,jd.properties[t]=i,Rl.properties[t]=i}}N(){const e={type:"object",description:d(1847,null),errorMessage:d(1848,null),$ref:mo};Nd.patternProperties[dn]=e,Md.patternProperties[dn]=e,Od.patternProperties[dn]=e,Fd.patternProperties[dn]=e,Ud.patternProperties[dn]=e,jd.patternProperties[dn]=e,Rl.patternProperties[dn]=e,this.q.fire()}O(e,t){const i=this.b.get(e)?.configurationDefaultOverrideValue;let r,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,s=i.source),Zc(r)&&(r=t.defaultDefaultValue,s=void 0),Zc(r)&&(r=QN(t.type)),t.default=r,t.defaultValueSource=s}},NC="\\[([^\\]]+)\\]",MC=new RegExp(NC,"g"),dn=`^(${NC})+$`,Xr=new RegExp(dn);function Ll(e){const t=[];if(Xr.test(e)){let i=MC.exec(e);for(;i?.length;){const r=i[1].trim();r&&t.push(r),i=MC.exec(e)}}return zs(t)}function QN(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Wd=new JN;Nt.add(hn.Configuration,Wd);function ZN(e,t,i){return e.trim()?Xr.test(e)?d(1850,null,e):Wd.getConfigurationProperties()[e]!==void 0&&(!i||!XN.has(i.toLowerCase()))?d(1851,null,e):t.policy?.name&&Wd.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1852,null,e,t.policy?.name,Wd.getPolicyConfigurations().get(t.policy?.name)):null:d(1849,null)}var XN=new Set(gi.defaultChatAgent?[gi.defaultChatAgent.extensionId,gi.defaultChatAgent.chatExtensionId].map(e=>e.toLowerCase()):[]),cv="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",hV=new RegExp(cv),OC;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(OC||(OC={}));var FC;(function(e){e.NoneOrRelevance="NoneOrRelevance",e.LastUpdatedDate="LastUpdatedDate",e.Title="Title",e.PublisherName="PublisherName",e.InstallCount="InstallCount",e.PublishedDate="PublishedDate",e.AverageRating="AverageRating",e.WeightedRating="WeightedRating"})(FC||(FC={}));var UC;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(UC||(UC={}));var jC;(function(e){e.Category="Category",e.ExtensionId="ExtensionId",e.ExtensionName="ExtensionName",e.ExcludeWithFlags="ExcludeWithFlags",e.Featured="Featured",e.SearchText="SearchText",e.Tag="Tag",e.Target="Target"})(jC||(jC={}));var HC;(function(e){e.Install="install",e.Uninstall="uninstall"})(HC||(HC={}));var WC;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(WC||(WC={}));var dV=U("extensionGalleryService"),_C;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.ClientError="ClientError",e.ServerError="ServerError",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(_C||(_C={}));var BC;(function(e){e.NotFound="NotFound",e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(BC||(BC={}));var qC;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(qC||(qC={}));var fV=U("extensionManagementService"),pV=U("IGlobalExtensionEnablementService"),gV=U("IExtensionTipsService"),mV=U("IAllowedExtensionsService"),vV=Th(2002,"Extensions"),wV=Th(2003,"Preferences"),YN="extensions.allowed";Nt.as(hn.Configuration).registerConfiguration({id:"extensions",order:30,title:d(1985,null),type:"object",properties:{[YN]:{type:"object",markdownDescription:d(1986,null),default:"*",defaultSnippets:[{body:{},description:d(1987,null)},{body:{"*":!0},description:d(1988,null)}],scope:1,policy:{name:"AllowedExtensions",category:un.Extensions,minimumVersion:"1.96",localization:{description:{key:"extensions.allowed.policy",value:d(1989,null)}}},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1990,null),enumDescriptions:[d(1991,null),d(1992,null),d(1993,null)]},{type:"array",items:{type:"string"},description:d(1994,null)}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1995,null),enumDescriptions:[d(1996,null),d(1997,null),d(1998,null)]},"\\*":{type:"boolean",enum:[!0,!1],description:d(1999,null),enumDescriptions:[d(2e3,null),d(2001,null)]}}}}});var Nl=U("telemetryService"),bV=U("customEndpointTelemetryService"),zC;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(zC||(zC={}));var VC;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(VC||(VC={}));var lv=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},KN=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},yV=new KN,eM="telemetry",tM={id:eM,name:d(2342,null)},iM=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function rM(e){if(!e)return"none";const t=Jm(e);return iM.has(t)?t:"other"}function sM(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const r=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;r.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const a=n.exec(e);if(!a)break;const c=r.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(i+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}function nM(e){if(!e)return e;const t=[{label:"URL",regex:/[a-zA-Z][a-zA-Z0-9+.-]*:\/\/[^\s]*/},{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"JWT",regex:/eyJ[0eXAiOiJKV1Qi|hbGci|a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}function GC(e,t){return e?ga(e,i=>{if(i instanceof lv||Object.hasOwnProperty.call(i,"isTrustedTelemetryValue"))return i.value;if(typeof i=="string"){let r=i.replaceAll("%20"," ");r=sM(r,t);for(const s of t)r=r.replace(s,"");return r=nM(r),r}}):{}}function oM(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id?!0:Um(e.id,t.id)===0}var SV=new qe("pprice.better-merge"),aM=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const r=this.readActivationEvents(i);r.length>0&&(t[qe.toKey(i.identifier)]=r)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${qe.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const r=this.a.get(i);if(!r)continue;const s=e.contributes[i],n=Array.isArray(s)?s:[s];try{t.push(...r(n))}catch(o){Bt(o)}}return t}},cM=new aM,lM=Object.freeze({identifier:new qe("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:y.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),uM=U("extensionService"),JC=class{constructor(e){this.dependency=e}},QC;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.LazyAutoStart=3]="LazyAutoStart"})(QC||(QC={}));function Je(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function T(e,t){if(!Je(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var ZC;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(ZC||(ZC={}));var XC;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(XC||(XC={}));var Ml=(e,t)=>e===t,hM={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:Ml,label:Ml,description:Ml,error:Ml,sortText:Ml,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.includes(i)))},dM=Object.entries(hM),fM=(e,t)=>{let i;for(const[r,s]of dM)s(e[r],t[r])||(i?i[r]=t[r]:i={[r]:t[r]});return i},pM=class extends Y{get root(){return this.q.root}constructor(e){super(),this.q=e,this.f=this.D(new Yn(()=>this.flushDiff(),200)),this.g=this.D(new P),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.y(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){iv(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){iv(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===1){const r=this.M(i);return r.isOpen()?this.L(i,t-1):r.wait().then(()=>this.L(i,t-1))}else if(i.expand===3)return i.resolveBarrier?.isOpen()===!1?i.resolveBarrier.wait().then(()=>this.L(i,t-1)):this.L(i,t-1)}}dispose(){for(const e of this.tree.values())this.q.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}s(e,t){switch(t.op){case 3:this.O(Fe.joinToString(e.fullId,t.id));break;case 0:this.y(t.item,e);break;case 5:for(const i of t.ops)this.s(e,i);break;case 1:this.z(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.w(e.actual.uri);break;default:gm(t)}}w(e){e&&this.pushDiff({op:2,uri:e,docv:this.q.getDocumentVersion(e)})}y(e,t){const i=Fe.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.q.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.q.getChildren(r.parent).delete(e.id);let s=this.tree.get(i.toString());if(!s){s={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.C,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.q.controllerId,expand:s.expand,item:this.q.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(i.toString()),this.y(e,t);const n=this.q.getChildren(s.actual),o=s.actual,a=fM(this.q.toITestItem(o),this.q.toITestItem(e));this.q.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.z(e.tags,o.tags,i.toString()),delete a.tags),this.s(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.q.getChildren(e).get(u.id)||this.O(Fe.joinToString(i,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(i.toString(),c))}),this.w(s.actual.uri)}z(e,t,i){const r=new Set(t.map(s=>s.id));for(const s of e)r.delete(s.id)||this.C(s);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map(s=>$d(this.q.controllerId,s.id))}}}),r.forEach(this.F,this)}C(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:$d(this.q.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:$d(this.q.controllerId,e)}))}G(e,t){this.q.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,i){this.G(e,i);const r=this.q.getApiFor(e);r.parent=i?.actual,r.listener=s=>this.s(t,s),this.J(t)}I(e,t,i){this.H(e,t,i);for(const[r,s]of this.q.getChildren(e))this.y(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const i=[];for(const[r,s]of this.q.getChildren(e.actual)){const n=this.expand(Fe.joinToString(e.fullId,s.id),t);Ys(n)&&i.push(n)}if(i.length)return Promise.all(i).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new Cr;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new Cr,i=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.q.controllerId}"`,s)};let r;try{r=this.h(e.actual===this.root?void 0:e.actual)}catch(s){i(s)}return Ys(r)?r.catch(i).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const r=i.pop();if(r){this.q.getApiFor(r.actual).listener=void 0;for(const s of r.actual.tags)this.F(s.id);this.tree.delete(r.fullId.toString());for(const[s,n]of this.q.getChildren(r.actual))i.push(this.tree.get(Fe.joinToString(r.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},gM=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},_d=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},mM=class extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}},vM=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(s,n){for(const o of r.values())s.call(n,o,this)},[Symbol.iterator](){return r.entries()},replace(s){const n=new Map,o=new Set(r.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof i))throw new _d(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new mM(c.id,l,e.controllerId);if(n.has(c.id))throw new gM(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),r=n},add(s){if(!(s instanceof i))throw new _d(s.id);r.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){r.delete(s)&&e.listener?.({op:3,id:s})},get(s){return r.get(s)},toJSON(){return Array.from(r.values())}}},YC=new WeakMap,wM=(e,t)=>{const i={controllerId:t};return YC.set(e,i),i},Bd=e=>{const t=YC.get(e);if(!t)throw new _d(e?.id||"<unknown>");return t},EV=U("remoteAuthorityResolverService"),KC;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(KC||(KC={}));var bM=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},yM=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},ks;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(ks||(ks={}));function e9(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}function oe(e){return Object.assign(e,{apply:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const r=i.length===1?[]:i[1];return Reflect.construct(e,r,i[0].constructor)}},call:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const[r,...s]=i;return Reflect.construct(e,s,r.constructor)}}})}var uv,ki=uv=class{#e;static isMarkdownString(t){return t instanceof uv?!0:!t||typeof t!="object"?!1:t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,i=!1){this.#e=new tn(t,{supportThemeIcons:i})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get supportAlertSyntax(){return this.#e.supportAlertSyntax}set supportAlertSyntax(t){this.#e.supportAlertSyntax=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,i){return this.#e.appendCodeblock(i??"",t),this}};ki=uv=__decorate([oe],ki);var vo,xe=vo=class{static Min(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isBefore(i)&&(i=s)}return i}static Max(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isAfter(i)&&(i=s)}return i}static isPosition(t){if(!t)return!1;if(t instanceof vo)return!0;const{line:i,character:r}=t;return typeof i=="number"&&typeof r=="number"}static of(t){if(t instanceof vo)return t;if(this.isPosition(t))return new vo(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.a}get character(){return this.b}constructor(t,i){if(t<0)throw Ce("line must be non-negative");if(i<0)throw Ce("character must be non-negative");this.a=t,this.b=i}isBefore(t){return this.a<t.a?!0:t.a<this.a?!1:this.b<t.b}isBeforeOrEqual(t){return this.a<t.a?!0:t.a<this.a?!1:this.b<=t.b}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.a===t.a&&this.b===t.b}compareTo(t){return this.a<t.a?-1:this.a>t.line?1:this.b<t.b?-1:this.b>t.b?1:0}translate(t,i=0){if(t===null||i===null)throw Ce();let r;return typeof t>"u"?r=0:typeof t=="number"?r=t:(r=typeof t.lineDelta=="number"?t.lineDelta:0,i=typeof t.characterDelta=="number"?t.characterDelta:0),r===0&&i===0?this:new vo(this.line+r,this.character+i)}with(t,i=this.character){if(t===null||i===null)throw Ce();let r;return typeof t>"u"?r=this.line:typeof t=="number"?r=t:(r=typeof t.line=="number"?t.line:this.line,i=typeof t.character=="number"?t.character:this.character),r===this.line&&i===this.character?this:new vo(r,i)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};xe=vo=__decorate([oe],xe);var $s,Se=$s=class{static isRange(t){return t instanceof $s?!0:!t||typeof t!="object"?!1:xe.isPosition(t.start)&&xe.isPosition(t.end)}static of(t){if(t instanceof $s)return t;if(this.isRange(t))return new $s(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.a}get end(){return this.b}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new xe(t,i),o=new xe(r,s)):xe.isPosition(t)&&xe.isPosition(i)&&(n=xe.of(t),o=xe.of(i)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.a=n,this.b=o):(this.a=o,this.b=n)}contains(t){return $s.isRange(t)?this.contains(t.start)&&this.contains(t.end):xe.isPosition(t)?!(xe.of(t).isBefore(this.a)||this.b.isBefore(t)):!1}isEqual(t){return this.a.isEqual(t.a)&&this.b.isEqual(t.b)}intersection(t){const i=xe.Max(t.start,this.a),r=xe.Min(t.end,this.b);if(!i.isAfter(r))return new $s(i,r)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const i=xe.Min(t.start,this.a),r=xe.Max(t.end,this.end);return new $s(i,r)}get isEmpty(){return this.a.isEqual(this.b)}get isSingleLine(){return this.a.line===this.b.line}with(t,i=this.end){if(t===null||i===null)throw Ce();let r;return t?xe.isPosition(t)?r=t:(r=t.start||this.start,i=t.end||this.end):r=this.start,r.isEqual(this.a)&&i.isEqual(this.end)?this:new $s(r,i)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return t9(this)}};Se=$s=__decorate([oe],Se);function t9(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}var Ol,pt=class{static{Ol=this}static{this.a="."}constructor(t){this.value=t}append(t){return new Ol(this.value?this.value+Ol.a+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Ol.a)}};pt=Ol=__decorate([oe],pt),pt.Empty=new pt(""),pt.QuickFix=pt.Empty.append("quickfix"),pt.Refactor=pt.Empty.append("refactor"),pt.RefactorExtract=pt.Refactor.append("extract"),pt.RefactorInline=pt.Refactor.append("inline"),pt.RefactorMove=pt.Refactor.append("move"),pt.RefactorRewrite=pt.Refactor.append("rewrite"),pt.Source=pt.Empty.append("source"),pt.SourceOrganizeImports=pt.Source.append("organizeImports"),pt.SourceFixAll=pt.Source.append("fixAll"),pt.Notebook=pt.Empty.append("notebook");var wo;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(wo||(wo={}));var ii;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(ii||(ii={}));var Fl=class{static is(t){return t?typeof t.message=="string"&&t.location&&Se.isRange(t.location.range)&&y.isUri(t.location.uri):!1}constructor(t,i){this.location=t,this.message=i}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.location.range.isEqual(i.location.range)&&t.location.uri.toString()===i.location.uri.toString()}};Fl=__decorate([oe],Fl);var qd=class{constructor(t,i,r=ii.Error){if(!Se.isRange(t))throw new TypeError("range must be set");if(!i)throw new TypeError("message must be set");this.range=t,this.message=i,this.severity=r}toJSON(){return{severity:ii[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.severity===i.severity&&t.code===i.code&&t.severity===i.severity&&t.source===i.source&&t.range.isEqual(i.range)&&wi(t.tags,i.tags)&&wi(t.relatedInformation,i.relatedInformation,Fl.isEqual)}};qd=__decorate([oe],qd);var hv,ji=hv=class{static isLocation(t){return t instanceof hv?!0:t?Se.isRange(t.range)&&y.isUri(t.uri):!1}constructor(t,i){if(this.uri=t,i)if(Se.isRange(i))this.range=Se.of(i);else if(xe.isPosition(i))this.range=new Se(i,i);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};ji=hv=__decorate([oe],ji);var fn,bo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(bo||(bo={}));var Yr=class I4{static isNotebookRange(t){return t instanceof I4?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.a}get end(){return this.b}get isEmpty(){return this.a===this.b}constructor(t,i){if(t<0)throw Ce("start must be positive");if(i<0)throw Ce("end must be positive");t<=i?(this.a=t,this.b=i):(this.a=i,this.b=t)}with(t){let i=this.a,r=this.b;return t.start!==void 0&&(i=t.start),t.end!==void 0&&(r=t.end),i===this.a&&r===this.b?this:new I4(i,r)}},zd=class D4{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(i=>D4.isNotebookCellData(i))}static isNotebookCellData(t){return!0}constructor(t,i,r,s,n,o,a){this.kind=t,this.value=i,this.languageId=r,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,D4.validate(this)}},i9=class{constructor(e){this.cells=e}},Vd=fn=class{static isNotebookCellEdit(t){return t instanceof fn?!0:t?Yr.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,i){return new fn(t,i)}static insertCells(t,i){return new fn(new Yr(t,t),i)}static deleteCells(t){return new fn(t,[])}static updateCellMetadata(t,i){const r=new fn(new Yr(t,t),[]);return r.newCellMetadata=i,r}static updateNotebookMetadata(t){const i=new fn(new Yr(0,0),[]);return i.newNotebookMetadata=t,i}constructor(t,i){this.range=t,this.newCells=i}};Vd=fn=__decorate([oe],Vd);var r9=class Ws{static isNotebookCellOutputItem(t){return t instanceof Ws?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return Ws.json(i,"application/vnd.code.notebook.error")}static stdout(t){return Ws.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return Ws.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new Ws(t,i)}static#e=new TextEncoder;static text(t,i=kr.text){const r=Ws.#e.encode(String(t));return new Ws(r,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return Ws.text(r,i)}constructor(t,i){this.data=t,this.mime=i;const r=r7(i,!0);if(!r)throw new Error(`INVALID mime type: ${i}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=r}},Gd=class P4{static isNotebookCellOutput(t){return t instanceof P4?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,i=!1){const r=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=r7(o.mime);if(!r.has(a)||s7(a)){r.add(a);continue}s.add(n),i&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,i,r){this.items=P4.ensureUniqueMimeTypes(t,!0),typeof i=="string"?(this.id=i,this.metadata=r):(this.id=ci(),this.metadata=i??r)}},dv,Kr=dv=class extends Se{static isSelection(t){return t instanceof dv?!0:!t||typeof t!="object"?!1:Se.isRange(t)&&xe.isPosition(t.anchor)&&xe.isPosition(t.active)&&typeof t.isReversed=="boolean"}get anchor(){return this.c}get active(){return this.d}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new xe(t,i),o=new xe(r,s)):xe.isPosition(t)&&xe.isPosition(i)&&(n=xe.of(t),o=xe.of(i)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.c=n,this.d=o}get isReversed(){return this.c===this.b}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return SM(this)}};Kr=dv=__decorate([oe],Kr);function SM(e){let t=t9(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var yo,So=yo=class{static isSnippetString(t){return t instanceof yo?!0:!t||typeof t!="object"?!1:typeof t.value=="string"}static a(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.b=1,this.value=t||""}appendText(t){return this.value+=yo.a(t),this}appendTabstop(t=this.b++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,i=this.b++){if(typeof t=="function"){const r=new yo;r.b=this.b,t(r),this.b=r.b,t=r.value}else t=yo.a(t);return this.value+="${",this.value+=i,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,i=this.b++){const r=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=i,this.value+="|",this.value+=r,this.value+="|}",this}appendVariable(t,i){if(typeof i=="function"){const r=new yo;r.b=this.b,i(r),this.b=r.b,i=r.value}else typeof i=="string"&&(i=i.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,i&&(this.value+=":",this.value+=i),this.value+="}",this}};So=yo=__decorate([oe],So);var fv=class Zg{static isSnippetTextEdit(t){return t instanceof Zg?!0:t?Se.isRange(t.range)&&So.isSnippetString(t.snippet):!1}static replace(t,i){return new Zg(t,i)}static insert(t,i){return Zg.replace(new Se(t,t),i)}constructor(t,i){this.range=t,this.snippet=i}},pv,st;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(st||(st={}));var Ul;(function(e){e[e.Deprecated=1]="Deprecated"})(Ul||(Ul={}));var jl=pv=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,i,r,s,n){this.name=t,this.kind=i,this.containerName=n,typeof r=="string"&&(this.containerName=r),s instanceof ji?this.location=s:r instanceof Se&&(this.location=new ji(s,r)),pv.validate(this)}toJSON(){return{name:this.name,kind:st[this.kind],location:this.location,containerName:this.containerName}}};jl=pv=__decorate([oe],jl);var Eo,Tr;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Tr||(Tr={}));var pn=Eo=class{static isTextEdit(t){return t instanceof Eo?!0:!t||typeof t!="object"?!1:Se.isRange(t)&&typeof t.newText=="string"}static replace(t,i){return new Eo(t,i)}static insert(t,i){return Eo.replace(new Se(t,t),i)}static delete(t){return Eo.replace(t,"")}static setEndOfLine(t){const i=new Eo(new Se(new xe(0,0),new xe(0,0)),"");return i.newEol=t,i}get range(){return this.a}set range(t){if(t&&!Se.isRange(t))throw Ce("range");this.a=t}get newText(){return this.b||""}set newText(t){if(t&&typeof t!="string")throw Ce("newText");this.b=t}get newEol(){return this.c}set newEol(t){if(t&&typeof t!="number")throw Ce("newEol");this.c=t}constructor(t,i){this.a=t,this.b=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this.c}}};pn=Eo=__decorate([oe],pn);var s9;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(s9||(s9={}));var Co=class{constructor(){this.a=[]}_allEntries(){return this.a}renameFile(t,i,r,s){this.a.push({_type:1,from:t,to:i,options:r,metadata:s})}createFile(t,i,r){this.a.push({_type:1,from:void 0,to:t,options:i,metadata:r})}deleteFile(t,i,r){this.a.push({_type:1,from:t,to:void 0,options:i,metadata:r})}b(t,i,r){this.a.push({_type:3,metadata:r,uri:t,edit:{editType:5,metadata:i}})}c(t,i,r,s){const n=i.start,o=i.end;(n!==o||r.length>0)&&this.a.push({_type:5,uri:t,index:n,count:o-n,cells:r,metadata:s})}d(t,i,r,s){this.a.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:i,metadata:r}})}replace(t,i,r,s){this.a.push({_type:2,uri:t,edit:new pn(i,r),metadata:s})}insert(t,i,r,s){this.replace(t,new Se(i,i),r,s)}delete(t,i,r){this.replace(t,i,"",r)}has(t){return this.a.some(i=>i._type===2&&i.uri.toString()===t.toString())}set(t,i){if(i)for(const r of i){if(!r)continue;let s,n;Array.isArray(r)?(s=r[0],n=r[1]):s=r,Vd.isNotebookCellEdit(s)?s.newCellMetadata?this.d(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.b(t,s.newNotebookMetadata,n):this.c(t,s.range,s.newCells,n):fv.isSnippetTextEdit(s)?this.a.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n,keepWhitespace:s.keepWhitespace}):this.a.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let r=0;r<this.a.length;r++){const s=this.a[r];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.a[r]=void 0);break}}wP(this.a)}}get(t){const i=[];for(const r of this.a)r._type===2&&r.uri.toString()===t.toString()&&i.push(r.edit);return i}entries(){const t=new wt;for(const i of this.a)if(i._type===2){let r=t.get(i.uri);r||(r=[i.uri,[]],t.set(i.uri,r)),r[1].push(i.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Co=__decorate([oe],Co);var gv,Jd,es,ts,mv,$i,vv,wv;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(wv||(wv={}));var n9;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(n9||(n9={}));var Ee=gv=class{static from(...t){let i=t;return new gv(function(){if(i){for(const r of i)r&&typeof r.dispose=="function"&&r.dispose();i=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Ee=gv=__decorate([oe],Ee);var o9=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw Ce("connectionToken")},EM=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw Ce("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw Ce("port");typeof i<"u"&&o9(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},Qd=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&o9(t)}},Aa=class Xg extends Error{static NotAvailable(t,i){return new Xg(t,ks.NotAvailable,i)}static TemporarilyNotAvailable(t){return new Xg(t,ks.TemporarilyNotAvailable)}constructor(t,i=ks.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,Object.setPrototypeOf(this,Xg.prototype)}},Ta;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Ta||(Ta={}));var Zd=class{constructor(t,i){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=i}};Zd=__decorate([oe],Zd);var Xd=class extends Zd{constructor(t,i,r,s){super(t,i),this.canIncreaseVerbosity=r,this.canDecreaseVerbosity=s}};Xd=__decorate([oe],Xd);var bv;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(bv||(bv={}));var Hl;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(Hl||(Hl={}));var Yd=class{constructor(t,i=Hl.Text){this.range=t,this.kind=i}toJSON(){return{range:this.range,kind:Hl[this.kind]}}};Yd=__decorate([oe],Yd);var Kd=class{constructor(t,i){this.uri=t,this.highlights=i}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};Kd=__decorate([oe],Kd);var Wl=Jd=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(Jd.validate)}constructor(t,i,r,s,n){this.name=t,this.detail=i,this.kind=r,this.range=s,this.selectionRange=n,this.children=[],Jd.validate(this)}};Wl=Jd=__decorate([oe],Wl);var _l;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(_l||(_l={}));var Bl=class{constructor(t,i){this.title=t,this.kind=i}};Bl=__decorate([oe],Bl);var ql=class{constructor(t,i){if(this.range=t,this.parent=i,i&&!i.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};ql=__decorate([oe],ql);var yv=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},a9=class{constructor(e,t){this.fromRanges=t,this.from=e}},c9=class{constructor(e,t){this.fromRanges=t,this.to=e}},Ra;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Ra||(Ra={}));var ef=class{constructor(t,i){this.range=t,this.command=i}get isResolved(){return!!this.command}};ef=__decorate([oe],ef);var Sv=class{constructor(t,i){this.label=t,this.documentation=i}};Sv=__decorate([oe],Sv);var Ev=class{constructor(t,i){this.label=t,this.documentation=i,this.parameters=[]}};Ev=__decorate([oe],Ev);var Cv=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};Cv=__decorate([oe],Cv);var xv;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(xv||(xv={}));var kv;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(kv||(kv={}));var tf=class{constructor(t){this.value=t}};tf=__decorate([oe],tf);var rf=class{constructor(t,i,r){this.position=t,this.label=i,this.kind=r}};rf=__decorate([oe],rf);var La;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(La||(La={}));var fe;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(fe||(fe={}));var zl;(function(e){e[e.Deprecated=1]="Deprecated"})(zl||(zl={}));var sf=class{constructor(t,i){this.label=t,this.kind=i}toJSON(){return{label:this.label,kind:this.kind&&fe[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};sf=__decorate([oe],sf);var Na=class{constructor(t=[],i=!1){this.items=t,this.isIncomplete=i}};Na=__decorate([oe],Na);var $v=class{constructor(t,i,r){this.insertText=t,this.range=i,this.command=r}};$v=__decorate([oe],$v);var Iv=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};Iv=__decorate([oe],Iv);var xo;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(xo||(xo={}));var Ma;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(Ma||(Ma={}));var Oa;(function(e){e[e.Code=1]="Code",e[e.Label=2]="Label"})(Oa||(Oa={}));var Vl;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Vl||(Vl={}));var gn;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(gn||(gn={}));function CM(e,t){return`${qe.toKey(e)}.${t}`}var Rr;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(Rr||(Rr={}));var Fa;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Fa||(Fa={}));var nf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(nf||(nf={}));var Ua;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Ua||(Ua={}));var ja;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(ja||(ja={}));var Gl;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Gl||(Gl={}));var ko;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(ko||(ko={})),function(e){function t(i){switch(i){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":case"code.jump":case"code.navigation":return e.Command}}e.fromValue=t}(Ua||(Ua={}));var Ha;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Ha||(Ha={})),function(e){function t(i){switch(i){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(Ha||(Ha={}));var of=class{constructor(t,i){if(i&&!y.isUri(i))throw Ce("target");if(!Se.isRange(t)||t.isEmpty)throw Ce("range");this.range=t,this.target=i}};of=__decorate([oe],of);var Wa=class{constructor(t,i,r,s){this.red=t,this.green=i,this.blue=r,this.alpha=s}};Wa=__decorate([oe],Wa);var af=class{constructor(t,i){if(i&&!(i instanceof Wa))throw Ce("color");if(!Se.isRange(t)||t.isEmpty)throw Ce("range");this.range=t,this.color=i}};af=__decorate([oe],af);var cf=class{constructor(t){if(!t||typeof t!="string")throw Ce("label");this.label=t}};cf=__decorate([oe],cf);var l9;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(l9||(l9={}));var _a;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(_a||(_a={}));var Dv;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(Dv||(Dv={}));var Jl;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Jl||(Jl={}));var Pv;(function(e){e[e.Sh=1]="Sh",e[e.Bash=2]="Bash",e[e.Fish=3]="Fish",e[e.Csh=4]="Csh",e[e.Ksh=5]="Ksh",e[e.Zsh=6]="Zsh",e[e.CommandPrompt=7]="CommandPrompt",e[e.GitBash=8]="GitBash",e[e.PowerShell=9]="PowerShell",e[e.Python=10]="Python",e[e.Julia=11]="Julia",e[e.NuShell=12]="NuShell",e[e.Node=13]="Node"})(Pv||(Pv={}));var xM=class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw Ce("startIndex");if(typeof t!="number"||t<1)throw Ce("length");if(i!==void 0&&typeof i!="string")throw Ce("tooltip")}},kM=class{constructor(e){this.uri=e}},$M=class{constructor(e){this.terminalCommand=e}},Av;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(Av||(Av={}));var IM=class{constructor(e){if(this.options=e,typeof e!="object")throw Ce("options")}},Tv;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Method=2]="Method",e[e.Alias=3]="Alias",e[e.Argument=4]="Argument",e[e.Option=5]="Option",e[e.OptionValue=6]="OptionValue",e[e.Flag=7]="Flag",e[e.SymbolicLinkFile=8]="SymbolicLinkFile",e[e.SymbolicLinkFolder=9]="SymbolicLinkFolder",e[e.ScmCommit=10]="ScmCommit",e[e.ScmBranch=11]="ScmBranch",e[e.ScmTag=12]="ScmTag",e[e.ScmStash=13]="ScmStash",e[e.ScmRemote=14]="ScmRemote",e[e.PullRequest=15]="PullRequest",e[e.PullRequestDone=16]="PullRequestDone"})(Tv||(Tv={}));var DM=class{constructor(e,t,i,r,s,n,o,a){this.label=e,this.replacementRange=t,this.kind=i,this.detail=r,this.documentation=s,this.isFile=n,this.isDirectory=o,this.isKeyword=a}},PM=class{constructor(e,t){this.items=e??[],this.resourceOptions=t}},Rv;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Rv||(Rv={}));var Lv;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(Lv||(Lv={}));var Nv;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Nv||(Nv={}));var Ql=class{static{es=this}static{this.Clean=new es("clean","Clean")}static{this.Build=new es("build","Build")}static{this.Rebuild=new es("rebuild","Rebuild")}static{this.Test=new es("test","Test")}static from(t){switch(t){case"clean":return es.Clean;case"build":return es.Build;case"rebuild":return es.Rebuild;case"test":return es.Test;default:return}}constructor(t,i){if(this.label=i,typeof t!="string"||typeof i!="string")throw Ce("name");this.c=t}get id(){return this.c}};Ql=es=__decorate([oe],Ql);function u9(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}var Ba=class{constructor(t,i,r){if(typeof t!="string")throw Ce("process");this.e=[],this.c=t,i!==void 0&&(Array.isArray(i)?(this.e=i,this.f=r):this.f=i)}get process(){return this.c}set process(t){if(typeof t!="string")throw Ce("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const i of this.e)t.push(i);return u9(t)}};Ba=__decorate([oe],Ba);var $o=class{constructor(t,i,r){if(this.f=[],Array.isArray(i)){if(!t)throw Ce("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw Ce("command");this.e=t,i&&(this.f=i),this.g=r}else{if(typeof t!="string")throw Ce("commandLine");this.c=t,this.g=i}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw Ce("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw Ce("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const i of this.f)t.push(typeof i=="string"?i:i.value);return u9(t)}};$o=__decorate([oe],$o);var Mv;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Mv||(Mv={}));var mn;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(mn||(mn={}));var Ov=class{constructor(e){this.c=e}computeId(){return"customExecution"+ci()}set callback(e){this.c=e}get callback(){return this.c}},lf=class{static{ts=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,i,r,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof i=="string"?(this.o=this.name=i,this.u=this.source=r,this.execution=s,a=n,this.k=!0):i===mn.Global||i===mn.Workspace?(this.target=i,this.o=this.name=r,this.u=this.source=s,this.execution=n,a=o):(this.target=i,this.o=this.name=r,this.u=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.q=[a],this.r=!0):Array.isArray(a)?(this.q=a,this.r=!0):(this.q=[],this.r=!1),this.t=!1,this.x=Object.create(null),this.y=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}A(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.B())}B(){this.p instanceof Ba?this.l={type:ts.e,id:this.p.computeId()}:this.p instanceof $o?this.l={type:ts.f,id:this.p.computeId()}:this.p instanceof Ov?this.l={type:ts.c,id:this.p.computeId()}:this.l={type:ts.g,id:ci()}}get definition(){return this.l}set definition(t){if(t==null)throw Ce("Kind can't be undefined or null");this.A(),this.l=t}get scope(){return this.m}set target(t){this.A(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw Ce("name");this.A(),this.o=t}get execution(){return this.p}set execution(t){t===null&&(t=void 0),this.A(),this.p=t;const i=this.l.type;(ts.g===i||ts.e===i||ts.f===i||ts.c===i)&&this.B()}get problemMatchers(){return this.q}set problemMatchers(t){if(Array.isArray(t))this.A(),this.q=t,this.r=!0;else{this.A(),this.q=[],this.r=!1;return}}get hasDefinedMatchers(){return this.r}get isBackground(){return this.t}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.A(),this.t=t}get source(){return this.u}set source(t){if(typeof t!="string"||t.length===0)throw Ce("source must be a string of length > 0");this.A(),this.u=t}get group(){return this.w}set group(t){t===null&&(t=void 0),this.A(),this.w=t}get detail(){return this.z}set detail(t){t===null&&(t=void 0),this.z=t}get presentationOptions(){return this.x}set presentationOptions(t){t==null&&(t=Object.create(null)),this.A(),this.x=t}get runOptions(){return this.y}set runOptions(t){t==null&&(t=Object.create(null)),this.A(),this.y=t}};lf=ts=__decorate([oe],lf);var vn;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(vn||(vn={}));var Fv;(function(e){function t(i){const r=i;return Hn(r.value)?r.tooltip&&!Oe(r.tooltip)?(console.log("INVALID view badge, invalid tooltip",r.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",r.value),!1)}e.isViewBadge=t})(Fv||(Fv={}));var uf=mv=class{static isTreeItem(t,i){const r=t;if(r.checkboxState!==void 0){const s=Hn(r.checkboxState)?r.checkboxState:bt(r.checkboxState)&&Hn(r.checkboxState.state)?r.checkboxState.state:void 0,n=!Hn(r.checkboxState)&&bt(r.checkboxState)?r.checkboxState.tooltip:void 0;if(s===void 0||s!==is.Checked&&s!==is.Unchecked||n!==void 0&&!Oe(n))return console.log("INVALID tree item, invalid checkboxState",r.checkboxState),!1}if(t instanceof mv)return!0;if(r.label!==void 0&&!Oe(r.label)&&!r.label?.label)return console.log("INVALID tree item, invalid label",r.label),!1;if(r.id!==void 0&&!Oe(r.id))return console.log("INVALID tree item, invalid id",r.id),!1;if(r.iconPath!==void 0&&!Oe(r.iconPath)&&!y.isUri(r.iconPath)&&(!r.iconPath||!Oe(r.iconPath.id))){const s=r.iconPath;if(!s||!Oe(s.light)&&!y.isUri(s.light)&&!Oe(s.dark)&&!y.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",r.iconPath),!1}return r.description!==void 0&&!Oe(r.description)&&typeof r.description!="boolean"?(console.log("INVALID tree item, invalid description",r.description),!1):r.resourceUri!==void 0&&!y.isUri(r.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",r.resourceUri),!1):r.tooltip!==void 0&&!Oe(r.tooltip)&&!(r.tooltip instanceof ki)?(console.log("INVALID tree item, invalid tooltip",r.tooltip),!1):r.command!==void 0&&!r.command.command?(console.log("INVALID tree item, invalid command",r.command),!1):r.collapsibleState!==void 0&&r.collapsibleState<Io.None&&r.collapsibleState>Io.Expanded?(console.log("INVALID tree item, invalid collapsibleState",r.collapsibleState),!1):r.contextValue!==void 0&&!Oe(r.contextValue)?(console.log("INVALID tree item, invalid contextValue",r.contextValue),!1):r.accessibilityInformation!==void 0&&!r.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",r.accessibilityInformation),!1):!0}constructor(t,i=Io.None){this.collapsibleState=i,y.isUri(t)?this.resourceUri=t:this.label=t}};uf=mv=__decorate([oe],uf);var Io;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Io||(Io={}));var is;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(is||(is={}));var hf=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};hf=__decorate([oe],hf);var df=class extends hf{},AM=class extends df{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},TM=class{constructor(e,t,i,r){this.name=e,this.uri=t,this._itemId=i,this.c=r}data(){return this.c()}},qa=class{#e=new Map;constructor(t){for(const[i,r]of t??[]){const s=this.#e.get(this.#t(i));s?s.push(r):this.#e.set(this.#t(i),[r])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,i){this.#e.set(this.#t(t),[i])}forEach(t,i){for(const[r,s]of this.#e)for(const n of s)t.call(i,n,r,this)}*[Symbol.iterator](){for(const[t,i]of this.#e)for(const r of i)yield[t,r]}#t(t){return t.toLowerCase()}};qa=__decorate([oe],qa);var Uv=class{constructor(t,i,r){this.insertText=t,this.title=i,this.kind=r}};Uv=__decorate([oe],Uv);var jv;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(jv||(jv={}));var wn=class Yg{static{this.c="."}constructor(t){this.value=t}append(...t){return new Yg((this.value?[this.value,...t]:t).join(Yg.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Yg.c)}};wn.Empty=new wn(""),wn.Text=new wn("text"),wn.TextUpdateImports=wn.Text.append("updateImports");var RM=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},Ii=class{constructor(t,i){this.id=t,this.color=i}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};Ii=__decorate([oe],Ii),Ii.File=new Ii("file"),Ii.Folder=new Ii("folder");var Zl=class{constructor(t){this.id=t}};Zl=__decorate([oe],Zl);var za;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(za||(za={}));var Va=class{get base(){return this.c}set base(t){this.c=t,this.e=y.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,i){if(typeof t!="string"&&(!t||!y.isUri(t)&&!y.isUri(t.uri)))throw Ce("base");if(typeof i!="string")throw Ce("pattern");typeof t=="string"?this.baseUri=y.file(t):y.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=i}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Va=__decorate([oe],Va);var h9=new WeakMap;function LM(e,t){h9.set(e,t)}var Ga=class{constructor(t,i,r,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof i=="string"&&(this.condition=i),typeof r=="string"&&(this.hitCondition=r),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=h9.get(this)??ci()),this.c}};Ga=__decorate([oe],Ga);var Do=class extends Ga{constructor(t,i,r,s,n,o){if(super(i,r,s,n,o),t===null)throw Ce("location");this.location=t}};Do=__decorate([oe],Do);var Po=class extends Ga{constructor(t,i,r,s,n,o){super(i,r,s,n,o),this.functionName=t}};Po=__decorate([oe],Po);var ff=class extends Ga{constructor(t,i,r,s,n,o,a,c){if(super(s,n,o,a,c),!i)throw Ce("dataId");this.label=t,this.dataId=i,this.canPersist=r}};ff=__decorate([oe],ff);var pf=class{constructor(t,i,r){this.command=t,this.args=i||[],this.options=r}};pf=__decorate([oe],pf);var Xl=class{constructor(t,i){this.port=t,this.host=i}};Xl=__decorate([oe],Xl);var gf=class{constructor(t){this.path=t}};gf=__decorate([oe],gf);var Yl=class{constructor(t){this.implementation=t}};Yl=__decorate([oe],Yl);var d9=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}},f9=class{constructor(e,t){this.session=e,this.threadId=t}},mf=class{constructor(t,i){this.range=t,this.expression=i}};mf=__decorate([oe],mf);var Kl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Kl||(Kl={}));var Is;(function(e){e[e.Other=0]="Other",e[e.Empty=1]="Empty",e[e.TokenCancellation=2]="TokenCancellation",e[e.LostRace=3]="LostRace",e[e.NotTaken=4]="NotTaken"})(Is||(Is={}));var vf=class{constructor(t,i){this.range=t,this.text=i}};vf=__decorate([oe],vf);var wf=class{constructor(t,i,r=!0){this.range=t,this.variableName=i,this.caseSensitiveLookup=r}};wf=__decorate([oe],wf);var bf=class{constructor(t,i){this.range=t,this.expression=i}};bf=__decorate([oe],bf);var Hv=class{constructor(t,i){this.frameId=t,this.stoppedLocation=i}};Hv=__decorate([oe],Hv);var Wv;(function(e){e[e.AIGenerated=1]="AIGenerated"})(Wv||(Wv={}));var eu;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(eu||(eu={}));var NM=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},Ja;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Ja||(Ja={}));var Ft=$i=class extends Error{static FileExists(t){return new $i(t,ye.FileExists,$i.FileExists)}static FileNotFound(t){return new $i(t,ye.FileNotFound,$i.FileNotFound)}static FileNotADirectory(t){return new $i(t,ye.FileNotADirectory,$i.FileNotADirectory)}static FileIsADirectory(t){return new $i(t,ye.FileIsADirectory,$i.FileIsADirectory)}static NoPermissions(t){return new $i(t,ye.NoPermissions,$i.NoPermissions)}static Unavailable(t){return new $i(t,ye.Unavailable,$i.Unavailable)}constructor(t,i=ye.Unknown,r){super(y.isUri(t)?t.toString(!0):t),this.code=r?.name??"Unknown",P7(this,i),Object.setPrototypeOf(this,$i.prototype),typeof Error.captureStackTrace=="function"&&typeof r=="function"&&Error.captureStackTrace(this,r)}};Ft=$i=__decorate([oe],Ft);var _v=class{constructor(t,i,r){this.start=t,this.end=i,this.kind=r}};_v=__decorate([oe],_v);var Ds;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Ds||(Ds={}));var tu;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(tu||(tu={}));var Bv;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(Bv||(Bv={}));var qv;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(qv||(qv={}));var iu;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(iu||(iu={}));var ru;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(ru||(ru={}));var su;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(su||(su={}));var zv=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function MM(e){return typeof e>"u"||IP(e)}var OM=class o3{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let i=0,r=t.tokenTypes.length;i<r;i++)this.k.set(t.tokenTypes[i],i);for(let i=0,r=t.tokenModifiers.length;i<r;i++)this.l.set(t.tokenModifiers[i],i)}}push(t,i,r,s,n){if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.p(t,i,r,s,n);if(Se.isRange(t)&&typeof i=="string"&&MM(r))return this.o(t,i,r);throw Ce()}o(t,i,r){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(i))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(i);let c=0;if(r)for(const l of r){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.p(s,n,o,a,c)}p(t,i,r,s,n){if(this.f&&(t<this.c||t===this.c&&i<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let f=this.g[5*h],g=this.g[5*h+1];f===0?(f=l,g+=u):f+=l,this.g[5*h]=f,this.g[5*h+1]=g,l=f,u=g}}let o=t,a=i;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=r,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=i}static q(t){const i=[],r=t.length/5|0;for(let a=0;a<r;a++)i[a]=a;i.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],f=t[5*c+1];return h-f}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<r;a++){const c=5*i[a],l=t[c+0],u=t[c+1],h=t[c+2],f=t[c+3],g=t[c+4],m=l-n,w=m===0?u-o:u,S=5*a;s[S+0]=m,s[S+1]=w,s[S+2]=h,s[S+3]=f,s[S+4]=g,n=l,o=u}return s}build(t){return this.f?new Qa(new Uint32Array(this.g),t):new Qa(o3.q(this.g),t)}},Qa=class{constructor(e,t){this.resultId=t,this.data=e}},p9=class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},yf=class{constructor(e,t){this.resultId=t,this.edits=e}},Sf;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Sf||(Sf={}));var FM=class{constructor(e){this.name=e}},Vv;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline",e[e.Input=3]="Input"})(Vv||(Vv={}));var nu=class{static{this.Back={iconPath:new Ii("arrow-left")}}constructor(){}};nu=__decorate([oe],nu);var ou;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(ou||(ou={}));var Za;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Za||(Za={}));var Ao;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(Ao||(Ao={}));var Gv=class{static validate(e){if(typeof e.badge=="string"){let t=u6(e.badge,0);if(t<e.badge.length&&(t+=u6(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!Ii.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}},Ef=class{constructor(t){this.kind=t}};Ef=__decorate([oe],Ef);var bn;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(bn||(bn={}));var UM=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Jv;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Jv||(Jv={}));var Cf;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Cf||(Cf={}));var xf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(xf||(xf={}));var jM=class{constructor(e,t){this.text=e,this.alignment=t}},Qv;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(Qv||(Qv={}));var kf;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(kf||(kf={}));var g9=class{constructor(e,t=[]){this.uri=e,this.provides=nr(t)}},HM=class{constructor(e){this.label=e}},au;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(au||(au={}));var Zv=class{constructor(t,i){this.label=t,this.timestamp=i}};Zv=__decorate([oe],Zv);var Xa;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(Xa||(Xa={}));var $f;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})($f||($f={}));var yn;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(yn||(yn={}));var WM=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},_M=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},Xv;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(Xv||(Xv={}));var Ya;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(Ya||(Ya={}));var m9=class{constructor(e,t,i){this.controllerId=e,this.profileId=t,this.kind=i}},If=class{constructor(t=void 0,i=void 0,r=void 0,s=!1,n=!0){this.include=t,this.exclude=i,this.profile=r,this.continuous=s,this.preserveFocus=n}};If=__decorate([oe],If);var Df=vv=class{static diff(t,i,r){const s=new vv(t);return s.expectedOutput=i,s.actualOutput=r,s}constructor(t){this.message=t}};Df=vv=__decorate([oe],Df);var cu=class{constructor(t){this.id=t}};cu=__decorate([oe],cu);var BM=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Pf=class{constructor(e,t){this.covered=e,this.total=t,Af(this)}};function Af(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var Tf=class a3{static fromDetails(t,i){const r=new Pf(0,0),s=new Pf(0,0),n=new Pf(0,0);for(const a of i)if("branches"in a){r.total+=1,r.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new a3(t,r,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=i,o}constructor(t,i,r,s,n=[]){this.uri=t,this.statementCoverage=i,this.branchCoverage=r,this.declarationCoverage=s,this.includesTests=n}},v9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},w9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},b9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},Yv;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(Yv||(Yv={}));var Kv;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(Kv||(Kv={}));var e0;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(e0||(e0={}));var t0=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},i0=class{constructor(e){this.uri=e}},Rf=class{constructor(e,t){this.original=e,this.modified=t}},y9=class{constructor(e,t,i,r){this.base=e,this.input1=t,this.input2=i,this.result=r}},r0=class{constructor(e,t){this.uri=e,this.viewType=t}},S9=class{constructor(e){this.viewType=e}},s0=class{constructor(e,t){this.uri=e,this.notebookType=t}},n0=class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},E9=class{constructor(){}},C9=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},x9=class{constructor(){}},k9=class{constructor(e){this.textDiffs=e}},o0;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(o0||(o0={}));var a0;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(a0||(a0={}));var c0;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(c0||(c0={}));var qM=class{constructor(e,t,i){this.id=e,this.label=t,this.values=i}},rs;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(rs||(rs={}));var l0;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(l0||(l0={}));var u0;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(u0||(u0={}));var lu;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(lu||(lu={}));var Lf=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new ki(e):e}},uu=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new ki(e):e,this.vulnerabilities=t}},Nf=class{constructor(e,t,i,r){this.title=e,this.message=t,this.data=i,this.buttons=r}},Mf=class{constructor(e,t){this.value=e,this.baseUri=t}},h0=class{constructor(e,t,i){this.value=e,this.title=t,this.readOnly=i}},d0=class{constructor(e,t){this.uris=e,this.callback=t,this.applied=new Promise(i=>{this.didGetApplied=i})}},hu=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},f0=class{constructor(e){this.value=e}},Of=class{constructor(e,t){this.value=e,this.task=t}},Ka=class{constructor(e,t,i){this.value=e,this.id=t,this.metadata=i}},du=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new ki(e):e}},Ff=class{constructor(e){this.value=e}},To=class{constructor(e,t,i){this.value=e,this.iconPath=t,this.options=i}},Uf=class{constructor(e,t,i){this.value=e,this.isEdit=t,this.undoStopId=i}},jf=class{constructor(e,t,i){this.value=e,this.license=t,this.snippet=i}},Hf=class{constructor(e,t){this.uri=e,this.range=t}},p0=class{constructor(e){this.extensions=e}},g0=class{constructor(e,t,i,r,s){this.uri=e,this.title=t,this.description=i,this.author=r,this.linkTag=s}toJSON(){return{$mid:26,uri:this.uri,title:this.title,description:this.description,author:this.author}}},fu=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},Wf=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},pu=class{constructor(e){this.toolName=e}},m0=class{constructor(e,t,i){this.toolName=e,this.toolCallId=t,this.isError=i}},_f=class{constructor(e,t,i,r,s,n,o){this.prompt=e,this.command=t,this.references=i,this.participant=r,this.toolReferences=s,this.editedFileEvents=n,this.id=o}},$9=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},zM=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},Lr;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(Lr||(Lr={}));var v0;(function(e){e[e.Failed=0]="Failed",e[e.Completed=1]="Completed",e[e.InProgress=2]="InProgress"})(v0||(v0={}));var VM=class{constructor(e,t,i,r){this.modifiedUri=e,this.insertions=t,this.deletions=i,this.originalUri=r}},w0;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(w0||(w0={}));var b0;(function(e){e[e.NoReason=0]="NoReason",e[e.FilteredContentRetry=1]="FilteredContentRetry",e[e.CopyrightContentRetry=2]="CopyrightContentRetry"})(b0||(b0={}));var I9=class{constructor(e,t,i,r){this.editor=e,this.document=t,this.selection=i,this.wholeRange=r}},D9=class{constructor(e){this.cell=e}},P9=class{constructor(e,t,i){this.mimeType=e,this.data=t,this.reference=i}},y0=class{constructor(e){this.diagnostics=e}},Hi;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Hi||(Hi={}));var ec=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},S0;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(S0||(S0={}));var A9=class A4{static User(t,i){return new A4(Hi.User,t,i)}static Assistant(t,i){return new A4(Hi.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new kt(t)]:this.c=t}get content(){return this.c}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},T9=class T4{static User(t,i){return new T4(Hi.User,t,i)}static Assistant(t,i){return new T4(Hi.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new kt(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(i=>typeof i=="string"?new kt(i):i))}get content2(){return this.content.map(t=>t instanceof kt?t.value:t)}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},Ro=class{constructor(e,t,i){this.callId=e,this.name=t,this.input=i}},Bf;(function(e){e[e.Assistant=0]="Assistant",e[e.User=1]="User",e[e.Extension=2]="Extension"})(Bf||(Bf={}));var kt=class{constructor(e,t){this.value=e,t=t}toJSON(){return{$mid:21,value:this.value,audience:this.audience}}},ri=class Kg{constructor(t,i,r){this.mimeType=i,this.data=t,this.audience=r}static image(t,i){return new Kg(t,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return new Kg(re.fromString(r).buffer,i)}static text(t,i=kr.text){return new Kg(re.fromString(t).buffer,i)}toJSON(){return{$mid:24,mimeType:this.mimeType,data:this.data,audience:this.audience}}},E0;(function(e){e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e.WEBP="image/webp",e.BMP="image/bmp"})(E0||(E0={}));var tc=class{constructor(e,t,i){this.value=e,this.id=t,this.metadata=i}toJSON(){return{$mid:22,value:this.value,id:this.id,metadata:this.metadata}}},ss=class{constructor(e){this.value=e}toJSON(){return{$mid:23,value:this.value}}},Ps=class fs extends Error{static#e="LanguageModelError";static NotFound(t){return new fs(t,fs.NotFound.name)}static NoPermissions(t){return new fs(t,fs.NoPermissions.name)}static Blocked(t){return new fs(t,fs.Blocked.name)}static tryDeserialize(t){if(t.name===fs.#e)return new fs(t.message,t.code,t.cause)}constructor(t,i,r){super(t,{cause:r}),this.name=fs.#e,this.code=i??""}},qf=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},R9=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},GM=class extends qf{},zf;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(zf||(zf={}));var L9=class{constructor(e,t){this.id=e,this.label=t}},N9=class{constructor(e,t,i){this.label=e,this.name=t,this.instructions=i}},C0;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(C0||(C0={}));var x0;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(x0||(x0={}));var k0;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(k0||(k0={}));var $0;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})($0||($0={}));var I0;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(I0||(I0={}));var Vf;(function(e){e[e.Initial=0]="Initial",e[e.Dynamic=1]="Dynamic"})(Vf||(Vf={}));var M9=class{constructor(e,t,i,r={},s,n){this.label=e,this.command=t,this.args=i,this.env=r,this.version=s,this.metadata=n}},O9=class{constructor(e,t,i={},r,s,n){this.label=e,this.uri=t,this.headers=i,this.version=r,this.metadata=s,this.authentication=n}},Nr;(function(e){function t(r){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=r,c=new xe(s-1,n-1),l=new xe(o-1,a-1);return new Kr(c,l)}e.to=t;function i(r){const{anchor:s,active:n}=r;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=i})(Nr||(Nr={}));var O;(function(e){function t(r){if(!r)return;const{start:s,end:n}=r;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function i(r){if(!r)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=r;return new Se(s-1,n-1,o-1,a-1)}e.to=i})(O||(O={}));var hr;(function(e){function t(r){return{uri:r.uri,range:O.from(r.range)}}e.from=t;function i(r){return new ji(y.revive(r.uri),O.to(r.range))}e.to=i})(hr||(hr={}));var D0;(function(e){function t(i){switch(i){case 1:return yn.Comment;case 0:return yn.Other;case 3:return yn.RegEx;case 2:return yn.String}}e.to=t})(D0||(D0={}));var ze;(function(e){function t(r){return new xe(r.lineNumber-1,r.column-1)}e.to=t;function i(r){return{lineNumber:r.line+1,column:r.character+1}}e.from=i})(ze||(ze={}));var Lo;(function(e){function t(s,n,o){return mt(nr(s).map(a=>i(a,n,o)))}e.from=t;function i(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:r(s.scheme,n),pattern:Pi.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function r(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(Lo||(Lo={}));var Gf;(function(e){function t(r){switch(r){case wo.Unnecessary:return 1;case wo.Deprecated:return 2}}e.from=t;function i(r){switch(r){case 1:return wo.Unnecessary;case 2:return wo.Deprecated;default:return}}e.to=i})(Gf||(Gf={}));var No;(function(e){function t(r){let s;return r.code&&(Oe(r.code)||Hn(r.code)?s=String(r.code):s={value:String(r.code.value),target:r.code.target}),{...O.from(r.range),message:r.message,source:r.source,code:s,severity:gu.from(r.severity),relatedInformation:r.relatedInformation&&r.relatedInformation.map(Jf.from),tags:Array.isArray(r.tags)?mt(r.tags.map(Gf.from)):void 0}}e.from=t;function i(r){const s=new qd(O.to(r),r.message,gu.to(r.severity));return s.source=r.source,s.code=Oe(r.code)?r.code:r.code?.value,s.relatedInformation=r.relatedInformation&&r.relatedInformation.map(Jf.to),s.tags=r.tags&&mt(r.tags.map(Gf.to)),s}e.to=i})(No||(No={}));var Jf;(function(e){function t(r){return{...O.from(r.location.range),message:r.message,resource:r.location.uri}}e.from=t;function i(r){return new Fl(new ji(r.resource,O.to(r)),r.message)}e.to=i})(Jf||(Jf={}));var gu;(function(e){function t(r){switch(r){case ii.Error:return xi.Error;case ii.Warning:return xi.Warning;case ii.Information:return xi.Info;case ii.Hint:return xi.Hint}return xi.Error}e.from=t;function i(r){switch(r){case xi.Info:return ii.Information;case xi.Warning:return ii.Warning;case xi.Error:return ii.Error;case xi.Hint:return ii.Hint;default:return ii.Error}}e.to=i})(gu||(gu={}));var Ut;(function(e){function t(r){return typeof r=="number"&&r>=Vl.One?r-1:r===Vl.Beside?WN:HN}e.from=t;function i(r){if(typeof r=="number"&&r>=0)return r+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=i})(Ut||(Ut={}));function JM(e){return typeof e.range<"u"}function F9(e){return e.length===0?!0:!!JM(e[0])}var ue;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function i(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function r(a){let c;if(i(a)){const{language:h,value:f}=a;c={value:"```"+h+`
`+f+"\n```\n"}}else ki.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,supportAlertSyntax:a.supportAlertSyntax,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let f=y.parse(h,!0);f=f.with({query:s(f.query,l)}),l[h]=f}catch{}return""};return at.walkTokens(at.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(cR(h.href))}),c}e.from=r;function s(a,c){if(!a)return a;let l;try{l=i7(a)}catch{}if(!l)return a;let u=!1;return l=ga(l,h=>{if(y.isUri(h)){const f=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[f]=h,u=!0,f}else return}),u?JSON.stringify(l):a}function n(a){const c=new ki(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.supportAlertSyntax=a.supportAlertSyntax,c.baseUri=a.baseUri?y.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(ue||(ue={}));function QM(e){return F9(e)?e.map(t=>({range:O.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?ue.fromMany(t.hoverMessage):t.hoverMessage?ue.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:O.from(t)}))}function Qf(e){return typeof e>"u"?e:typeof e=="string"?y.file(e):e}var ic;(function(e){function t(i){return typeof i>"u"?i:{contentText:i.contentText,contentIconPath:i.contentIconPath?Qf(i.contentIconPath):void 0,border:i.border,borderColor:i.borderColor,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,color:i.color,backgroundColor:i.backgroundColor,margin:i.margin,width:i.width,height:i.height}}e.from=t})(ic||(ic={}));var Zf;(function(e){function t(i){return typeof i>"u"?i:{backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Qf(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?ic.from(i.before):void 0,after:i.after?ic.from(i.after):void 0}}e.from=t})(Zf||(Zf={}));var P0;(function(e){function t(i){if(typeof i>"u")return i;switch(i){case ko.OpenOpen:return 0;case ko.ClosedClosed:return 1;case ko.OpenClosed:return 2;case ko.ClosedOpen:return 3}}e.from=t})(P0||(P0={}));var A0;(function(e){function t(i){return{isWholeLine:i.isWholeLine,rangeBehavior:i.rangeBehavior?P0.from(i.rangeBehavior):void 0,overviewRulerLane:i.overviewRulerLane,light:i.light?Zf.from(i.light):void 0,dark:i.dark?Zf.from(i.dark):void 0,backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Qf(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?ic.from(i.before):void 0,after:i.after?ic.from(i.after):void 0}}e.from=t})(A0||(A0={}));var jt;(function(e){function t(r){return{text:r.newText,eol:r.newEol&&oc.from(r.newEol),range:O.from(r.range)}}e.from=t;function i(r){const s=new pn(O.to(r.range),r.text);return s.newEol=typeof r.eol>"u"?void 0:oc.to(r.eol),s}e.to=i})(jt||(jt={}));var Wi;(function(e){function t(r,s){const n={edits:[]};if(r instanceof Co){const o=new Qc;for(const a of r._allEntries())a._type===1&&y.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of r._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:Kc(re.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:jt.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:O.from(a.range),text:a.edit.value,insertAsSnippet:!0,keepWhitespace:a.keepWhitespace},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(cc.from)}})}return n}e.from=t;function i(r){const s=new Co,n=new wt;for(const o of r.edits)if(o.textEdit){const a=o,c=y.revive(a.resource),l=O.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let f;h?f=fv.replace(l,new So(u)):f=pn.replace(l,u);const g=n.get(c);g?g.push(f):n.set(c,[f])}else s.renameFile(y.revive(o.oldResource),y.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=i})(Wi||(Wi={}));var dr;(function(e){const t=Object.create(null);t[st.File]=0,t[st.Module]=1,t[st.Namespace]=2,t[st.Package]=3,t[st.Class]=4,t[st.Method]=5,t[st.Property]=6,t[st.Field]=7,t[st.Constructor]=8,t[st.Enum]=9,t[st.Interface]=10,t[st.Function]=11,t[st.Variable]=12,t[st.Constant]=13,t[st.String]=14,t[st.Number]=15,t[st.Boolean]=16,t[st.Array]=17,t[st.Object]=18,t[st.Key]=19,t[st.Null]=20,t[st.EnumMember]=21,t[st.Struct]=22,t[st.Event]=23,t[st.Operator]=24,t[st.TypeParameter]=25;function i(s){return typeof t[s]=="number"?t[s]:6}e.from=i;function r(s){for(const n in t)if(t[n]===s)return Number(n);return st.Property}e.to=r})(dr||(dr={}));var As;(function(e){function t(r){switch(r){case Ul.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Ul.Deprecated}}e.to=i})(As||(As={}));var Mo;(function(e){function t(r){return{name:r.name,kind:dr.from(r.kind),tags:r.tags&&r.tags.map(As.from),containerName:r.containerName,location:Di.from(r.location)}}e.from=t;function i(r){const s=new jl(r.name,dr.to(r.kind),r.containerName,Di.to(r.location));return s.tags=r.tags&&r.tags.map(As.to),s}e.to=i})(Mo||(Mo={}));var T0;(function(e){function t(r){const s={name:r.name||"!!MISSING: name!!",detail:r.detail,range:O.from(r.range),selectionRange:O.from(r.selectionRange),kind:dr.from(r.kind),tags:r.tags?.map(As.from)??[]};return r.children&&(s.children=r.children.map(t)),s}e.from=t;function i(r){const s=new Wl(r.name,r.detail,dr.to(r.kind),O.to(r.range),O.to(r.selectionRange));return Jc(r.tags)&&(s.tags=r.tags.map(As.to)),r.children&&(s.children=r.children.map(i)),s}e.to=i})(T0||(T0={}));var Oo;(function(e){function t(r){const s=new yv(dr.to(r.kind),r.name,r.detail||"",y.revive(r.uri),O.to(r.range),O.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:r.name,detail:r.detail,kind:dr.from(r.kind),uri:r.uri,range:O.from(r.range),selectionRange:O.from(r.selectionRange),tags:r.tags?.map(As.from)}}e.from=i})(Oo||(Oo={}));var R0;(function(e){function t(i){return new a9(Oo.to(i.from),i.fromRanges.map(r=>O.to(r)))}e.to=t})(R0||(R0={}));var L0;(function(e){function t(i){return new c9(Oo.to(i.to),i.fromRanges.map(r=>O.to(r)))}e.to=t})(L0||(L0={}));var Di;(function(e){function t(r){return{range:r.range&&O.from(r.range),uri:r.uri}}e.from=t;function i(r){return new ji(y.revive(r.uri),O.to(r.range))}e.to=i})(Di||(Di={}));var mu;(function(e){function t(r){const s=r,n=r;return{originSelectionRange:s.originSelectionRange?O.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:O.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?O.from(s.targetSelectionRange):void 0}}e.from=t;function i(r){return{targetUri:y.revive(r.uri),targetRange:O.to(r.range),targetSelectionRange:r.targetSelectionRange?O.to(r.targetSelectionRange):void 0,originSelectionRange:r.originSelectionRange?O.to(r.originSelectionRange):void 0}}e.to=i})(mu||(mu={}));var vu;(function(e){function t(r){return{range:O.from(r.range),contents:ue.fromMany(r.contents),canIncreaseVerbosity:r.canIncreaseVerbosity,canDecreaseVerbosity:r.canDecreaseVerbosity}}e.from=t;function i(r){const s=r.contents.map(ue.to),n=O.to(r.range),o=r.canIncreaseVerbosity,a=r.canDecreaseVerbosity;return new Xd(s,n,o,a)}e.to=i})(vu||(vu={}));var N0;(function(e){function t(r){return{range:O.from(r.range),expression:r.expression}}e.from=t;function i(r){return new mf(O.to(r.range),r.expression)}e.to=i})(N0||(N0={}));var Xf;(function(e){function t(r){if(r instanceof vf)return{type:"text",range:O.from(r.range),text:r.text};if(r instanceof wf)return{type:"variable",range:O.from(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};if(r instanceof bf)return{type:"expression",range:O.from(r.range),expression:r.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function i(r){switch(r.type){case"text":return{range:O.to(r.range),text:r.text};case"variable":return{range:O.to(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};case"expression":return{range:O.to(r.range),expression:r.expression}}}e.to=i})(Xf||(Xf={}));var Yf;(function(e){function t(r){return{frameId:r.frameId,stoppedLocation:O.from(r.stoppedLocation)}}e.from=t;function i(r){return new Hv(r.frameId,O.to(r.stoppedLocation))}e.to=i})(Yf||(Yf={}));var rc;(function(e){function t(r){return{range:O.from(r.range),kind:r.kind}}e.from=t;function i(r){return new Yd(O.to(r.range),r.kind)}e.to=i})(rc||(rc={}));var M0;(function(e){function t(r){return{uri:r.uri,highlights:r.highlights.map(rc.from)}}e.from=t;function i(r){return new Kd(y.revive(r.uri),r.highlights.map(rc.to))}e.to=i})(M0||(M0={}));var O0;(function(e){function t(i){switch(i){case 1:return La.TriggerCharacter;case 2:return La.TriggerForIncompleteCompletions;case 0:default:return La.Invoke}}e.to=t})(O0||(O0={}));var F0;(function(e){function t(i){return{triggerKind:O0.to(i.triggerKind),triggerCharacter:i.triggerCharacter}}e.to=t})(F0||(F0={}));var Kf;(function(e){function t(r){switch(r){case zl.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return zl.Deprecated}}e.to=i})(Kf||(Kf={}));var U0;(function(e){function t(i,r,s){return"icon"in i&&"command"in i?{command:r.toInternal(i.command,s),icon:xn.fromThemeIcon(i.icon)}:{command:r.toInternal(i,s)}}e.from=t})(U0||(U0={}));var ep;(function(e){const t=new Map([[fe.Method,0],[fe.Function,1],[fe.Constructor,2],[fe.Field,3],[fe.Variable,4],[fe.Class,5],[fe.Interface,7],[fe.Struct,6],[fe.Module,8],[fe.Property,9],[fe.Unit,12],[fe.Value,13],[fe.Constant,14],[fe.Enum,15],[fe.EnumMember,16],[fe.Keyword,17],[fe.Snippet,28],[fe.Text,18],[fe.Color,19],[fe.File,20],[fe.Reference,21],[fe.Folder,23],[fe.Event,10],[fe.Operator,11],[fe.TypeParameter,24],[fe.Issue,26],[fe.User,25]]);function i(n){return t.get(n)??9}e.from=i;const r=new Map([[0,fe.Method],[1,fe.Function],[2,fe.Constructor],[3,fe.Field],[4,fe.Variable],[5,fe.Class],[7,fe.Interface],[6,fe.Struct],[8,fe.Module],[9,fe.Property],[12,fe.Unit],[13,fe.Value],[14,fe.Constant],[15,fe.Enum],[16,fe.EnumMember],[17,fe.Keyword],[28,fe.Snippet],[18,fe.Text],[19,fe.Color],[20,fe.File],[21,fe.Reference],[23,fe.Folder],[10,fe.Event],[11,fe.Operator],[24,fe.TypeParameter],[25,fe.User],[26,fe.Issue]]);function s(n){return r.get(n)??fe.Property}e.to=s})(ep||(ep={}));var j0;(function(e){function t(i,r){const s=new sf(i.label);return s.insertText=i.insertText,s.kind=ep.to(i.kind),s.tags=i.tags?.map(Kf.to),s.detail=i.detail,s.documentation=rn(i.documentation)?ue.to(i.documentation):i.documentation,s.sortText=i.sortText,s.filterText=i.filterText,s.preselect=i.preselect,s.commitCharacters=i.commitCharacters,Xe.isIRange(i.range)?s.range=O.to(i.range):typeof i.range=="object"&&(s.range={inserting:O.to(i.range.insert),replacing:O.to(i.range.replace)}),s.keepWhitespace=typeof i.insertTextRules>"u"?!1:!!(i.insertTextRules&1),typeof i.insertTextRules<"u"&&i.insertTextRules&4?s.insertText=new So(i.insertText):(s.insertText=i.insertText,s.textEdit=s.range instanceof Se?new pn(s.range,s.insertText):void 0),i.additionalTextEdits&&i.additionalTextEdits.length>0&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>jt.to(n))),s.command=r&&i.command?r.fromInternal(i.command):void 0,s}e.to=t})(j0||(j0={}));var tp;(function(e){function t(r){if(typeof r.label!="string"&&!Array.isArray(r.label))throw new TypeError("Invalid label");return{label:r.label,documentation:ue.fromStrict(r.documentation)}}e.from=t;function i(r){return{label:r.label,documentation:rn(r.documentation)?ue.to(r.documentation):r.documentation}}e.to=i})(tp||(tp={}));var ip;(function(e){function t(r){return{label:r.label,documentation:ue.fromStrict(r.documentation),parameters:Array.isArray(r.parameters)?r.parameters.map(tp.from):[],activeParameter:r.activeParameter}}e.from=t;function i(r){return{label:r.label,documentation:rn(r.documentation)?ue.to(r.documentation):r.documentation,parameters:Array.isArray(r.parameters)?r.parameters.map(tp.to):[],activeParameter:r.activeParameter}}e.to=i})(ip||(ip={}));var wu;(function(e){function t(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(ip.from):[]}}e.from=t;function i(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(ip.to):[]}}e.to=i})(wu||(wu={}));var H0;(function(e){function t(i,r){const s=new rf(ze.to(r.position),typeof r.label=="string"?r.label:r.label.map(W0.to.bind(void 0,i)),r.kind&&rp.to(r.kind));return s.textEdits=r.textEdits&&r.textEdits.map(jt.to),s.tooltip=rn(r.tooltip)?ue.to(r.tooltip):r.tooltip,s.paddingLeft=r.paddingLeft,s.paddingRight=r.paddingRight,s}e.to=t})(H0||(H0={}));var W0;(function(e){function t(i,r){const s=new tf(r.label);return s.tooltip=rn(r.tooltip)?ue.to(r.tooltip):r.tooltip,T1.is(r.command)&&(s.command=i.fromInternal(r.command)),r.location&&(s.location=Di.to(r.location)),s}e.to=t})(W0||(W0={}));var rp;(function(e){function t(r){return r}e.from=t;function i(r){return r}e.to=i})(rp||(rp={}));var Fo;(function(e){function t(r){return{range:O.from(r.range),url:r.target,tooltip:r.tooltip}}e.from=t;function i(r){let s;if(r.url)try{s=typeof r.url=="string"?y.parse(r.url,!0):y.revive(r.url)}catch{}const n=new of(O.to(r.range),s);return n.tooltip=r.tooltip,n}e.to=i})(Fo||(Fo={}));var sp;(function(e){function t(r){const s=new cf(r.label);return r.textEdit&&(s.textEdit=jt.to(r.textEdit)),r.additionalTextEdits&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>jt.to(n))),s}e.to=t;function i(r){return{label:r.label,textEdit:r.textEdit?jt.from(r.textEdit):void 0,additionalTextEdits:r.additionalTextEdits?r.additionalTextEdits.map(s=>jt.from(s)):void 0}}e.from=i})(sp||(sp={}));var sc;(function(e){function t(r){return new Wa(r[0],r[1],r[2],r[3])}e.to=t;function i(r){return[r.red,r.green,r.blue,r.alpha]}e.from=i})(sc||(sc={}));var _0;(function(e){function t(r){return{range:O.from(r.range)}}e.from=t;function i(r){return new ql(O.to(r.range))}e.to=i})(_0||(_0={}));var np;(function(e){function t(i){switch(i){case 2:return Fa.AfterDelay;case 1:return Fa.Manual;case 3:case 4:return Fa.FocusOut}}e.to=t})(np||(np={}));var nc;(function(e){function t(r){switch(r){case Rr.Off:return 0;case Rr.Relative:return 2;case Rr.Interval:return 3;case Rr.On:default:return 1}}e.from=t;function i(r){switch(r){case 0:return Rr.Off;case 2:return Rr.Relative;case 3:return Rr.Interval;case 1:default:return Rr.On}}e.to=i})(nc||(nc={}));var oc;(function(e){function t(r){if(r===Tr.CRLF)return 1;if(r===Tr.LF)return 0}e.from=t;function i(r){if(r===1)return Tr.CRLF;if(r===0)return Tr.LF}e.to=i})(oc||(oc={}));var op;(function(e){function t(i){if(typeof i=="object")return i.viewId;switch(i){case vn.SourceControl:return 3;case vn.Window:return 10;case vn.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(op||(op={}));var ap;(function(e){function t(r){const s={start:r.start+1,end:r.end+1};return r.kind&&(s.kind=cp.from(r.kind)),s}e.from=t;function i(r){const s={start:r.start-1,end:r.end-1};return r.kind&&(s.kind=cp.to(r.kind)),s}e.to=i})(ap||(ap={}));var cp;(function(e){function t(r){if(r)switch(r){case Ds.Comment:return ba.Comment;case Ds.Imports:return ba.Imports;case Ds.Region:return ba.Region}}e.from=t;function i(r){if(r)switch(r.value){case ba.Comment.value:return Ds.Comment;case ba.Imports.value:return Ds.Imports;case ba.Region.value:return Ds.Region}}e.to=i})(cp||(cp={}));var bu;(function(e){function t(i){if(i)return{pinned:typeof i.preview=="boolean"?!i.preview:void 0,inactive:i.background,preserveFocus:i.preserveFocus,selection:typeof i.selection=="object"?O.from(i.selection):void 0,override:typeof i.override=="boolean"?tL.id:void 0}}e.from=t})(bu||(bu={}));var Pi;(function(e){function t(n){return n instanceof Va?n.toJSON():typeof n=="string"?n:i(n)||r(n)?new Va(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function i(n){const o=n;return o?y.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function r(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new Va(y.revive(n.baseUri),n.pattern)}e.to=s})(Pi||(Pi={}));var B0;(function(e){function t(i){if(i){if(Array.isArray(i))return i.map(t);if(typeof i=="string")return i;{const r=i;return{language:r.language,scheme:r.scheme,pattern:Pi.from(r.pattern)??void 0,exclusive:r.exclusive,notebookType:r.notebookType}}}else return}e.from=t})(B0||(B0={}));var ns;(function(e){function t(r){return{start:r.start,end:r.end}}e.from=t;function i(r){return new Yr(r.start,r.end)}e.to=i})(ns||(ns={}));var ac;(function(e){function t(r){return{timing:typeof r.runStartTime=="number"&&typeof r.runEndTime=="number"?{startTime:r.runStartTime,endTime:r.runEndTime}:void 0,executionOrder:r.executionOrder,success:r.lastRunSuccess}}e.to=t;function i(r){return{lastRunSuccess:r.success,runStartTime:r.timing?.startTime,runEndTime:r.timing?.endTime,executionOrder:r.executionOrder}}e.from=i})(ac||(ac={}));var yu;(function(e){function t(r){switch(r){case bo.Markup:return Ia.Markup;case bo.Code:default:return Ia.Code}}e.from=t;function i(r){switch(r){case Ia.Markup:return bo.Markup;case Ia.Code:default:return bo.Code}}e.to=i})(yu||(yu={}));var Sn;(function(e){function t(r){const s={metadata:r.metadata??Object.create(null),cells:[]};for(const n of r.cells)zd.validate(n),s.cells.push(cc.from(n));return s}e.from=t;function i(r){const s=new i9(r.cells.map(cc.to));return vm(r.metadata)||(s.metadata=r.metadata),s}e.to=i})(Sn||(Sn={}));var cc;(function(e){function t(r){return{cellKind:yu.from(r.kind),language:r.languageId,mime:r.mime,source:r.value,metadata:r.metadata,internalMetadata:ac.from(r.executionSummary??{}),outputs:r.outputs?r.outputs.map(En.from):[]}}e.from=t;function i(r){return new zd(yu.to(r.cellKind),r.source,r.language,r.mime,r.outputs?r.outputs.map(En.to):void 0,r.metadata,r.internalMetadata?ac.to(r.internalMetadata):void 0)}e.to=i})(cc||(cc={}));var lc;(function(e){function t(r){return{mime:r.mime,valueBytes:re.wrap(r.data)}}e.from=t;function i(r){return new r9(r.valueBytes.buffer,r.mime)}e.to=i})(lc||(lc={}));var En;(function(e){function t(r){return{outputId:r.id,items:r.items.map(lc.from),metadata:r.metadata}}e.from=t;function i(r){const s=r.items.map(lc.to);return new Gd(s,r.outputId,r.metadata)}e.to=i})(En||(En={}));var lp;(function(e){function t(s){return r(s)?{include:Pi.from(s.include)??void 0,exclude:Pi.from(s.exclude)??void 0}:Pi.from(s)??void 0}e.from=t;function i(s){return r(s)?{include:Pi.to(s.include),exclude:Pi.to(s.exclude)}:Pi.to(s)}e.to=i;function r(s){const n=s;return n?!Tt(n.include)&&!Tt(n.exclude):!1}})(lp||(lp={}));var q0;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{alignment:i.alignment===Cf.Left?1:2,command:r.toInternal(n,s),text:i.text,tooltip:i.tooltip,accessibilityInformation:i.accessibilityInformation,priority:i.priority}}e.from=t})(q0||(q0={}));var z0;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{command:r.toInternal(n,s),label:i.label,description:i.description,detail:i.detail,documentation:i.documentation}}e.from=t})(z0||(z0={}));var V0;(function(e){function t(i){return{transientOutputs:i?.transientOutputs??!1,transientCellMetadata:i?.transientCellMetadata??{},transientDocumentMetadata:i?.transientDocumentMetadata??{},cellContentMetadata:i?.cellContentMetadata??{}}}e.from=t})(V0||(V0={}));var up;(function(e){function t(r){return{uri:r.uri,provides:r.provides}}e.from=t;function i(r){return new g9(y.revive(r.uri),r.provides)}e.to=i})(up||(up={}));var uc;(function(e){function t(r){return{message:ue.fromStrict(r.message)||"",type:0,expected:r.expectedOutput,actual:r.actualOutput,contextValue:r.contextValue,location:r.location&&{range:O.from(r.location.range),uri:r.location.uri},stackTrace:r.stackTrace?.map(s=>({label:s.label,position:s.position&&ze.from(s.position),uri:s.uri&&y.revive(s.uri).toJSON()}))}}e.from=t;function i(r){const s=new Df(typeof r.message=="string"?r.message:ue.to(r.message));return s.actualOutput=r.actual,s.expectedOutput=r.expected,s.contextValue=r.contextValue,s.location=r.location?Di.to(r.location):void 0,s}e.to=i})(uc||(uc={}));var Mr;(function(e){e.namespace=$d,e.denamespace=fC})(Mr||(Mr={}));var G0;(function(e){function t(i){return{controllerId:i.controllerId,profileId:i.profileId,group:hc.from(i.kind)}}e.from=t})(G0||(G0={}));var hc;(function(e){const t={[Ya.Coverage]:8,[Ya.Debug]:4,[Ya.Run]:2};function i(r){return t.hasOwnProperty(r)?t[r]:2}e.from=i})(hc||(hc={}));var Cn;(function(e){function t(r){const s=Bd(r).controllerId;return{extId:Fe.fromExtHostTestItem(r,s).toString(),label:r.label,uri:y.revive(r.uri),busy:r.busy,tags:r.tags.map(n=>Mr.namespace(s,n.id)),range:Xe.lift(O.from(r.range)),description:r.description||null,sortText:r.sortText||null,error:r.error&&ue.fromStrict(r.error)||null}}e.from=t;function i(r){return{parent:void 0,error:void 0,id:Fe.fromString(r.extId).localId,label:r.label,uri:y.revive(r.uri),tags:(r.tags||[]).map(s=>{const{tagId:n}=Mr.denamespace(s);return new cu(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:O.to(r.range||void 0),canResolveChildren:!1,busy:r.busy,description:r.description||void 0,sortText:r.sortText||void 0}}e.toPlain=i})(Cn||(Cn={})),function(e){function t(r){return{id:r.id}}e.from=t;function i(r){return new cu(r.id)}e.to=i}(Mr||(Mr={}));var J0;(function(e){const t=(r,s)=>{const n=r.value;if(!n)return;const o={...Cn.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(uc.to)})),children:[]};if(r.children)for(const a of r.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function i(r){const s=new zR;for(const a of r.items)s.insert(Fe.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:r.completedAt,results:o.map(a=>t(a)).filter(Gi)}}e.to=i})(J0||(J0={}));var Su;(function(e){function t(a){return{covered:a.covered,total:a.total}}function i(a){return"line"in a?ze.from(a):O.from(a)}function r(a){if(a)return"endLineNumber"in a?O.to(a):ze.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:r(l.location),label:l.label});return new v9(a.count,r(a.location),a.branches?.map(l=>new w9(l.count,r(l.location),l.label)))}else return new b9(a.name,a.count,r(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:i(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&i(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:i(a.location)}}e.fromDetails=n;function o(a,c,l){return Af(l.statementCoverage),Af(l.branchCoverage),Af(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof Tf&&l.includesTests.length?l.includesTests.map(u=>Fe.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Su||(Su={}));var Q0;(function(e){function t(i){switch(i){case 1:return _l.Invoke;case 2:return _l.Automatic}}e.to=t})(Q0||(Q0={}));var Uo;(function(e){function t(r){const s=new t0(dr.to(r.kind),r.name,r.detail||"",y.revive(r.uri),O.to(r.range),O.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:dr.from(r.kind),name:r.name,detail:r.detail??"",uri:r.uri,range:O.from(r.range),selectionRange:O.from(r.selectionRange),tags:r.tags?.map(As.from)}}e.from=i})(Uo||(Uo={}));var hp;(function(e){function t(i){if(i)return{value:i.value,tooltip:i.tooltip}}e.from=t})(hp||(hp={}));var jo;(function(e){function t(n,o,a){const c=o.fileData;return c?new AM(new TM(c.name,y.revive(c.uri),c.id,i5(()=>a(c.id)))):n===kr.uriList&&o.uriListData?new df(s(o.uriListData)):new df(o.asString)}e.to=t;async function i(n,o,a=ci()){const c=await o.asString();if(n===kr.uriList)return{id:a,asString:c,fileData:void 0,uriListData:r(c)};const l=o.asFile();return{id:a,asString:c,fileData:l?{name:l.name,uri:l.uri,id:l._itemId??l.id}:void 0}}e.from=i;function r(n){return f1.split(n).map(o=>{if(o.startsWith("#"))return o;try{return y.parse(o)}catch{}return o})}function s(n){return f1.create(n.map(o=>typeof o=="string"?o:y.revive(o)))}})(jo||(jo={}));var dc;(function(e){function t(s,n){const o=s.items.map(([a,c])=>[a,jo.to(a,c,n)]);return new qa(o)}e.toDataTransfer=t;async function i(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await jo.from(o,a)]))}}e.from=i;async function r(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await jo.from(o,a,a.id)]))}}e.fromList=r})(dc||(dc={}));var dp;(function(e){function t(r,s){return{kind:"reply",agentId:r.participant??s?.agentId??"",subCommand:r.command??s?.command,message:r.prompt,title:r.label}}e.from=t;function i(r){return{prompt:r.message,label:r.title,participant:r.agentId,command:r.subCommand}}e.to=i})(dp||(dp={}));var fc;(function(e){function t(r){switch(r){case 0:return Hi.System;case 1:return Hi.User;case 2:return Hi.Assistant}}e.to=t;function i(r){switch(r){case Hi.System:return 0;case Hi.User:return 1;case Hi.Assistant:return 2}return 1}e.from=i})(fc||(fc={}));var U9;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new kt(a.value,a.audience);if(a.type==="tool_result"){const c=mt(a.value.map(l=>l.type==="text"?new kt(l.value,l.audience):l.type==="data"?new ri(l.data.buffer,l.mimeType):l.type==="prompt_tsx"?new ss(l.value):void 0));return new ec(a.toolCallId,c,a.isError)}else{if(a.type==="image_url")return new ri(a.value.data.buffer,a.value.mimeType);if(a.type==="data")return new ri(a.data.buffer,a.mimeType);if(a.type==="tool_use")return new Ro(a.toolCallId,a.name,a.parameters)}}).filter(a=>a!==void 0),n=fc.to(r.role);return new A9(n,s,r.name)}e.to=t;function i(r){const s=fc.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new kt(o)]);const a=o.map(c=>{if(c instanceof ec)return{type:"tool_result",toolCallId:c.callId,value:mt(c.content.map(l=>l instanceof kt?{type:"text",value:l.value,audience:l.audience}:l instanceof ss?{type:"prompt_tsx",value:l.value}:l instanceof ri?{type:"data",mimeType:l.mimeType,data:re.wrap(l.data),audience:l.audience}:void 0)),isError:c.isError};if(c instanceof ri)return j9(c)?{type:"image_url",value:{mimeType:c.mimeType,data:re.wrap(c.data)}}:{type:"data",mimeType:c.mimeType,data:re.wrap(c.data),audience:c.audience};if(c instanceof Ro)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof kt)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(U9||(U9={}));var fp;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new kt(a.value,a.audience);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new kt(l.value,l.audience):l.type==="data"?new ri(l.data.buffer,l.mimeType):new ss(l.value));return new ec(a.toolCallId,c,a.isError)}else return a.type==="image_url"?new ri(a.value.data.buffer,a.value.mimeType):a.type==="data"?new ri(a.data.buffer,a.mimeType):a.type==="thinking"?new tc(a.value,a.id,a.metadata):new Ro(a.toolCallId,a.name,a.parameters)}),n=fc.to(r.role);return new T9(n,s,r.name)}e.to=t;function i(r){const s=fc.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new kt(o)]);const a=o.map(c=>{if(c instanceof ec)return{type:"tool_result",toolCallId:c.callId,value:mt(c.content.map(l=>l instanceof kt?{type:"text",value:l.value,audience:l.audience}:l instanceof ss?{type:"prompt_tsx",value:l.value}:l instanceof ri?{type:"data",mimeType:l.mimeType,data:re.wrap(l.data),audience:l.audience}:void 0)),isError:c.isError};if(c instanceof ri)return j9(c)?{type:"image_url",value:{mimeType:c.mimeType,data:re.wrap(c.data)}}:{type:"data",mimeType:c.mimeType,data:re.wrap(c.data),audience:c.audience};if(c instanceof Ro)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof kt)return{type:"text",value:c.value};if(c instanceof tc)return{type:"thinking",value:c.value,id:c.id,metadata:c.metadata};if(typeof c!="string")throw new Error("Unexpected chat message content type llm 2");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(fp||(fp={}));function j9(e){switch(typeof e.mimeType=="string"?e.mimeType.toLowerCase():""){case"image/png":case"image/jpeg":case"image/jpg":case"image/gif":case"image/webp":case"image/bmp":return!0;default:return!1}}var Eu;(function(e){function t(r){return{kind:"markdownContent",content:ue.from(r.value)}}e.from=t;function i(r){return new Lf(ue.to(r.content))}e.to=i})(Eu||(Eu={}));var pp;(function(e){function t(r){return{kind:"codeblockUri",uri:r.value,isEdit:r.isEdit,undoStopId:r.undoStopId}}e.from=t;function i(r){return new Uf(y.revive(r.uri),r.isEdit,r.undoStopId)}e.to=i})(pp||(pp={}));var gp;(function(e){function t(r){return{kind:"markdownVuln",content:ue.from(r.value),vulnerabilities:r.vulnerabilities}}e.from=t;function i(r){return new uu(ue.to(r.content),r.vulnerabilities)}e.to=i})(gp||(gp={}));var mp;(function(e){function t(i){return{kind:"confirmation",title:i.title,message:ue.from(i.message),data:i.data,buttons:i.buttons}}e.from=t})(mp||(mp={}));var Cu;(function(e){function t(r){const{value:s,baseUri:n}=r;function o(a,c){return a.map(l=>{const u=y.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:Ji(n),uri:n,children:o(s,n)}}}e.from=t;function i(r){const s=Xt(r.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Mf(a,o)}e.to=i})(Cu||(Cu={}));var Z0;(function(e){function t(r){return{kind:"multiDiffData",multiDiffData:{title:r.title,resources:r.value.map(s=>({originalUri:s.originalUri,modifiedUri:s.modifiedUri,goToFileUri:s.goToFileUri,added:s.added,removed:s.removed}))},readOnly:r.readOnly}}e.from=t;function i(r){const s=r.multiDiffData.resources.map(n=>({originalUri:n.originalUri?y.revive(n.originalUri):void 0,modifiedUri:n.modifiedUri?y.revive(n.modifiedUri):void 0,goToFileUri:n.goToFileUri?y.revive(n.goToFileUri):void 0,added:n.added,removed:n.removed}));return new h0(s,r.multiDiffData.title,r.readOnly)}e.to=i})(Z0||(Z0={}));var pc;(function(e){function t(r){const s=o=>y.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:r.title,inlineReference:s(r.value)?r.value:n(r.value)?Mo.from(r.value):hr.from(r.value)}}e.from=t;function i(r){const s=Xt(r);return new hu(y.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Mo.to(s.inlineReference):hr.to(s.inlineReference),r.name)}e.to=i})(pc||(pc={}));var xu;(function(e){function t(r){return{kind:"progressMessage",content:ue.from(r.value)}}e.from=t;function i(r){return new f0(r.content.value)}e.to=i})(xu||(xu={}));var ku;(function(e){function t(r){return{kind:"thinking",value:r.value,id:r.id,metadata:r.metadata}}e.from=t;function i(r){return new Ka(r.value??"",r.id,r.metadata)}e.to=i})(ku||(ku={}));var $u;(function(e){function t(r){return{kind:"warning",content:ue.from(r.value)}}e.from=t;function i(r){return new du(r.content.value)}e.to=i})($u||($u={}));var X0;(function(e){function t(i){return{kind:"extensions",extensions:i.extensions}}e.from=t})(X0||(X0={}));var Y0;(function(e){function t(i){return{kind:"pullRequest",author:i.author,title:i.title,description:i.description,uri:i.uri,linkTag:i.linkTag}}e.from=t})(Y0||(Y0={}));var K0;(function(e){function t(r){return{kind:"move",uri:r.uri,range:O.from(r.range)}}e.from=t;function i(r){return new Hf(y.revive(r.uri),O.to(r.range))}e.to=i})(K0||(K0={}));var Iu;(function(e){function t(r){return{kind:"prepareToolInvocation",toolName:r.toolName}}e.from=t;function i(r){return new pu(r.toolName)}e.to=i})(Iu||(Iu={}));var ew;(function(e){function t(n){return{kind:"toolInvocationSerialized",toolCallId:n.toolCallId,toolId:n.toolName,invocationMessage:n.invocationMessage?ue.from(n.invocationMessage):n.toolName,originMessage:n.originMessage?ue.from(n.originMessage):void 0,pastTenseMessage:n.pastTenseMessage?ue.from(n.pastTenseMessage):void 0,isConfirmed:n.isConfirmed,isComplete:n.isComplete??!0,source:Pr.External,toolSpecificData:n.toolSpecificData?i(n.toolSpecificData):void 0,presentation:n.presentation==="hidden"?xa.Hidden:n.presentation==="hiddenAfterComplete"?xa.HiddenAfterComplete:void 0,fromSubAgent:n.fromSubAgent}}e.from=t;function i(n){return"command"in n&&"language"in n?{kind:"terminal",command:n.command,language:n.language}:"commandLine"in n&&"language"in n?{kind:"terminal",commandLine:n.commandLine,language:n.language}:n}function r(n){const o=new m0(n.toolId||n.toolName,n.toolCallId,n.isError);return n.invocationMessage&&(o.invocationMessage=n.invocationMessage),n.originMessage&&(o.originMessage=n.originMessage),n.pastTenseMessage&&(o.pastTenseMessage=n.pastTenseMessage),n.isConfirmed!==void 0&&(o.isConfirmed=n.isConfirmed),n.isComplete!==void 0&&(o.isComplete=n.isComplete),n.toolSpecificData&&(o.toolSpecificData=s(n.toolSpecificData)),o.fromSubAgent=n.fromSubAgent,o}e.to=r;function s(n){return n.kind==="terminal"?{command:n.command,language:n.language}:n.kind==="terminal2"?{commandLine:n.commandLine,language:n.language}:n}})(ew||(ew={}));var vp;(function(e){function t(i){return{kind:"progressTask",content:ue.from(i.value)}}e.from=t})(vp||(vp={}));var tw;(function(e){function t(i){return{kind:"progressTaskResult",content:typeof i=="string"?ue.from(i):void 0}}e.from=t})(tw||(tw={}));var Du;(function(e){function t(r,s,n){return{kind:"command",command:s.toInternal(r.value,n)??{command:r.value.command,title:r.value.title}}}e.from=t;function i(r,s){return new Ff(s.fromInternal(r.command)??{command:r.command.id,title:r.command.title})}e.to=i})(Du||(Du={}));var wp;(function(e){function t(r){return{kind:"textEdit",uri:r.uri,edits:r.edits.map(s=>jt.from(s)),done:r.isDone}}e.from=t;function i(r){const s=new fu(y.revive(r.uri),r.edits.map(n=>jt.to(n)));return s.isDone=r.done,s}e.to=i})(wp||(wp={}));var bp;(function(e){function t(i){return i.newCellMetadata?{editType:3,index:i.range.start,metadata:i.newCellMetadata}:i.newNotebookMetadata?{editType:5,metadata:i.newNotebookMetadata}:{editType:1,index:i.range.start,count:i.range.end-i.range.start,cells:i.newCells.map(cc.from)}}e.from=t})(bp||(bp={}));var yp;(function(e){function t(i){return{kind:"notebookEdit",uri:i.uri,edits:i.edits.map(bp.from),done:i.isDone}}e.from=t})(yp||(yp={}));var Ho;(function(e){function t(r){const s=vt.isThemeIcon(r.iconPath)?r.iconPath:y.isUri(r.iconPath)?{light:y.revive(r.iconPath)}:r.iconPath&&"light"in r.iconPath&&"dark"in r.iconPath&&y.isUri(r.iconPath.light)&&y.isUri(r.iconPath.dark)?{light:y.revive(r.iconPath.light),dark:y.revive(r.iconPath.dark)}:void 0;return typeof r.value=="object"&&"variableName"in r.value?{kind:"reference",reference:{variableName:r.value.variableName,value:y.isUri(r.value.value)||!r.value.value?r.value.value:hr.from(r.value.value)},iconPath:s,options:r.options}:{kind:"reference",reference:y.isUri(r.value)||typeof r.value=="string"?r.value:hr.from(r.value),iconPath:s,options:r.options}}e.from=t;function i(r){const s=Xt(r),n=o=>y.isUri(o)?o:hr.to(o);return new To(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=i})(Ho||(Ho={}));var Sp;(function(e){function t(i){return{kind:"codeCitation",value:i.value,license:i.license,snippet:i.snippet}}e.from=t})(Sp||(Sp={}));var Pu;(function(e){function t(s,n,o){return s instanceof Lf?Eu.from(s):s instanceof hu?pc.from(s):s instanceof To?Ho.from(s):s instanceof f0?xu.from(s):s instanceof Ka?ku.from(s):s instanceof Mf?Cu.from(s):s instanceof h0?Z0.from(s):s instanceof Ff?Du.from(s,n,o):s instanceof fu?wp.from(s):s instanceof Wf?yp.from(s):s instanceof uu?gp.from(s):s instanceof Uf?pp.from(s):s instanceof du?$u.from(s):s instanceof Nf?mp.from(s):s instanceof jf?Sp.from(s):s instanceof Hf?K0.from(s):s instanceof p0?X0.from(s):s instanceof pu?Iu.from(s):s instanceof g0?Y0.from(s):s instanceof m0?ew.from(s):{kind:"markdownContent",content:ue.from("")}}e.from=t;function i(s,n){switch(s.kind){case"reference":return Ho.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return r(s,n)}}e.to=i;function r(s,n){switch(s.kind){case"markdownContent":return Eu.to(s);case"inlineReference":return pc.to(s);case"progressMessage":return;case"treeData":return Cu.to(s);case"command":return Du.to(s,n)}}e.toContent=r})(Pu||(Pu={}));var gc;(function(e){function t(i,r,s,n,o,a,c){const l=[],u=[];for(const g of i.variables.variables)g.kind==="tool"?l.push(g):g.kind==="toolset"?l.push(...g.value):u.push(g);const h=Jr.parseLocalSessionId(i.sessionResource)??i.sessionResource.toString(),f={id:i.requestId,prompt:i.message,command:i.command,attempt:i.attempt??0,enableCommandDetection:i.enableCommandDetection??!0,isParticipantDetected:i.isParticipantDetected??!1,sessionId:h,references:u.map(g=>Cp.to(g,n,c)).filter(Gi),toolReferences:l.map(Wo.to),location:Ep.to(i.location),acceptedConfirmationData:i.acceptedConfirmationData,rejectedConfirmationData:i.rejectedConfirmationData,location2:r,toolInvocationToken:Object.freeze({sessionId:h,sessionResource:i.sessionResource}),tools:o,model:s,editedFileEvents:i.editedFileEvents,modeInstructions:i.modeInstructions?.content,modeInstructions2:rw.to(i.modeInstructions),isSubagent:i.isSubagent};return Je(a,"chatParticipantPrivate")||(delete f.id,delete f.attempt,delete f.enableCommandDetection,delete f.isParticipantDetected,delete f.location,delete f.location2,delete f.editedFileEvents,delete f.sessionId,delete f.isSubagent),Je(a,"chatParticipantAdditions")||(delete f.acceptedConfirmationData,delete f.rejectedConfirmationData,delete f.tools),f}e.to=t})(gc||(gc={}));var iw;(function(e){function t(i){return{prompt:i.prompt,files:i.files.map(r=>y.revive(r))}}e.to=t})(iw||(iw={}));var Ep;(function(e){function t(r){switch(r){case Yt.Notebook:return Lr.Notebook;case Yt.Terminal:return Lr.Terminal;case Yt.Chat:return Lr.Panel;case Yt.EditorInline:return Lr.Editor}}e.to=t;function i(r){switch(r){case Lr.Notebook:return Yt.Notebook;case Lr.Terminal:return Yt.Terminal;case Lr.Panel:return Yt.Chat;case Lr.Editor:return Yt.EditorInline}}e.from=i})(Ep||(Ep={}));var Cp;(function(e){function t(i,r,s){let n=i.value;if(!n){let a;try{a=JSON.stringify(i)}catch{a=`kind=${i.kind}, id=${i.id}, name=${i.name}`}s.error(`[ChatPromptReference] Ignoring invalid reference in variable: ${a}`);return}if(Fh(n))n=y.revive(n);else if(n&&typeof n=="object"&&"uri"in n&&"range"in n&&Fh(n.uri))n=hr.to(Xt(n));else if(uL(i)){const a=i.references?.[0]?.reference;n=new P9(i.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(i.value))),a&&y.isUri(a)?a:void 0)}else if(i.kind==="diagnostic"){const a=i.filterSeverity&&gu.to(i.filterSeverity),c=i.filterUri&&y.revive(i.filterUri).toString();n=new y0(r.map(([l,u])=>i.filterUri&&l.toString()!==c?[l,[]]:[l,u.filter(h=>!(a&&h.severity>a||i.filterRange&&!Xe.areIntersectingOrTouching(i.filterRange,O.from(h.range))))]).filter(([,l])=>l.length>0))}let o;return(U1(i)||hL(i))&&i.toolReferences&&(o=xp.to(i.toolReferences)),{id:i.id,name:i.name,range:i.range&&[i.range.start,i.range.endExclusive],toolReferences:o,value:n,modelDescription:i.modelDescription}}e.to=t})(Cp||(Cp={}));var Wo;(function(e){function t(i){if(i.value)throw new Error("Invalid tool reference");return{name:i.id,range:i.range&&[i.range.start,i.range.endExclusive]}}e.to=t})(Wo||(Wo={}));var xp;(function(e){function t(i){const r=[];for(const s of i)if(s.kind==="tool")r.push(Wo.to(s));else if(s.kind==="toolset")r.push(...s.value.map(Wo.to));else throw new Error("Invalid tool reference in prompt variables");return r}e.to=t})(xp||(xp={}));var rw;(function(e){function t(i){if(i)return{name:i.name,content:i.content,toolReferences:xp.to(i.toolReferences),metadata:i.metadata}}e.to=t})(rw||(rw={}));var sw;(function(e){function t(i,r,s){return{id:i.id,label:i.label,fullName:i.fullName,icon:i.icon?.id,value:i.values[0].value,insertText:i.insertText,detail:i.detail,documentation:i.documentation,command:r.toInternal(i.command,s)}}e.from=t})(sw||(sw={}));var mc;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:r(s.metadata),nextQuestion:s.nextQuestion,details:s.details}}e.to=t;function i(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion,details:s.details}}e.from=i;function r(s){return ga(s,n=>{if(n.$mid===20)return new qf(ga(n.content,r));if(n.$mid===21)return new kt(n.value);if(n.$mid===22)return new tc(n.value,n.id,n.metadata);if(n.$mid===23)return new ss(n.value)})}})(mc||(mc={}));var nw;(function(e){function t(i,r,s){if(r.action.kind==="vote")return;const n=mc.to(i);if(r.action.kind==="command"){const o=r.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return r.action.kind==="followUp"?{action:{kind:"followUp",followup:dp.to(r.action.followup)},result:n}:r.action.kind==="inlineChat"?{action:{kind:"editor",accepted:r.action.action==="accepted"},result:n}:r.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",rs.Accepted],["rejected",rs.Rejected],["saved",rs.Saved]]).get(r.action.outcome)??rs.Rejected,uri:y.revive(r.action.uri),hasRemainingEdits:r.action.hasRemainingEdits},result:n}:r.action.kind==="chatEditingHunkAction"?{action:{kind:"chatEditingHunkAction",outcome:new Map([["accepted",rs.Accepted],["rejected",rs.Rejected]]).get(r.action.outcome)??rs.Rejected,uri:y.revive(r.action.uri),hasRemainingEdits:r.action.hasRemainingEdits,lineCount:r.action.lineCount,linesAdded:r.action.linesAdded,linesRemoved:r.action.linesRemoved},result:n}:{action:r.action,result:n}}e.to=t})(nw||(nw={}));var kp;(function(e){function t(i,r,s){return"terminalCommand"in i?{terminalCommand:i.terminalCommand,shouldExecute:i.shouldExecute}:"uri"in i?{uri:i.uri}:r.toInternal(i,s)}e.from=t})(kp||(kp={}));var $p;(function(e){function t(i){return{...i,documentation:ue.fromStrict(i.documentation)}}e.from=t})($p||($p={}));var ow;(function(e){function t(i,r){return Array.isArray(i)?{items:i.map(s=>$p.from(s))}:{items:i.items.map(s=>$p.from(s)),resourceOptions:i.resourceOptions?aw.from(i.resourceOptions,r):void 0}}e.from=t})(ow||(ow={}));var aw;(function(e){function t(i,r){return{...i,pathSeparator:r,cwd:i.cwd,globPattern:Pi.from(i.globPattern)??void 0}}e.from=t})(aw||(aw={}));var cw;(function(e){function t(i){return{kind:lw.to(i.kind),acceptedLength:i.acceptedLength}}e.to=t})(cw||(cw={}));var lw;(function(e){function t(i){switch(i){case 0:return xo.Word;case 1:return xo.Line;case 2:return xo.Suggest;default:return xo.Unknown}}e.to=t})(lw||(lw={}));var uw;(function(e){function t(i,r){if(i.kind===od.Ignored){const s=i.supersededBy?r(i.supersededBy):void 0;return{kind:Ma.Ignored,supersededBy:s,userTypingDisagreed:i.userTypingDisagreed}}else if(i.kind===od.Accepted)return{kind:Ma.Accepted};return{kind:Ma.Rejected}}e.to=t})(uw||(uw={}));var hw;(function(e){function t(r){return r===Oa.Label?wa.Label:wa.Code}e.from=t;function i(r){switch(r){case wa.Label:return Oa.Label;default:return Oa.Code}}e.to=i})(hw||(hw={}));var dw;(function(e){function t(i,r){return{id:r,label:i.label,description:i.description,canEdit:i.canEdit,collapsibleState:i.collapsibleState||0,contextValue:i.contextValue}}e.from=t})(dw||(dw={}));var fw;(function(e){function t(i){return i.type==="mcp"?new N9(i.label,i.serverLabel||i.label,i.instructions):i.type==="extension"?new L9(i.extensionId.value,i.label):void 0}e.to=t})(fw||(fw={}));var Ip;(function(e){function t(r){return new qf(r.content.map(s=>s.kind==="text"?new kt(s.value,s.audience):s.kind==="data"?new ri(s.value.data.buffer,s.value.mimeType,s.audience):new ss(s.value)))}e.to=t;function i(r,s){r.toolResultMessage&&T(s,"chatParticipantPrivate");const n=c=>{c.audience&&T(s,"languageModelToolResultAudience")};let o=!1;const a={content:r.content.map(c=>{if(c instanceof kt)return n(c),{kind:"text",value:c.value,audience:c.audience};if(c instanceof ss)return{kind:"promptTsx",value:c.value};if(c instanceof ri)return n(c),o=!0,{kind:"data",value:{mimeType:c.mimeType,data:re.wrap(c.data)},audience:c.audience};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:ue.fromStrict(r.toolResultMessage),toolResultDetails:r.toolResultDetails?.map(c=>y.isUri(c)?c:hr.from(c))};return o?new ei(a):a}e.from=i})(Ip||(Ip={}));var H9;(function(e){function t(r){const s=new R9(r.content.map(n=>n.kind==="text"?new kt(n.value,n.audience):n.kind==="data"?new ri(n.value.data.buffer,n.value.mimeType,n.audience):new ss(n.value)));return r.toolMetadata&&(s.toolMetadata=r.toolMetadata),s}e.to=t;function i(r,s){r.toolResultMessage&&T(s,"chatParticipantPrivate");const n=l=>{l.audience&&T(s,"languageModelToolResultAudience")};let o=!1,a;Array.isArray(r.toolResultDetails)?a=r.toolResultDetails?.map(l=>y.isUri(l)?l:hr.from(l)):r.toolResultDetails2&&(a={output:{type:"data",mimeType:r.toolResultDetails2.mime,value:re.wrap(r.toolResultDetails2.value)}},o=!0);const c={content:r.content.map(l=>{if(l instanceof kt)return n(l),{kind:"text",value:l.value,audience:l.audience};if(l instanceof ss)return{kind:"promptTsx",value:l.value};if(l instanceof ri)return n(l),o=!0,{kind:"data",value:{mimeType:l.mimeType,data:re.wrap(l.data)},audience:l.audience};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:ue.fromStrict(r.toolResultMessage),toolResultDetails:a,toolMetadata:r.toolMetadata};return o?new ei(c):c}e.from=i})(H9||(H9={}));var xn;(function(e){function t(s){return s}e.fromThemeIcon=t;function i(s){if(s){if(vt.isThemeIcon(s))return s;if(y.isUri(s))return s;if(typeof s=="string")return y.file(s);if(typeof s=="object"&&s!==null&&"dark"in s){const n=typeof s.dark=="string"?y.file(s.dark):s.dark,o=typeof s.light=="string"?y.file(s.light):s.light;return n?{dark:n,light:o??n}:void 0}else return}else return}e.from=i;function r(s){if(s){if(vt.isThemeIcon(s))return s;if(Fh(s))return y.revive(s);{const n=s;return{light:y.revive(n.light),dark:y.revive(n.dark)}}}else return}e.to=r})(xn||(xn={}));var pw;(function(e){function t(r){return{query:r.query,kind:i(r.kind),settings:r.settings}}e.fromSettingsSearchResult=t;function i(r){switch(r){case ln.EMBEDDED:return ln.EMBEDDED;case ln.LLM_RANKED:return ln.LLM_RANKED;case ln.CANCELED:return ln.CANCELED;default:throw new Error("Unknown AiSettingsSearchResultKind")}}})(pw||(pw={}));var Au;(function(e){function t(r){return!!r.uri}function i(r){return Pl.toSerialized(t(r)?{type:2,uri:r.uri,headers:Object.entries(r.headers),authentication:r.authentication?{providerId:r.authentication.providerId,scopes:r.authentication.scopes}:void 0}:{type:1,cwd:r.cwd?.fsPath,args:r.args,command:r.command,env:r.env,envFile:void 0})}e.from=i})(Au||(Au={}));var gw;(function(e){function t(i){switch(i){case _a.Error:return 0;case _a.Warning:return 1;case _a.Information:return 2;default:throw new Error("Unknown SourceControlInputBoxValidationType")}}e.from=t})(gw||(gw={}));var kn=class{constructor(e,t,i){this.uri=e,this.ranges=t,this.previewText=i}},mw=class{constructor(e,t,i){this.uri=e,this.text=t,this.lineNumber=i}},vw=class{constructor(e){this.keyword=e}},Ts;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(Ts||(Ts={}));var Dp;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Dp||(Dp={}));var W9=2e4,_9="\u27EA ",B9=" characters skipped \u27EB",ZM=(_9.length+B9.length+5)*2,OG=U("searchService"),q9;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(q9||(q9={}));var z9;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(z9||(z9={}));function V9(e){return!!e.rangeLocations&&!!e.previewText}var G9;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(G9||(G9={}));var XM=class{constructor(e,t,i,r){this.rangeLocations=[],this.webviewIndex=r;const s=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&YM(s)){e=pT(e,i.matchLines);let n="",o=0,a=0;const c=Math.floor(i.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+i.charsPerLine;if(u>a+c+ZM){const f=_9+(u-a)+B9;n+=f+e.slice(u,h),o+=u-(a+f.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new KM(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=fm(t,a=>({preview:new J9(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function YM(e){const t=e[0].startLineNumber;for(const i of e)if(i.startLineNumber!==t||i.endLineNumber!==t)return!1;return!0}var J9=class{constructor(e,t,i,r){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r}},KM=class extends J9{constructor(e,t,i){super(e,t,e,i)}},Q9;(function(e){e.List="list",e.Tree="tree"})(Q9||(Q9={}));var Z9;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(Z9||(Z9={}));var X9;(function(e){e.Auto="auto",e.Manual="manual",e.RunOnEmpty="runOnEmpty"})(X9||(X9={}));function eO(e,t=!0){const i=e&&e.files&&e.files.exclude,r=t&&e&&e.search&&e.search.exclude;if(!i&&!r)return;if(!i||!r)return i||r||void 0;let s=Object.create(null);return s=no(s,ot(i)),s=no(s,ot(r),!0),s}function Y9(e,t){return e.excludePattern&&ka(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&ka(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(i=>{const r=i.folder.fsPath;if(qh(t,r)){const s=ol(r,t);return!i.includePattern||!!ka(i.includePattern,s)}else return!1}):!1:!0}var K9;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(K9||(K9={}));function vc(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter(r=>{const s=i[r];return typeof s=="boolean"&&s})}var ex=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(r=>({...e.excludePattern||{},...r.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(r=>$a(r));let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this.c=$a(i))}d(e,t,i){let r=null;for(const s of this.b){const n=s(e,t,i);if(typeof n=="string"){r=n;break}}return r}matchesExcludesSync(e,t,i){return!!(this.b&&this.d(e,t,i))}includedInQuerySync(e,t,i){return!(this.b&&this.d(e,t,i)||this.c&&!this.c(e,t,i))}includedInQuery(e,t,i){const r=()=>this.c?!!this.c(e,t,i):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,i);return Ys(n)?n.then(o=>o?!1:r()):r()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>tO(t)||e,!1)}};function tO(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function iO(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(r=>r?tx(r):{})),t.then(r=>!!r[i]))}function rO(e){if(!e)return;let t;return i=>{if(!t){const r=e();t=r?tx(r):{}}return!!t[i]}}function tx(e){const t={};for(const i of e)t[i]=!0;return t}function ix(e){return e.flatMap(t=>t.patterns.map(i=>t.baseUri?{baseUri:t.baseUri,pattern:i}:i))}var ww={matchLines:100,charsPerLine:1e4},sO=!1,nO=class{constructor(e,t,i){this.id=e,this.dependencies=t,this.callback=i}},_o;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(_o||(_o={}));var oO=class c3{static{this.INSTANCE=new c3}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=_o.Uninitialized}g(){if(this.d===_o.Uninitialized){if(globalThis.define){this.d=_o.InitializedExternal;return}}else return;this.d=_o.InitializedInternal,globalThis.define=(t,i,r)=>{typeof t!="string"&&(r=i,i=t,t=null),(typeof i!="object"||!Array.isArray(i))&&(r=i,i=null),this.c.push(new nO(t,i,r))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${B.vscodeFileResource}://${S6}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===_o.InitializedExternal)return new Promise(o=>{const a=ci();globalThis.define(a,[t],function(c){o(c)})});const i=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!i){console.warn(`Did not receive a define call from script ${t}`);return}const r={},s=[],n=[];if(Array.isArray(i.dependencies))for(const o of i.dependencies)o==="exports"?s.push(r):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof i.callback=="function"?i.callback(...s)??r:i.callback}h(t){return new Promise((i,r)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),i(this.c.pop())},a=c=>{n(),r(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const i=(await import("fs")).default,r=(await import("vm")).default,s=(await import("module")).default,n=y.parse(t).fsPath,o=i.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new r.Script(a).runInThisContext().apply(),this.c.pop()}catch(i){throw i}}},bw=new Map;async function yw(e,t,i){i===void 0&&(i=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const r=t?`${e}/${t}`:e;if(bw.has(r))return bw.get(r);let s;if(/^\w[\w\d+.-]*:\/\//.test(r))s=r;else{const c=`${sO&&i&&!zn?DT:IT}/${r}`;s=E6.asBrowserUri(c).toString(!0)}const n=oO.INSTANCE.load(s);return bw.set(r,n),n}var Pp="utf8",Sw="utf8bom",Ap="utf16be",Tp="utf16le",Rp=[254,255],Ew=[255,254],Tu=[239,187,191],aO=512,cO=512,lO=512*8,uO=512*128,rx;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(rx||(rx={}));var hO=class extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}},dO=class l3{static async create(t){let i;if(t!==Pp)i=(await yw("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getDecoder(sx(t));else{const r=new TextDecoder;i={write(s){return r.decode(s,{stream:!0})},end(){return r.decode()}}}return new l3(i)}constructor(t){this.a=t}write(t){return this.a.write(t)}end(){return this.a.end()}};function fO(e,t){const i=t.minBytesRequiredForDetection??(t.guessEncoding?lO:cO);return new Promise((r,s)=>{const n=c5(h=>h.join("")),o=[];let a=0,c;const l=new rt,u=async()=>{try{const h=await EO({buffer:re.concat(o),bytesRead:a},t.guessEncoding,t.candidateGuessEncodings);if(h.seemsBinary&&t.acceptTextOnly)throw new hO("Stream is binary but only text is accepted for decoding",1);h.encoding=await t.overwriteEncoding(h.encoding),c=await dO.create(h.encoding);const f=c.write(re.concat(o).buffer);n.write(f),o.length=0,a=0,r({stream:n,detected:h})}catch(h){l.cancel(),n.destroy(),s(h)}};u5(e,{onData:async h=>{c?n.write(c.write(h.buffer)):(o.push(h),a+=h.byteLength,a>=i&&(e.pause(),await u(),setTimeout(()=>e.resume())))},onError:h=>n.error(h),onEnd:async()=>{c||await u(),n.end(c?.end())}},l.token)})}async function pO(e,t,i){const s=(await yw("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getEncoder(sx(t),i);let n=!1,o=!1;return{read(){if(o)return null;const a=e.read();if(typeof a!="string"){if(o=!0,!n&&i?.addBOM)switch(t){case Pp:case Sw:return re.wrap(Uint8Array.from(Tu));case Ap:return re.wrap(Uint8Array.from(Rp));case Tp:return re.wrap(Uint8Array.from(Ew))}const c=s.end();return c&&c.length>0?(n=!0,re.wrap(c)):null}return n=!0,re.wrap(s.write(a))}}}function sx(e){return e===Sw||e===null?Pp:e}function gO(e,t){if(!e||t<Rp.length)return null;const i=e.readUInt8(0),r=e.readUInt8(1);if(i===Rp[0]&&r===Rp[1])return Ap;if(i===Ew[0]&&r===Ew[1])return Tp;if(t<Tu.length)return null;const s=e.readUInt8(2);return i===Tu[0]&&r===Tu[1]&&s===Tu[2]?Sw:null}var mO=["ascii","utf-16","utf-32"];async function vO(e,t){const i=await yw("jschardet","dist/jschardet.min.js"),r=e.slice(0,uO),s=SO(r.buffer);t&&(t=mt(t.map(a=>yO(a))),t.length===0&&(t=void 0));let n;try{n=i.detect(s,t?{detectEncodings:t}:void 0)}catch{return null}if(!n?.encoding)return null;const o=n.encoding.toLowerCase();return 0<=mO.indexOf(o)?null:bO(n.encoding)}var wO={ibm866:"cp866",big5:"cp950"};function nx(e){return e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function bO(e){const t=nx(e);return wO[t]||t}function yO(e){const t=nx(e),i=CO[t];return i?i.guessableName:void 0}function SO(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}function EO({buffer:e,bytesRead:t},i,r){let s=gO(e,t),n=!1;if(s!==Ap&&s!==Tp&&e){let o=!0,a=!0,c=!1;for(let l=0;l<t&&l<aO;l++){const u=l%2===1,h=e.readUInt8(l)===0;if(h&&(c=!0),o&&(u&&!h||!u&&h)&&(o=!1),a&&(u&&h||!u&&!h)&&(a=!1),h&&!o&&!a)break}c&&(o?s=Tp:a?s=Ap:n=!0)}return i&&!n&&!s&&e?vO(e.slice(0,t),r).then(o=>({seemsBinary:!1,encoding:o})):{seemsBinary:n,encoding:s}}var Cw={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},cp1125:{labelLong:"Cyrillic (CP 1125)",labelShort:"CP 1125",order:21,guessableName:"IBM1125"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:22,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:23,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:24},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:25},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:26,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:27,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:28,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:29,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:30},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:31},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:32},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:33},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:34},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:35},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:36},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:37,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:38},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:39,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:40,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:41,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:42},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:43},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:44},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:45},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:46,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:47},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:48}},CO=(()=>{const e={};for(const t in Cw)Cw[t].guessableName&&(e[t]=Cw[t]);return e})(),FG=U("textFileService"),ox;(function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"})(ox||(ox={}));var ax;(function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"})(ax||(ax={}));var cx;(function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"})(cx||(cx={}));var lx;(function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"})(lx||(lx={}));function xO(e){let t=!1;return{read(){return t?null:(t=!0,e)}}}function Ru(e,t,i){return new ua(r=>Lp(r,i)).isEqual(e,t)}function kO(e,t,i){return Ru(e.uri,t.uri,i)?0:Xn(e.uri.toString(),t.uri.toString())}function $O(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:Ru(e.uri,t.uri,i)?Xn(e.name,t.name):Xn(e.uri.toString(),t.uri.toString())}function ux(e,t,i,r){const s=e.slice(0).sort((o,a)=>i(o,a,r)),n=t.slice(0).sort((o,a)=>i(o,a,r));return vP(s,n,(o,a)=>i(o,a,r))}function Lp(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&1024)}var xw=class R4 extends W2{static toExtHostWorkspace(t,i,r,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],f=i;i?a.forEach((S,C)=>{const k=y.revive(S.uri),A=R4.o(r||i,k,s);A?(A.name=S.name,A.index=S.index,h.push(A)):h.push({uri:k,name:S.name,index:C})}):h.push(...a.map(({uri:S,name:C,index:k})=>({uri:y.revive(S),name:C,index:k}))),h.sort((S,C)=>S.index<C.index?-1:1);const g=new R4(n,o,h,!!l,c?y.revive(c):null,!!u,S=>Lp(S,s)),{added:m,removed:w}=ux(f?f.workspaceFolders:[],g.workspaceFolders,kO,s);return{workspace:g,added:m,removed:w}}static o(t,i,r){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(Ru(n.uri,i,r))return n}}constructor(t,i,r,s,n,o,a){super(t,r.map(c=>new kS(c)),s,n,a),this.t=i,this.u=o,this.q=[],this.s=en.forUris(a,()=>!0),r.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,i){return i&&this.s.get(t)&&(t=cl(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},kw=class{constructor(t,i,r,s,n){this.c=new P,this.onDidChangeWorkspace=this.c.event,this.g=new P,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new el,this.D=new Map,this.h=s,this.s=r,this.t=n,this.j=new F2,this.k=new Cr,this.o=t.getProxy(V.MainThreadWorkspace),this.q=t.getProxy(V.MainThreadMessageService);const o=i.workspace;this.l=o?new xw(o.id,o.name,[],!!o.transient,o.configuration?y.revive(o.configuration):null,!!o.isUntitled,a=>Lp(a,r)):void 0}$initializeWorkspace(t,i){this.v=i,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?y.from({scheme:B.untitled,path:Ji(cl(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,i,r,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{y.isUri(u.uri)&&!n.some(h=>Ru(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||Bm(u.uri)})}),this.n||[i,r].some(u=>typeof u!="number"||u<0)||r===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(i+r>o.length)return!1;const a=o.slice(0);a.splice(i,r,...n.map(u=>({uri:u.uri,name:u.name||Bm(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((f,g)=>g!==u&&Ru(h.uri,f.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=ux(o,a,$O,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,i,r,n).then(void 0,h=>{this.n=void 0;const f={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(U2.Error,d(3054,null,u,h.toString()),f,[])})}return this.y(a),!0}getWorkspaceFolder(t,i){if(this.x)return this.x.getWorkspaceFolder(t,i)}async getWorkspaceFolder2(t,i){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,i)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,i){let r,s="";if(typeof t=="string"?(r=y.file(t),s=t):typeof t<"u"&&(r=t,s=t.fsPath),!r)return s;const n=this.getWorkspaceFolder(r,!0);if(!n)return s;typeof i>"u"&&this.x&&(i=this.x.folders.length>1);let o=x6(n.uri,r);return i&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=xw.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:i,added:r,removed:s}=xw.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=i||void 0,this.n=void 0,this.c.fire(Object.freeze({added:r,removed:s}))}findFiles(t,i,r,s,n=Be.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return i===null?a=!1:i!==void 0&&(typeof i=="string"?o=i:o=i.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:r,useExcludeSettings:a?Ts.FilesExclude:Ts.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,i={},r,s=Be.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${r.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},i,s)}async z(t,i,r){if(r.isCancellationRequested)return Promise.resolve([]);const s=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(s))throw console.error("Invalid file pattern provided",s),new Error(`Invalid file pattern provided ${JSON.stringify(s)}`);const n=s.map(o=>{const a=hx(i.exclude),c={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===Ts.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==Ts.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=Np(Pi.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,r)}async A(t,i){const s=(await Promise.all(t?.map(a=>this.o.$startFileSearch(a.folder??null,a.options,i).then(c=>Array.isArray(c)?c.map(l=>y.revive(l)):[]))??[])).flat(),n=new ua(a=>Lp(a,this.s)),o=new Map;for(const a of s){const c=n.getComparisonKey(a);o.has(c)||o.set(c,a)}return Array.from(o.values())}findTextInFiles2(t,i,r,s=Be.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${r.value}, entryPoint: findTextInFiles2`);const n=f=>{if(!i)return{folder:void 0,options:{}};const g=f?Np(Pi.from(f)):void 0,m=i.exclude?hx(i.exclude):void 0;return{options:{ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles?.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===Ts.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==Ts.SearchAndFilesExclude,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:i.previewOptions?{matchLines:i.previewOptions?.numMatchLines??100,charsPerLine:i.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:i.surroundingContext,includePattern:g?.pattern,excludePattern:m},folder:g?.folder}},a=(i?.include?.map(f=>n(f))??[n(void 0)]).filter(f=>!!f),c=new ae,l=c.add(new P),u=this.findTextInFilesBase(t,a,(f,g)=>l.fire({result:f,uri:g}),s);return{results:new L6(async f=>{c.add(l.event(g=>{const m=g.result,w=g.uri;V9(m)?f.emitOne(new kn(w,m.rangeLocations.map(S=>({previewRange:new Se(S.preview.startLineNumber,S.preview.startColumn,S.preview.endLineNumber,S.preview.endColumn),sourceRange:new Se(S.source.startLineNumber,S.source.startColumn,S.source.endLineNumber,S.source.endColumn)})),m.previewText)):f.emitOne(new mw(w,m.text,m.lineNumber))})),await u}),complete:u.then(f=>(c.dispose(),{limitHit:f?.limitHit??!1}))}}async findTextInFilesBase(t,i,r,s=Be.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=y.revive(a.resource);a.results.forEach(l=>{const u=Xt(l);r(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(i?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,i,r,s,n=Be.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof i.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:i.previewOptions,a=Np(Pi.from(i.include)),c=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof i.useSearchExclude=="boolean"?!i.useSearchExclude:!0,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:o,surroundingContext:i.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,f)=>{V9(h)?r({uri:f,preview:{text:h.previewText,matches:fm(h.rangeLocations,g=>new Se(g.preview.startLineNumber,g.preview.startColumn,g.preview.endLineNumber,g.preview.endColumn))},ranges:fm(h.rangeLocations,g=>new Se(g.source.startLineNumber,g.source.startColumn,g.source.endLineNumber,g.source.endColumn))}):r({uri:f,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,i){this.u[i]?.(t)}async save(t){const i=await this.o.$save(t,{saveAs:!1});return y.revive(i)}async saveAs(t){const i=await this.o.$save(t,{saveAs:!0});return y.revive(i)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,i){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,r),se(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,i){this.h.info("Getting edit session identifier for workspaceFolder",t);const r=await this.resolveWorkspaceFolder(y.revive(t));if(!r){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",r);const s=this.w.get(r.uri.scheme);if(this.h.info(`Provider for scheme ${r.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(r,i);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,i,r,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(y.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(i,r,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,i,r){const s=await this.resolveWorkspaceFolder(y.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},i,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>r&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),i.isCancellationRequested}registerCanonicalUriProvider(t,i){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,r),se(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,i,r){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(y.revive(t),i,r);if(n)return n}async $provideCanonicalUri(t,i,r){return this.provideCanonicalUri(y.revive(t),{targetScheme:i},r)}async decode(t,i){const[r,s]=this.F(i),n=await this.o.$resolveDecoding(r,s),o=(await fO(ZP(re.wrap(t)),{...n,acceptTextOnly:!0,overwriteEncoding:a=>a===null||a===n.preferredEncoding?Promise.resolve(n.preferredEncoding):this.o.$validateDetectedEncoding(r,a,s)})).stream;return l5(o,a=>a.join(""))}async encode(t,i){const[r,s]=this.F(i),{encoding:n,addBOM:o}=await this.o.$resolveEncoding(r,s);if(n===Pp&&!o)return re.fromString(t).buffer;const a=await pO(xO(t),n,{addBOM:o});return QP(a).buffer}F(t){const i=Fh(t?.uri)?t.uri:void 0,r=typeof t?.encoding=="string"?t.encoding:void 0;return[i,r?{encoding:r}:void 0]}};kw=__decorate([__param(0,Ne),__param(1,Mt),__param(2,ma),__param(3,De),__param(4,Jh)],kw);var os=U("IExtHostWorkspace");function Np(e){let t,i;if(e)return typeof e=="string"?t=e:(t=e.pattern,i=y.revive(e.baseUri)),{pattern:t,folder:i}}function hx(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const i=Np(t);return i?{pattern:i.pattern,uri:i.folder}:void 0}})??[]).filter(t=>!!t)}var dx;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(dx||(dx={}));var fx;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(fx||(fx={}));var px;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(px||(px={}));var $w;(function(e){e.DEFAULT={allowTrailingComma:!0}})($w||($w={}));function IO(e,t=!1){let i=0;const r=e.length;let s="",n=0,o=16,a=0;function c(w){let S=0,C=0;for(;S<w;){const k=e.charCodeAt(i);if(k>=48&&k<=57)C=C*16+k-48;else if(k>=65&&k<=70)C=C*16+k-65+10;else if(k>=97&&k<=102)C=C*16+k-97+10;else break;i++,S++}return S<w&&(C=-1),C}function l(w){i=w,s="",n=0,o=16,a=0}function u(){const w=i;if(e.charCodeAt(i)===48)i++;else for(i++;i<e.length&&wc(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===46)if(i++,i<e.length&&wc(e.charCodeAt(i)))for(i++;i<e.length&&wc(e.charCodeAt(i));)i++;else return a=3,e.substring(w,i);let S=i;if(i<e.length&&(e.charCodeAt(i)===69||e.charCodeAt(i)===101))if(i++,(i<e.length&&e.charCodeAt(i)===43||e.charCodeAt(i)===45)&&i++,i<e.length&&wc(e.charCodeAt(i))){for(i++;i<e.length&&wc(e.charCodeAt(i));)i++;S=i}else a=3;return e.substring(w,S)}function h(){let w="",S=i;for(;;){if(i>=r){w+=e.substring(S,i),a=2;break}const C=e.charCodeAt(i);if(C===34){w+=e.substring(S,i),i++;break}if(C===92){if(w+=e.substring(S,i),i++,i>=r){a=2;break}switch(e.charCodeAt(i++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:{const A=c(4);A>=0?w+=String.fromCharCode(A):a=4;break}default:a=5}S=i;continue}if(C>=0&&C<=31)if(Mp(C)){w+=e.substring(S,i),a=2;break}else a=6;i++}return w}function f(){if(s="",a=0,n=i,i>=r)return n=r,o=17;let w=e.charCodeAt(i);if(Iw(w)){do i++,s+=String.fromCharCode(w),w=e.charCodeAt(i);while(Iw(w));return o=15}if(Mp(w))return i++,s+=String.fromCharCode(w),w===13&&e.charCodeAt(i)===10&&(i++,s+=`
`),o=14;switch(w){case 123:return i++,o=1;case 125:return i++,o=2;case 91:return i++,o=3;case 93:return i++,o=4;case 58:return i++,o=6;case 44:return i++,o=5;case 34:return i++,s=h(),o=10;case 47:{const S=i-1;if(e.charCodeAt(i+1)===47){for(i+=2;i<r&&!Mp(e.charCodeAt(i));)i++;return s=e.substring(S,i),o=12}if(e.charCodeAt(i+1)===42){i+=2;const C=r-1;let k=!1;for(;i<C;){if(e.charCodeAt(i)===42&&e.charCodeAt(i+1)===47){i+=2,k=!0;break}i++}return k||(i++,a=1),s=e.substring(S,i),o=13}return s+=String.fromCharCode(w),i++,o=16}case 45:if(s+=String.fromCharCode(w),i++,i===r||!wc(e.charCodeAt(i)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;i<r&&g(w);)i++,w=e.charCodeAt(i);if(n!==i){switch(s=e.substring(n,i),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(w),i++,o=16}}function g(w){if(Iw(w)||Mp(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function m(){let w;do w=f();while(w>=12&&w<=15);return w}return{setPosition:l,getPosition:()=>i,scan:t?m:f,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>i-n,getTokenError:()=>a}}function Iw(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Mp(e){return e===10||e===13||e===8232||e===8233}function wc(e){return e>=48&&e<=57}var gx;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(gx||(gx={}));function DO(e,t,i=$w.DEFAULT){const r=IO(e,!1);function s(Z){return Z?()=>Z(r.getTokenOffset(),r.getTokenLength()):()=>!0}function n(Z){return Z?Le=>Z(Le,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),f=n(t.onSeparator),g=s(t.onComment),m=n(t.onError),w=i&&i.disallowComments,S=i&&i.allowTrailingComma;function C(){for(;;){const Z=r.scan();switch(r.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:w||k(11);break;case 2:k(12);break;case 6:k(16);break}switch(Z){case 12:case 13:w?k(10):g();break;case 16:k(1);break;case 15:case 14:break;default:return Z}}}function k(Z,Le=[],it=[]){if(m(Z),Le.length+it.length>0){let Pe=r.getToken();for(;Pe!==17;){if(Le.indexOf(Pe)!==-1){C();break}else if(it.indexOf(Pe)!==-1)break;Pe=C()}}}function A(Z){const Le=r.getTokenValue();return Z?h(Le):a(Le),C(),!0}function G(){switch(r.getToken()){case 11:{let Z=0;try{Z=JSON.parse(r.getTokenValue()),typeof Z!="number"&&(k(2),Z=0)}catch{k(2)}h(Z);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return C(),!0}function H(){return r.getToken()!==10?(k(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(f(":"),C(),z()||k(4,[],[2,5])):k(5,[],[2,5]),!0)}function K(){o(),C();let Z=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(Z||k(4,[],[]),f(","),C(),r.getToken()===2&&S)break}else Z&&k(6,[],[]);H()||k(4,[],[2,5]),Z=!0}return c(),r.getToken()!==2?k(7,[2],[]):C(),!0}function F(){l(),C();let Z=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(Z||k(4,[],[]),f(","),C(),r.getToken()===4&&S)break}else Z&&k(6,[],[]);z()||k(4,[],[4,5]),Z=!0}return u(),r.getToken()!==4?k(8,[4],[]):C(),!0}function z(){switch(r.getToken()){case 3:return F();case 1:return K();case 10:return A(!0);default:return G()}}return C(),r.getToken()===17?i.allowEmptyContent?!0:(k(4,[],[]),!1):z()?(r.getToken()!==17&&k(9,[],[]),!0):(k(4,[],[]),!1)}function Lu(e){return Object.isFrozen(e)?e:u1(e)}var bc=class On{static createEmptyModel(t){return new On({},[],[],void 0,t)}constructor(t,i,r,s,n){this.b=t,this.c=i,this.d=r,this.f=s,this.g=n,this.a=new Map}get rawConfiguration(){if(!this.h)if(this.f){const t=(Array.isArray(this.f)?this.f:[this.f]).map(i=>{if(i instanceof On)return i;const r=new PO("",this.g);return r.parseRaw(i),r.configurationModel});this.h=t.reduce((i,r)=>r===i?r:i.merge(r),t[0])}else this.h=this;return this.h}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}get raw(){if(this.f&&!(Array.isArray(this.f)&&this.f.every(t=>t instanceof On)))return this.f}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Rd(this.contents,t):this.contents}inspect(t,i){const r=this;return{get value(){return Lu(r.rawConfiguration.getValue(t))},get override(){return i?Lu(r.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return Lu(i?r.rawConfiguration.override(i).getValue(t):r.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of r.rawConfiguration.overrides){const c=new On(n,a,[],void 0,r.g).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?Lu(s):void 0}}}getOverrideValue(t,i){const r=this.k(i);return r?t?Rd(r,t):r:void 0}getKeysForOverrideIdentifier(t){const i=[];for(const r of this.overrides)r.identifiers.includes(t)&&i.push(...r.keys);return zs(i)}getAllOverrideIdentifiers(){const t=[];for(const i of this.overrides)t.push(...i.identifiers);return zs(t)}override(t){let i=this.a.get(t);return i||(i=this.i(t),this.a.set(t,i)),i}merge(...t){const i=ot(this.contents),r=ot(this.overrides),s=[...this.keys],n=this.f?Array.isArray(this.f)?[...this.f]:[this.f]:[this];for(const o of t)if(n.push(...o.f?Array.isArray(o.f)?o.f:[o.f]:[o]),!o.isEmpty()){this.j(i,o.contents);for(const a of o.overrides){const[c]=r.filter(l=>wi(l.identifiers,a.identifiers));c?(this.j(c.contents,a.contents),c.keys.push(...a.keys),c.keys=zs(c.keys)):r.push(ot(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new On(i,s,r,!n.length||n.every(o=>o instanceof On)?void 0:n,this.g)}i(t){const i=this.k(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const r={};for(const s of zs([...Object.keys(this.contents),...Object.keys(i)])){let n=this.contents[s];const o=i[s];o&&(typeof n=="object"&&typeof o=="object"?(n=ot(n),this.j(n,o)):n=o),r[s]=n}return new On(r,this.keys,this.overrides,void 0,this.g)}j(t,i){for(const r of Object.keys(i)){if(r in t&&bt(t[r])&&bt(i[r])){this.j(t[r],i[r]);continue}t[r]=ot(i[r])}}k(t){let i=null,r=null;const s=n=>{n&&(r?this.j(r,n):r=ot(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?i=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(i),r}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.l(t,i,!0)}setValue(t,i){this.l(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),_N(this.contents,t),Xr.test(t)&&this.overrides.splice(this.overrides.findIndex(r=>wi(r.identifiers,Ll(t))),1))}l(t,i,r){if(PC(this.contents,t,i,s=>this.g.error(s)),r=r||this.keys.indexOf(t)===-1,r&&this.keys.push(t),Xr.test(t)){const s=this.contents[t],n=Ll(t),o={identifiers:n,keys:Object.keys(s),contents:ov(s,c=>this.g.error(c))},a=this.overrides.findIndex(c=>wi(c.identifiers,n));a!==-1?this.overrides[a]=o:this.overrides.push(o)}}},PO=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||bc.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!Tt(e)){const i=this.h(e);this.parseRaw(i,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:i,keys:r,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new bc(i,r,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},i=null,r=[];const s=[],n=[];function o(c){Array.isArray(r)?r.push(c):i!==null&&(r[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(r),r=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{r=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(r),r=c,i=null},onArrayEnd:()=>{r=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{DO(e,a),t=r[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const i=Nt.as(hn.Configuration),r=i.getConfigurationProperties(),s=i.getExcludedConfigurationProperties(),n=this.j(e,r,s,!0,t);e=n.raw;const o=ov(e,l=>this.g.error(`Conflict in settings file ${this.f}: ${l}`)),a=Object.keys(e),c=this.m(e,l=>this.g.error(`Conflict in settings file ${this.f}: ${l}`));return{contents:o,keys:a,overrides:c,restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}j(e,t,i,r,s){let n=!1;if(!s?.scopes&&!s?.skipRestricted&&!s?.skipUnregistered&&!s?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:n};const o={},a=[];for(const c in e)if(Xr.test(c)&&r){const l=this.j(e[c],t,i,!1,s);o[c]=l.raw,n=n||l.hasExcludedProperties,a.push(...l.restricted)}else{const l=t[c];l?.restricted&&a.push(c),this.l(c,l,i,s)?o[c]=e[c]:n=!0}return{raw:o,restricted:a,hasExcludedProperties:n}}l(e,t,i,r){if(r.exclude?.includes(e))return!1;if(r.include?.includes(e))return!0;if(r.skipRestricted&&t?.restricted||r.skipUnregistered&&!t)return!1;const s=t??i[e],n=s?typeof s.scope<"u"?s.scope:4:void 0;return n===void 0||r.scopes===void 0?!0:r.scopes.includes(n)}m(e,t){const i=[];for(const r of Object.keys(e))if(Xr.test(r)){const s={},n=e[r];for(const o in n)s[o]=n[o];i.push({identifiers:Ll(r),keys:Object.keys(s),contents:ov(s,t)})}return i}},AO=class{constructor(e,t,i,r,s,n,o,a,c,l,u,h,f){this.a=e,this.b=t,this.c=i,this.overrideIdentifiers=r,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=f}get value(){return Lu(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},Dw=class u3{constructor(t,i,r,s,n,o,a,c,l,u){this.j=t,this.l=i,this.m=r,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new wt,this.v=null}getValue(t,i,r){return this.w(t,i,r).getValue(t)}updateValue(t,i,r={}){let s;r.resource?(s=this.t.get(r.resource),s||(s=bc.createEmptyModel(this.u),this.t.set(r.resource,s))):s=this.s,i===void 0?s.removeValue(t):s.setValue(t,i),r.resource||(this.h=null)}inspect(t,i,r){const s=this.w(t,i,r),n=this.A(i.resource,r),o=i.resource?this.t.get(i.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new AO(t,i,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,r?this.q:void 0,n||void 0,o)}keys(t){const i=this.A(void 0,t);return{default:this.j.keys.slice(0),policy:this.l.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:i?i.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,i){this.r.set(t,i),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,i){const r=[];if(!i){const{added:s,updated:n,removed:o}=$n(this.j,t);i=[...s,...n,...o]}for(const s of i)for(const n of Ll(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!Ci(this.j.override(n).getValue(l),t.override(n).getValue(l)))];r.push([n,c])}return this.updateDefaultConfiguration(t),{keys:i,overrides:r}}compareAndUpdatePolicyConfiguration(t){const{added:i,updated:r,removed:s}=$n(this.l,t),n=[...i,...r,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=$n(this.applicationConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=$n(this.localUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=$n(this.remoteUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=$n(this.workspaceConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,i){const r=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=$n(r,i),c=[...s,...n,...o];return(c.length||!r)&&this.updateFolderConfiguration(t,i),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const i=this.folderConfigurations.get(t);if(!i)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:r,updated:s,removed:n,overrides:o}=$n(i,void 0);return{keys:[...r,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){if(!this.v)if(this.p.isEmpty())this.v=this.n;else{const t=this.n.merge(this.p);this.v=new bc(t.contents,t.keys,t.overrides,void 0,this.u)}return this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,i,r){let s=this.x(i,r);if(i.overrideIdentifier&&(s=s.override(i.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0){s=s.merge();for(const n of this.l.keys)s.setValue(n,this.l.getValue(n))}return s}x({resource:t},i){let r=this.y();if(i&&t){const s=i.getFolder(t);s&&(r=this.z(s.uri)||r);const n=this.t.get(t);n&&(r=r.merge(n))}return r}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let i=this.i.get(t);if(!i){const r=this.y(),s=this.r.get(t);s?(i=r.merge(s),this.i.set(t,i)):i=r}return i}A(t,i){if(i&&t){const r=i.getFolder(t);if(r)return this.r.get(r.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,i)=>{const{contents:r,overrides:s,keys:n}=this.r.get(i);return t.push([i,{contents:r,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(i=>t.add(i)),this.userConfiguration.keys.forEach(i=>t.add(i)),this.q.keys.forEach(i=>t.add(i)),this.r.forEach(i=>i.keys.forEach(r=>t.add(r))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.userConfiguration.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.q.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.r.forEach(i=>i.getAllOverrideIdentifiers().forEach(r=>t.add(r))),[...t.values()]}D(t){const i=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.q.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.r.forEach(r=>r.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s))),[...i.values()]}static parse(t,i){const r=this.E(t.defaults,i),s=this.E(t.policy,i),n=this.E(t.application,i),o=this.E(t.userLocal,i),a=this.E(t.userRemote,i),c=this.E(t.workspace,i),l=t.folders.reduce((u,h)=>(u.set(y.revive(h[0]),this.E(h[1],i)),u),new wt);return new u3(r,s,n,o,a,c,l,bc.createEmptyModel(i),new wt,i)}static E(t,i){return new bc(t.contents,t.keys,t.overrides,t.raw,i)}},TO=class{constructor(e,t,i,r,s){this.change=e,this.f=t,this.g=i,this.h=r,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=Dw.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const i=this.a+e,r=this.d.indexOf(i);if(r<0)return!1;const s=r+i.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!Ci(o,a)}return!0}};function $n(e,t){const{added:i,removed:r,updated:s}=mx(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=mx({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:i,removed:r,updated:s,overrides:n}}function mx(e,t){const i=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],r=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Rd(t.contents,n),a=Rd(e.contents,n);Ci(o,a)||s.push(n)}}return{added:i,removed:r,updated:s}}function Op(e,t){if(t){const i=t.split(".");let r=e;for(let s=0;r&&s<i.length;s++)r=r[i[s]];return r}}function RO(e){return e instanceof y}function LO(e){return bt(e)&&e.uri instanceof y&&!!e.languageId&&typeof e.languageId=="string"}function NO(e){return bt(e)&&!e.uri&&!!e.languageId&&typeof e.languageId=="string"}function MO(e){return bt(e)&&e.uri instanceof y&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function vx(e){if(RO(e))return{resource:e};if(LO(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(NO(e))return{overrideIdentifier:e.languageId};if(MO(e))return{resource:e.uri};if(e===null)return{resource:null}}var Pw=class{constructor(t,i,r){this.a=t.getProxy(V.MainThreadConfiguration),this.c=i,this.b=r,this.d=new Cr,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new OO(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,i){this.getConfigProvider().then(r=>r.$acceptConfigurationChanged(t,i))}};Pw=__decorate([__param(0,Ne),__param(1,os),__param(2,De)],Pw);var OO=class{constructor(e,t,i,r){this.a=new P,this.b=e,this.f=r,this.c=t,this.e=Dw.parse(i,r),this.d=this.k(i.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const i={data:this.e.toData(),workspace:this.c.workspace};this.e=Dw.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,i))}getConfiguration(e,t,i){const r=vx(t)||{},s=this.g(this.e.getValue(e,r,this.c.workspace));e&&this.h(e,r,i?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case za.Global:return 2;case za.Workspace:return 5;case za.WorkspaceFolder:return 6}}const o={has(a){return typeof Op(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,r,i?.identifier);let l=Op(s,a);if(typeof l>"u")l=c;else{let u;const h=(f,g)=>{if(bt(f)){let m;const w=()=>{u=u||ot(s),m=m||Op(u,g)};return new Proxy(f,{get:(S,C)=>{if(typeof C=="string"&&C.toLowerCase()==="tojson")return w(),()=>m;if(u)return m=m||Op(u,g),m[C];const k=S[C];return typeof C=="string"?h(k,`${g}.${C}`):k},set:(S,C,k)=>(w(),m&&(m[C]=k),!0),deleteProperty:(S,C)=>(w(),m&&delete m[C],!0),defineProperty:(S,C,k)=>(w(),m&&Object.defineProperty(m,C,k),!0)})}return Array.isArray(f)?ot(f):f};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,r,u):this.b.$removeConfigurationOption(h,a,r,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,r,this.c.workspace);if(c)return{key:a,defaultValue:ot(c.policy?.value??c.default?.value),globalLocalValue:ot(c.userLocal?.value),globalRemoteValue:ot(c.userRemote?.value),globalValue:ot(c.user?.value??c.application?.value),workspaceValue:ot(c.workspace?.value),workspaceFolderValue:ot(c.workspaceFolder?.value),defaultLanguageValue:ot(c.default?.override),globalLocalLanguageValue:ot(c.userLocal?.override),globalRemoteLanguageValue:ot(c.userRemote?.override),globalLanguageValue:ot(c.user?.override??c.application?.override),workspaceLanguageValue:ot(c.workspace?.override),workspaceFolderLanguageValue:ot(c.workspaceFolder?.override),languageIds:ot(c.overrideIdentifiers)}}};return typeof s=="object"&&no(o,s,!1),Object.freeze(o)}g(e){const t=i=>bt(i)?new Proxy(i,{get:(r,s)=>t(r[s]),set:(r,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(r,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(r,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:r=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}h(e,t,i){const r=Xr.test(e)?5:this.d.get(e),s=i?`[${i.value}] `:"";if(r===5){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(r===4){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const i=new TO(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(r,s)=>i.affectsConfiguration(r,vx(s))})}k(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}},Rs=U("IExtHostConfiguration"),FO=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},Nu=class h3 extends Y{static isHostExtension(t,i,r){if(i.getExtensionDescription(t))return!1;const s=r.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,i){super(),this.n=t,this.c=this.D(new P),this.onDidChange=this.c.event,this.f=0,this.g=i,this.q()}q(){this.g.sort(jO),this.h=new Ks,this.j=[],this.m=new Map;for(const t of this.g){if(this.h.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.h.set(t.identifier,t),this.j.push(t);const i=this.n.readActivationEvents(t);for(const r of i)this.m.has(r)||this.m.set(r,[]),this.m.get(r).push(t)}}set(t){return this.g=t,this.q(),this.f++,this.c.fire(void 0),{versionId:this.f}}deltaExtensions(t,i){this.g=bx(this.g,i),this.g=this.g.concat(t);const r=h3.r(this.g);return this.g=bx(this.g,r.map(s=>s.identifier)),this.q(),this.f++,this.c.fire(void 0),new FO(this.f,r)}static r(t){const i=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=i.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},r=new Ks;for(const a of t)if(r.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)i.addArc(qe.toKey(a.identifier),qe.toKey(c));const s=new Set;i.getNodes().filter(a=>i.getArcs(a).length===0).forEach(a=>s.add(a));const n=i.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];i.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>r.get(a))}containsActivationEvent(t){return this.m.has(t)}containsExtension(t){return this.h.has(t)}getExtensionDescriptionsForActivationEvent(t){const i=this.m.get(t);return i?i.slice(0):[]}getAllExtensionDescriptions(){return this.j.slice(0)}getSnapshot(){return new UO(this.f,this.getAllExtensionDescriptions())}getExtensionDescription(t){const i=this.h.get(t);return i||void 0}getExtensionDescriptionByUUID(t){for(const i of this.j)if(i.uuid===t)return i}getExtensionDescriptionByIdOrUUID(t,i){return this.getExtensionDescription(t)??(i?this.getExtensionDescriptionByUUID(i):void 0)}},UO=class{constructor(e,t){this.versionId=e,this.extensions=t}},wx;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(wx||(wx={}));function jO(e,t){const i=e.isBuiltin?0:e.isUnderDevelopment?2:1,r=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(i!==r)return i-r;const s=We.basename(e.extensionLocation.path),n=We.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function bx(e,t){const i=new eo(t);return e.filter(r=>!i.has(r.identifier))}var Fp=class d3{static{this.NONE=new d3(!1,-1,-1,-1)}constructor(t,i,r,s){this.startup=t,this.codeLoadingTime=i,this.activateCallTime=r,this.activateResolvedTime=s}},Aw=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Fp(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},Up=class{constructor(e,t,i,r,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=r,this.exports=s,this.disposable=n}},HO=class extends Up{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,Y.None)}},WO=class extends Up{constructor(){super(!1,null,Fp.NONE,{activate:void 0,deactivate:void 0},void 0,Y.None)}},jp=class extends Up{constructor(e){super(!0,e,Fp.NONE,{activate:void 0,deactivate:void 0},void 0,Y.None)}},Tw=class{constructor(t,i,r,s){this.g=s,this.a=t,this.b=i,this.c=r,this.d=new Ks,this.f=Object.create(null)}dispose(){for(const[t,i]of this.d)i.dispose()}async waitForActivatingExtensions(){const t=[];for(const[i,r]of this.d)t.push(r.wait());await Promise.all(t)}isActivated(t){const i=this.d.get(t);return!!(i&&i.value)}getActivatedExtension(t){const i=this.d.get(t);if(!i||!i.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return i.value}async activateByEvent(t,i){if(this.f[t])return;const r=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(r.map(s=>({id:s.identifier,reason:{startup:i,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,i){const r=this.a.getExtensionDescription(t);if(!r)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:r.identifier,reason:i}])}async h(t){const i=t.filter(r=>!this.isActivated(r.id)).map(r=>this.j(r));await Promise.all(i.map(r=>r.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const i=this.a.getExtensionDescription(t.id);if(!i){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new jp(n));return this.c.onExtensionActivationError(t.id,n,new JC(t.id.value)),o}const r=[],s=typeof i.extensionDependencies>"u"?[]:i.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){r.push(o);continue}if(this.l(n)){r.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;r.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=i.displayName||i.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,i.displayName,[],new jp(l));return this.c.onExtensionActivationError(i.identifier,l,new JC(n)),u}return this.k(t,i.displayName,r,null)}k(t,i,r,s){const n=new Rw(t.id,i,t.reason,r,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return Nu.isHostExtension(t,this.a,this.b)}m(t){const i=this.b.getExtensionDescription(t);return i?!i.main&&!i.browser:!1}};Tw=__decorate([__param(3,De)],Tw);var Rw=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new Cr,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const i=this.g[t];if(i.value&&!i.value.activationFailed){this.g.splice(t,1),t--;continue}if(i.value&&i.value.activationFailed){const r=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${i.friendlyName}' failed to activate`);r.detail=i.value.activationFailedError,this.h=new jp(r),this.j.onExtensionActivationError(this.c,r,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const i=new Error;if(t&&t.name&&(i.name=t.name),t&&t.message?i.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:i.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(i.stack=t.stack),this.h=new jp(i),this.b&&qr(t))return;this.j.onExtensionActivationError(this.c,i,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};Rw=__decorate([__param(6,De)],Rw);var yx=class{constructor(e,t){this.c=t,this.b=new P,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(V.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const r=await this.a.$initializeExtensionStorage(e,t);let s;return r&&(s=this.d(e,t,r)),s||i}setValue(e,t,i){return this.a.$setValue(e,t,i)}$acceptValue(e,t,i){const r=this.d(e,t,i);r&&this.b.fire({shared:e,key:t,value:r})}d(e,t,i){try{return JSON.parse(i)}catch(r){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${r}`)}}},Lw=U("IExtHostStorage"),Sx=class{constructor(e,t,i){this.h=new Map,this.a=e,this.b=t,this.c=i,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(r=>(this.f=r,this)),this.g=this.c.onDidChangeStorage(r=>{r.shared===this.b&&r.key===this.a&&(this.f=r.value)}),this.i=new Yn(()=>{const r=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of r.values())s.complete()}catch(s){for(const n of r.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let i=this.f[e];return typeof i>"u"&&(i=t),i}update(e,t){t!==null&&typeof t=="object"?this.f[e]=JSON.parse(JSON.stringify(t)):this.f[e]=t;const i=this.h.get(e);if(i!==void 0)return i.p;const r=new Vr;return this.h.set(e,r),this.i.isScheduled()||this.i.schedule(),r.p}dispose(){this.g.dispose()}},_O=class extends Sx{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},as,Nw=as=class{constructor(t,i){this.b=new Map,this.c=new VT,this.a=t.getProxy(V.MainThreadFileSystem);const r=this;this.value=Object.freeze({async stat(s){try{let n;const o=r.b.get(s.scheme);return o?(await r.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await r.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===Sa.Readonly?1:void 0}}catch(n){as.e(n)}},async readDirectory(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await r.a.$readdir(s)}catch(n){return as.e(n)}},async createDirectory(s){try{const n=r.b.get(s.scheme);return n&&!n.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(n.impl,n.extUri,s)):await r.a.$mkdir(s)}catch(n){return as.e(n)}},async readFile(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await r.a.$readFile(s)).buffer}catch(n){return as.e(n)}},async writeFile(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(o.impl,o.extUri,o.extUri.dirname(s)),await r.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await r.a.$writeFile(s,re.wrap(n))}catch(o){return as.e(o)}},async delete(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await r.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await r.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return as.e(o)}},async rename(s,n,o){try{return await r.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return as.e(a)}},async copy(s,n,o){try{return await r.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return as.e(a)}},isWritableFileSystem(s){const n=i.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,i,r){const s=[];for(;!i.isEqual(r,i.dirname(r));)try{if(((await t.stat(r)).type&uo.Directory)===0)throw Ft.FileExists(`Unable to create folder '${r.scheme===B.file?r.fsPath:r.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(cd(n)!==ye.FileNotFound)throw n;s.push(i.basename(r)),r=i.dirname(r)}for(let n=s.length-1;n>=0;n--){r=i.joinPath(r,s[n]);try{await t.createDirectory(r)}catch(o){if(cd(o)!==ye.FileExists)throw o}}}static e(t){if(t instanceof Ft)throw t;if(t instanceof D7)switch(t.code){case ye.FileExists:throw Ft.FileExists(t.message);case ye.FileNotFound:throw Ft.FileNotFound(t.message);case ye.FileNotADirectory:throw Ft.FileNotADirectory(t.message);case ye.FileIsADirectory:throw Ft.FileIsADirectory(t.message);case ye.NoPermissions:throw Ft.NoPermissions(t.message);case ye.Unavailable:throw Ft.Unavailable(t.message);default:throw new Ft(t.message,t.name)}if(!(t instanceof Error))throw new Ft(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Ft.Unavailable(t.message);switch(t.name){case ye.FileExists:throw Ft.FileExists(t.message);case ye.FileNotFound:throw Ft.FileNotFound(t.message);case ye.FileNotADirectory:throw Ft.FileNotADirectory(t.message);case ye.FileIsADirectory:throw Ft.FileIsADirectory(t.message);case ye.NoPermissions:throw Ft.NoPermissions(t.message);case ye.Unavailable:throw Ft.Unavailable(t.message);default:throw new Ft(t.message,t.name)}}addFileSystemProvider(t,i,r){return this.b.set(t,{impl:i,extUri:r?.isCaseSensitive?Ve:TT,isReadonly:!!r?.isReadonly}),se(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??Ve}};Nw=as=__decorate([__param(0,Ne),__param(1,ma)],Nw);var Hp=U("IExtHostConsumerFileSystem"),Mw=U("IExtensionStoragePaths"),Ow=class{constructor(t,i,r){this.d=i,this.f=r,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return y.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,i=await this.g(t);try{return await this.f.value.stat(i),this.d.trace("[ExtHostStorage] storage dir already exists",i),i}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",i),await this.f.value.createDirectory(i),await this.f.value.writeFile(y.joinPath(i,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:y.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),i}catch(r){this.d.error("[ExtHostStorage]",r);return}}workspaceValue(t){if(this.c)return y.joinPath(this.c,t.identifier.value)}globalValue(t){return y.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};Ow=__decorate([__param(0,Mt),__param(1,De),__param(2,Hp)],Ow);var qG=U("tunnelService"),zG=U("sharedTunnelsService"),Ex;(function(e){e.Http="http",e.Https="https"})(Ex||(Ex={}));var Bo;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(Bo||(Bo={}));var Cx;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Cx||(Cx={}));function BO(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var Fw=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function xx(e){return Fw.indexOf(e)>=0}var Uw=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function kx(e){return Uw.indexOf(e)>=0}var qO=class{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this.b=i,this.a=new P,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},$x=class extends Y{constructor(t,i){super(),this.q=t,this.r=i,this.a=new P,this.onTunnelOpened=this.a.event,this.b=new P,this.onTunnelClosed=this.b.event,this.c=new P,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get s(){const t=this.r.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.t()}async t(){const t=[],i=Array.from(this.f.values());for(const r of i){const s=Array.from(r.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:i}of t.values())await i.then(r=>typeof r!="string"?r?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,i,r,s,n){this.y(t,i,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:i,localAddress:r,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,i){(kx(t)||xx(t))&&(t=Fw[0]);const r=this.C(t,i);if(r)return++r.refcount,r.value}openTunnel(t,i,r,s,n,o=!1,a,c){this.q.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${i}:${r} on local port ${n}.`);const l=this.g??t;if(!l)return;if(i||(i="localhost"),s||(s=this.s),this.g&&this.n.has(r)){this.q.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,i,r,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.q.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.z(i,r),h}else{this.q.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.z(i,r);return}this.q.trace("ForwardedPorts: (TunnelService) New tunnel established.");const f=this.u(h);return(h.tunnelRemoteHost!==i||h.tunnelRemotePort!==r)&&this.q.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.q.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(f),f}):(this.q.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}u(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.q.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const i=this.f.get(t.tunnelRemoteHost);if(i){const r=i.get(t.tunnelRemotePort);r&&(r.refcount--,await this.w(t.tunnelRemoteHost,t.tunnelRemotePort,r))}}}}async w(t,i,r){if(r.refcount<=0){this.q.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${i}.`);const s=r.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(i),s}}async closeTunnel(t,i){this.q.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${i} `);const r=this.f.get(t);if(r&&r.has(i)){const s=r.get(i);s.refcount=0,await this.w(t,i,s)}}y(t,i,r){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(i,{refcount:1,value:r})}async z(t,i){const r=this.f.get(t);if(r){const s=r.get(i),n=s?await s.value:void 0;(!n||typeof n=="string")&&r.delete(i),r.size===0&&this.f.delete(t)}}C(t,i){const r=[t];xx(t)?(r.push(...Fw),r.push(...Uw)):kx(t)&&r.push(...Uw);const s=r.map(n=>this.f.get(n));for(const n of s){const o=n?.get(i);if(o)return o}}canTunnel(t){return!!BO(t)}G(t,i,r,s,n,o,a){this.q.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${i}:${r} on local port ${s}.`);const c=r;this.n.add(c);const l=s===void 0?r:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:i,port:r},localAddressPort:s,privacy:o,public:o?o!==Bo.Private:void 0,protocol:a},f=t.forwardPort(h,u);return f?(this.y(i,r,f),f.finally(()=>{this.q.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),f}};$x=__decorate([__param(0,De),__param(1,Ki)],$x);var zO=class extends qO{},jw;(function(e){function t(r){return{remoteAddress:r.remoteAddress,localAddress:r.localAddress,public:!!r.public,privacy:r.privacy??(r.public?Bo.Public:Bo.Private),protocol:r.protocol}}e.fromApiTunnel=t;function i(r){return{remoteAddress:{host:r.tunnelRemoteHost,port:r.tunnelRemotePort},localAddress:r.localAddress,public:r.privacy!==Bo.ConstantPrivate&&r.privacy!==Bo.ConstantPrivate,privacy:r.privacy,protocol:r.protocol}}e.fromServiceTunnel=i})(jw||(jw={}));var Hw=U("IExtHostTunnelService"),Ww=class extends Y{constructor(t,i,r){super(),this.r=r,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new P,this.onDidChangeTunnels=this.h.event,this.n=0,this.q=new Map,this.a=t.getProxy(V.MainThreadTunnelService)}async openTunnel(t,i){this.r.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${i.remoteAddress.host}:${i.remoteAddress.port}.`);const r=await this.a.$openTunnel(i,t.displayName);if(r){const s=new zO(r.remoteAddress,r.localAddress,()=>this.a.$closeTunnel(r.remoteAddress));return this.D(s),s}}async getTunnels(){return this.a.$getTunnels()}s(){return this.n++}registerPortsAttributesProvider(t,i){t.portRange===void 0&&t.commandPattern===void 0&&this.r.error("PortAttributesProvider must specify either a portRange or a commandPattern");const r=this.s();return this.q.set(r,{selector:t,provider:i}),this.a.$registerPortsAttributesProvider(t,r),new Ee(()=>{this.q.delete(r),this.a.$unregisterPortsAttributesProvider(r)})}async $providePortAttributes(t,i,r,s,n){const o=[];for(const c of t){const l=this.q.get(c);if(!l)return[];o.push(...await Promise.all(i.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:r,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,r,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,i){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,Be.None)??void 0;const r=i.tunnelFeatures?{elevation:!!i.tunnelFeatures?.elevation,privacyOptions:i.tunnelFeatures?.privacyOptions,protocol:i.tunnelFeatures.protocol===void 0?!0:i.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(r,!0),Promise.resolve(se(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}hasTunnelProvider(){return this.a.$hasTunnelProvider()}async setTunnelFactory(t,i){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const r=t.tunnelFactory??(i?this.u(i):void 0);if(r){this.b=r;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:d(3052,null),themeIcon:"lock"},{id:"public",label:d(3053,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return se(()=>{this.b=void 0})}u(t){}async $closeTunnel(t,i){if(this.g.has(t.host)){const r=this.g.get(t.host);r.has(t.port)&&(i&&r.get(t.port).disposeListener.dispose(),await r.get(t.port).tunnel.dispose(),r.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,i){if(this.b)try{this.r.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const r=this.b(t,i);if(this.r.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),r!==void 0){const s=await r;if(this.r.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.r.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.D(s.onDidDispose(()=>(this.r.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),jw.fromApiTunnel(s)}else this.r.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(r){if(this.r.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),r instanceof Error)return r.message}}async $applyCandidateFilter(t){const i=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),r=t.filter((s,n)=>i[n]);return this.r.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${r.map(s=>s.port).join(", ")}`),r}};Ww=__decorate([__param(0,Ne),__param(1,Mt),__param(2,De)],Ww);function VO(e){return[...e.entries()]}function GO(e){return e?[...e.entries()]:[]}var JO=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,i=5){const r=t(s=>{const n=Oe(s)?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),i);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),r.dispose()}},this.a.set(e,o)});return r}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},qo=(e,t,i,r)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!i(s,n)){const o=s;s=n,e.listener?.(r(n,o))}}}},yc=(e,t)=>e===t,In={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:yc,description:yc,sortText:yc,busy:yc,error:yc,canResolveChildren:yc,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.find(r=>i.id===r.id)))},Sc=e=>t=>({op:4,update:e(t)}),QO=(e,t)=>({range:(()=>{let i;const r=Sc(s=>({range:Xe.lift(O.from(s))}));return{enumerable:!0,configurable:!1,get(){return i},set(s){e.listener?.({op:6}),In.range(i,s)||(i=s,e.listener?.(r(s)))}}})(),label:qo(e,t,In.label,Sc(i=>({label:i}))),description:qo(e,void 0,In.description,Sc(i=>({description:i}))),sortText:qo(e,void 0,In.sortText,Sc(i=>({sortText:i}))),canResolveChildren:qo(e,!1,In.canResolveChildren,i=>({op:2,state:i})),busy:qo(e,!1,In.busy,Sc(i=>({busy:i}))),error:qo(e,void 0,In.error,Sc(i=>({error:ue.fromStrict(i)||null}))),tags:qo(e,[],In.tags,(i,r)=>({op:1,new:i.map(Mr.from),old:r.map(Mr.from)}))}),ZO=e=>{const t=Fe.fromString(e.extId),i=new Mu(t.controllerId,t.localId,e.label,y.revive(e.uri)||void 0);return i.range=O.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map(r=>Mr.to({id:fC(r).tagId})),i},Ix=e=>{let t;for(const i of e.tests){const r=ZO(i.item);Bd(r).parent=t,t=r}return t},Mu=class f3{constructor(t,i,r,s){if(i.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(i)} symbol`);const n=wM(this,t);Object.defineProperties(this,{id:{value:i,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof _w?void 0:n.parent}},children:{value:vM(n,Bd,f3),enumerable:!0,writable:!1},...QO(n,r)})}},_w=class extends Mu{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},XO=class extends pM{constructor(e,t,i){super({controllerId:e,getDocumentVersion:r=>r&&i.getDocument(r)?.version,getApiFor:Bd,getChildren:r=>r.children,root:new _w(e,t),toITestItem:Cn.from})}},Bw=class extends Y{constructor(t,i,r){super(),this.n=i,this.a=this.D(new P),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.D(new P),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.h=!1,this.m=new Map,this.h=this.n.environment.isExtensionTelemetryLoggingOnly;const s=i.remote.isRemote?"remoteExtHostTelemetry":t?"workerExtHostTelemetry":"extHostTelemetry";this.j=this.D(r.createLogger(s,{name:d(3049,null,this.h?" (Not Sent)":""),hidden:!0,group:tM}))}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,i,r){const s=this.getTelemetryDetails(),n=new Dx(i,r,t,this.j,this.h,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.m.get(t.identifier.value)??[];return this.m.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,i,r){this.f=t,this.c=r??{usage:!0,error:!0}}getBuiltInCommonProperties(t){const i=Object.create(null);switch(i["common.extname"]=`${t.publisher}.${t.name}`,i["common.extversion"]=t.version,i["common.vscodemachineid"]=this.n.telemetryInfo.machineId,i["common.vscodesessionid"]=this.n.telemetryInfo.sessionId,i["common.vscodecommithash"]=this.n.commit,i["common.sqmid"]=this.n.telemetryInfo.sqmId,i["common.devDeviceId"]=this.n.telemetryInfo.devDeviceId??this.n.telemetryInfo.machineId,i["common.vscodeversion"]=this.n.version,i["common.vscodereleasedate"]=this.n.date,i["common.isnewappinstall"]=Px(this.n.telemetryInfo.firstSessionDate),i["common.product"]=this.n.environment.appHost,this.n.uiKind){case tl.Web:i["common.uikind"]="web";break;case tl.Desktop:i["common.uikind"]="desktop";break;default:i["common.uikind"]="unknown"}return i["common.remotename"]=Jm(rM(this.n.remote.authority)),i}$onDidChangeTelemetryLevel(t){this.g=this.getTelemetryConfiguration(),this.f=t;const i=this.getTelemetryDetails();this.m.forEach((r,s)=>{const n=r.filter(o=>!o.isDisposed);n.length===0?this.m.delete(s):this.m.set(s,n)}),this.m.forEach(r=>{for(const s of r)s.updateTelemetryEnablements(i.isUsageEnabled,i.isErrorsEnabled)}),this.g!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails())}onExtensionError(t,i){const s=this.m.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.m.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(i),n=!0);return n}};Bw=__decorate([__param(1,Mt),__param(2,ro)],Bw);var Dx=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,r,s,n,o){this.g=i,this.h=r,this.i=s,this.j=n,this.a=new P,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t=e.properties?e.properties??{}:e;return t=GC(t,[]),this.c&&(t=no(t,this.c)),this.b||(t=no(t,this.j)),e.properties?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},r=GC(i,[]),s=new Error(typeof r.message=="string"?r.message:void 0,{cause:r.cause});s.stack=typeof r.stack=="string"?r.stack:void 0,s.name=typeof r.name=="string"?r.name:"unknown",t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function Px(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var Wp=U("IExtHostTelemetry"),qw=class{#e;#t;#i;constructor(t,i,r){this.b=new Map,this.c=new Map,this.#e=t.getProxy(V.MainThreadCommands),this.d=i,this.#i=r,this.#t=t.getProxy(V.MainThreadTelemetry),this.converter=new YO(this,s=>{const n=this.c.get(s);return n?.result===me.Void?n:void 0},i),this.f=[{processArgument(s){return Xt(s)}},{processArgument(s){return ga(s,function(n){if(Xe.isIRange(n))return O.to(n);if(Xi.isIPosition(n))return ze.to(n);if(Xe.isIRange(n.range)&&y.isUri(n.uri))return Di.to(n);if(n instanceof re)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const i=this.registerCommand(!1,t.id,async(...r)=>{const s=t.args.map((o,a)=>{if(!o.validate(r[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof r[a]=="object"?JSON.stringify(r[a],null,"	"):r[a]} `);return o.convert(r[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,r,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Ee(()=>{i.dispose(),this.c.delete(t.id)})}registerCommand(t,i,r,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",i),!i.trim().length)throw new Error("invalid id");if(this.b.has(i))throw new Error(`command '${i}' already exists`);return this.b.set(i,{callback:r,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(i),new Ee(()=>{this.b.delete(i)&&t&&this.#e.$unregisterCommand(i)})}executeCommand(t,...i){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,i,!0)}async g(t,i,r){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,i,!1);{let s=!1;const n=ga(i,function(o){if(o instanceof xe)return ze.from(o);if(o instanceof Se)return O.from(o);if(o instanceof ji)return Di.from(o);if(Yr.isNotebookRange(o))return ns.from(o);if(o instanceof ArrayBuffer)return s=!0,re.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,re.wrap(o);if(o instanceof re)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new ei(n):n,r);return Xt(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,i,!1);throw o}}}async h(t,i,r){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{o5(i[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=qn.create();try{return await n.apply(o,i)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...i);u&&(t=u.command)}if(qr(l)||this.d.error(l,t,s.extension?.identifier),!r)throw l;if(s.extension?.identifier){const u=this.#i.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(fa(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,i,r){t.extension&&(i.startsWith("code.copilot.logStructured")||this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new lv(i),duration:r}))}$executeContributedCommand(t,...i){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const r=this.b.get(t);return r?(i=i.map(s=>this.f.reduce((n,o)=>o.processArgument(n,r.extension),s)),this.h(t,i,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(i=>(t&&(i=i.filter(r=>r[0]!=="_")),i))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[i,r]of this.b){const{metadata:s}=r;s&&(t[i]=s)}return Promise.resolve(t)}};qw=__decorate([__param(0,Ne),__param(1,De),__param(2,Wp)],qw);var zo=U("IExtHostCommands"),YO=class{constructor(e,t,i){this.d=e,this.f=t,this.g=i,this.delegatingCommandId=`__vsc${ci()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const r=this.f(e.command);if(r)i.id=r.internalId,i.arguments=r.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(Jc(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(se(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),i.$ident=s,i.id=this.delegatingCommandId,i.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return i}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},j=class Bi{static{this.Uri=new Bi("uri","Uri of a text document",t=>y.isUri(t),t=>t)}static{this.Position=new Bi("position","A position in a text document",t=>xe.isPosition(t),ze.from)}static{this.Range=new Bi("range","A range in a text document",t=>Se.isRange(t),O.from)}static{this.Selection=new Bi("selection","A selection in a text document",t=>Kr.isSelection(t),Nr.from)}static{this.Number=new Bi("number","",t=>typeof t=="number",t=>t)}static{this.String=new Bi("string","",t=>typeof t=="string",t=>t)}static Arr(t){return new Bi(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,i=>Array.isArray(i)&&i.every(r=>t.validate(r)),i=>i.map(r=>t.convert(r)))}static{this.CallHierarchyItem=new Bi("item","A call hierarchy item",t=>t instanceof yv,Oo.from)}static{this.TypeHierarchyItem=new Bi("item","A type hierarchy item",t=>t instanceof t0,Uo.from)}static{this.TestItem=new Bi("testItem","A VS Code TestItem",t=>t instanceof Mu,Cn.from)}static{this.TestProfile=new Bi("testProfile","A VS Code test profile",t=>t instanceof m9,G0.from)}constructor(t,i,r,s){this.name=t,this.description=i,this.validate=r,this.convert=s}optional(){return new Bi(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,i){return new Bi(t??this.name,i??this.description,this.validate,this.convert)}},me=class p3{static{this.Void=new p3("no result",t=>t)}constructor(t,i){this.description=t,this.convert=i}},we=class{constructor(e,t,i,r,s){this.id=e,this.internalId=t,this.description=i,this.args=r,this.result=s}},Ec=U("IExtHostTerminalService"),Ax=class extends Y{constructor(e,t,i,r){super(),this.s=e,this._id=t,this.u=i,this.w=r,this.a=!1,this.m={isInteractedWith:!1,shell:void 0},this.isOpen=!1,this.q=this.D(new P),this.onWillDispose=this.q.event,this.u=Object.freeze(this.u),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.w||""},get processId(){return s.b},get creationOptions(){return s.u},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.z(),s.s.$sendText(s._id,n,o)},show(n){s.z(),s.s.$show(s._id,n)},hide(){s.z(),s.s.$hide(s._id)},dispose(){s.a||(s.a=!0,s.s.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.q.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.s.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:Rx(e.iconPath)??void 0,color:va.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.y(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0,shellIntegrationNonce:e.shellIntegrationNonce??void 0})}async createExtensionTerminal(e,t,i,r,s,n){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.s.$createTerminal(this._id,{name:this.w,isExtensionCustomPtyTerminal:!0,icon:r,color:va.isThemeColor(s)?s.id:void 0,location:t?.location||this.y(e,i),isTransient:!0,shellIntegrationNonce:n??void 0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}y(e,t){return typeof e=="object"?Vs(e,{parentTerminal:!0})&&e.parentTerminal&&t?{parentTerminal:t}:Vs(e,{viewColumn:!0})?{viewColumn:Ut.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}z(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.w=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={...this.m,isInteractedWith:!0},!0)}setShellType(e){return this.m.shell!==e?(this.m={...this.m,shell:e},!0):!1}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},zw=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new P,this.onProcessData=this.a.event,this.b=new P,this.d=new P,this.onDidChangeProperty=this.d.event,this.f=new P,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}sendSignal(e){}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},KO=1,Vw=class extends Y{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,i,r){super(),this.R=i,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.u=this.D(new ms),this.y=new Set,this.z=new Map,this.C=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new P,this.onDidCloseTerminal=this.I.event,this.J=new P,this.onDidOpenTerminal=this.J.event,this.L=new P,this.onDidChangeActiveTerminal=this.L.event,this.M=new P,this.onDidChangeTerminalDimensions=this.M.event,this.N=new P,this.onDidChangeTerminalState=this.N.event,this.O=new P,this.onDidChangeShell=this.O.event,this.P=new P({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new P({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=r.getProxy(V.MainThreadTerminalService),this.w=new JO(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:s=>{const n=o=>this.getTerminalById(o.instanceId)?.value;switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.D({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.s:this.q)?.path||""}getDefaultShellArgs(t){return(t?this.s:this.q)?.args||[]}createExtensionTerminal(t,i){const r=new Ax(this.a,ci(),t,t.name),s=new zw(t.pty);return r.createExtensionTerminal(t.location,i,this.S(t,i).resolvedExtHostIdentifier,Rx(t.iconPath),tF(t.color),t.shellIntegrationNonce).then(n=>{const o=this.U(n,s);this.h[n]=o}),this.f.push(r),r.value}S(t,i){if(i=i||{},t.location&&typeof t.location=="object"&&Vs(t.location,{parentTerminal:!0})){const r=t.location.parentTerminal;if(r){const s=this.f.find(n=>n.value===r);s&&(i.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?i.location=t.location:i.location&&typeof i.location=="object"&&Vs(i.location,{splitActiveTerminal:!0})&&(i.location={splitActiveTerminal:!0});return i}attachPtyToTerminal(t,i){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new zw(i),n=this.U(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const i=this.b;if(t===null){this.b=void 0,i!==this.b&&this.L.fire(this.b);return}const r=this.getTerminalById(t);r&&(this.b=r,i!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,i){const r=this.getTerminalById(t);r&&this.P.fire({terminal:r.value,data:i})}async $acceptTerminalDimensions(t,i,r){const s=this.getTerminalById(t);s&&s.setDimensions(i,r)&&this.M.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,i){const r=this.getTerminalById(t);r&&this.Q.fire({terminal:r.value,...i})}async $acceptTerminalMaximumDimensions(t,i,r){this.g.get(t)?.resize(i,r)}async $acceptTerminalTitleChange(t,i){const r=this.getTerminalById(t);r&&(r.name=i)}async $acceptTerminalClosed(t,i,r){const s=this.Y(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(i,r),this.I.fire(n.value)}}$acceptTerminalOpened(t,i,r,s){if(i){const a=this.Y(this.f,i);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:y.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new Ax(this.a,t,n,r);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,i){this.getTerminalById(t)?._setProcessId(i)}async $startExtensionTerminal(t,i){const r=this.getTerminalById(t);if(!r)return{message:d(3050,null,t)};r.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===r.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(i):this.j[t]={initialDimensions:i}}U(t,i){const r=new ae;r.add(i.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),r.add(i.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.w.startBuffering(t,i.onProcessData),r.add(i.onProcessExit(n=>this.W(t,n))),this.g.set(t,i);const s=this.j[t];return s&&i instanceof zw&&(i.startSendingEvents(s.initialDimensions),delete this.j[t]),r}$acceptProcessAckDataEvent(t,i){this.g.get(t)?.acknowledgeDataEvent(i)}$acceptProcessInput(t,i){this.g.get(t)?.input(i)}$acceptTerminalInteraction(t){const i=this.getTerminalById(t);i?.setInteractedWith()&&this.N.fire(i.value)}$acceptTerminalSelection(t,i){this.getTerminalById(t)?.setSelection(i)}$acceptProcessResize(t,i,r){try{this.g.get(t)?.resize(i,r)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,i){this.g.get(t)?.shutdown(i)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(i=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:i}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(i=>this.a.$sendProcessProperty(t,{type:"cwd",value:i}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,i,r){if(this.C.has(i))throw new Error(`Terminal profile provider "${i}" already registered`);return this.C.set(i,r),this.a.$registerProfileProvider(i,t.identifier.value),new Ee(()=>{this.C.delete(i),this.a.$unregisterProfileProvider(i)})}registerTerminalCompletionProvider(t,i,...r){if(this.z.has(t.identifier.value))throw new Error(`Terminal completion provider "${t.identifier.value}" already registered`);return this.z.set(t.identifier.value,i),this.a.$registerCompletionProvider(t.identifier.value,t.identifier.value,...r),new Ee(()=>{this.z.delete(t.identifier.value),this.a.$unregisterCompletionProvider(t.identifier.value)})}async $provideTerminalCompletions(t,i){const r=new rt().token;if(r.isCancellationRequested||!this.activeTerminal)return;const s=this.z.get(t);if(!s)return;const n=await s.provideTerminalCompletions(this.activeTerminal,i,r);if(n==null)return;const o=!ai||this.activeTerminal.state?.shell==="gitbash"?"/":"\\";return ow.from(n,o)}$acceptTerminalShellType(t,i){const r=this.getTerminalById(t);r?.setShellType(i)&&this.N.fire(r.value)}registerTerminalQuickFixProvider(t,i,r){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,r),this.a.$registerQuickFixProvider(t,i),new Ee(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,i){const r=new rt().token;if(r.isCancellationRequested)return;const s=this.F.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(i,r);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new ae;if(this.u.value=o,!Array.isArray(n))return n?kp.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=kp.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,i){const r=new rt().token;let s=await this.C.get(t)?.provideTerminalProfile(r);if(!r.isCancellationRequested){if(s&&!Vs(s,{options:!0})&&(s={options:s}),!s||!Vs(s,{options:!0}))throw new Error(`No terminal profile options provided for id "${t}"`);if(Vs(s.options,{pty:!0})){this.createExtensionTerminal(s.options,i);return}this.createTerminalFromOptions(s.options,i)}}registerLinkProvider(t){return this.y.add(t),this.y.size===1&&this.a.$startLinkProvider(),new Ee(()=>{this.y.delete(t),this.y.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,i){const r=this.getTerminalById(t);if(!r)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new rt;this.H.set(t,n);const o=[],a={terminal:r.value,line:i},c=[];for(const h of this.y)c.push(da.withAsyncBody(async f=>{n.token.onCancellationRequested(()=>f({provider:h,links:[]}));const g=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||f({provider:h,links:g})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(f=>{const g={id:KO++,startIndex:f.startIndex,length:f.length,label:f.tooltip};return u.set(g.id,{provider:h.provider,link:f}),g}));return this.G.set(t,u),o}$activateLink(t,i){const r=this.G.get(t)?.get(i);r&&r.provider.handleTerminalLink(r.link)}W(t,i){this.w.stopBuffering(t),this.g.delete(t),delete this.j[t];const r=this.h[t];r&&(r.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,i)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const i=this.f.findIndex(r=>r.value===t);return i>=0?i:null}X(t,i){const r=this.Y(t,i);return r!==null?t[r]:null}Y(t,i){const r=t.findIndex(s=>s._id===i);return r>=0?r:null}getEnvironmentVariableCollection(t){let i=this.n.get(t.identifier.value);return i||(i=this.D(new Tx),this.$(t.identifier.value,i)),i.getScopedEnvironmentVariableCollection(void 0)}Z(t,i){const r=VO(i.map),s=GO(i.descriptionMap);this.a.$setEnvironmentVariableCollection(t,i.persistent,r.length===0?void 0:r,s)}$initEnvironmentVariableCollections(t){t.forEach(i=>{const r=i[0],s=this.D(new Tx(i[1]));this.$(r,s)})}$acceptDefaultProfile(t,i){const r=this.q;this.q=t,this.s=i,r?.path!==t.path&&this.O.fire(t.path)}$(t,i){this.n.set(t,i),this.D(i.onDidChangeCollection(()=>{this.Z(t,i)}))}};Vw=__decorate([__param(1,zo),__param(2,Ne)],Vw);var Tx=class extends Y{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new P,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let i=this.a.get(t);return i||(i=new eF(this,e),this.a.set(t,i),this.D(i.onDidChangeCollection(()=>this.f.fire()))),i}replace(e,t,i,r){this.g(e,{value:t,type:Ta.Replace,options:i??{applyAtProcessCreation:!0},scope:r})}append(e,t,i,r){this.g(e,{value:t,type:Ta.Append,options:i??{applyAtProcessCreation:!0},scope:r})}prepend(e,t,i,r){this.g(e,{value:t,type:Ta.Prepend,options:i??{applyAtProcessCreation:!0},scope:r})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.h(e,t.scope),r=this.map.get(i),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!r||r.value!==t.value||r.type!==t.type||r.options?.applyAtProcessCreation!==s.applyAtProcessCreation||r.options?.applyAtShellIntegration!==s.applyAtShellIntegration||r.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const i=this.h(e,t),r=this.map.get(i);return r?Lx(r):void 0}h(e,t){const i=this.j(t);return i.length?`${e}:::${i}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,r]of this.map)this.j(r.scope)===this.j(e)&&t.set(r.variable,Lx(r));return t}delete(e,t){const i=this.h(e,t);this.map.delete(i),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const i=this.j(t),r=this.descriptionMap.get(i);if(!r||r.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(i,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},eF=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new P}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.b.replace(e,t,i,this.d)}append(e,t,i){this.b.append(e,t,i,this.d)}prepend(e,t,i){this.b.prepend(e,t,i,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((i,r)=>e.call(t,r,i,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},Gw=class extends Vw{constructor(t,i){super(!1,t,i)}createTerminal(t,i,r){throw new hm}createTerminalFromOptions(t,i){throw new hm}};Gw=__decorate([__param(0,zo),__param(1,Ne)],Gw);function Rx(e){if(!(!e||typeof e=="string"))return Vs(e,{id:!0})?{id:e.id,color:e.color}:e}function tF(e){return va.isThemeColor(e)?e:void 0}function Lx(e){const t={...e};return delete t.scope,t.options=t.options??void 0,t}var iF=U("progressService"),Nx;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(Nx||(Nx={}));var KG=Object.freeze({total(){},worked(){},done(){}}),Jw=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},Mx=class extends Y{constructor(t,i){super(),this.a=new Vr,i.withProgress(t,r=>(this.b=r,this.c&&r.report(this.c),this.a.p)),this.D(se(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};Mx=__decorate([__param(1,iF)],Mx);var tJ=U("editorProgressService"),rF={label:d(6537,null),order:Number.MAX_SAFE_INTEGER},Ox="__";function sF(e){return typeof e=="object"&&e!==null&&"wwwAuthenticate"in e&&typeof e.wwwAuthenticate=="string"}var nF=U("IAuthenticationService"),oF=U("IAuthenticationExtensionsService"),Qw="/.well-known",aF=`${Qw}/oauth-protected-resource`,cF=`${Qw}/oauth-authorization-server`,Zw=`${Qw}/openid-configuration`,Xw=" ",Fx;(function(e){e.InvalidRequest="invalid_request",e.InvalidClient="invalid_client",e.InvalidGrant="invalid_grant",e.UnauthorizedClient="unauthorized_client",e.UnsupportedGrantType="unsupported_grant_type",e.InvalidScope="invalid_scope"})(Fx||(Fx={}));var Ux;(function(e){e.AuthorizationPending="authorization_pending",e.SlowDown="slow_down",e.AccessDenied="access_denied",e.ExpiredToken="expired_token"})(Ux||(Ux={}));var jx;(function(e){e.InvalidRedirectUri="invalid_redirect_uri",e.InvalidClientMetadata="invalid_client_metadata",e.InvalidSoftwareStatement="invalid_software_statement",e.UnapprovedSoftwareStatement="unapproved_software_statement"})(jx||(jx={}));function lF(e){if(typeof e!="object"||e===null)return!1;const t=e;return!(!t.resource||t.scopes_supported!==void 0&&!Array.isArray(t.scopes_supported))}var uF=["issuer","authorization_endpoint","token_endpoint","registration_endpoint","jwks_uri"];function hF(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!t.issuer)throw new Error("Authorization server metadata must have an issuer");for(const i of uF)if(t[i]){if(typeof t[i]!="string")throw new Error(`Authorization server metadata '${i}' must be a string`);if(!t[i].startsWith("https://")&&!t[i].startsWith("http://"))throw new Error(`Authorization server metadata '${i}' must start with http:// or https://`)}return!0}function dF(e){return typeof e!="object"||e===null?!1:e.client_id!==void 0}function Hx(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.access_token!==void 0&&t.token_type!==void 0}function Wx(e){return typeof e!="object"||e===null?!1:e.error!==void 0}function fF(e){return typeof e!="object"||e===null?!1:e.error!==void 0}function pF(e){return{issuer:e.toString(),authorization_endpoint:new URL("/authorize",e).toString(),token_endpoint:new URL("/token",e).toString(),registration_endpoint:new URL("/register",e).toString(),response_types_supported:["code","id_token","id_token token"]}}var _x=["authorization_code","refresh_token","urn:ietf:params:oauth:grant-type:device_code"],gF=33418;async function Bx(e,t,i){if(!e.registration_endpoint)throw new Error("Server does not support dynamic registration");const r={client_name:t,client_uri:"https://code.visualstudio.com",grant_types:e.grant_types_supported?e.grant_types_supported.filter(o=>_x.includes(o)):_x,response_types:["code"],redirect_uris:["https://insiders.vscode.dev/redirect","https://vscode.dev/redirect","http://127.0.0.1/",`http://127.0.0.1:${gF}/`],scope:i?.join(Xw),token_endpoint_auth_method:"none",application_type:"native"},s=await fetch(e.registration_endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok){const o=await s.text();let a=o;try{const c=JSON.parse(o);fF(c)&&(a=`${c.error}${c.error_description?`: ${c.error_description}`:""}`)}catch{}throw new Error(`Registration to ${e.registration_endpoint} failed: ${a}`)}const n=await s.json();if(dF(n))return n;throw new Error(`Invalid authorization dynamic client registration response: ${JSON.stringify(n)}`)}function qx(e){const t=[],i=[];let r="",s=!1;for(let o=0;o<e.length;o++){const a=e[o];a==='"'?(s=!s,r+=a):a===","&&!s?(r.trim()&&i.push(r.trim()),r=""):r+=a}r.trim()&&i.push(r.trim());let n;for(const o of i)if(!o.includes("="))n&&t.push(n),n={scheme:o.trim(),params:{}};else{const c=o.indexOf(" ");if(c>0){const l=o.substring(0,c),u=o.substring(c+1);if(!l.includes("=")&&u.includes("=")){n&&t.push(n),n={scheme:l.trim(),params:{}};const h=u.indexOf("=");if(h>0){const f=u.substring(0,h).trim(),g=u.substring(h+1).trim().replace(/^"|"$/g,"");f&&g!==void 0&&(n.params[f]=g)}continue}}if(n){const l=o.indexOf("=");if(l>0){const u=o.substring(0,l).trim(),h=o.substring(l+1).trim().replace(/^"|"$/g,"");u&&h!==void 0&&(n.params[u]=h)}}}return n&&t.push(n),t}function zx(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT token format: token must have three parts separated by dots");const[i,r,s]=t;try{if(typeof JSON.parse(Bn(i).toString())!="object")throw new Error("Invalid JWT token format: header is not a JSON object");const o=JSON.parse(Bn(r).toString());if(typeof o!="object")throw new Error("Invalid JWT token format: payload is not a JSON object");return o}catch(n){throw n instanceof Error?new Error(`Failed to parse JWT token: ${n.message}`):new Error("Failed to parse JWT token")}}function mF(e,t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;const i=[...e].sort(),r=[...t].sort();return i.every((s,n)=>s===r[n])}async function vF(e,t,i={}){const{sameOriginHeaders:r={},fetch:s=fetch}=i,n=new URL(e),o=async(u,h)=>{let f={Accept:"application/json"};new URL(u).origin===n.origin&&(f={...f,...r});const m=await s(u,{method:"GET",headers:f});if(m.status!==200){let S;try{S=await m.text()}catch{S=m.statusText}throw new Error(`Failed to fetch resource metadata from ${u}: ${m.status} ${S}`)}const w=await m.json();if(lF(w)){const S=new URL(w.resource).toString(),C=new URL(h).toString();if(S!==C)throw new Error(`Protected Resource Metadata 'resource' property value "${S}" does not match expected value "${C}" for URL ${u}. Per RFC 9728, these MUST match. See https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);return w}else throw new Error(`Invalid resource metadata from ${u}. Expected to follow shape of https://datatracker.ietf.org/doc/html/rfc9728#name-protected-resource-metadata (Hints: is scopes_supported an array? Is resource a string?). Current payload: ${JSON.stringify(w)}`)},a=[];if(t)try{return{metadata:await o(t,e),errors:a}}catch(u){a.push(u instanceof Error?u:new Error(String(u)))}const c=n.pathname!=="/",l=`${n.origin}${aF}`;if(c){const u=`${l}${n.pathname}`;try{return{metadata:await o(u,e),errors:a}}catch(h){a.push(h instanceof Error?h:new Error(String(h)))}}try{return{metadata:await o(l,n.origin),errors:a}}catch(u){a.push(u instanceof Error?u:new Error(String(u)))}throw a.length===1?a[0]:new AggregateError(a,"Failed to fetch resource metadata from all attempted URLs")}async function wF(e){if(e.status===200)try{const t=await e.json();if(hF(t))return t}catch{}}async function bF(e){try{return await e.text()}catch{return e.statusText}}async function yF(e,t={}){const{additionalHeaders:i={},fetch:r=fetch}=t,s=new URL(e),n=s.pathname==="/"?"":s.pathname,o=[],a=async f=>{try{const g=await r(f,{method:"GET",headers:{...i,Accept:"application/json"}}),m=await wF(g);if(m)return m;o.push(new Error(`Failed to fetch authorization server metadata from ${f}: ${g.status} ${await bF(g)}`));return}catch(g){o.push(g instanceof Error?g:new Error(String(g)));return}},c=new URL(cF,e).toString()+n;let l=await a(c);if(l)return l;const u=new URL(Zw,e).toString()+n;if(l=await a(u),l)return l;const h=e.endsWith("/")?e+Zw.substring(1):e+Zw;if(l=await a(h),l)return l;throw o.length===1?o[0]:new AggregateError(o,"Failed to fetch authorization server metadata from all attempted URLs")}var Yw,Kw=class{static{Yw=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,i){this.c=new P,this.onDidChangeWindowState=this.c.event,this.f=Yw.a,t.handle&&(this.d=Bn(t.handle).buffer),this.b=i.getProxy(V.MainThreadWindow),this.b.$getInitialState().then(({isFocused:r,isActive:s})=>{this.onDidChangeWindowProperty("focused",r),this.onDidChangeWindowProperty("active",s)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?Bn(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,i){i!==this.f[t]&&(this.f={...this.f,[t]:i},this.c.fire(this.f))}openUri(t,i){let r;if(typeof t=="string"){r=t;try{t=y.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return al(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===B.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,r,i)}async asExternalUri(t,i){if(al(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const r=await this.b.$asExternalUri(t,i);return y.from(r)}};Kw=Yw=__decorate([__param(0,Mt),__param(1,Ne)],Kw);var _p=U("IExtHostWindow"),eb,tb=class{static{eb=this}static{this.a=0}constructor(t){this.c=new eo,this.d=new Map,this.b=t.getProxy(V.MainThreadUrls)}registerUriHandler(t,i){const r=t.identifier;if(this.c.has(r))throw new Error(`Protocol handler already registered for extension ${r}`);const s=eb.a++;return this.c.add(r),this.d.set(s,i),this.b.$registerUriHandler(s,r,t.displayName||t.name),se(()=>{this.c.delete(r),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,i){const r=this.d.get(t);if(!r)return Promise.resolve(void 0);try{r.handleUri(y.revive(i))}catch(s){Bt(s)}return Promise.resolve(void 0)}async createAppUri(t){return y.revive(await this.b.$createAppUri(t))}};tb=eb=__decorate([__param(0,Ne)],tb);var Bp=U("IExtHostUrlsService");function Vx(e){return(t,i,r)=>{let s=null,n=null;if(typeof r.value=="function"?(s="value",n=r.value):typeof r.get=="function"&&(s="get",n=r.get),!n||typeof i=="symbol")throw new Error("not supported");r[s]=e(n,i)}}function ib(e,t,i){return Vx((r,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=i?i():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{r.apply(this,a),this[o]=i?i():void 0},e)}})}function SF(e,t,i){return Vx((r,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=i?i():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0},u-Date.now()))}})}var qp=U("IExtHostProgress"),rb=class{constructor(t){this.b=0,this.c=new Map,this.a=t.getProxy(V.MainThreadProgress)}async withProgress(t,i,r){const s=this.b++,{title:n,location:o,cancellable:a}=i,c={label:t.displayName||t.name,id:t.identifier.value};return this.a.$startProgress(s,{location:op.from(o),title:n,source:c,cancellable:a},t.isUnderDevelopment?void 0:t.identifier.value).catch(lm),this.d(s,r,!!a)}async withProgressFromSource(t,i,r){const s=this.b++,{title:n,location:o,cancellable:a}=i;return this.a.$startProgress(s,{location:op.from(o),title:n,source:t,cancellable:a},void 0).catch(lm),this.d(s,r,!!a)}d(t,i,r){let s;r&&(s=new rt,this.c.set(t,s));const n=a=>{this.a.$progressEnd(a),this.c.delete(a),s?.dispose()};let o;try{o=i(new Gx(this.a,t),r&&s?s.token:Be.None)}catch(a){throw n(t),a}return o.then(a=>n(t),a=>n(t)),o}$acceptProgressCanceled(t){const i=this.c.get(t);i&&(i.cancel(),this.c.delete(t))}};rb=__decorate([__param(0,Ne)],rb);function EF(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var Gx=class extends Jw{constructor(e,t){super(i=>this.throttledReport(i)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([SF(100,(e,t)=>EF(e,t),()=>Object.create(null))],Gx.prototype,"throttledReport",null);var sb=U("IExtHostAuthentication"),nb=class{constructor(t,i,r,s,n,o,a){this.l=i,this.m=r,this.n=s,this.o=n,this.p=o,this.q=a,this.c=ob,this.f=new Map,this.g=new D6,this.h=new P,this.j=new CF,this.k=new P,this.d=t.getProxy(V.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const i=t.toLowerCase();return Ke.chain(this.h.event,r=>r.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(i)).map(s=>({provider:s.provider})))}async getSession(t,i,r,s={}){const n=qe.toKey(t.identifier),a=Object.keys(s).map(l=>{switch(l){case"account":return`${l}:${s.account?.id}`;case"createIfNone":case"forceNewSession":{const u=typeof s[l]=="boolean"?`${s[l]}`:`'${s[l]?.detail}/${s[l]?.learnMore?.toString()}'`;return`${l}:${u}`}case"authorizationServer":return`${l}:${s.authorizationServer?.toString(!0)}`;default:return`${l}:${!!s[l]}`}}).sort().join(", ");let c;if(sF(r)){const l=r,u=l.wwwAuthenticate,h=l.fallbackScopes?[...l.fallbackScopes].sort().join(" "):"";c=`${n} ${i} challenge:${u} ${h} ${a}`}else{const l=[...r].sort().join(" ");c=`${n} ${i} ${l} ${a}`}return await this.j.getOrCreate(c,async()=>{await this.d.$ensureProvider(i);const l=t.displayName||t.name;return this.d.$getSession(i,r,n,l,s)})}async getAccounts(t){return await this.d.$ensureProvider(t),await this.d.$getAccounts(t)}registerAuthenticationProvider(t,i,r,s){return this.g.queue(t,async()=>{if(this.f.get(t)){this.q.error(`An authentication provider with id '${t}' is already registered. The existing provider will not be replaced.`);return}const n=r.onDidChangeSessions(o=>this.d.$sendDidChangeSessions(t,o));this.f.set(t,{label:i,provider:r,disposable:n,options:s??{supportsMultipleAccounts:!1}}),await this.d.$registerAuthenticationProvider({id:t,label:i,supportsMultipleAccounts:s?.supportsMultipleAccounts??!1,supportedAuthorizationServers:s?.supportedAuthorizationServers,supportsChallenges:s?.supportsChallenges})}),new Ee(()=>{this.g.queue(t,async()=>{const n=this.f.get(t);n&&(n.disposable?.dispose(),this.f.delete(t),await this.d.$unregisterAuthenticationProvider(t))})})}$createSession(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s)return r.authorizationServer=y.revive(r.authorizationServer),await s.provider.createSession(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$removeSession(t,i){return this.g.queue(t,async()=>{const r=this.f.get(t);if(r)return await r.provider.removeSession(i);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$getSessions(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s)return r.authorizationServer=y.revive(r.authorizationServer),await s.provider.getSessions(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$getSessionsFromChallenges(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s){const n=s.provider;if(typeof n.getSessionsFromChallenges=="function")return r.authorizationServer=y.revive(r.authorizationServer),await n.getSessionsFromChallenges(i,r);throw new Error(`Authentication provider with handle: ${t} does not support getSessionsFromChallenges`)}throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$createSessionFromChallenges(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s){const n=s.provider;if(typeof n.createSessionFromChallenges=="function")return r.authorizationServer=y.revive(r.authorizationServer),await n.createSessionFromChallenges(i,r);throw new Error(`Authentication provider with handle: ${t} does not support createSessionFromChallenges`)}throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$onDidChangeAuthenticationSessions(t,i,r){return t.startsWith(Ox)||this.h.fire({provider:{id:t,label:i},extensionIdFilter:r}),Promise.resolve()}$onDidUnregisterAuthenticationProvider(t){return this.g.queue(t,async()=>{const i=this.f.get(t);i&&(i.disposable?.dispose(),this.f.delete(t))})}async $registerDynamicAuthProvider(t,i,r,s,n,o){if(!s){const c=y.revive(t);if(i.registration_endpoint)try{const l=await Bx(i,this.l.environment.appName,r?.scopes_supported);s=l.client_id,n=l.client_secret}catch(l){this.q.warn(`Dynamic registration failed for ${c.toString()}: ${l.message}. Prompting user for client ID and client secret...`)}if(!s){this.q.info(`Prompting user for client registration details for ${c.toString()}`);const l=await this.d.$promptForClientRegistration(c.toString());if(!l)throw new Error("User did not provide client details");s=l.clientId,n=l.clientSecret,this.q.info(`User provided client registration for ${c.toString()}`),n?this.q.trace(`User provided client secret for ${c.toString()}`):this.q.trace(`User did not provide client secret for ${c.toString()}`)}}const a=new this.c(this.m,this.n,this.l,this.o,this.p,this.d,y.revive(t),i,r,s,n,this.k,o||[]);return await this.g.queue(a.id,async()=>{this.f.set(a.id,{label:a.label,provider:a,disposable:Ee.from(a,a.onDidChangeSessions(c=>this.d.$sendDidChangeSessions(a.id,c)),a.onDidChangeClientId(()=>this.d.$sendDidChangeDynamicProviderInfo({providerId:a.id,clientId:a.clientId,clientSecret:a.clientSecret}))),options:{supportsMultipleAccounts:!0}}),await this.d.$registerDynamicAuthenticationProvider({id:a.id,label:a.label,supportsMultipleAccounts:!0,authorizationServer:t,resourceServer:r?y.parse(r.resource):void 0,clientId:a.clientId,clientSecret:a.clientSecret})}),a.id}async $onDidChangeDynamicAuthProviderTokens(t,i,r){this.k.fire({authProviderId:t,clientId:i,tokens:r})}};nb=__decorate([__param(0,Ne),__param(1,Mt),__param(2,_p),__param(3,Bp),__param(4,qp),__param(5,ro),__param(6,De)],nb);var CF=class{constructor(){this.c=new Map}getOrCreate(e,t){const i=this.c.get(e);if(i)return i;const r=t().finally(()=>this.c.delete(e));return this.c.set(e,r),r}},ob=class{constructor(t,i,r,s,n,o,a,c,l,u,h,f,g){this.k=t,this.l=i,this.m=r,this.n=s,this.o=o,this.authorizationServer=a,this.p=c,this.q=l,this.r=u,this.s=h,this.c=new P,this.onDidChangeSessions=this.c.event,this.d=new P,this.onDidChangeClientId=this.d.event;const m=a.toString(!0);this.id=l?.resource?m+" "+l?.resource:m,this.label=l?.resource_name??this.authorizationServer.authority,this.h=n.createLogger(this.id,{name:`Auth: ${this.label}`}),this.j=new ae,this.j.add(this.c);const w=Ke.chain(f.event,S=>S.filter(C=>C.authProviderId===this.id&&C.clientId===u).map(C=>C.tokens));this.f=this.j.add(new xF({onDidChange:w,set:S=>o.$setSessionsForDynamicAuthProvider(this.id,this.clientId,S)},g,this.h)),this.j.add(this.f.onDidChangeSessions(S=>this.c.fire(S))),this.g=[],c.authorization_endpoint&&this.g.push({label:d(3031,null),handler:(S,C,k)=>this.u(S,C,k)})}get clientId(){return this.r}get clientSecret(){return this.s}async getSessions(t,i){if(this.h.info(`Getting sessions for scopes: ${t?.join(" ")??"all"}`),!t)return this.f.sessions;const r=[...t].sort(),s=t.join(" ");let n=this.f.sessions.filter(o=>wi([...o.scopes].sort(),r));if(this.h.info(`Found ${n.length} sessions for scopes: ${s}`),n.length){const o=[],a=[],c=new Map(this.f.tokens.map(l=>[l.access_token,l]));for(const l of n){const u=c.get(l.accessToken);if(u&&u.expires_in){const h=Date.now(),f=u.expires_in*1e3;if(h>u.created_at+f-5*60*1e3){if(this.h.info(`Token for session ${l.id} is about to expire, refreshing...`),a.push(u),!u.refresh_token){this.h.warn(`No refresh token available for scopes ${l.scopes.join(" ")}. Throwing away token.`);continue}try{const g=await this.z(u.refresh_token);g.scope!==s&&(this.h.warn(`Token scopes '${g.scope}' do not match requested scopes '${s}'. Overwriting token with what was requested...`),g.scope=s),this.h.info(`Successfully created a new token for scopes ${l.scopes.join(" ")}.`),o.push(g)}catch(g){this.h.error(`Failed to refresh token: ${g}`)}}}}return(o.length||a.length)&&(this.f.update({added:o,removed:a}),n=this.f.sessions.filter(l=>wi([...l.scopes].sort(),r))),this.h.info(`Found ${n.length} sessions for scopes: ${s}`),n}return[]}async createSession(t,i){this.h.info(`Creating session for scopes: ${t.join(" ")}`);let r;for(let n=0;n<this.g.length;n++){const{handler:o}=this.g[n];try{if(r=await this.n.withProgressFromSource({label:this.label,id:this.id},{location:vn.Notification,title:d(3032,null,this.label),cancellable:!0},(a,c)=>o(t,a,c)),r)break}catch(a){const c=this.g[n+1]?.label;if(!c)break;const l=qr(a)?d(3033,null,this.label,c):d(3034,null,this.label,c);if(!await this.o.$showContinueNotification(l))throw new oi;this.h.error(`Failed to create token via flow '${c}': ${a}`)}}if(!r)throw new Error("Failed to create authentication token");r.scope!==t.join(" ")&&(this.h.warn(`Token scopes '${r.scope}' do not match requested scopes '${t.join(" ")}'. Overwriting token with what was requested...`),r.scope=t.join(" ")),this.f.update({added:[{...r,created_at:Date.now()}],removed:[]});const s=this.f.sessions.find(n=>n.accessToken===r.access_token);return this.h.info(`Created ${r.refresh_token?"refreshable":"non-refreshable"} session for scopes: ${r.scope}${r.expires_in?` that expires in ${r.expires_in} seconds`:""}`),s}async removeSession(t){this.h.info(`Removing session with id: ${t}`);const i=this.f.sessions.find(s=>s.id===t);if(!i){this.h.error(`Session with id ${t} not found`);return}const r=this.f.tokens.find(s=>s.access_token===i.accessToken);if(!r){this.h.error(`Failed to retrieve token for removed session: ${i.id}`);return}this.f.update({added:[],removed:[r]}),this.h.info(`Removed token for session: ${i.id} with scopes: ${i.scopes.join(" ")}`)}dispose(){this.j.dispose()}async u(t,i,r){if(!this.p.authorization_endpoint)throw new Error("Authorization Endpoint required");if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");const s=this.v(64),n=await this.w(s),o=this.v(32),a=y.parse(`${this.m.environment.appUriScheme}://dynamicauthprovider/${this.authorizationServer.authority}/authorize?nonce=${o}`);let c;try{c=await this.l.createAppUri(a)}catch(S){throw new Error(`Failed to create external URI: ${S}`)}const l=new URL(this.p.authorization_endpoint);l.searchParams.append("client_id",this.r),l.searchParams.append("response_type","code"),l.searchParams.append("state",c.toString()),l.searchParams.append("code_challenge",n),l.searchParams.append("code_challenge_method","S256");const u=t.join(" ");u&&l.searchParams.append("scope",u),this.q?.resource&&l.searchParams.append("resource",this.q.resource);const h="https://vscode.dev/redirect";l.searchParams.append("redirect_uri",h);const f=this.x(a);if(this.h.info(`Opening authorization URL for scopes: ${u}`),this.h.trace(`Authorization URL: ${l.toString()}`),!await this.k.openUri(l.toString(),{}))throw new oi;i.report({message:d(3035,null)});let m;try{m=(await qm(f,r)).code}catch(S){throw qr(S)?(this.h.info("Authorization code request was cancelled by the user."),S):(this.h.error(`Failed to receive authorization code: ${S}`),new Error(`Failed to receive authorization code: ${S}`))}return this.h.info(`Authorization code received for scopes: ${u}`),await this.y(m,s,h)}v(t){const i=new Uint8Array(t);return crypto.getRandomValues(i),Array.from(i).map(r=>r.toString(16).padStart(2,"0")).join("").substring(0,t)}async w(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r);return Kc(re.wrap(new Uint8Array(s)),!1,!1).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async x(t){const i=await this.o.$waitForUriHandler(t),r=/[?&]code=([^&]+)/.exec(i.query||"");if(!r||r.length<2)throw new Error("Authentication failed: No authorization code received");return{code:r[1]}}async y(t,i,r){if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");const s=new URLSearchParams;s.append("client_id",this.r),s.append("grant_type","authorization_code"),s.append("code",t),s.append("redirect_uri",r),s.append("code_verifier",i),this.q?.resource&&s.append("resource",this.q.resource),this.s&&s.append("client_secret",this.s),this.h.info("Exchanging authorization code for token..."),this.h.trace(`Url: ${this.p.token_endpoint}`),this.h.trace(`Token request body: ${s.toString()}`);let n;try{n=await fetch(this.p.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:s.toString()})}catch(a){throw this.h.error(`Failed to exchange authorization code for token: ${a}`),new Error(`Failed to exchange authorization code for token: ${a}`)}if(!n.ok){const a=await n.text();throw new Error(`Token exchange failed: ${n.status} ${n.statusText} - ${a}`)}const o=await n.json();if(Hx(o))return this.h.info("Successfully exchanged authorization code for token."),o;throw Wx(o)&&o.error==="invalid_client"?(this.h.warn(`Client ID (${this.r}) was invalid, generated a new one.`),await this.A(),new Error("Client ID was invalid, generated a new one. Please try again.")):new Error(`Invalid authorization token response: ${JSON.stringify(o)}`)}async z(t){if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");const i=new URLSearchParams;i.append("client_id",this.r),i.append("grant_type","refresh_token"),i.append("refresh_token",t),this.q?.resource&&i.append("resource",this.q.resource),this.s&&i.append("client_secret",this.s);const s=await(await fetch(this.p.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:i.toString()})).json();if(Hx(s))return{...s,created_at:Date.now()};throw Wx(s)&&s.error==="invalid_client"?(this.h.warn(`Client ID (${this.r}) was invalid, generated a new one.`),await this.A(),new Error("Client ID was invalid, generated a new one. Please try again.")):new Error(`Invalid authorization token response: ${JSON.stringify(s)}`)}async A(){try{const t=await Bx(this.p,this.m.environment.appName,this.q?.scopes_supported);this.r=t.client_id,this.s=t.client_secret,this.d.fire()}catch(t){this.h.info(`Dynamic registration failed for ${this.authorizationServer.toString()}: ${t}. Prompting user for client ID and client secret.`);try{const i=await this.o.$promptForClientRegistration(this.authorizationServer.toString());if(!i)throw new Error("User did not provide client details");this.r=i.clientId,this.s=i.clientSecret,this.h.info(`User provided client ID for ${this.authorizationServer.toString()}`),i.clientSecret?this.h.info(`User provided client secret for ${this.authorizationServer.toString()}`):this.h.info(`User did not provide client secret for ${this.authorizationServer.toString()} (optional)`),this.d.fire()}catch{throw this.h.error(`Failed to fetch new client ID and user did not provide one: ${t}`),new Error(`Failed to fetch new client ID and user did not provide one: ${t}`)}}}};ob=__decorate([__param(0,_p),__param(1,Bp),__param(2,Mt),__param(3,qp),__param(4,ro)],ob);var xF=class{constructor(e,t,i){this.h=e,this.j=i,this.f=new P,this.onDidChangeSessions=this.f.event,this.g=new ae,this.c=Fi("tokens",t),this.d=hE({equalsFn:(r,s)=>wi(r,s,(n,o)=>n.accessToken===o.accessToken)},r=>this.c.read(r).map(s=>this.l(s))),this.g.add(this.k()),this.g.add(this.h.onDidChange(r=>this.c.set(r,void 0)))}get tokens(){return this.c.get()}get sessions(){return this.d.get()}dispose(){this.g.dispose()}update({added:e,removed:t}){this.j.trace(`Updating tokens: added ${e.length}, removed ${t.length}`);const i=[...this.c.get()];for(const r of t){const s=i.findIndex(n=>n.access_token===r.access_token);s!==-1&&i.splice(s,1)}for(const r of e){const s=i.findIndex(n=>n.access_token===r.access_token);s===-1?i.push(r):i[s]=r}(e.length||t.length)&&(this.c.set(i,void 0),this.h.set(i)),this.j.trace(`Tokens updated: ${i.length} tokens stored.`)}k(){let e=[];return fd(t=>{this.j.trace("Checking for session changes...");const i=this.d.read(t);if(e===i){this.j.trace("No session changes detected.");return}if(!i||i.length===0){this.j.trace("All sessions removed."),e.length>0&&(this.f.fire({added:[],removed:e,changed:[]}),e=[]);return}const r=[],s=[];for(const n of i)e.some(a=>a.accessToken===n.accessToken)||r.push(n);for(const n of e)i.some(a=>a.accessToken===n.accessToken)||s.push(n);(r.length>0||s.length>0)&&(this.j.trace(`Sessions changed: added ${r.length}, removed ${s.length}`),this.f.fire({added:r,removed:s,changed:[]})),e=i})}l(e){let t;if(e.id_token)try{t=zx(e.id_token)}catch{}if(!t)try{t=zx(e.access_token)}catch{}const i=e.scope?e.scope.split(" "):t?.scope?t.scope.split(" "):[];return{id:Xm(e.access_token,0).toString(),accessToken:e.access_token,account:{id:t?.sub||"unknown",label:t?.preferred_username||t?.name||t?.email||"MCP"},scopes:i,idToken:e.id_token}}},ab,cb=U("IExtHostLanguageModels"),kF=class{constructor(){this.a=new ZT,this.b=!1;const e=this,[t,i]=L6.tee(e.a.asyncIterable);this.apiObject={get stream(){return t},get text(){return i.map(r=>{if(r instanceof kt)return r.value}).coalesce()}}}handleResponsePart(e){if(this.b)return;const t=[];for(const i of Dt.wrap(e)){let r;i.type==="text"?r=new kt(i.value,i.audience):i.type==="thinking"?r=new tc(i.value,i.id,i.metadata):i.type==="data"?r=new ri(i.data.buffer,i.mimeType,i.audience):r=new Ro(i.toolCallId,i.name,i.parameters),t.push(r)}this.a.emitMany(t)}reject(e){this.b=!0,this.a.reject(e)}resolve(){this.b=!0,this.a.resolve()}},lb=class{static{ab=this}static{this.a=1}constructor(t,i,r){this.o=i,this.p=r,this.c=new P,this.d=new P,this.onDidChangeProviders=this.d.event,this.f=new P,this.onDidChangeModelProxyAvailability=this.f.event,this.g=new Map,this.h=new Map,this.j=new Ks,this.k=new Map,this.l=new Map,this.x=new Set,this.b=t.getProxy(V.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose(),this.f.dispose()}registerLanguageModelChatProvider(t,i,r){this.g.set(i,{extension:t,provider:r}),this.b.$registerLanguageModelProvider(i);let s;return r.onDidChangeLanguageModelChatInformation&&(s=r.onDidChangeLanguageModelChatInformation(()=>{this.b.$onLMProviderChange(i)})),se(()=>{this.g.delete(i),this.q(i),s?.dispose(),this.b.$unregisterProvider(i)})}q(t){this.h.forEach((i,r)=>{i.metadata.vendor===t&&this.h.delete(r)})}async $provideLanguageModelChatInfo(t,i,r){const s=this.g.get(t);if(!s)return[];const n=await s.provider.provideLanguageModelChatInformation(i,r)??[],o=n.map(a=>{let c;return a.requiresAuthorization&&Je(s.extension,"chatProvider")&&(c={providerLabel:s.extension.displayName||s.extension.name,accountLabel:typeof a.requiresAuthorization=="object"?a.requiresAuthorization.label:void 0}),a.capabilities.editTools&&T(s.extension,"chatProvider"),{metadata:{extension:s.extension.identifier,id:a.id,vendor:t,name:a.name??"",family:a.family??"",detail:a.detail,tooltip:a.tooltip,version:a.version,maxInputTokens:a.maxInputTokens,maxOutputTokens:a.maxOutputTokens,auth:c,isDefault:a.isDefault,isUserSelectable:a.isUserSelectable,statusIcon:a.statusIcon,modelPickerCategory:a.category??rF,capabilities:a.capabilities?{vision:a.capabilities.imageInput,editTools:a.capabilities.editTools,toolCalling:!!a.capabilities.toolCalling,agentMode:!!a.capabilities.toolCalling}:void 0},identifier:`${t}/${a.id}`}});this.q(t);for(let a=0;a<o.length;a++)this.h.set(o[a].identifier,{metadata:o[a].metadata,info:n[a]});return o}async $startChatRequest(t,i,r,s,n,o){const a=this.h.get(t);if(!a)throw new Error("Model not found");const c=this.g.get(a.metadata.vendor);if(!c)throw new Error(`Language model provider for '${a.metadata.id}' not found.`);const l=[],u=()=>{l.length>0&&(this.b.$reportResponsePart(i,new ei(l)),l.length=0)},h=new Yn(u,30),f=w=>{l.push(w)>30?(u(),h.cancel()):h.schedule()},g=new Jw(async w=>{if(o.isCancellationRequested){this.o.warn(`[CHAT](${c.extension.identifier.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let S;if(w instanceof Ro?S={type:"tool_use",name:w.name,parameters:w.input,toolCallId:w.callId}:w instanceof kt?S={type:"text",value:w.value,audience:w.audience}:w instanceof ri?S={type:"data",mimeType:w.mimeType,data:re.wrap(w.data),audience:w.audience}:w instanceof tc&&(S={type:"thinking",value:w.value,id:w.id,metadata:w.metadata}),!S){this.o.warn(`[CHAT](${c.extension.identifier.value}) UNKNOWN part ${JSON.stringify(w)}`);return}f(S)});let m;try{m=c.provider.provideLanguageModelChatResponse(a.info,s.value.map(fp.to),{...n,modelOptions:n.modelOptions??{},requestInitiator:qe.toKey(r),toolMode:n.toolMode??zf.Auto},g,o)}catch(w){throw w}Promise.resolve(m).then(()=>{u(),this.b.$reportResponseDone(i,void 0)},w=>{u(),this.b.$reportResponseDone(i,ea(w))})}$provideTokenLength(t,i,r){const s=this.h.get(t);if(!s)return Promise.resolve(0);const n=this.g.get(s.metadata.vendor);return n?Promise.resolve(n.provider.provideTokenCount(s.info,i,r)):Promise.resolve(0)}async getDefaultLanguageModel(t,i){let r;i&&await this.selectLanguageModels(t,{});for(const[s,n]of this.h)if(n.metadata.isDefault){r=s;break}return!r&&!i?this.getDefaultLanguageModel(t,!0):this.getLanguageModelByIdentifier(t,r)}async getLanguageModelByIdentifier(t,i){if(!i)return;const r=this.h.get(i);if(!r)return(await this.selectLanguageModels(t,{id:i}))[0];this.u(t.identifier,r.metadata)&&await this.v(r.metadata);let s;if(!s){const n=this;s={id:r.info.id,vendor:r.metadata.vendor,family:r.info.family,version:r.info.version,name:r.info.name,capabilities:{supportsImageToText:r.metadata.capabilities?.vision??!1,supportsToolCalling:!!r.metadata.capabilities?.toolCalling,editToolsHint:r.metadata.capabilities?.editTools},maxInputTokens:r.metadata.maxInputTokens,countTokens(o,a){if(!n.h.has(i))throw Ps.NotFound(i);return n.w(i,o,a??Be.None)},sendRequest(o,a,c){if(!n.h.has(i))throw Ps.NotFound(i);return n.r(t,i,o,a??{},c??Be.None)}},Object.freeze(s)}return s}async selectLanguageModels(t,i){const r=await this.b.$selectChatModels({...i,extension:t.identifier}),s=[],n=r.map(a=>this.getLanguageModelByIdentifier(t,a)),o=await Promise.all(n);for(const a of o)a&&s.push(a);return s}async r(t,i,r,s,n){const o=this.s(t,r),a=t.identifier,c=this.h.get(i)?.metadata;if(!c||!this.h.has(i))throw Ps.NotFound(`Language model '${i}' is unknown.`);if(this.u(a,c)&&(!await this.t(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.j.get(a)?.has(c.extension)))throw Ps.NoPermissions(`Language model '${i}' cannot be used by '${a.value}'.`);const l=Math.random()*1e6|0,u=new kF;this.k.set(l,{languageModelId:i,res:u});try{await this.b.$tryStartChatRequest(a,i,l,new ei(o),s,n)}catch(h){throw this.k.delete(l),Ps.tryDeserialize(h)??h}return u.apiObject}s(t,i){const r=[];for(const s of i)s.role===Hi.System&&T(t,"languageModelSystem"),r.push(fp.from(s));return r}async $acceptResponsePart(t,i){const r=this.k.get(t);r&&r.res.handleResponsePart(i.value)}async $acceptResponseDone(t,i){const r=this.k.get(t);r&&(this.k.delete(t),i?r.res.reject(Ps.tryDeserialize(i)??q4(i)):r.res.resolve())}async t(t,i,r,s){const n=Ox+i.identifier.value;if(await this.p.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=r?d(3041,null,i.displayName,r):void 0;return await this.p.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0}catch{return!1}}u(t,i){return!!i.auth&&!qe.equals(i.extension,t)}async v(t){if(t.auth)for(const i of this.x)try{await this.t(i,{identifier:t.extension,displayName:""},void 0,!0)}catch(r){this.o.error("Fake Auth request failed"),this.o.error(r)}}async w(t,i,r){const s=this.h.get(t);if(!s)throw Ps.NotFound(`Language model '${t}' is unknown.`);return this.g.get(s.metadata.vendor)?.provider.provideTokenCount(s.info,i,r)??0}$updateModelAccesslist(t){const i=new Array;for(const{from:r,to:s,enabled:n}of t){const o=this.j.get(r)??new eo;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.j.set(r,o);const c={from:r,to:s};i.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.x.add(t);const i=Ke.signal(Ke.filter(this.c.event,s=>qe.equals(s.from,t.identifier))),r=Ke.signal(this.d.event);return{get onDidChange(){return Ke.any(i,r)},canSendRequest(s){return!0}}}fileIsIgnored(t,i,r=Be.None){return T(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(i,r)}get isModelProxyAvailable(){return!!this.n}async getModelProxy(t){if(T(t,"languageModelProxy"),!this.n)throw this.o.trace("[LanguageModelProxy] No LanguageModelProxyProvider registered"),new Error("No language model proxy provider is registered.");const i=qe.toKey(t.identifier);try{const r=await Promise.resolve(this.n.provideModelProxy(i,Be.None));if(!r)throw this.o.warn(`[LanguageModelProxy] Provider returned no proxy for ${i}`),new Error("Language model proxy is not available.");return r}catch(r){throw this.o.error(`[LanguageModelProxy] Provider failed to return proxy for ${i}`,r),r}}async $isFileIgnored(t,i,r){const s=this.l.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(y.revive(i),r)??!1}registerIgnoredFileProvider(t,i){T(t,"chatParticipantPrivate");const r=ab.a++;return this.b.$registerFileIgnoreProvider(r),this.l.set(r,i),se(()=>{this.b.$unregisterFileIgnoreProvider(r),this.l.delete(r)})}registerLanguageModelProxyProvider(t,i){return T(t,"chatParticipantPrivate"),this.n=i,this.f.fire(),se(()=>{this.n===i&&(this.n=void 0,this.f.fire())})}};lb=ab=__decorate([__param(0,Ne),__param(1,De),__param(2,sb)],lb);function Ou(e,t=ai){return ST(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function $F(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var Jx="\u2026",Fu="\\\\",Uu="~";function IF(e,t=ar){const i=new Array(e.length);let r=!1;for(let s=0;s<e.length;s++){const n=e[s];if(n===""){i[s]=`.${t}`;continue}if(!n){i[s]=n;continue}r=!0;let o="",a=n;a.indexOf(Fu)===0?(o=a.substr(0,a.indexOf(Fu)+Fu.length),a=a.substr(a.indexOf(Fu)+Fu.length)):a.indexOf(t)===0?(o=a.substr(0,a.indexOf(t)+t.length),a=a.substr(a.indexOf(t)+t.length)):a.indexOf(Uu)===0&&(o=a.substr(0,a.indexOf(Uu)+Uu.length),a=a.substr(a.indexOf(Uu)+Uu.length));const c=a.split(t);for(let l=1;r&&l<=c.length;l++)for(let u=c.length-l;r&&u>=0;u--){r=!1;let h=c.slice(u,u+l).join(t);for(let f=0;!r&&f<e.length;f++)if(f!==s&&e[f]&&e[f].indexOf(h)>-1){const g=u+l===c.length,m=u>0&&e[f].indexOf(t)>-1?t+h:h,w=e[f].endsWith(m);r=!g||w}if(!r){let f="";(c[0].endsWith(":")||o!=="")&&(u===1&&(u=0,l++,h=c[0]+t+h),u>0&&(f=c[0]+t),f=o+f),u>0&&(f=f+Jx+t),f=f+h,u+l<c.length&&(f=f+t+Jx),i[s]=f}}r&&(i[s]=n)}return i}var Qx;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(Qx||(Qx={}));var DF=60,PF=DF*60,ub=PF*24,cJ=ub*7,lJ=ub*30,uJ=ub*365;function AF(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var zp={DateTimeFormat(e,t){return new It(()=>{try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}})},Collator(e,t){return new It(()=>{try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}})},Segmenter(e,t){return new It(()=>{try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}})},Locale(e,t){return new It(()=>{try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(Js,t)}})},NumberFormat(e,t){return new It(()=>{try{return new Intl.NumberFormat(e,t)}catch{return new Intl.NumberFormat(void 0,t)}})}},Zx;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Zx||(Zx={}));function Xx(e){return e<0?0:e>255?255:e|0}function Cc(e){return e<0?0:e>4294967295?4294967295:e|0}var Yx=class g3{constructor(t){const i=Xx(t);this.c=i,this.a=g3.d(i),this.b=new Map}static d(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const r=Xx(i);t>=0&&t<256?this.a[t]=r:this.b.set(t,r)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},Kx;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(Kx||(Kx={}));var ek;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(ek||(ek={}));var TF=class extends Yx{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=zp.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this.h(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this.h(e))if(!(i.index<t))return i;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.value.segment(e)),this.g):[]}j(e){const t=[];for(const i of e)this.k(i)&&t.push(i);return t}k(e){return!!e.isWordLike}},tk=new ta(10);function RF(e,t){const i=`${e}/${t.join(",")}`;let r=tk.get(i);return r||(r=new TF(e,t),tk.set(i,r)),r}var hb;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(hb||(hb={}));var ik;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(ik||(ik={}));var rk;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(rk||(rk={}));var sk;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(sk||(sk={}));var nk;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(nk||(nk={}));var ok;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(ok||(ok={}));var ak;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(ak||(ak={}));var ck;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(ck||(ck={}));var lk;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(lk||(lk={}));var db=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},uk;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(uk||(uk={}));var hk;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(hk||(hk={}));var dk;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(dk||(dk={}));var LF=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},NF=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},fk=class{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=pk(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=YA(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new LF(t,this.wordSeparators?RF(this.wordSeparators,[]):null,i?this.searchString:null)}};function pk(e){if(!e||e.length===0)return!1;for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r===10)return!0;if(r===92){if(t++,t>=i)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function gk(e,t,i){if(!i)return new db(e,null);const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s];return new db(e,r)}function MF(e,t,i,r,s){if(r===0)return!0;const n=t.charCodeAt(r-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r);if(e.get(o)!==0)return!0}return!1}function OF(e,t,i,r,s){if(r+s===i)return!0;const n=t.charCodeAt(r+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r+s-1);if(e.get(o)!==0)return!0}return!1}function mk(e,t,i,r,s){return MF(e,t,i,r,s)&&OF(e,t,i,r,s)}var FF=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let i;do{if(this.b+this.c===t||(i=this.a.exec(e),!i))return null;const r=i.index,s=i[0].length;if(r===this.b&&s===this.c){if(s===0){l6(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=r,this.c=s,!this._wordSeparators||mk(this._wordSeparators,e,t,r,s))return i}while(i);return null}},vk=U("IUriIdentityService");function wk(e){return e.scheme!==B.file&&e.scheme!==B.vscodeRemote}function UF(e){if(e.folders.length)return e.folders.every(t=>wk(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&wk(e.configuration))return e.configuration}function jF(e){return UF(e)?.scheme}var fb=U("environmentService"),hJ=fb,bk=fb,yk=U("remoteAgentService"),dJ=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let r=0;r<this.maxSampleCount;r++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await Qi(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let i;return this.initial.length<this.maxInitialCount?this.initial.push(t):i=this.initial.reduce((r,s)=>r+s,0)/this.initial.length,this.lastMeasurement={initial:i,current:t,average:this.average.reduce((r,s)=>r+s,0)/this.average.length,high:typeof i>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>i*this.highLatencyMultiple},this.lastMeasurement}},pb,HF=U("pathService"),Sk=pb=class{constructor(t,i,r,s){this.d=t,this.e=i,this.f=r,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||nl)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,i,r){return typeof i=="string"||typeof i>"u"?this.a.then(s=>this.h(t,s,i)):this.h(t,i,r)}h(t,i,r){return t.scheme===B.file||t.scheme===B.vscodeRemote?yT(r??Ji(t),i===1):!0}get defaultUriScheme(){return pb.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,i){if(t.remoteAuthority)return B.vscodeRemote;const r=jF(i.getWorkspace());if(r)return r;const s=i.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=i.getWorkspace().configuration;return n?n.scheme:B.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Lt:We)}async fileURI(t){let i="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(i=t.substring(2),t="/"):(i=t.substring(2,s),t=t.substring(s)||"/")}return y.from({scheme:B.file,authority:i,path:t,query:"",fragment:""})}};Sk=pb=__decorate([__param(1,yk),__param(2,bk),__param(3,Zh)],Sk);function WF(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var Ek=class{constructor(t,i,r,s,n,o){this.a=t,this.b=i,this.c=r,this.d=s,this.f=n,this.g=o}aiText(t,i,r={}){return{...this.j(i?.map(d1),r),type:3,contentPattern:t}}text(t,i,r={}){t=this.h(t,r);const s=this.a.getValue(),n=i&&i.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(i?.map(d1),r),type:2,contentPattern:t,previewOptions:r.previewOptions,maxFileSize:r.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:r.surroundingContext,userDisabledExcludesAndIgnoreFiles:r.disregardExcludeSettings&&r.disregardIgnoreFiles}}h(t,i){const r=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:r.editor.wordSeparators};return this.l(t,i)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),i.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=i.notebookSearchConfig.includeMarkupInput),i.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=i.notebookSearchConfig.includeMarkupPreview),i.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=i.notebookSearchConfig.includeCodeInput),i.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=i.notebookSearchConfig.includeOutput),s}file(t,i={}){return{...this.j(t,i),type:1,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}i(t,i){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(r=>r.length>0).map(Vp),!t.length)return{}}else t=Vp(t);return i?this.parseSearchPaths(t):{pattern:gb(...Array.isArray(t)?t:[t])}}j(t=[],i={}){let r=Array.isArray(i.excludePattern)?i.excludePattern.map(u=>u.pattern).flat():i.excludePattern;r=r?.length===1?r[0]:r;const s=this.i(i.includePattern,i.expandPatterns),n=this.i(r,i.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,i,n)):t.map(u=>this.u(u,i,n,o))).filter(u=>!!u),c={_reason:i._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:i.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:i.onlyOpenEditors,maxResults:i.maxResults,onlyFileScheme:i.onlyFileScheme};if(i.onlyOpenEditors){const u=mt(this.c.groups.flatMap(g=>g.editors.map(m=>m.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(g=>Y9(c,g.fsPath)),f=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(f)),{...c,...f}}const l=i.extraFileResources&&i.extraFileResources.filter(u=>Y9(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const i=[],r=new wt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===B.walkThrough)return;if(LT(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=r.get(c);l||(n=!0,l={folder:c,includePattern:{}},i.push(l),r.set(c,l));const u=ol(c.fsPath,o.fsPath);ia(l.includePattern)[Ck(u.replace(/\\/g,"/"))]=!0}else o.fsPath&&(n=!0,s[Ck(o.fsPath)]=!0)}),{folderQueries:i,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,i){if(i.isSmartCase){if(t.isRegExp){if(f6(t.pattern,!0))return!0}else if(f6(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&pk(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const i=h=>Mh(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:BF(t)).map(h=>{const f=this.f.resolvedUserHome;return f?$F(h,f.scheme===B.file?f.fsPath:f.path):h}),n=Z4(s,h=>i(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>Mm(h,"/")).map(h=>Mm(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),qF(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=gb(...l);return u&&(a.pattern=u),a}n(t,i){return i.disregardExcludeSettings?void 0:eO(t,!i.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const i=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=_F(s);return o&&(o=mb(o)),this.q(n).flatMap(c=>this.r(c,o))}),r=new Map;return i.forEach(s=>{const n=s.searchPath.toString(),o=r.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):r.set(n,{searchPath:s.searchPath,pattern:s.pattern?gb(s.pattern):void 0})}),Array.from(r.values())}q(t){if(Mh(t)){const i=this.b.getWorkspace().folders;return i[0]&&i[0].uri.scheme!==B.file?[{searchPath:i[0].uri.with({path:t})}]:[{searchPath:y.file(aa(t))}]}if(this.b.getWorkbenchState()===2){const i=this.b.getWorkspace().folders[0].uri;if(t=Vp(t),t.startsWith("../")||t===".."){const s=We.resolve(i.path,t);return[{searchPath:i.with({path:s})}]}const r=mb(t);return[{searchPath:i,pattern:r}]}else{if(t==="./"||t===".\\")return[];{const i=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=i.match(new RegExp(`^${Zn(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Gi);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&mb(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=d(15811,null,o);throw new Error(a)}}}}r(t,i){const r=t.pattern&&i?`${t.pattern}/${i}`:t.pattern||i,s=[{searchPath:t.searchPath,pattern:r}];return r&&!r.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:r+"/**"}),s}t(t,i,r){const s=this.u(d1(t.searchPath),i,r,!1);return s?{...s,includePattern:t.pattern}:null}u(t,i,r,s){let n;const o=y.isUri(t)?t:t.uri;let a=i.excludePattern?.map(g=>{const m=i.excludePattern&&WF(g)?g.uri:void 0;return!m||!(y.isUri(t)&&this.g.extUri.isEqual(t,m))?m:void 0});if(a?.length||(a=[void 0]),r.searchPaths){const g=r.searchPaths.filter(m=>ha(m.searchPath,o))[0];if(g&&!g.pattern)return null;g&&(n=g.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,i)||{},...n||{}},h=y.isUri(t)?Ji(t):t.name,f=a.map(g=>Object.keys(u).length>0?{folder:g,pattern:u}:void 0).filter(g=>g);return{folder:o,folderName:s?h:void 0,excludePattern:f,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof i.disregardIgnoreFiles=="boolean"?i.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof i.disregardGlobalIgnoreFiles=="boolean"?i.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof i.disregardParentIgnoreFiles=="boolean"?i.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof i.ignoreSymlinks=="boolean"?i.ignoreSymlinks:!c.search.followSymlinks}}};Ek=__decorate([__param(0,Ki),__param(1,Zh),__param(2,jN),__param(3,De),__param(4,HF),__param(5,vk)],Ek);function _F(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,r=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(r){let s=e.substr(0,r.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((r.index||0)+1)}}}return{pathPortion:e}}function gb(...e){return e.length?e.reduce((t,i)=>(t[i]=!0,t),Object.create(null)):void 0}function BF(e){return yd(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function qF(e){return[`**/${e}/**`,`**/${e}`].map(i=>i.replace(/\*\*\/\*\*/g,"**"))}function Vp(e){return e.replace(/\\/g,"/")}function mb(e){return Vp(e).replace(/^\.\//,"").replace(/\/+$/g,"")}function Ck(e){return e.replace(/([?*[\]])/g,"[$1]")}var zF=7e3;function VF(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const r=[],s=[];for(const u of i)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):r.push(h)}if(r.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=FT(),a=u=>o({activationEvent:u}),c=Promise.all(r.map(u=>GF(e,u,a))).then(()=>{}),l=JF(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function GF(e,t,i){for(const r of e.folders)if(await e.exists(Qt(y.revive(r),t))){i(`workspaceContains:${t}`);return}}async function JF(e,t,i,r){if(i.length===0)return Promise.resolve(void 0);const s=new rt,n=e.checkExists(e.folders,i,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)},zF);let a=!1;try{a=await n}catch(c){qr(c)||Bt(c)}s.dispose(),clearTimeout(o),a&&r(`workspaceContains:${i.join(",")}`)}var xk=class{constructor(e){this.b=new P,this.onDidChangePassword=this.b.event,this.a=e.getProxy(V.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,i){return this.a.$setPassword(e,t,i)}delete(e,t){return this.a.$deletePassword(e,t)}keys(e){return this.a.$getKeys(e)}},vb=U("IExtHostSecretState"),QF=class{#e;constructor(e,t){this.disposables=new ae,this.a=qe.toKey(e.identifier),this.#e=t,this.onDidChange=Ke.map(Ke.filter(this.#e.onDidChangePassword,i=>i.extensionId===this.a),i=>({key:i.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}keys(){return this.#e.keys(this.a)||[]}},wb=class{constructor(t,i,r){this.f=r,this.d=new Map,this.a=i.getProxy(V.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===Js}getMessage(t,i){const{message:r,args:s,comment:n}=i;if(this.c)return n6(r,s??{});let o=r;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),n6(a??r,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let i;const r=await this.g(t);if(!r){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(r),n=JSON.parse(s);i=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${r}: ${s.message}`);return}i&&this.d.set(t.identifier.value,{contents:i,uri:r})}async g(t){if(t.isBuiltin){const i=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return y.revive(i)}return t.l10n?y.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};wb=__decorate([__param(0,Mt),__param(1,Ne),__param(2,De)],wb);var bb=U("IExtHostLocalizationService"),yb=U("IExtHostManagedSockets"),Sb=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(V.MainThreadManagedSockets)}setFactory(t,i){for(const r of this.d.values())r.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new ZF(t,i),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const i=++this.b,r=await this.c.makeConnection(),s=new ae;return this.d.set(i,new XF(i,r,s)),s.add(se(()=>this.d.delete(i))),s.add(r.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(i),s.dispose()})),s.add(r.onDidClose(n=>{this.a.$onDidManagedSocketClose(i,n?.stack??n?.message),s.dispose()})),s.add(r.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(i,re.wrap(n)))),i}$remoteSocketWrite(t,i){this.d.get(t)?.actual.send(i.buffer)}$remoteSocketEnd(t){const i=this.d.get(t);i&&(i.actual.end(),i.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};Sb=__decorate([__param(0,Ne)],Sb);var ZF=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},XF=class extends Y{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this.D(i)}},Eb,kk=U("IHostUtils"),Cb=Eb=class extends Y{constructor(t,i,r,s,n,o,a,c,l,u,h,f,g){super(),this.Y=f,this.Z=g,this.a=this.D(new P),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=i,this.g=r,this.f=a,this.j=s,this.m=n,this.q=o,this.s=l,this.t=u,this.u=h,this.w=this.g.getProxy(V.MainThreadWorkspace),this.y=this.g.getProxy(V.MainThreadTelemetry),this.z=this.g.getProxy(V.MainThreadExtensionService),this.C=new Cr,this.F=new Cr,this.G=new Cr,this.H=new Cr,this.I=new KF(this.f.extensions.activationEvents),this.L=new Nu(this.I,this.f.extensions.allExtensions);const m=new eo(this.f.extensions.myExtensions);this.J=new Nu(this.I,Dk(this.L,m)),Vn&&(this.q.info(`Creating extension host with the following global extensions: ${xc(this.L)}`),this.q.info(`Creating extension host with the following local extensions: ${xc(this.J)}`)),this.M=new yx(this.g,this.q),this.N=new xk(this.g),this.O=c,this.h=this.B.add(t.createChild(new c1([Lw,this.M],[vb,this.N]))),this.P=this.D(new Tw(this.J,this.L,{onExtensionActivationError:(w,S,C)=>{this.z.$onExtensionActivationError(w,ea(S),C)},actualActivateExtension:async(w,S)=>{if(Nu.isHostExtension(w,this.J,this.L))return await this.z.$activateExtension(w,S),new WO;const C=this.J.getExtensionDescription(w);return this.fb(C,S)}},this.q)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.wb(),this.C.open(),await this.j.waitForInitializeCall(),bi("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){Bt(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,i=0){if(this.W)return;this.W=!0,this.q.info(`Extension host terminating: ${t}`),this.q.flush(),this.t.dispose(),this.P.dispose(),cm(s=>{this.q.error(s)}),this.g.dispose();const r=this.$();Promise.race([Qi(5e3),r]).finally(()=>{this.c.pid?this.q.info(`Extension host with pid ${this.c.pid} exiting with code ${i}`):this.q.info(`Extension host exiting with code ${i}`),this.q.flush(),this.q.dispose(),this.c.exit(i)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const i=await this.z.$getExtension(t);return i&&{...i,identifier:new qe(i.identifier.value),extensionLocation:y.revive(i.extensionLocation)}}ab(t,i){return this.P.activateByEvent(t,i)}bb(t,i){return this.P.activateById(t,i)}activateByIdWithErrors(t,i){return this.bb(t,i).then(()=>{const r=this.P.getActivatedExtension(t);if(r.activationFailed)return Promise.reject(r.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===B.file&&this.c.fsRealpath){const i=t.fsPath;this.R.has(i)||this.R.set(i,this.c.fsRealpath(i));const r=await this.R.get(i);return y.file(r)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new YF(t))),this.Q}async db(t){const i=en.forUris(r=>AT.ignorePathCasing(r));return await Promise.all(t.map(async r=>{if(this.xb(r)){const s=await this.cb(r.extensionLocation);i.set(s,r)}})),i}eb(t){let i=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return i;const r=this.P.getActivatedExtension(t);if(!r)return i;try{typeof r.module.deactivate=="function"&&(i=Promise.resolve(r.module.deactivate()).then(void 0,s=>(this.q.error(s),Promise.resolve(void 0))))}catch(s){this.q.error(`An error occurred when deactivating the extension '${t.value}':`),this.q.error(s)}try{r.disposable.dispose()}catch(s){this.q.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.q.error(s)}return i}async fb(t,i){return this.f.remote.isRemote?this.z.$onWillActivateExtension(t.identifier):await this.z.$onWillActivateExtension(t.identifier),this.hb(t,i).then(r=>{const s=r.activationTimes;return this.z.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,i),this.gb(t,i,"success",s),r},r=>{throw this.gb(t,i,"failure"),r})}gb(t,i,r,s){const n=Ik(t,i);this.y.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:r})}hb(t,i){const r=Ik(t,i);this.y.$publicLog2("activatePlugin",r);const s=this.xb(t);if(!s)return Promise.resolve(new HO(Fp.NONE));this.q.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${i.startup}, activationEvent: '${i.activationEvent}'${t.identifier.value!==i.extensionId.value?`, root cause: ${i.extensionId.value}`:""}`),this.q.flush();const n=this.vb(t),o=new ae,a=new Aw(i.startup);return Promise.all([n?this.zb(t,Qt(t.extensionLocation,s),a):this.yb(t,Qt(t.extensionLocation,s),a),this.ib(t,o)]).then(c=>(bi(`code/extHost/willActivateExtension/${t.identifier.value}`),Eb.jb(this.q,t.identifier,c[0],c[1],o,a))).then(c=>(bi(`code/extHost/didActivateExtension/${t.identifier.value}`),c))}ib(t,i){const r=this.Z.createLanguageModelAccessInformation(t),s=i.add(new _O(t,this.M)),n=i.add(new Sx(t.identifier.value,!1,this.M)),o=i.add(new QF(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?Xa.Test:Xa.Development:Xa.Production,c=this.f.remote.isRemote?Ao.Workspace:Ao.UI;return this.q.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const f=Je(t,"ipc")?this.f.messagePorts?.get(qe.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return r},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(g){return Rm(t.extensionLocation.fsPath,g)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return Rm(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return y.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new ju(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return T(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.t.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!f)return;const g=Ke.buffer(Ke.fromDOMEventEmitter(f,"message",m=>m.data));f.start(),h={onDidReceiveMessage:g,postMessage:f.postMessage.bind(f)}}return h}})})}static jb(t,i,r,s,n,o){return r=r||{activate:void 0,deactivate:void 0},this.kb(t,i,r,s,o).then(a=>new Up(!1,null,o.build(),r,a,se(()=>{n.dispose(),or(s.subscriptions)})))}static kb(t,i,r,s,n){if(typeof r.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${i.value}`);const o=r.activate.apply(globalThis,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(o).then(a=>(n.activateResolveStop(),a))}catch(o){return Promise.reject(o)}else return Promise.resolve(r)}lb(t,i){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:i}).then(void 0,r=>{this.q.error(r)})}mb(t,i=0){const s=Date.now();L5(()=>{for(let n=i;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.z.$setPerformanceMarks(pA()),this.m.getConfigProvider().then(t=>{const i=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),r=this.J.getAllExtensionDescriptions();if(i)this.mb(r);else for(const s of r)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.q.error(o)});this.D(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const i=this.j.workspace?this.j.workspace.folders:[],r=this.pb(i),s=this.rb(),n=Promise.all([s,t,r]).then(()=>{});return Promise.race([n,Qi(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(i=>this.qb(t,i))).then(()=>{})}async qb(t,i){if(this.isActivated(i.identifier))return;const r=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.q,folders:t.map(o=>o.uri),forceUsingSearch:r||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.w.$checkExists(o,a,c)},n=await VF(s,i);if(n)return this.bb(i.identifier,{startup:!0,extensionId:i.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.q.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:i}=this.f.environment;if(!t||!i)throw new Error(d(3037,null));const r=(await this.getExtensionPathIndex()).findSubstr(i),n=await(this.vb(r,i.path)?this.zb(null,i,new Aw(!1)):this.yb(null,i,new Aw(!1)));if(!n||typeof n.run!="function")throw new Error(d(3038,null,i.toString()));return new Promise((o,a)=>{const c=(h,f)=>{h?(Vn&&this.q.error("Test runner called back with error",h),a(h)):(Vn&&(f?this.q.info(`Test runner called back with ${f} failures.`):this.q.info("Test runner called back with successful outcome.")),o(typeof f=="number"&&f>0?1:0))},l=Er(i),u=n.run(l,c);u&&u.then&&u.then(()=>{Vn&&this.q.info("Test runner finished successfully."),o(0)}).catch(h=>{Vn&&this.q.error("Test runner finished with error",h),a(h instanceof Error&&h.stack?h.stack:String(h))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),Qi(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.q.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,i){return this.S[t]=i,se(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:i}=await this.ub(t);return i?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const i=t.indexOf("+");if(i===-1)throw new Aa("Not an authority that can be resolved!",ks.InvalidAuthority);const r=t.substr(0,i);return await this.C.wait(),await this.ab(`onResolveRemoteAuthority:${r}`,!1),{authorityPrefix:r,resolver:this.S[r]}}async $resolveAuthority(t,i){const r=qn.create(!1),s=()=>`[resolveAuthority(${e9(t)},${i})][${r.elapsed()}ms] `,n=k=>this.q.info(`${s()}${k}`),o=k=>this.q.warn(`${s()}${k}`),a=(k,A=void 0)=>this.q.error(`${s()}${k}`,A),c=k=>{if(k instanceof Aa)return{type:"error",error:{code:k._code,message:k._message,detail:k._detail}};throw k},l=async k=>{n(`activating resolver for ${k}...`);const{resolver:A,authorityPrefix:G}=await this.ub(k);if(!A)throw a(`no resolver for ${G}`),new Aa(`No remote extension installed to resolve ${G}.`,ks.NoResolverFound);return{resolver:A,authorityPrefix:G,remoteAuthority:k}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async k=>{if(!(k instanceof Aa)||k._code!==ks.InvalidAuthority)throw k;return o(`resolving nested authorities failed: ${k.message}`),[await l(t)]})}catch(k){return c(k)}const f=new GT;f.cancelAndSet(()=>n("waiting..."),1e3);let g,m;for(const[k,{authorityPrefix:A,resolver:G,remoteAuthority:H}]of h.entries())try{if(k===h.length-1)n("invoking final resolve()..."),bi(`code/extHost/willResolveAuthority/${A}`),g=await G.resolve(H,{resolveAttempt:i,execServer:m}),bi(`code/extHost/didResolveAuthorityOK/${A}`),n("setting tunnel factory..."),this.D(await this.s.setTunnelFactory(G,Qd.isManagedResolvedAuthority(g)?g:void 0));else{if(n(`invoking resolveExecServer() for ${H}`),bi(`code/extHost/willResolveExecServer/${A}`),m=await G.resolveExecServer?.(H,{resolveAttempt:i,execServer:m}),!m)throw new Aa(`Exec server was not available for ${H}`,ks.NoResolverFound);bi(`code/extHost/didResolveExecServerOK/${A}`)}}catch(K){return bi(`code/extHost/didResolveAuthorityError/${A}`),a("returned an error",K),f.dispose(),c(K)}f.dispose();const w={environmentTunnels:g.environmentTunnels,features:g.tunnelFeatures?{elevation:g.tunnelFeatures.elevation,privacyOptions:g.tunnelFeatures.privacyOptions,protocol:g.tunnelFeatures.protocol===void 0?!0:g.tunnelFeatures.protocol}:void 0},S={extensionHostEnv:g.extensionHostEnv,isTrusted:g.isTrusted,authenticationSession:g.authenticationSessionForInitializingExtensions?{id:g.authenticationSessionForInitializingExtensions.id,providerId:g.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${Qd.isManagedResolvedAuthority(g)?"managed authority":`${g.host}:${g.port}`}`);let C;if(Qd.isManagedResolvedAuthority(g)){const k=i;this.Y.setFactory(k,g.makeConnection),C={authority:t,connectTo:new bM(k),connectionToken:g.connectionToken}}else C={authority:t,connectTo:new yM(g.host,g.port),connectionToken:g.connectionToken};return{type:"ok",value:{authority:C,options:S,tunnelInformation:w}}}async $getCanonicalURI(t,i){this.q.info(`$getCanonicalURI invoked for authority (${e9(t)})`);const{resolver:r}=await this.ub(t);if(!r)return null;const s=y.revive(i);if(typeof r.getCanonicalURI>"u")return s;const n=await ti(()=>r.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=$k(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),Vn&&(this.q.info(`$startExtensionHost: global extensions: ${xc(this.L)}`),this.q.info(`$startExtensionHost: local extensions: ${xc(this.J)}`)),this.tb()}$activateByEvent(t,i){return i===1?this.C.wait().then(r=>this.ab(t,!1)):this.G.wait().then(r=>this.ab(t,!1))}async $activate(t,i){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,i),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=$k(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),Vn&&(this.q.info(`$deltaExtensions: global extensions: ${xc(this.L)}`),this.q.info(`$deltaExtensions: local extensions: ${xc(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const i=re.alloc(t),r=Math.random()%256;for(let s=0;s<t;s++)i.writeUInt8(r,s);return i}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}vb(t,i){return i??=t?this.xb(t):i,i?.endsWith(".mjs")||t?.type==="module"&&!i?.endsWith(".cjs")}};Cb=Eb=__decorate([__param(0,Kn),__param(1,kk),__param(2,Ne),__param(3,os),__param(4,Rs),__param(5,De),__param(6,Mt),__param(7,Mw),__param(8,Hw),__param(9,Ec),__param(10,bb),__param(11,yb),__param(12,cb)],Cb);function $k(e,t,i,r){e.addActivationEvents(r.addActivationEvents);const s=new Nu(e,t.getAllExtensionDescriptions());s.deltaExtensions(r.toAdd,r.toRemove);const n=new eo(i.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of r.myToRemove)n.delete(a);for(const a of r.myToAdd)n.add(a);const o=Dk(s,n);return{globalRegistry:s,myExtensions:o}}function Ik(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function xc(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Dn=U("IExtHostExtensionService"),ju=class{#e;#t;#i;constructor(e,t,i,r,s){this.#e=e,this.#t=t,this.#i=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=aa(Er(i.extensionLocation)),this.packageJSON=i,this.extensionKind=r,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#i)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#i)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#i,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function Dk(e,t){return e.getAllExtensionDescriptions().filter(i=>t.has(i.identifier))}var YF=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},KF=class{constructor(e){this.a=new Ks,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},Hu=U("IExtHostApiDeprecationService"),xb=class{constructor(t,i){this.c=i,this.a=new Set,this.b=t.getProxy(V.MainThreadTelemetry)}report(t,i,r){const s=this.d(t,i);this.a.has(s)||(this.a.add(s),i.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${r}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:i.identifier.value,apiId:t}))}d(t,i){return`${t}-${i.identifier.value}`}};xb=__decorate([__param(0,Ne),__param(1,De)],xb);var bJ=Object.freeze(new class{report(e,t,i){}}),Pk=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(De),r=e.get(Ne).getProxy(V.MainThreadErrors);cm(s=>{t.error(s);const n=ea(s);r.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(De),i=e.get(Ne),r=e.get(Dn),s=e.get(Wp),n=e.get(Hu),o=i.getProxy(V.MainThreadExtensionService),a=i.getProxy(V.MainThreadErrors),c=await r.getExtensionRegistry(),l=await r.getExtensionPathIndex(),u=new WeakMap;function h(m,w){if(u.has(m))return u.get(m).stack;let S="",C,k;for(const G of w)S+=`
	at ${G.toString()}`,k=G.getFileName(),!C&&k&&(C=l.findSubstr(y.file(k)));const A=`${m.name||"Error"}: ${m.message||""}${S}`;return u.set(m,{extensionIdentifier:C?.identifier,stack:A}),A}const f=Symbol("prepareStackTrace wrapped");let g=h;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return g},set(m){if(m===h||!m||m[f]){g=m||h;return}g=function(w,S){return h(w,S),m.call(Error,w,S)},Object.assign(g,{[f]:!0})}}),cm(m=>{z4.is(m)||t.error(m);const w=ea(m);let S;if(m instanceof J6?S=m.extension:S=u.get(m)?.extensionIdentifier,!!S)if(z4.is(m)){const C=c.getExtensionDescription(S);C&&n.report(m.name,C,`${m.message}
 FROM: ${m.stack}`)}else{o.$onExtensionRuntimeError(S,w);const C=s.onExtensionError(S,m);t.trace("forwarded error to extension?",C,S)}}),Vc.addListener(m=>{a.$onUnexpectedError(m)})}},eU=class m3{constructor(t,i,r,s,n){this.a=r,this.b=new s2(t,null,s),i=m3.e(i,this.b);const o=new c1(...D2());o.set(Mt,{_serviceBrand:void 0,...i,messagePorts:n}),o.set(Ne,new R2(this.b)),o.set(Jh,new L2(s)),o.set(kk,r);const a=new T2(o,!0);a.invokeFunction(Pk.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(De)),bi("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",i),this.c=a.invokeFunction(c=>c.get(Dn)),this.c.initialize(),a.invokeFunction(Pk.installFullHandler)}async asBrowserUri(t){const i=this.b.getProxy(V.MainThreadExtensionService);return y.revive(await i.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,i){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=y.revive(i.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=y.revive(i.transformIncomingURIs(t.environment.appRoot));const r=t.environment.extensionDevelopmentLocationURI;return r&&(t.environment.extensionDevelopmentLocationURI=r.map(s=>y.revive(i.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=y.revive(i.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=y.revive(i.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=y.revive(i.transformIncomingURIs(t.environment.workspaceStorageHome)),t.nlsBaseUrl=y.revive(i.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=y.revive(i.transformIncomingURIs(t.logsLocation)),t.workspace=i.transformIncomingURIs(t.workspace),t}},tU=function(t){const i=r=>{globalThis.removeEventListener("message",i);const s=r.data;Object.defineProperties(globalThis,{postMessage:{value(n,o){s.postMessage(n,o)}},onmessage:{get(){return s.onmessage},set(n){s.onmessage=n}}}),s.addEventListener("message",n=>{globalThis.dispatchEvent(new MessageEvent("message",{data:n.data,ports:n.ports?[...n.ports]:void 0}))}),s.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(t)};globalThis.addEventListener("message",i)}.toString(),iU=class extends EventTarget{constructor(e,t,i){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const r=`((${tU})('${t}'))`,s=new Blob([r],{type:"application/javascript"}),n=URL.createObjectURL(s),o=new MessageChannel,a=n,c={type:"_newWorker",id:a,port:o.port2,url:n,options:i};e(c,[o.port2]),this.postMessage=o.port1.postMessage.bind(o.port1),this.terminate=()=>{e({type:"_terminateWorker",id:a}),URL.revokeObjectURL(n),o.port1.close(),o.port2.close()},Object.defineProperties(this,{onmessage:{get(){return o.port1.onmessage},set(l){o.port1.onmessage=l}},onmessageerror:{get(){return o.port1.onmessageerror},set(l){o.port1.onmessageerror=l}}}),o.port1.addEventListener("messageerror",l=>{const u=new MessageEvent("messageerror",{data:l.data});this.dispatchEvent(u)}),o.port1.addEventListener("message",l=>{const u=new MessageEvent("message",{data:l.data});this.dispatchEvent(u)}),o.port1.start()}},yJ=new x("inOutput",!1),SJ=new x("activeLogOutput",!1),EJ=new x("activeLogOutput.isLog",!1),CJ=new x("activeLogOutput.levelSettable",!1),xJ=new x("activeLogOutput.level",""),kJ=new x("activeLogOutput.levelIsDefault",!1),$J=new x("outputView.scrollLock",!1),IJ=new x("activeOutputChannel",""),DJ=new x("output.filter.trace",!0),PJ=new x("output.filter.debug",!0),AJ=new x("output.filter.info",!0),TJ=new x("output.filter.warning",!0),RJ=new x("output.filter.error",!0),LJ=new x("outputFilterFocus",!1),NJ=new x("output.filter.categories",""),MJ=U("outputService"),Wu;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(Wu||(Wu={}));var rU={OutputChannels:"workbench.contributions.outputChannels"};function sU(e){return Array.isArray(e.source)}var nU=class extends Y{constructor(){super(...arguments),this.a=new Map,this.b=this.D(new P),this.onDidRegisterChannel=this.b.event,this.c=this.D(new P),this.onDidRemoveChannel=this.c.event,this.f=this.D(new P),this.onDidUpdateChannelSources=this.f.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}updateChannelSources(e,t){const i=this.a.get(e);i&&sU(i)&&(i.source=t,this.f.fire(i))}removeChannel(e){const t=this.a.get(e);t&&(this.a.delete(e),this.c.fire(t))}};Nt.add(rU.OutputChannels,new nU);var Ak=class extends lS{constructor(e,t,i,r,s){super(),this.id=e,this.name=t,this.q=i,this.r=r,this.extension=s,this.n=0,this.visible=!1,this.setLevel(i.getLevel()),this.D(i.onDidChangeLogLevel(n=>this.setLevel(n))),this.D(se(()=>this.r.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.q.flush(),this.r.$update(this.id,Wu.Clear,e)}replace(e){const t=this.n;this.info(e),this.r.$update(this.id,Wu.Replace,t),this.visible&&this.q.flush()}show(e,t){this.q.flush(),this.r.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.r.$close(this.id)}m(e,t){this.n+=re.fromString(t).byteLength,x2(this.q,e,t),this.visible&&(this.q.flush(),this.r.$update(this.id,Wu.Append))}},oU=class extends Ak{appendLine(e){this.append(e)}},kb=class{constructor(t,i,r,s,n,o){this.j=i,this.k=r,this.l=s,this.m=n,this.n=o,this.d=new wt,this.f=new wt,this.g=1,this.h=new Map,this.i=null,this.a=t.getProxy(V.MainThreadOutputService),this.b=this.l.extUri.joinPath(i.logsLocation,`output_logging_${AF(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.i=t;for(const[i,r]of this.h)r.visible=i===this.i}createOutputChannel(t,i,r){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof i=="object"&&i.log,n=Oe(i)?i:void 0;if(Oe(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");const o=new ae;let a,c=this.j.environment.extensionLogLevel?.find(([u])=>qe.equals(r.identifier,u))?.[1],l;if(s){const u=this.l.extUri.joinPath(this.j.logsLocation,r.identifier.value);l=this.l.extUri.joinPath(u,`${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`);const h=this.f.get(l);if(h)return h;c=this.m.getLogLevel(l)??c,a=this.p(t,l,c,r,o)}else a=this.o(t,n,r,o);if(a.then(u=>{this.h.set(u.id,u),u.visible=u.id===this.i,o.add(se(()=>{this.h.delete(u.id),l&&this.f.delete(l)}))}),l){const u=this.s(t,c??this.n.getLevel(),a,o);return this.f.set(l,u),u}return this.r(t,a,o)}async o(t,i,r,s){this.c||(this.c=this.k.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.l.extUri.joinPath(n,`${this.g++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.m.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,i,r.identifier.value);return s.add(se(()=>this.m.deregisterLogger(o))),new Ak(c,t,a,this.a,r)}async p(t,i,r,s,n){await this.q(i);const o=`${s.identifier.value}.${this.l.extUri.basename(i)}`,a=n.add(this.m.createLogger(i,{id:o,name:t,logLevel:r,extensionId:s.identifier.value}));return n.add(se(()=>this.m.deregisterLogger(i))),new oU(o,t,a,this.a,s)}q(t){const i=this.l.extUri.dirname(t);let r=this.d.get(i);return r||this.d.set(i,r=(async()=>{try{await this.k.value.createDirectory(i)}catch(s){if(cd(s)!==ye.FileExists)throw s}})()),r}r(t,i,r){const s=()=>{if(r.isDisposed)throw new Error("Channel has been closed")};return i.then(n=>r.add(n)),{get name(){return t},append(n){s(),i.then(o=>o.append(n))},appendLine(n){s(),i.then(o=>o.appendLine(n))},clear(){s(),i.then(n=>n.clear())},replace(n){s(),i.then(o=>o.replace(n))},show(n,o){s(),i.then(a=>a.show(n,o))},hide(){s(),i.then(n=>n.hide())},dispose(){r.dispose()}}}s(t,i,r,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new P);function a(c){i=c,o.fire(c)}return r.then(c=>{c.logLevel!==i&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.r(t,r,s),get logLevel(){return i},onDidChangeLogLevel:o.event,trace(c,...l){n(),r.then(u=>u.trace(c,...l))},debug(c,...l){n(),r.then(u=>u.debug(c,...l))},info(c,...l){n(),r.then(u=>u.info(c,...l))},warn(c,...l){n(),r.then(u=>u.warn(c,...l))},error(c,...l){n(),r.then(u=>u.error(c,...l))}}}};kb=__decorate([__param(0,Ne),__param(1,Mt),__param(2,Hp),__param(3,ma),__param(4,ro),__param(5,De)],kb);var Tk=U("IExtHostOutputService"),_u,$b=class{static{_u=this}static{this.c=0}static{this.d=250}constructor(t,i){this.h=i,this.f=new Map,this.g=t.getProxy(V.MainThreadDecorations)}registerFileDecorationProvider(t,i){const r=_u.c++;this.f.set(r,{provider:t,extensionDescription:i}),this.g.$registerDecorationProvider(r,i.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(r,null);return}const o=nr(n);if(o.length<=_u.d){this.g.$onDidChange(r,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",i.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:ZA(u.path,"/")})),c=mP(a,(u,h)=>u.rank-h.rank||Xn(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const f of u){const g=Qn(f.uri.path);if(h!==g&&(h=g,l.push(f.uri)>=_u.d))break e}}this.g.$onDidChange(r,l)});return new Ee(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(r),this.f.delete(r)})}async $provideDecorations(t,i,r){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(i.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(y.revive(c),r));if(!u)return;try{Gv.validate(u),u.badge&&typeof u.badge!="string"&&T(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};$b=_u=__decorate([__param(0,Ne),__param(1,De)],$b);var Rk=U("IExtHostDecorations"),aU=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=Cc(e);const i=this.a,r=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(i.length+s),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=Cc(e),t=Cc(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=Cc(e),t=Cc(t);const i=this.a,r=this.b;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(i.length-t),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=Cc(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let i=t;i<=e;i++)this.b[i]=this.b[i-1]+this.a[i];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.a.length-1,r=0,s=0,n=0;for(;t<=i;)if(r=t+(i-t)/2|0,s=this.b[r],n=s-this.a[r],e<n)i=r-1;else if(e>=s)t=r+1;else break;return new cU(r,e-n)}},cU=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},lU=class{constructor(e,t,i,r){this.a=e,this.b=t,this.c=i,this.d=r,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const i of t)this.k(i.range),this.l(new Xi(i.range.startLineNumber,i.range.startColumn),i.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this.b[r].length+e;this.f=new aU(i)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const i=a6(t);if(i.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]+this.b[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this.b.splice(e.lineNumber+s-1,0,i[s]),r[s-1]=i[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,r)}},Lk="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function uU(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of Lk)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}var hU=uU();function Nk(e){let t=hU;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var Mk=new Gs;Mk.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Ok(e,t,i,r,s){if(t=Nk(t),s||(s=Dt.first(Mk)),i.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:r+=l,i=i.substring(l,e+s.maxLen/2),Ok(e,t,i,r,s)}const n=Date.now(),o=e-1-r;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=dU(t,i,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function dU(e,t,i,r){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=i&&e.lastIndex>=i)return s;if(r>0&&n>r)return null}return null}var Ib=new Map;function fU(e,t){t?Ib.set(e,t):Ib.delete(e)}function pU(e){return Ib.get(e)}var gU=class extends lU{constructor(e,t,i,r,s,n,o,a,c=!0){super(t,i,r,s),this.o=e,this.p=n,this.q=o,this.r=a,this.s=c,this.n=!1}dispose(){fi(!this.n),this.n=!0,this.q=!1}equalLines(e){return wi(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===B.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},get encoding(){return e.r},save(){return e.t()},getText(t){return t?e.u(t):e.getText()},get eol(){return e.c===`
`?Tr.LF:Tr.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.v(t)},offsetAt(t){return e.w(t)},positionAt(t){return e.x(t)},validateRange(t){return e.y(t)},validatePosition(t){return e.z(t)},getWordRangeAtPosition(t,i){return e.A(t,i)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){fi(!this.n),this.p=e}_acceptIsDirty(e){fi(!this.n),this.q=e}_acceptEncoding(e){fi(!this.n),this.r=e}t(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}u(e){const t=this.y(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const i=this.c,r=t.start.line,s=t.end.line,n=[];n.push(this.b[r].substring(t.start.character));for(let o=r+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(i)}v(e){let t;if(e instanceof xe?t=e.line:typeof e=="number"?t=e:!this.s&&xe.isPosition(e)&&(t=e.line),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new mU(t,this.b[t],t===this.b.length-1)}w(e){return e=this.z(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}x(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),i=this.b[t.index].length;return new xe(t.index,Math.min(t.remainder,i))}y(e){if(this.s){if(!(e instanceof Se))throw new Error("Invalid argument")}else if(!Se.isRange(e))throw new Error("Invalid argument");const t=this.z(e.start),i=this.z(e.end);return t===e.start&&i===e.end?e:new Se(t.line,t.character,i.line,i.character)}z(e){if(this.s){if(!(e instanceof xe))throw new Error("Invalid argument")}else if(!xe.isPosition(e))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:i}=e,r=!1;if(t<0)t=0,i=0,r=!0;else if(t>=this.b.length)t=this.b.length-1,i=this.b[t].length,r=!0;else{const s=this.b[t].length;i<0?(i=0,r=!0):i>s&&(i=s,r=!0)}return r?new xe(t,i):e}A(e,t){const i=this.z(e);if(!t)t=pU(this.p);else if(o6(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const r=Ok(i.character+1,Nk(t),this.b[i.line],0);if(r)return new Se(i.line,r.startColumn-1,i.line,r.endColumn-1)}},mU=class{constructor(e,t,i){this.a=e,this.b=t,this.c=i}get lineNumber(){return this.a}get text(){return this.b}get range(){return new Se(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new Se(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Gp=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},UJ=new Gp("id#"),vU=class v3{static{this.c=new Gp("TextEditorDecorationType")}constructor(t,i,r){const s=v3.c.nextId();t.$registerTextEditorDecorationType(i.identifier,s,A0.from(r)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},wU=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let i=null;if(e instanceof xe)i=new Se(e,e);else if(e instanceof Se)i=e;else throw new Error("Unrecognized location");this.l(i,t,!1)}insert(e,t){this.k(),this.l(new Se(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof Se)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,i){const r=this.c.validateRange(e);this.g.push({range:r,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this.k(),e!==Tr.LF&&e!==Tr.CRLF)throw Ce("endOfLine");this.h=e}},bU=class{constructor(e,t,i,r){this.c=e,this.d=t,this._accept(i),this.e=r;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=nc.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:nc.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const r=this.m(e.tabSize);r==="auto"?(i=!0,t.tabSize=r):typeof r=="number"&&this.f!==r&&(this.f=r,i=!0,t.tabSize=r)}if(typeof e.indentSize<"u"){const r=this.o(e.indentSize);r==="tabSize"?(i=!0,t.indentSize=r):typeof r=="number"&&this.h!==r&&(this.g=r,this.h=r,i=!0,t.indentSize=r)}if(typeof e.insertSpaces<"u"){const r=this.q(e.insertSpaces);r==="auto"?(i=!0,t.insertSpaces=r):this.j!==r&&(this.j=r,i=!0,t.insertSpaces=r)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,i=!0,t.lineNumbers=nc.from(e.lineNumbers)),i&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(i=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(i)})}},yU=class{constructor(e,t,i,r,s,n,o,a){this.id=e,this.k=t,this.l=i,this.g=!1,this.h=new Set,this.c=s,this.d=new bU(this.k,this.id,n,i),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return r.value},set document(l){throw new Un("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof Kr))throw Ce("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof Kr)))throw Ce("selections");l.length===0&&(l=[new Kr(0,0,0,0)]),c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new Un("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new Un("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new wU(r.value,u);return l(h),c.n(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let f;if(!u||Array.isArray(u)&&u.length===0)f=c.c.map(g=>O.from(g));else if(u instanceof xe){const{lineNumber:g,column:m}=ze.from(u);f=[{startLineNumber:g,startColumn:m,endLineNumber:g,endColumn:m}]}else if(u instanceof Se)f=[O.from(u)];else{f=[];for(const g of u)if(g instanceof Se)f.push(O.from(g));else{const{lineNumber:m,column:w}=ze.from(g);f.push({startLineNumber:m,startColumn:w,endLineNumber:m,endColumn:w})}}return h.keepWhitespace===void 0&&(h.keepWhitespace=!1),t.$tryInsertSnippet(e,r.value.version,l.value,f,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(F9(u))return t.$trySetDecorations(e,l.key,QM(u));{const f=new Array(4*u.length);for(let g=0,m=u.length;g<m;g++){const w=u[g];f[4*g]=w.start.line+1,f[4*g+1]=w.start.character+1,f[4*g+2]=w.end.line+1,f[4*g+3]=w.end.character+1}return t.$trySetDecorationsFast(e,l.key,f)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,O.from(l),u||nf.Default))},show(l){t.$tryShowEditor(e,Ut.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){fi(!this.g),this.g=!0}_acceptOptions(e){fi(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){fi(!this.g),this.e=e}_acceptViewColumn(e){fi(!this.g),this.f=e}_acceptSelections(e){fi(!this.g),this.c=e}_acceptDiffInformation(e){fi(!this.g),this.j=e}async m(){const e=this.c.map(Nr.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(s=>s.range);i.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=i.length-1;s<n;s++){const o=i[s].end;if(i[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map(s=>({range:O.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:typeof t.setEndOfLine=="number"?oc.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},SU=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},Db=class{constructor(t,i){this.h=t,this.i=i,this.a=null,this.b=new Map,this.c=new wt,this.d=new P,this.e=new P,this.f=new P,this.g=new P,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const i=[],r=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=y.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),i.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=y.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==B.vscodeNotebookCell&&o.scheme!==B.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new SU(new gU(this.h.getProxy(V.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty,n.encoding)),this.c.set(o,a),r.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=y.revive(n.documentUri);fi(this.c.has(o),`document '${o}' does not exist`),fi(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new yU(n.id,this.h.getProxy(V.MainThreadTextEditors),this.i,new It(()=>a.document),n.selections.map(Nr.to),n.options,n.visibleRanges.map(l=>O.to(l)),typeof n.editorPosition=="number"?Ut.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(fi(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),or(i),or(s),t.removedDocuments&&this.e.fire(i),t.addedDocuments&&this.d.fire(r),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return Dt.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const i=this.b.get(this.a);return t?i:i?.value}allEditors(){return[...this.b.values()]}};Db=__decorate([__param(0,Ne),__param(1,De)],Db);var kc=U("IExtHostDocumentsAndEditors"),Fk=U("productService"),EU="vscode://schemas/vscode-product",CU={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiSettingsSearch:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authIssuers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authIssuers.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authProviderSpecific:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authProviderSpecific.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},authenticationChallenges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authenticationChallenges.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatContextProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatContextProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatOutputRenderer:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatOutputRenderer.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:11},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts",version:4},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatSessionsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatSessionsProvider.d.ts",version:3},chatStatusItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribLanguageModelToolSets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLanguageModelToolSets.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlArtifactGroupMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlArtifactGroupMenu.d.ts"},contribSourceControlArtifactMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlArtifactMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},dataChannels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.dataChannels.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:4},devDeviceId:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.devDeviceId.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelProxy:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelProxy.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageModelThinkingPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelThinkingPart.d.ts",version:1},languageModelToolResultAudience:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelToolResultAudience.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},markdownAlertSyntax:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.markdownAlertSyntax.d.ts"},mcpToolDefinitions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mcpToolDefinitions.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},remoteCodingAgents:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.remoteCodingAgents.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmArtifactProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmArtifactProvider.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmProviderOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmProviderOptions.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskExecutionTerminal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskExecutionTerminal.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},taskProblemMatcherStatus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textDocumentChangeReason:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textDocumentChangeReason.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},toolProgress:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts"},treeItemMarkdownLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeItemMarkdownLabel.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Jp=Object.freeze(CU),Pb=Nt.as(Ld.JSONContribution),xU=class em{static a(t){const i=new eo;for(let r=0,s=t.length;r<s;r++)i.add(t[r].description.identifier);return i}static compute(t,i){if(!t||!t.length)return new em(i,[]);if(!i||!i.length)return new em([],t);const r=this.a(t),s=this.a(i),n=i.filter(a=>!r.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new em(n,o)}constructor(t,i){this.added=t,this.removed=i}},kU=class{constructor(e,t,i){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=i,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=xU.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){Bt(e)}}},$U={type:"string",enum:["ui","workspace"],enumDescriptions:[d(15504,null),d(15505,null)]},Uk="vscode://schemas/vscode-extensions",Ab={properties:{engines:{type:"object",description:d(15506,null),properties:{vscode:{type:"string",description:d(15507,null),default:"^1.22.0"}}},publisher:{description:d(15508,null),type:"string"},displayName:{description:d(15509,null),type:"string"},categories:{description:d(15510,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:z6},{type:"string",const:"Languages",deprecationMessage:d(15511,null)}]}},galleryBanner:{type:"object",description:d(15512,null),properties:{color:{description:d(15513,null),type:"string"},theme:{description:d(15514,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(15515,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(15516,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(15517,null)},enabledApiProposals:{markdownDescription:d(15518,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Jp).map(e=>e),markdownEnumDescriptions:Object.values(Jp).map(e=>e.proposal)}},api:{markdownDescription:d(15519,null),type:"string",enum:["none"],enumDescriptions:[d(15520,null)]},activationEvents:{description:d(15521,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(15522,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(15523,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(15524,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(15525,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(15526,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(15527,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(15528,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(15529,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(15530,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(15531,null),body:"onStartupFinished"},{label:"onTaskType",description:d(15532,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(15533,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(15534,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(15535,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(15536,null)},{label:"onUri",body:"onUri",description:d(15537,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(15538,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(15539,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(15540,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(15541,null)},{label:"onRenderer",description:d(15542,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(15543,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(15544,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(15545,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(15546,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(15547,null)},{label:"onLanguageModelChatProvider",body:"onLanguageModelChatProvider:${1:vendor}",description:d(15548,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(15549,null)},{label:"onTerminal",body:"onTerminal:{1:shellType}",description:d(15550,null)},{label:"onTerminalShellIntegration",body:"onTerminalShellIntegration:${1:shellType}",description:d(15551,null)},{label:"onMcpCollection",description:d(15552,null),body:"onMcpCollection:${2:collectionId}"},{label:"*",description:d(15553,null),body:"*"}]}},badges:{type:"array",description:d(15554,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(15555,null)},href:{type:"string",description:d(15556,null)},description:{type:"string",description:d(15557,null)}}}},markdown:{type:"string",description:d(15558,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(15559,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(15560,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:cv}},extensionPack:{description:d(15561,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:cv}},extensionKind:{description:d(15562,null),type:"array",items:$U,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(15563,null)},{body:["workspace"],description:d(15564,null)},{body:["ui","workspace"],description:d(15565,null)},{body:["workspace","ui"],description:d(15566,null)},{body:[],description:d(15567,null)}]},capabilities:{description:d(15568,null),type:"object",properties:{virtualWorkspaces:{description:d(15569,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(15570,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(15571,null),d(15572,null),d(15573,null)]},description:{type:"string",markdownDescription:d(15574,null)}}},untrustedWorkspaces:{description:d(15575,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(15576,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(15577,null),d(15578,null),d(15579,null)]},restrictedConfigurations:{description:d(15580,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(15581,null)}}}}},sponsor:{description:d(15582,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(15583,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(15584,null),type:"string"},"vscode:uninstall":{description:d(15585,null),type:"string"}}},icon:{type:"string",description:d(15586,null)},l10n:{type:"string",description:d(15587,null)},pricing:{type:"string",markdownDescription:d(15588,null),enum:["Free","Trial"],default:"Free"}}},IU=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new kU(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&cM.register(e.extensionPoint,e.activationEventsGenerator),Ab.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Pb.registerSchema(Uk,Ab),t}getExtensionPoints(){return Array.from(this.a.values())}},jk={ExtensionsRegistry:"ExtensionsRegistry"};Nt.add(jk.ExtensionsRegistry,new IU);var Hk=Nt.as(jk.ExtensionsRegistry);Pb.registerSchema(Uk,Ab),Pb.registerSchema(EU,{properties:{extensionEnabledApiProposals:{description:d(15589,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Jp),markdownEnumDescriptions:Object.values(Jp).map(e=>e.proposal)}}]}}}});var DU={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(12626,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(12627,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(12628,null),default:""}}},Tb;(function(e){function t(i,r,s){if(!i)return;const n=Oe(i.type)?i.type:void 0;if(!n||n.length===0){s.error(d(12629,null));return}const o=[];if(Array.isArray(i.required))for(const a of i.required)Oe(a)&&o.push(a);return{extensionId:r.value,taskType:n,required:o,properties:i.properties?ot(i.properties):{},when:i.when?yt.deserialize(i.when):void 0}}e.from=t})(Tb||(Tb={}));var PU=Hk.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:function*(e){for(const t of e)t.type&&(yield`onTaskType:${t.type}`)},jsonSchema:{description:d(12630,null),type:"array",items:DU}}),AU=class{constructor(){this.d=new P,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{PU.setHandler((i,r)=>{this.c=void 0;try{for(const s of r.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of r.added){const n=s.value;for(const o of n){const a=Tb.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(r.removed.length>0||r.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=ot(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this.c={oneOf:e}}return this.c}},TU=new AU,RU={IconContribution:"base.contributions.icons"},Wk;(function(e){function t(i,r){let s=i.defaults;for(;vt.isThemeIcon(s);){const n=$c.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(Wk||(Wk={}));var _k;(function(e){function t(r){return{weight:r.weight,style:r.style,src:r.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function i(r){const s=n=>Oe(n)?n:void 0;if(r&&Array.isArray(r.src)&&r.src.every(n=>Oe(n.format)&&Oe(n.location)))return{weight:s(r.weight),style:s(r.style),src:r.src.map(n=>({format:n.format,location:y.parse(n.location)}))}}e.fromJSONObject=i})(_k||(_k={}));var LU=/^([\w_-]+)$/,NU=d(2634,null),MU=class extends Y{constructor(){super(),this.a=this.D(new P),this.onDidChange=this.a.event,this.f={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2635,null),pattern:LU.source,patternErrorMessage:NU},fontCharacter:{type:"string",description:d(2636,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.g={type:"string",pattern:`^${vt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.h={}}registerIcon(e,t,i,r){const s=this.b[e];if(s){if(i&&!s.description){s.description=i,this.f.properties[e].markdownDescription=`${i} $(${e})`;const a=this.g.enum.indexOf(e);a!==-1&&(this.g.enumDescriptions[a]=i),this.a.fire()}return s}const n={id:e,description:i,defaults:t,deprecationMessage:r};this.b[e]=n;const o={$ref:"#/definitions/icons"};return r&&(o.deprecationMessage=r),i&&(o.markdownDescription=`${i}: $(${e})`),this.f.properties[e]=o,this.g.enum.push(e),this.g.enumDescriptions.push(i||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.f.properties[e];const t=this.g.enum.indexOf(e);t!==-1&&(this.g.enum.splice(t,1),this.g.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.f}getIconReferenceSchema(){return this.g}registerIconFont(e,t){const i=this.h[e];return i||(this.h[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.h[e]}getIconFont(e){return this.h[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;vt.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.b).map(s=>this.b[s]);for(const s of r.filter(n=>!!n.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${vt.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of r.filter(n=>!vt.isThemeIcon(n.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}},$c=new MU;Nt.add(RU.IconContribution,$c);function Bu(e,t,i,r){return $c.registerIcon(e,t,i,r)}function OU(){const e=tR();for(const t in e){const i="\\"+e[t].toString(16);$c.registerIcon(t,{fontCharacter:i})}}OU();var Bk="vscode://schemas/icons",qk=Nt.as(Ld.JSONContribution);qk.registerSchema(Bk,$c.getIconSchema());var zk=new Yn(()=>qk.notifySchemaChanged(Bk),200);$c.onDidChange(()=>{zk.isScheduled()||zk.schedule()});var HJ=Bu("widget-close",ie.close,d(2637,null)),WJ=Bu("goto-previous-location",ie.arrowUp,d(2638,null)),_J=Bu("goto-next-location",ie.arrowDown,d(2639,null)),BJ=vt.modify(ie.sync,"spin"),qJ=vt.modify(ie.loading,"spin"),FU="settings",zJ=new x("taskRunning",!1,d(12631,null)),VJ=new x("taskTerminalActive",!1,d(12632,null)),GJ=Th(12635,"Tasks"),Qp;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Qp||(Qp={})),function(e){function t(i){if(!i)return e.Strong;switch(i.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Qp||(Qp={}));var Vk;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(Vk||(Vk={}));var qu;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(qu||(qu={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(qu||(qu={}));var zu;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(zu||(zu={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(zu||(zu={}));var Vu;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Vu||(Vu={})),function(e){function t(i){switch(i.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Vu||(Vu={}));var Gk;(function(e){e.defaults={echo:!0,reveal:qu.Always,revealProblems:zu.Never,focus:!1,panel:Vu.Shared,showReuseMessage:!0,clear:!1,preserveTerminalName:!1}})(Gk||(Gk={}));var Zp;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(Zp||(Zp={})),function(e){function t(r){switch(r.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function i(r){switch(r){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=i}(Zp||(Zp={}));var Jk;(function(e){function t(i){return Oe(i)?i:i.value}e.value=t})(Jk||(Jk={}));var Qk;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(r){return r===e.Clean._id||r===e.Build._id||r===e.Rebuild._id||r===e.Test._id}e.is=t;function i(r){if(r!==void 0)return Oe(r)?t(r)?{_id:r,isDefault:!1}:void 0:r}e.from=i})(Qk||(Qk={}));var Zk;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(Zk||(Zk={}));var Xk;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(i){switch(i){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(Xk||(Xk={}));var Yk;(function(e){e.parallel="parallel",e.sequence="sequence"})(Yk||(Yk={}));var Rb;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(Rb||(Rb={}));var Kk;(function(e){e.terminateNewest="terminateNewest",e.terminateOldest="terminateOldest",e.prompt="prompt",e.warn="warn",e.silent="silent"})(Kk||(Kk={}));var e$;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:Rb.default,instanceLimit:1,instancePolicy:"prompt"}})(e$||(e$={}));var Xp;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Xp||(Xp={})),function(e){e._default=e.Terminal}(Xp||(Xp={}));var t$;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(t$||(t$={}));var i$;(function(e){e.SingleRun="singleRun",e.Background="background"})(i$||(i$={}));var Ls;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(Ls||(Ls={}));var r$;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect",e[e.ChatAgent=5]="ChatAgent"})(r$||(r$={}));var s$;(function(e){function t(u){return{taskId:u._id,taskName:u.configurationProperties.name,runType:u.configurationProperties.isBackground?"background":"singleRun",group:u.configurationProperties.group,__task:u}}function i(u,h,f){return{...t(u),kind:Ls.Start,terminalId:h,resolvedVariables:f}}e.start=i;function r(u,h,f){return{...t(u),kind:Ls.ProcessStarted,terminalId:h,processId:f}}e.processStarted=r;function s(u,h,f,g){return{...t(u),kind:Ls.ProcessEnded,terminalId:h,exitCode:f,durationMs:g}}e.processEnded=s;function n(u,h,f){return{...t(u),kind:Ls.Inactive,terminalId:h,durationMs:f}}e.inactive=n;function o(u,h,f){return{...t(u),kind:Ls.Terminated,exitReason:f,terminalId:h}}e.terminated=o;function a(u,h,f){return{...t(h),kind:u,terminalId:f}}e.general=a;function c(u,h,f){return{...t(u),kind:Ls.ProblemMatcherEnded,hasErrors:h}}e.problemMatcherEnded=c;function l(){return{kind:Ls.Changed}}e.changed=l})(s$||(s$={}));var Yp;(function(e){function t(r){const s=Object.keys(r).sort();let n="";for(const o of s){let a=r[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function i(r){const n={_key:t(r),type:r.taskType};return Object.assign(n,r),n}e.create=i})(Yp||(Yp={}));var n$;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging",e.NotifyWindowOnTaskCompletion="task.notifyWindowOnTaskCompletion"})(n$||(n$={}));var o$;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(o$||(o$={}));var a$;(function(e){function t(i,r){const s=TU.get(i.type);if(s===void 0){const c=ot(i);return delete c._key,Yp.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=i[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=ot(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:r.error(d(12633,null,JSON.stringify(i,void 0,0),c));return}}}return Yp.create(n)}e.createTaskIdentifier=t})(a$||(a$={}));var JJ=Bu("rerun-task",ie.refresh,d(12634,null)),Kp;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Kp||(Kp={}));var eg;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(eg||(eg={}));var Lb;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Lb||(Lb={}));var Gu;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function i(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=Lb.from(s.options)),n}e.from=i;function r(s){if(s!=null)return new Ba(s.process,s.args,s.options)}e.to=r})(Gu||(Gu={}));var Nb;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Nb||(Nb={}));var Ju;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function i(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=Nb.from(s.options)),n}e.from=i;function r(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new $o(s.commandLine,s.options):new $o(s.command,s.args?s.args:[],s.options)}e.to=r})(Ju||(Ju={}));var Ns;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function i(s){return{customExecution:"customExecution"}}e.from=i;function r(s,n){return n.get(s)}e.to=r})(Ns||(Ns={}));var c$;(function(e){function t(i,r){let s;return i.scope!==void 0&&typeof i.scope!="number"?s=i.scope.uri:i.scope!==void 0&&typeof i.scope=="number"&&(i.scope===mn.Workspace&&r&&r.workspaceFile?s=r.workspaceFile:s=FU),{id:i._id,workspaceFolder:s}}e.from=t})(c$||(c$={}));var Mb;(function(e){function t(i){if(i!=null)return{_id:i.id,isDefault:i.isDefault}}e.from=t})(Mb||(Mb={}));var Pn;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=i(a,n);c&&o.push(c)}return o}e.fromMany=t;function i(s,n){if(s==null)return;let o;s.execution instanceof Ba?o=Gu.from(s.execution):s.execution instanceof $o?o=Ju.from(s.execution):s.execution&&s.execution instanceof Ov&&(o=Ns.from(s.execution));const a=Kp.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=mn.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:Mb.from(s.group),presentationOptions:eg.from(s.presentationOptions),problemMatchers:nr(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=i;async function r(s,n,o){if(s==null)return;let a;Gu.is(s.execution)?a=Gu.to(s.execution):Ju.is(s.execution)?a=Ju.to(s.execution):Ns.is(s.execution)&&(a=Ns.to(s._id,o));const c=Kp.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(y.revive(s.source.scope)):l=mn.Workspace),!c||!l)return;const u=new lf(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=Ql.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new Ql(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=eg.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=r})(Pn||(Pn={}));var Ob;(function(e){function t(r){return r}e.from=t;function i(r){if(r)return Object.assign(Object.create(null),r)}e.to=i})(Ob||(Ob={}));var Fb=class{#e;constructor(e,t,i){this._id=t,this.b=i,this.#e=e}get task(){return this.b}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}get terminal(){return this.a}set terminal(e){this.a=e}},Ub=class{constructor(t,i,r,s,n,o,a,c){this.q=new P,this.r=new P,this.s=new P,this.u=new P,this.v=new P,this.w=new P,this.a=t.getProxy(V.MainThreadTask),this.b=r,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,i,r){if(!r)return new Ee(()=>{});const s=this.z();return this.j.set(s,{type:i,provider:r,extension:t}),this.a.$registerTaskProvider(s,i),new Ee(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,i){this.a.$registerTaskSystem(t,i)}fetchTasks(t){return this.a.$fetchTasks(Ob.from(t)).then(async i=>{const r=[];for(const s of i){const n=await Pn.to(s,this.b,this.m);n&&r.push(n)}return r})}get taskExecutions(){const t=[];return this.k.forEach(i=>t.push(i)),t}terminateTask(t){if(!(t instanceof Fb))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,i,r){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(i,await s.callback(r))),this.p=t.id;const n=await this.B(t),o=this.e.getTerminalById(i)?.value;n&&(n.terminal=o),this.q.fire({execution:n})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const i=await this.B(t);this.l.delete(t.id),this.k.delete(t.id),this.D(t),this.r.fire({execution:i})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const i=await this.B(t.id);this.s.fire({execution:i,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const i=await this.B(t.id);this.u.fire({execution:i,exitCode:t.exitCode})}get onDidStartTaskProblemMatchers(){return this.v.event}async $onDidStartTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.v.fire({execution:i})}get onDidEndTaskProblemMatchers(){return this.w.event}async $onDidEndTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.w.fire({execution:i,hasErrors:t.hasErrors})}$provideTasks(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));const s=[],n=ti(()=>r.provider.provideTasks(Be.None)).then(o=>this.x(i,s,r,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));if(i.definition.type!==r.type)throw new Error(`Unexpected: Task of type [${i.definition.type}] cannot be resolved by provider of type [${r.type}].`);const s=await Pn.to(i,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await r.provider.resolveTask(s,Be.None);if(!n)return;this.C(n,r);const o=Pn.from(n,r.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Ns.is(o.execution)&&await this.A(o,n,!0),await this.y(o)}z(){return this.h++}async A(t,i,r){const s=await this.a.$createTaskId(t);!r&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,i.execution)),this.m.set(s,i.execution)}async B(t,i){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new jn("Unexpected: The specified task is missing an execution");return n}const r=this.l.get(t.id);if(r)return r;let s;return i?s=Promise.resolve(new Fb(this,t.id,i)):s=Pn.to(t.task,this.b,this.m).then(n=>{if(!n)throw new jn("Unexpected: Task does not exist.");return new Fb(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}C(t,i){t._deprecated&&this.g.report("Task.constructor",i.extension,"Use the Task constructor that takes a `scope` instead.")}D(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const r=this.n.values();let s=r.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=r.next()}};Ub=__decorate([__param(0,Ne),__param(1,Mt),__param(2,os),__param(3,kc),__param(4,Rs),__param(5,Ec),__param(6,De),__param(7,Hu)],Ub);var jb=class extends Ub{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c),this.registerTaskSystem(B.vscodeRemote,{scheme:B.vscodeRemote,authority:"",platform:SA(0)})}async executeTask(t,i){if(!i.execution)throw new Error("Tasks to execute must include an execution");const r=Pn.from(i,t);if(r===void 0)throw new Error("Task is not valid");if(Ns.is(r.execution))await this.A(r,i,!1);else throw new hm;const s=await this.B(await this.a.$getTaskExecution(r),i);return this.a.$executeTask(r).catch(n=>{throw new Error(n)}),s}x(t,i,r,s){const n=[];if(s)for(const o of s){if(this.C(o,r),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=Pn.from(o,r.extension);a&&Ns.is(a.execution)?(n.push(a),i.push(this.A(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:r.extension}}async y(t){if(Ns.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,i){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,i,r){}};jb=__decorate([__param(0,Ne),__param(1,Mt),__param(2,os),__param(3,kc),__param(4,Rs),__param(5,Ec),__param(6,De),__param(7,Hu)],jb);var l$=U("IExtHostTask"),UU=class{constructor(){this.f=new Map,this.m=[],this.n=new P,this.o=new P,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,i,r){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof r=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:d(7737,null,r,e)};o(a)}},r)}return i&&this.f.set(s.seq,i),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await Qi(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,i=this.f.get(t.request_seq);i&&(this.f.delete(t.request_seq),i(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,i)=>e.set(i,t)),await Qi(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.f.delete(i)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function jU(e){return e.type&&(e.label||e.program||e.runtime)}var HU=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function WU(e){return!!(e&&e.match(HU))}function u$(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(WU(e.path))return y.parse(e.path);if(Mh(e.path))return y.file(e.path)}return e.path}function h$(e){if(typeof e.path=="object"){const t=y.revive(e.path);if(t)return t.scheme===B.file?t.fsPath:t.toString()}return e.path}function _U(e,t){const i=t?u$:h$,r=ot(e);return d$(r,(s,n)=>{s&&n&&(n.path=i(n))}),r}function BU(e,t){const i=t?u$:h$,r=ot(e);return d$(r,(s,n)=>{!s&&n&&(n.path=i(n))}),r}function d$(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":t(!1,i.body.source);break;case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source);break;default:break}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":t(!0,i.arguments.source);break;case"breakpointLocations":t(!0,i.arguments.source);break;case"source":t(!0,i.arguments.source);break;case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(r=>t(!1,r));break;default:break}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(r=>t(!1,r.source));break;case"loadedSources":i.body.sources.forEach(r=>t(!1,r));break;case"scopes":i.body.scopes.forEach(r=>t(!1,r.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"setBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"disassemble":i.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,i.body?.source);break;default:break}break}}}var Qu=U("IExtHostEditorTabs"),f$=class{constructor(e,t,i){this.e=i,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new i0(y.revive(this.b.input.uri));case 2:return new Rf(y.revive(this.b.input.original),y.revive(this.b.input.modified));case 3:return new y9(y.revive(this.b.input.base),y.revive(this.b.input.input1),y.revive(this.b.input.input2),y.revive(this.b.input.result));case 6:return new r0(y.revive(this.b.input.uri),this.b.input.viewType);case 7:return new S9(this.b.input.viewType);case 4:return new s0(y.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new n0(y.revive(this.b.input.original),y.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new E9;case 9:return new C9(y.revive(this.b.input.uri),y.revive(this.b.input.inputBoxUri));case 10:return new x9;case 11:return new k9(this.b.input.diffEditors.map(e=>new Rf(y.revive(e.original),y.revive(e.modified))));default:return}}},qU=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const i of e.tabs)i.isActive&&(this.d=i.id),this.c.push(new f$(i,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Ut.to(e.b.viewColumn)},get activeTab(){return e.c.find(i=>i.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(i=>i.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const i=new f$(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,i),e.tabDto.isActive&&(this.d=i.tabId),i}else if(e.kind===1){const i=this.c.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this.d&&(this.d=""),i}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this.c.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,i),i}const t=this.c.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},Hb=class{constructor(t){this.b=new P,this.c=new P,this.e=[],this.a=t.getProxy(V.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,i={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(r=>r.apiObject))},get activeTabGroup(){const r=t.d;return ia(t.e.find(n=>n.groupId===r)?.apiObject)},close:async(r,s)=>{const n=Array.isArray(r)?r:[r];return n.length?zU(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(i)}return this.f}$acceptEditorTabModel(t){const i=new Set(this.e.map(l=>l.groupId)),r=new Set(t.map(l=>l.groupId)),s=SP(i,r),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new qU(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=ia(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const i=this.e.find(r=>r.groupId===t.groupId);if(!i)throw new Error("Update Group IPC call received before group creation.");i.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[i.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const i=this.e.find(s=>s.groupId===t.groupId);if(!i)throw new Error("Update Tabs IPC call received before group creation.");const r=i.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[r.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[r.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[r.apiObject]}));return}}g(t){for(const i of this.e)for(const r of i.tabs)if(r.apiObject===t)return r}h(t){return this.e.find(i=>i.apiObject===t)}async i(t,i){const r=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");r.push(n.tabId)}return this.a.$closeTab(r,i)}async j(t,i){const r=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");r.push(n.groupId)}return this.a.$closeGroup(r,i)}};Hb=__decorate([__param(0,Ne)],Hb);function zU(e){return e.tabs!==void 0}var VU=0,p$=new WeakMap,tg=U("IExtHostTesting"),Wb=class extends Y{constructor(t,i,r,s){super(),this.z=i,this.C=r,this.F=s,this.f=this.D(new P),this.g=new Map,this.q=this.D(new P),this.w=new Set,this.y=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(V.MainThreadTesting),this.m=new YU(this.h),this.j=new QU(this.h,i),r.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Fe.root(a))?.collection.tree.get(a)?.actual??Ix(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Fe.root(c))?.collection.tree.get(c)?.actual??Ix({$mid:16,tests:[o]}),message:uc.to(a)}}default:return n}}}),r.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await r.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Fe.root(a));if(c)return Fe.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Gi)||[],exclude:n?.exclude.map(o).filter(Gi)||[]}})}createTestController(t,i,r,s){if(this.g.has(i))throw new Error(`Attempt to insert a duplicate controller with ID "${i}"`);const n=new ae,o=n.add(new XO(i,r,this.F));o.root.label=r;const a=new Map,c=new Set,l=this.h,u=()=>{let g=0;s&&(g|=2);const m=f.relatedCodeProvider;return m&&(m?.provideRelatedTests&&(g|=8),m?.provideRelatedCode&&(g|=4)),g},h={items:o.root.children,get label(){return r},set label(g){r=g,o.root.label=g,l.$updateController(i,{label:r})},get refreshHandler(){return s},set refreshHandler(g){s=g,l.$updateController(i,{capabilities:u()})},get id(){return i},get relatedCodeProvider(){return f.relatedCodeProvider},set relatedCodeProvider(g){T(t,"testRelatedCode"),f.relatedCodeProvider=g,l.$updateController(i,{capabilities:u()})},createRunProfile:(g,m,w,S,C,k)=>{let A=ul(g);for(;a.has(A);)A++;return new w$(this.h,a,c,this.q.event,i,A,g,m,w,S,C,k)},createTestItem(g,m,w){return new Mu(i,g,m,w)},createTestRun:(g,m,w=!0)=>this.j.createTestRun(t,i,o,g,m,w),invalidateTestResults:g=>{if(g===void 0)this.h.$markTestRetired(void 0);else{const m=g instanceof Array?g:[g];this.h.$markTestRetired(m.map(w=>Fe.fromExtHostTestItem(w,i).toString()))}},set resolveHandler(g){o.resolveHandler=g},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},f={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(i,r,u()),n.add(se(()=>l.$unregisterTestController(i))),this.g.set(i,f),n.add(se(()=>this.g.delete(i))),n.add(o.onDidGenerateDiff(g=>l.$publishDiff(i,g.map(Td.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,i=Be.None){const r=m$(t);if(!r)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(r.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:hc.from(r.kind),targets:[{testIds:t.include?.map(n=>Fe.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:r.profileId,controllerId:r.controllerId}],exclude:t.exclude?.map(n=>n.id)},i)}registerTestFollowupProvider(t){return this.w.add(t),{dispose:()=>{this.w.delete(t)}}}async $getTestsRelatedToCode(t,i,r){const s=this.F.getDocument(y.revive(t));if(!s)return[];const n=ze.to(i),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,r)}catch(l){r.isCancellationRequested||this.z.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Fe.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,i){const r=this.g.get(Fe.root(t));if(!r)return[];const s=r.collection.tree.get(t);return s?(await r.relatedCodeProvider?.provideRelatedCode?.(s.actual,i))?.map(Di.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,i,r){return(await this.j.getCoverageDetails(t,i,r))?.map(Su.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,i){this.g.get(t)?.profiles.get(i)?.configureHandler?.()}$setDefaultRunProfiles(t){const i=new Map;for(const[r,s]of Object.entries(t)){const n=this.g.get(r);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&i.set(r,o)}this.q.fire(i)}async $refreshTests(t,i){await this.g.get(t)?.controller.refreshHandler?.(i)}$publishTestResults(t){this.results=Object.freeze(t.map(i=>{const r=J0.to(i),s=i.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(r.getDetailedCoverage=(n,o=Be.None)=>this.h.$getCoverageDetails(i.id,s,n,o).then(a=>a.map(Su.to))),p$.set(r,i.id),r}).concat(this.results).sort((i,r)=>r.completedAt-i.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,i){const r=this.g.get(Fe.fromString(t).controllerId)?.collection;r&&(await r.expand(t,i<0?1/0:i),r.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(i=>Td.deserialize({asCanonicalUri:r=>r},i)))}async $runControllerTests(t,i){return Promise.all(t.map(r=>this.G(r,!1,i)))}async $startContinuousRun(t,i){const r=new rt(i),s=await Promise.all(t.map(n=>this.G(n,!0,r.token)));return!i.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>i.onCancellationRequested(n)),r.dispose(!0),s}async $provideTestFollowups(t,i){const r=this.results.find(o=>p$.get(o)===t.resultId),s=r&&KU(Fe.fromString(t.extId),r?.results);if(!s)return[];let n=[];return await Promise.all([...this.w].map(async o=>{try{const a=await o.provideFollowup(r,s,t.taskIndex,t.messageIndex,i);a&&(n=n.concat(a))}catch(a){this.z.error("Error thrown while providing followup for test message",a)}})),i.isCancellationRequested?[]:n.map(o=>{const a=VU++;return this.y.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const i of t)this.y.delete(i)}$executeTestFollowup(t){const i=this.y.get(t);return i?this.C.executeCommand(i.command,...i.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,i){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,i)}getMetadataForRun(t){for(const i of this.j.trackers){const r=i.getTaskIdForRun(t);if(r)return{taskId:r,runId:i.id}}}async G(t,i,r){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(g=>n.tree.get(g)).filter(Gi),u=t.excludeExtIds.map(g=>s.collection.tree.get(g)).filter(Gi).filter(g=>l.some(m=>m.fullId.compare(g.fullId)===2));if(!l.length)return{};const h=new If(l.some(g=>g.actual instanceof _w)?void 0:l.map(g=>g.actual),u.map(g=>g.actual),c,i),f=FN(t)&&this.j.prepareForMainThreadTestRun(a,h,v$.fromInternal(t,s.collection),c,r);try{return await c.runHandler(h,r),{}}catch(g){return{error:String(g)}}finally{f&&f.hasRunningTasks&&!r.isCancellationRequested&&await Ke.toPromise(f.onEnd)}}};Wb=__decorate([__param(0,Ne),__param(1,De),__param(2,zo),__param(3,kc)],Wb);var GU=1e4,g$;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(g$||(g$={}));var JU=class extends Y{get hasRunningTasks(){return this.g>0}get id(){return this.z.id}constructor(e,t,i,r,s,n){super(),this.z=e,this.C=t,this.F=i,this.G=r,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.q=this.D(new P),this.y=new Map,this.onEnd=this.q.event,this.m=this.D(new rt(n));const o=this.D(new Yn(()=>this.I(),GU));this.D(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new P;this.w=a.event,this.D(se(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:i}]of this.h)if(i===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,i){const[,r]=Fe.fromString(e).path,s=this.y.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(r);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof Tf){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,i):this.G?.loadDetailedCoverage?.(a.run,n,i))??[]}createRun(e){const t=this.z.id,i=this.z.controllerId,r=ci(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(uc.from):[uc.from(u)];if(l.uri&&l.range){const f={range:O.from(l.range),uri:l.uri};for(const g of h)g.location=g.location||f}this.C.$appendTestMessagesInRun(t,r,Fe.fromExtHostTestItem(l,i).toString(),h)};let o=!1;const a=this.D(new rt(this.m.token)),c={isPersisted:this.z.isPersisted,token:a.token,name:e,onDidDispose:this.w,addCoverage:l=>{if(o)return;const u=l instanceof Tf?l.includesTests:[];if(u.length)for(const g of u)this.L(g);const h=l.uri.toString(),f=new Fe([t,r,h]).toString();this.y.set(f,{report:l,extIds:u.map(g=>Fe.fromExtHostTestItem(g,i).toString())}),this.C.$appendCoverage(t,r,Su.fromFile(i,f,l))},enqueued:s(l=>{this.C.$updateTestStateInRun(t,r,Fe.fromExtHostTestItem(l,i).toString(),1)}),skipped:s(l=>{this.C.$updateTestStateInRun(t,r,Fe.fromExtHostTestItem(l,i).toString(),5)}),started:s(l=>{this.C.$updateTestStateInRun(t,r,Fe.fromExtHostTestItem(l,i).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.C.$updateTestStateInRun(t,r,Fe.fromExtHostTestItem(l,i).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.C.$updateTestStateInRun(t,r,Fe.fromExtHostTestItem(l,i).toString(),4,h)}),passed:s((l,u)=>{this.C.$updateTestStateInRun(t,r,Fe.fromExtHostTestItem(l,this.z.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.C.$appendOutputToRun(t,r,re.fromString(l),u&&Di.from(u),h&&Fe.fromExtHostTestItem(h,i).toString()))},end:()=>{o||(o=!0,this.C.$finishedTestRunTask(t,r),--this.g||this.J())}};return this.g++,this.h.set(r,{run:c,cts:a}),this.C.$startedTestRunTask(t,{id:r,ctrlId:this.z.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.q.fire())}L(e){if(!(e instanceof Mu))throw new _d(e.id);if(this.j.has(Fe.fromExtHostTestItem(e,this.z.controllerId).toString()))return;const t=[],i=this.z.colllection.root;for(;;){const r=Cn.from(e);if(t.unshift(r),this.j.has(r.extId)||(this.j.add(r.extId),e===i))break;e=e.parent||i}this.C.$addTestsToRun(this.z.controllerId,this.z.id,t)}dispose(){this.J(),super.dispose()}},QU=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,i){const r=Fe.root(e);return this.g.get(r)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:i}]of this.f)i===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,i,r,s){return this.k(t,i,r,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,i,r,s,n){const o=this.f.get(r);if(o)return o.createRun(s);const a=v$.fromPublic(t,i,r,n),c=m$(r);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!r.continuous,profile:c&&{group:hc.from(c.kind),id:c.profileId},exclude:r.exclude?.map(u=>Fe.fromExtHostTestItem(u,i.root.id).toString())??[],id:a.id,include:r.include?.map(u=>Fe.fromExtHostTestItem(u,i.root.id).toString())??[i.root.id],preserveFocus:r.preserveFocus??!0,persist:n});const l=this.k(r,a,r.profile,e);return Ke.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,i,r,s){const n=new JU(t,this.h,this.j,i,r,s);return this.f.set(e,n),this.g.set(n.id,n),n}},m$=e=>{if(e.profile){if(!(e.profile instanceof w$))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},v$=class L4{static fromPublic(t,i,r,s){return new L4(t,ci(),s,i)}static fromInternal(t,i){return new L4(t.controllerId,t.runId,!0,i)}constructor(t,i,r,s){this.controllerId=t,this.id=i,this.isPersisted=r,this.colllection=s}},ZU=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Cn.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.delete(e))return;this.g.delete(e);const t=Fe.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:i}=this;return{get added(){return[...e].map(r=>r.revived)},get updated(){return[...t].map(r=>r.revived)},get removed(){return[...i].map(r=>r.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},XU=class extends UN{constructor(){super(...arguments),this.z=new P,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Cn.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new ZU(this.z)}},YU=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:i5(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new XU({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},Zu=(e,t,i,r)=>{i?Object.assign(i,r):t.$updateTestRunConfig(e.controllerId,e.profileId,r)},w$=class extends m9{#e;#t;#i;#r;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,Zu(this,this.#e,this.#r,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,Zu(this,this.#e,this.#r,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),Zu(this,this.#e,this.#r,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,Zu(this,this.#e,this.#r,{tag:e?Mr.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,Zu(this,this.#e,this.#r,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return Ke.chain(this.#i,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Gi))}constructor(e,t,i,r,s,n,o,a,c,l=!1,u=void 0,h=!1){super(s,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=h,this.#e=e,this.#n=t,this.#t=i,this.#i=r,t.set(n,this);const f=hc.from(a);l&&i.add(n),this.#r={profileId:n,controllerId:s,tag:u?Mr.namespace(this.controllerId,u.id):null,label:o,group:f,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#r&&(this.#e.$publishTestRunProfile(this.#r),this.#r=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#r=void 0}};function KU(e,t){for(let i=0;i<e.path.length;i++){const r=t.find(s=>s.id===e.path[i]);if(!r)return;if(i===e.path.length-1)return r;t=r.children}}var KJ=U("configurationResolverService"),nt;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.ColumnNumber="columnNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(nt||(nt={}));var ej=Object.values(nt).filter(e=>typeof e=="string"),Ai=class extends jn{constructor(e,t){super(t),this.variable=e}},b$=class N4{static{this.VARIABLE_LHS="${"}constructor(t){this.a=new Map,this.d=new Set,typeof t=="string"?(this.c=!0,this.b={value:t}):(this.c=!1,this.b=structuredClone(t))}static parse(t){if(t instanceof N4)return t;const i=new N4(t);return i.e(),i.g(i.b),i}e(){const t=this.b,i=ai?"windows":yi?"osx":Qs?"linux":void 0;i&&t&&typeof t=="object"&&t.hasOwnProperty(i)&&Object.keys(t[i]).forEach(r=>t[r]=t[i][r]),delete t.windows,delete t.osx,delete t.linux}f(t,i){if(t[i]!=="$"||t[i+1]!=="{")return;let r=i+2,s=1;for(;r<t.length;){if(t[r]==="{")s++;else if(t[r]==="}"&&(s--,s===0))break;r++}if(s!==0)return;const n=t.slice(i,r+1),o=t.substring(i+2,r),a=o.indexOf(":");return a===-1?{replacement:{id:n,name:o,inner:o},end:r}:{replacement:{id:n,inner:o,name:o.slice(0,a),arg:o.slice(a+1)},end:r}}g(t){if(!(typeof t!="object"||t===null)){if(Array.isArray(t)){for(let i=0;i<t.length;i++){const r=t[i];typeof r=="string"?this.h(t,i,r):this.g(r)}return}for(const[i,r]of Object.entries(t))this.h(t,i,i,!0),typeof r=="string"?this.h(t,i,r):this.g(r)}}h(t,i,r,s,n){let o=0;for(;o<r.length;){const a=r.indexOf("${",o);if(a===-1)break;const c=this.f(r,a);if(c){if(o=c.end+1,n?.includes(c.replacement.id))continue;const l=this.a.get(c.replacement.id)||{locations:[],replacement:c.replacement},u={object:t,propertyName:i,replaceKeyName:s};l.locations.push(u),this.a.set(c.replacement.id,l),l.resolved?this.j(c.replacement,u,l.resolved,n):this.d.forEach(h=>h(c.replacement))}else o=a+2}}*unresolved(){const t=new Map,i=r=>{t.set(r.id,r)};for(const r of this.a.values())r.resolved===void 0&&t.set(r.replacement.id,r.replacement);for(this.d.add(i);;){const r=Dt.first(t);if(!r)break;const[s,n]=r;yield n,t.delete(s)}this.d.delete(i)}resolved(){return Dt.map(Dt.filter(this.a.values(),t=>!!t.resolved),t=>[t.replacement,t.resolved])}resolve(t,i){typeof i!="object"&&(i={value:String(i)});const r=this.a.get(t.id);if(r&&(r.resolved=i,i.value!==void 0))for(const s of r.locations||Dt.empty())this.j(t,s,i)}j(t,{replaceKeyName:i,propertyName:r,object:s},n,o=[]){if(n.value!==void 0){if(o.push(t.id),i&&typeof r=="string"){const a=s[r],c=r.replaceAll(t.id,n.value);delete s[r],s[c]=a,this.m(s,r,c),this.h(s,c,n.value,!0,o)}else s[r]=s[r].replaceAll(t.id,n.value),this.h(s,r,n.value,!1,o);o.pop()}}m(t,i,r){for(const s of this.a.values())for(const n of s.locations)n.object===t&&n.propertyName===i&&(n.propertyName=r)}toObject(){return this.c?this.b.value:this.b}},tj=class{constructor(e,t,i,r){this.h=new Map,this.resolvableVariables=new Set(ej),this.a=e,this.b=t,this.g=i,r&&(this.c=r.then(s=>this.i(s)))}i(e){if(ai){const t=Object.create(null);return Object.keys(e).forEach(i=>{t[i.toLowerCase()]=e[i]}),t}return e}async resolveWithEnvironment(e,t,i){const r=b$.parse(i);for(const s of r.unresolved()){const n=await this.l(s,t?.uri,e);n!==void 0&&r.resolve(s,String(n))}return r.toObject()}async resolveAsync(e,t){const i=b$.parse(t);for(const r of i.unresolved()){const s=await this.l(r,e?.uri);s!==void 0&&i.resolve(r,String(s))}return i.toObject()}resolveWithInteractionReplace(e,t){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this.h.has(e))throw new Error("Variable "+e+" is contributed twice.");this.resolvableVariables.add(e),this.h.set(e,t)}j(e){return this.b?this.b.getUriLabel(e,{noPrefix:!0}):e.fsPath}async l(e,t,i,r){const s={env:i!==void 0?this.i(i):await this.c,userHome:i!==void 0?void 0:await this.g},{name:n,arg:o}=e,a=u=>{const h=this.a.getFilePath();if(h)return Ou(h);throw new Ai(u,d(15299,null,e.id))},c=u=>{const h=a(u);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return Ou(f)}throw new Ai(u,d(15300,null,e.id,Si(h)))},l=u=>{if(o){const h=this.a.getFolderUri(o);if(h)return h;throw new Ai(u,d(15301,null,u,o))}if(t)return t;throw this.a.getWorkspaceFolderCount()>1?new Ai(u,d(15302,null,u)):new Ai(u,d(15303,null,u))};switch(n){case"env":if(o){if(s.env){const u=s.env[ai?o.toLowerCase():o];if(Oe(u))return u}return""}throw new Ai(nt.Env,d(15304,null,e.id));case"config":if(o){const u=this.a.getConfigurationValue(t,o);if(Tt(u))throw new Ai(nt.Config,d(15305,null,e.id,o));if(bt(u))throw new Ai(nt.Config,d(15306,null,e.id,o));return u}throw new Ai(nt.Config,d(15307,null,e.id));case"command":return this.m(nt.Command,e.id,o,r,"command");case"input":return this.m(nt.Input,e.id,o,r,"input");case"extensionInstallFolder":if(o){const u=await this.a.getExtension(o);if(!u)throw new Ai(nt.ExtensionInstallFolder,d(15308,null,e.id,o));return this.j(u.extensionLocation)}throw new Ai(nt.ExtensionInstallFolder,d(15309,null,e.id));default:switch(n){case"workspaceRoot":case"workspaceFolder":{const u=l(nt.WorkspaceFolder);return u?Ou(this.j(u)):void 0}case"cwd":{if(!t&&!o)return na();const u=l(nt.Cwd);return u?Ou(this.j(u)):void 0}case"workspaceRootFolderName":case"workspaceFolderBasename":{const u=l(nt.WorkspaceFolderBasename);return u?Ou(Si(this.j(u))):void 0}case"userHome":if(s.userHome)return s.userHome;throw new Ai(nt.UserHome,d(15310,null,e.id));case"lineNumber":{const u=this.a.getLineNumber();if(u)return u;throw new Ai(nt.LineNumber,d(15311,null,e.id))}case"columnNumber":{const u=this.a.getColumnNumber();if(u)return u;throw new Error(d(15312,null,e.id))}case"selectedText":{const u=this.a.getSelectedText();if(u)return u;throw new Ai(nt.SelectedText,d(15313,null,e.id))}case"file":return a(nt.File);case"fileWorkspaceFolder":return c(nt.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return Si(c(nt.FileWorkspaceFolderBasename));case"relativeFile":return t||o?ol(this.j(l(nt.RelativeFile)),a(nt.RelativeFile)):a(nt.RelativeFile);case"relativeFileDirname":{const u=Qn(a(nt.RelativeFileDirname));if(t||o){const h=ol(this.j(l(nt.RelativeFileDirname)),u);return h.length===0?".":h}return u}case"fileDirname":return Qn(a(nt.FileDirname));case"fileExtname":return Oh(a(nt.FileExtname));case"fileBasename":return Si(a(nt.FileBasename));case"fileBasenameNoExtension":{const u=Si(a(nt.FileBasenameNoExtension));return u.slice(0,u.length-Oh(u).length)}case"fileDirnameBasename":return Si(Qn(a(nt.FileDirnameBasename)));case"execPath":{const u=this.a.getExecPath();return u||e.id}case"execInstallFolder":{const u=this.a.getAppRoot();return u||e.id}case"pathSeparator":case"/":return ar;default:try{return this.m(nt.Unknown,e.id,o,r,void 0)}catch{return e.id}}}}m(e,t,i,r,s){if(i&&r){const n=s===void 0?r[i]:r[s+":"+i];if(typeof n=="string")return n;throw new Ai(e,d(15314,null,t))}return t}},ig=U("IExtHostVariableResolverProvider"),ij=class extends tj{constructor(e,t,i,r,s,n,o){function a(){if(i){const c=i.activeEditor();if(c)return c.document.uri;const l=r.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Rf||l.input instanceof n0)return l.input.modified;if(l.input instanceof i0||l.input instanceof s0||l.input instanceof r0)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>na(),getExecPath:()=>oa.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return aa(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return aa(l.uri.fsPath)}}},getSelectedText:()=>{if(i){const c=i.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.line+1)}},getColumnNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.character+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(oa))}},_b=class extends Y{constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.g=r,this.h=s,this.j=n,this.a=new It(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.D(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new ij(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};_b=__decorate([__param(0,Dn),__param(1,os),__param(2,kc),__param(3,Rs),__param(4,Qu)],_b);var y$=U("IExtHostDebugService"),Bb=class extends Y{get onDidStartDebugSession(){return this.w.event}get onDidTerminateDebugSession(){return this.y.event}get onDidChangeActiveDebugSession(){return this.z.event}get activeDebugSession(){return this.C?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,i,r,s,n,o,a,c){super(),this.Z=i,this.$=r,this.ab=s,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.u=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.w=this.D(new P),this.y=this.D(new P),this.z=this.D(new P),this.F=this.D(new P),this.q=t.getProxy(V.MainThreadDebugService),this.I=this.D(new P),this.L=this.D(new P),this.G=new sj(this.q),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.D(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(V.MainThreadTelemetry)}async $getVisualizerTreeItem(t,i){const r=this.hb(i);if(!r)return;const s=await this.Q.get(t)?.getTreeItem?.(r);return s?this.fb(t,s):void 0}registerDebugVisualizationTree(t,i,r){const s=qe.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.Q.set(n,r),this.q.$registerDebugVisualizerTree(n,!!r.editItem),se(()=>{this.q.$unregisterDebugVisualizerTree(n),this.Q.delete(i)})}async $getVisualizerTreeItemChildren(t,i){const r=this.S.get(i)?.item;return r?(await this.Q.get(t)?.getChildren?.(r))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,i){const r=this.S.get(t);if(!r)return;const s=await this.Q.get(r.provider)?.editItem?.(r.item,i);return this.fb(r.provider,s||r.item)}$disposeVisualizedTree(t){const i=this.S.get(t);if(!i)return;const r=[i.children];for(const s of r)if(s)for(const n of s)r.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,i){let r=this.R.get(i);return r||(r=this.O++,this.R.set(i,r),this.S.set(r,{provider:t,item:i})),dw.from(i,r)}asDebugSourceUri(t,i){const r=t;if(typeof r.sourceReference=="number"&&r.sourceReference>0){let s=`debug:${encodeURIComponent(r.path||"")}`,n="?";return i&&(s+=`${n}session=${encodeURIComponent(i.id)}`,n="&"),s+=`${n}ref=${r.sourceReference}`,y.parse(s)}else{if(r.path)return y.file(r.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const i=[];for(const r of t.getAllExtensionDescriptions())if(r.contributes){const s=r.contributes.debuggers;if(s&&s.length>0)for(const n of s)jU(n)&&i.push(n.type)}this.q.$registerDebugTypes(i)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(i=>t.push(i)),t}async $resolveDebugVisualizer(t,i){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=r;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,i)||s,r.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,s.visualization)}async $executeDebugVisualizerCommand(t){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);const r=i.v.visualization;r&&"command"in r&&this.db.executeCommand(r.command,...r.arguments||[])}hb(t){const i=this.u.get(t.sessionId);return i&&{session:i.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,i,r,s){const n=this.hb(r),o=this.zb(t,i),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const i of t)this.W.delete(i)}registerDebugVisualizationProvider(t,i,r){if(!t.contributes?.debugVisualizers?.some(o=>o.id===i))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${i})`);const s=qe.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.P.set(n,r),this.q.$registerDebugVisualizer(s,i),se(()=>{this.q.$unregisterDebugVisualizer(s,i),this.P.delete(i)})}addBreakpoints(t){const i=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(i,[],[]);const r=[],s=new Map;for(const n of i)if(n instanceof Do){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),r.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Po&&r.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.q.$registerBreakpoints(r)}removeBreakpoints(t){const i=t.filter(o=>this.H.delete(o.id));this.wb([],i,[]);const r=i.filter(o=>o instanceof Do).map(o=>o.id),s=i.filter(o=>o instanceof Po).map(o=>o.id),n=i.filter(o=>o instanceof ff).map(o=>o.id);return this.q.$unregisterBreakpoints(r,s,n)}startDebugging(t,i,r){const s=r.testRun&&this.eb.getMetadataForRun(r.testRun);return this.q.$startDebugging(t?t.uri:void 0,i,{parentSessionID:r.parentSession?r.parentSession.id:void 0,lifecycleManagedByParent:r.lifecycleManagedByParent,repl:r.consoleMode===Sf.MergeWithParent?"mergeWithParent":"separate",noDebug:r.noDebug,compact:r.compact,suppressSaveBeforeStart:r.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:r.suppressDebugStatusbar??r.debugUI?.simple,suppressDebugToolbar:r.suppressDebugToolbar??r.debugUI?.simple,suppressDebugView:r.suppressDebugView??r.debugUI?.simple})}stopDebugging(t){return this.q.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,i,r){if(!i)return new Ee(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:i}),this.q.$registerDebugConfigurationProvider(t,r,!!i.provideDebugConfigurations,!!i.resolveDebugConfiguration,!!i.resolveDebugConfigurationWithSubstitutedVariables,s),new Ee(()=>{this.g=this.g.filter(n=>n.provider!==i),this.q.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,i,r){if(!r)return new Ee(()=>{});if(!this.sb(t,i))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${i}' debugger.`);if(this.pb(i))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:i,handle:s,factory:r}),this.q.$registerDebugAdapterDescriptorFactory(i,s),new Ee(()=>{this.j=this.j.filter(n=>n.factory!==r),this.q.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,i){if(!i)return new Ee(()=>{});const r=this.m++;return this.n.push({type:t,handle:r,factory:i}),new Ee(()=>{this.n=this.n.filter(s=>s.factory!==i)})}async $runInTerminal(t,i){return Promise.resolve(void 0)}async $substituteVariables(t,i){let r;const s=await this.yb(t);return s&&(r={uri:s.uri,name:s.name,index:s.index}),(await this.cb.getResolver()).resolveAsync(r,i)}ib(t,i){if(t instanceof Yl)return new oj(t.implementation)}jb(){}async $startDASession(t,i){const r=this,s=await this.xb(i);return this.ub(this.pb(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.ib(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.tb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const f=await this.U.sign(u.arguments.value);h.body={signature:f},a.sendResponse(h)}else throw new Error("no signer")}catch(f){h.success=!1,h.message=f.message,a.sendResponse(h)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=BU(l,!0)}catch(u){const h=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:h,from:s.type}),u}r.q.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.q.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.q.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,i){i=_U(i,!1);const r=this.N.get(t);r&&r.onWillReceiveMessage&&r.onWillReceiveMessage(i),this.M.get(t)?.sendMessage(i)}$stopDASession(t){const i=this.N.get(t);this.N.delete(t),i&&i.onWillStopSession&&i.onWillStopSession();const r=this.M.get(t);return this.M.delete(t),r?r.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const i=[],r=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Po(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new ff(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=y.revive(n.uri);a=new Do(new ji(c,new xe(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}LM(a,o),this.H.set(o,a),i.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),r.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Po&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof Do&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new ji(y.revive(n.uri),new xe(n.line,n.character))}s.push(o)}}}this.wb(i,r,s)}async $acceptStackFrameFocus(t){let i;if(t){const r=await this.xb(t.sessionId);t.kind==="thread"?i=new f9(r.api,t.threadId):i=new d9(r.api,t.threadId,t.frameId)}this.J=i,this.L.fire(this.J)}$provideDebugConfigurations(t,i,r){return ti(async()=>{const s=this.rb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(i);return s.provideDebugConfigurations(n,r)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,i,r,s){return ti(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(i);return n.resolveDebugConfiguration(o,r,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,i,r,s){return ti(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(i);return n.resolveDebugConfigurationWithSubstitutedVariables(o,r,s)})}async $provideDebugAdapter(t,i){const r=this.qb(t);if(!r)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.xb(i);return this.ub(r,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const i=await this.xb(t);this.w.fire(i.api)}async $acceptDebugSessionTerminated(t){const i=await this.xb(t);i&&(this.y.fire(i.api),this.u.delete(i.id))}async $acceptDebugSessionActiveChanged(t){this.C=t?await this.xb(t):void 0,this.z.fire(this.C?.api)}async $acceptDebugSessionNameChanged(t,i){(await this.xb(t))?._acceptNameChanged(i)}async $acceptDebugSessionCustomEvent(t,i){const s={session:(await this.xb(t)).api,event:i.event,body:i.body};this.F.fire(s)}kb(t){if(t instanceof pf)return this.lb(t);if(t instanceof Xl)return this.mb(t);if(t instanceof gf)return this.nb(t);if(t instanceof Yl)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const i=this.j.filter(r=>r.type===t);if(i.length>0)return i[0].factory}qb(t){const i=this.j.filter(r=>r.handle===t);if(i.length>0)return i[0].factory}rb(t){const i=this.g.filter(r=>r.handle===t);if(i.length>0)return i[0].provider}sb(t,i){if(t.contributes){const r=t.contributes.debuggers;if(r&&r.length>0){for(const s of r)if(s.label&&s.type&&s.type===i)return!0}}return!1}tb(t){const r=t.configuration.type,s=this.n.filter(n=>n.type===r||n.type==="*").map(n=>ti(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=mt(n);if(o.length>0)return new nj(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,i){const r=i.configuration.debugServer;if(typeof r=="number")return Promise.resolve(new Xl(r));if(t){const n=await this.$.getExtensionRegistry();return ti(()=>t.createDebugAdapterDescriptor(i.api,this.vb(i,n))).then(o=>{if(o)return o})}const s=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(i,s))}vb(t,i){}wb(t,i,r){(t.length>0||i.length>0||r.length>0)&&this.I.fire(Object.freeze({added:t,removed:i,changed:r}))}async xb(t){if(t)if(typeof t=="string"){const i=this.u.get(t);if(i)return i}else{let i=this.u.get(t.id);if(!i){const r=await this.yb(t.folderUri),s=t.parent?this.u.get(t.parent):void 0;i=new rj(this.q,t.id,t.type,t.name,r,t.configuration,s?.api),this.u.set(i.id,i),this.q.$sessionCached(i.id)}return i}throw new Error("cannot find session")}yb(t){if(t){const i=y.revive(t);return this.Z.resolveWorkspaceFolder(i)}return Promise.resolve(void 0)}zb(t,i){return`${t}\0${i}`}Ab(t,i){if(i){if("title"in i&&"command"in i)return{type:0};if("treeId"in i)return{type:1,id:`${t}\0${i.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const i=this.Cb(t);let r,s;return"id"in i?s=vt.asClassName(i):r=i,{iconPath:r,iconClass:s}}Cb(t){if(t instanceof Ii)return{id:t.id};const i=typeof t=="object"&&"dark"in t?t.dark:t,r=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof i=="string"?y.file(i):i,light:typeof r=="string"?y.file(r):r}}};Bb=__decorate([__param(0,Ne),__param(1,os),__param(2,Dn),__param(3,Rs),__param(4,Qu),__param(5,ig),__param(6,zo),__param(7,tg)],Bb);var rj=class{constructor(e,t,i,r,s,n,o){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,i){return e.f.$customDebugAdapterRequest(e.g,t,i)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},sj=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},nj=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(i=>i.onExit?i.onExit(e,t):void 0)}},oj=class extends UU{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},qb=class extends Bb{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c)}};qb=__decorate([__param(0,Ne),__param(1,os),__param(2,Dn),__param(3,Rs),__param(4,Qu),__param(5,ig),__param(6,zo),__param(7,tg)],qb);function aj(e){return"uri"in e&&"ranges"in e&&"preview"in e}function cj(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var S$=class{constructor(e){this.a=e}provideFileSearchResults(e,t,i){return(async()=>{const s=cj(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,i)))})().then(s=>mt(s).flat())}};function lj(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:uj(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function uj(e){return{matchLines:e?.matchLines??ww.matchLines,charsPerLine:e?.charsPerLine??ww.charsPerLine}}function hj(e){if(aj(e)){const t=nr(e.ranges).map((i,r)=>{const n=nr(e.preview.matches)[r];return{sourceRange:i,previewRange:n}});return new kn(e.uri,t,e.preview.text)}else return new mw(e.uri,e.text,e.lineNumber)}var dj=class{constructor(e){this.a=e}provideTextSearchResults(e,t,i,r){const s=a=>{fj(a)&&i.report(hj(a))};return(async()=>mt(await Promise.all(lj(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:mt(nr(a.message))}))}};function fj(e){if(pj(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function pj(e){return!!e.preview}var E$=class extends en{constructor(e,t,i=()=>!1){const r=new vS(i,()=>!1);super(r);const s=new wt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.m(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const i=this.m(e);return t.get(i)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(i=>e(i)))}m(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},gj=class{constructor(e,t,i){this.l=e,this.o=t,this.p=i,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&$a(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&$a(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((i,r)=>{const s=n=>{this.g++,e(n)};if(this.h)return i({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=Si(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{i({limitHit:this.f,stats:n||void 0})},n=>{r(new Error(fa(n)))})})}async q(e,t){const i=new rt,r=e.map(l=>this.r(l)),s=this.o instanceof S$?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:r,maxResults:this.l.maxResults??W9,session:s},o=l=>{const u=new ex(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new E$(e,o);let c;try{this.j.add(i),c=qn.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,i.token),u=c.elapsed(),h=qn.create();return this.h&&!this.f||(l&&l.forEach(f=>{const g=a.findQueryFragmentAwareSubstr(f),m=We.relative(g.folder.path,f.path);if(g.noSiblingsClauses){const w=Si(f.path);this.w(t,{base:g.folder,relativePath:m,basename:w});return}this.u(g.tree,g.folder,m,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(f=>{this.v(f.tree,f.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{i.dispose(),this.j.delete(i)}}r(e){const t=vc(this.l.includePattern,e.includePattern);let i=e.excludePattern?.map(s=>({folder:s.folder,patterns:vc(this.l.excludePattern,s.pattern)}));i?.length||(i=[{folder:void 0,patterns:vc(this.l.excludePattern,void 0)}]);const r=ix(i);return{folder:e.folder,excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,i,r){if(i===this.a){const n=Si(this.a);this.w(r,{base:t,relativePath:this.a,basename:n})}function s(n){const o=Si(n),a=Qn(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(i)}v({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.a;function o(a){const c=rO(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:f,basename:g}=h;if(i.matchesExcludesSync(f,g,n!==g?c:void 0))continue;const m=t[f];if(m)o(m);else{if(f===n)continue;s.w(r,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},mj=class{constructor(){this.a=new Object,this.tokenSource=new rt}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},vj=class w3{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,i,r,s){const n=this.c(t.cacheKey),o=new gj(t,i,n);let a=0;const c=l=>{a+=l.length,r(l.map(u=>this.d(u)))};return this.f(o,w3.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new mj),this.b.get(t)}d(t){return t.relativePath?{resource:Qt(t.base,t.relativePath)}:{resource:t.base}}f(t,i,r,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),i>0&&a.length>=i&&(r(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&r(a),n.dispose(),c),c=>(a.length&&r(a),n.dispose(),Promise.reject(c)))}},C$=class{constructor(e,t,i){this.f=e,this.g=t,this.h=i,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t,i){const r=this.j.folderQueries||[],s=new rt(t);return new Promise((n,o)=>{this.b=new bj(e);let a=!1;const c=(l,u)=>{if(!(l instanceof vw)&&!a&&!this.c){const h=this.l(l);l instanceof kn&&typeof this.j.maxResults=="number"&&this.d+h>this.j.maxResults&&(this.c=!0,a=!0,s.cancel(),l=this.m(l,this.j.maxResults-this.d));const f=this.l(l);this.d+=f;const g=l instanceof kn;(f>0||!g)&&this.b.add(l,u)}};this.n(r,c,s.token,i).then(l=>{s.dispose(),this.b.flush(),n({limitHit:this.c||l?.limitHit,messages:this.k(l),stats:{type:this.h}})},l=>{s.dispose();const u=fa(l);o(new Error(u))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof kn?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new kn(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,i,r){const s=new E$(e,(u,h)=>({queryTester:new ex(this.j,u),folder:u.folder,folderIdx:h}),()=>!0),n=[],o={report:u=>{if(u instanceof vw)r?.(u);else{if(u.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const h=s.findQueryFragmentAwareSubstr(u.uri),f=h.folder.scheme===B.file?iO(()=>this.g.readdir(cl(u.uri))):void 0,g=x6(h.folder,u.uri);if(g){const m=h.queryTester.includedInQuery(g,Si(g),f);Ys(m)?n.push(m.then(w=>{w&&t(u,h.folderIdx)})):m&&t(u,h.folderIdx)}}}},c={folderOptions:e.map(u=>this.o(u)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??W9,previewOptions:this.j.previewOptions??ww,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(c.usePCRE2=this.j.usePCRE2);let l;return this.f.query.type===3?l=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,c,o,i):l=await this.f.provider.provideTextSearchResults(wj(this.f.query.contentPattern),c,o,i),n.length&&await Promise.all(n),l}o(e){const t=vc(this.j.includePattern,e.includePattern);let i=e.excludePattern?.map(n=>({folder:n.folder,patterns:vc(this.j.excludePattern,n.pattern)}));(!i||i.length===0)&&(i=[{folder:void 0,patterns:vc(this.j.excludePattern,void 0)}]);const r=ix(i);return{folder:y.from(e.folder),excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function wj(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var bj=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new Sj(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!ha(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(yj(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function yj(e){return e instanceof kn?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var Sj=class M4{static{this.b=4e3}static{this.c=50}constructor(t,i){this.j=t,this.k=i,this.d=0,this.f=[],this.g=0}addItem(t,i){t&&this.l(t,i)}addItems(t,i){t&&this.m(t,i)}l(t,i){this.f.push(t),this.g+=i,this.n()}m(t,i){this.f=this.f.concat(t),this.g+=i,this.n()}n(){this.d<M4.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},M4.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=void 0))}},x$=U("IExtHostSearch"),zb=class{constructor(t,i,r){this.o=t,this.q=i,this.s=r,this.c=this.o.getProxy(V.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new vj}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,new dj(i)),this.c.$registerTextSearchProvider(r,this.t(t)),se(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerTextSearchProvider(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,i),this.c.$registerTextSearchProvider(r,this.t(t)),se(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProvider(t,i){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const r=this.e++;return this.i.set(r,i),this.c.$registerAITextSearchProvider(r,this.t(t)),se(()=>{this.j.delete(t),this.i.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProviderOld(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,new S$(i)),this.c.$registerFileSearchProvider(r,this.t(t)),se(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProvider(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,i),this.c.$registerFileSearchProvider(r,this.t(t)),se(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,s){const n=Vb(r),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,i,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,i,r){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,i,r,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=Vb(r);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s)}$provideAITextSearchResults(t,i,r,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=Vb(r);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s,c=>this.c.$handleKeywordResult(t,i,c))}$enableExtensionHostSearch(){}async $getAIName(t){const i=this.i.get(t);if(!(!i||!i.provideAITextSearchResults))return i.name??"AI"}v(t,i){return new C$({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"textSearchProvider")}w(t,i){return new C$({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"aiTextSearchProvider")}};zb=__decorate([__param(0,Ne),__param(1,Jh),__param(2,De)],zb);function Vb(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(Ej),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>y.revive(t))}}function Ej(e){return Xt(e)}var Gb=class extends $2{constructor(t,i){super(i.logLevel,i.logsLocation,i.loggers.map(r=>Xt(r))),this.c=t.getProxy(V.MainThreadLogger)}$setLogLevel(t,i){i?this.setLogLevel(y.revive(i),t):this.setLogLevel(t)}setVisibility(t,i){super.setVisibility(t,i),this.c.$setVisibility(t,i)}s(t,i,r){return new Cj(this.c,t,i,r)}};Gb=__decorate([__param(0,Ne),__param(1,Mt)],Gb);var Cj=class extends lS{constructor(e,t,i,r){super(r?.logLevel==="always"),this.r=e,this.s=t,this.n=!1,this.q=[],this.setLevel(i),this.r.$createLogger(t,r).then(()=>{this.u(this.q),this.n=!0})}m(e,t){const i=[[e,t]];this.n?this.u(i):this.q.push(...i)}u(e){this.r.$log(this.s,e)}flush(){this.r.$flush(this.s)}},k$=U("IExtHostTerminalShellIntegration"),Jb=class extends Y{constructor(t,i){super(),this.h=i,this.b=new Map,this.c=new P,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new P,this.onDidStartTerminalShellExecution=this.f.event,this.g=new P,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(V.MainThreadTerminalShellIntegration),this.D(se(()=>{for(const[r,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t,i){const r=this.h.getTerminalById(t);if(!r)return;const s=r.value;let n=this.b.get(t);n||(n=new xj(r.value,i,this.f),this.b.set(t,n),n.store.add(r.onWillDispose(()=>this.b.get(t)?.dispose())),n.store.add(n.onDidRequestShellExecution(o=>this.a.$executeCommand(t,o))),n.store.add(n.onDidRequestEndExecution(o=>this.g.fire(o))),n.store.add(n.onDidRequestChangeShellIntegration(o=>this.c.fire(o))),r.shellIntegration=n.value),this.c.fire({terminal:s,shellIntegration:n.value})}$shellExecutionStart(t,i,r,s,n,o){this.b.has(t)||this.$shellIntegrationChange(t,i);const a={value:r,confidence:s,isTrusted:n};this.b.get(t)?.startShellExecution(a,this.j(o))}$shellExecutionEnd(t,i,r,s,n){const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,i){this.b.get(t)?.emitData(i)}$shellEnvChange(t,i,r,s){this.b.get(t)?.setEnv(i,r,s)}$cwdChange(t,i){this.b.get(t)?.setCwd(this.j(i))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}j(t){return t?y.file(t):void 0}};Jb=__decorate([__param(0,Ne),__param(1,Ec)],Jb);var xj=class extends Y{get currentExecution(){return this.f}constructor(e,t,i){super(),this.r=e,this.s=i,this.a=[],this.store=this.D(new ae),this.j=this.D(new P),this.onDidRequestChangeShellIntegration=this.j.event,this.m=this.D(new P),this.onDidRequestShellExecution=this.m.event,this.n=this.D(new P),this.onDidRequestEndExecution=this.n.event,this.q=this.D(new P),this.onDidRequestNewExecution=this.q.event;const r=this;this.value={get cwd(){return r.h},get env(){if(r.g)return Object.freeze({isTrusted:r.g.isTrusted,value:Object.freeze({...r.g.value})})},executeCommand(s,n){if(!t)throw new Error("This terminal does not support the executeCommand API.");let o=s;if(n)for(const l of n)!l.match(/["'`]/)&&l.match(/\s/)?o+=` "${l}"`:o+=` ${l}`;r.m.fire(o);const a={value:o,confidence:Jl.High,isTrusted:!0};return r.requestNewShellExecution(a,r.h).value}}}requestNewShellExecution(e,t){const i=new $$(e,t??this.h);return rg(e.value).length>1&&(this.c={isMultiLine:!0,unresolvedCommandLines:rg(e.value)}),this.a.push(i),this.q.fire(e.value),i}startShellExecution(e,t){if(this.b&&(this.n.fire({terminal:this.r,shellIntegration:this.value,execution:this.b.value,exitCode:void 0}),this.b=void 0),this.f){if(this.c?.isMultiLine&&this.c.unresolvedCommandLines){const r=I$(this.c.unresolvedCommandLines,e);if(r){this.c.unresolvedCommandLines=r.unresolvedCommandLines;return}}this.f.endExecution(void 0),this.f.flush(),this.n.fire({terminal:this.r,shellIntegration:this.value,execution:this.f.value,exitCode:void 0})}let i;if(e.confidence===Jl.High)for(const[r,s]of this.a.entries())if(s.value.commandLine.value===e.value){i=s,this.c={isMultiLine:!1,unresolvedCommandLines:void 0},i=s,this.a.splice(r,1);break}else{const n=I$(rg(s.value.commandLine.value),e);if(n){this.c={isMultiLine:!0,unresolvedCommandLines:n.unresolvedCommandLines},i=s,this.a.splice(r,1);break}}else i=this.a.shift();i||(i=new $$(e,t??this.h)),this.f=i,this.s.fire({terminal:this.r,shellIntegration:this.value,execution:this.f.value})}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){if(!(this.c?.isMultiLine&&this.c.unresolvedCommandLines&&this.c.unresolvedCommandLines.length>0)&&this.f){const i=this.c?.isMultiLine?this.f.value.commandLine:e;this.f.endExecution(i);const r=this.f;this.b=r,this.f=void 0,r.flush().then(()=>{this.b===r&&(this.n.fire({terminal:this.r,shellIntegration:this.value,execution:r.value,exitCode:t}),this.b=void 0)})}}setEnv(e,t,i){const r={};for(let s=0;s<e.length;s++)r[e[s]]=t[s];this.g={value:r,isTrusted:i},this.t()}setCwd(e){let t=!1;y.isUri(this.h)?t=!y.isUri(e)||this.h.toString()!==e.toString():this.h!==e&&(t=!0),t&&(this.h=e,this.t())}t(){this.j.fire({terminal:this.r,shellIntegration:this.value})}},$$=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const i=this;this.value={get commandLine(){return i.c},get cwd(){return i.cwd},read(){return i.d()}}}d(){if(!this.a){if(this.b)return zm.EMPTY;this.a=new kj}return this.a.createIterable()}emitData(e){this.b||this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.b=!0}async flush(){this.a&&(await this.a.flush(),this.a.dispose(),this.a=void 0)}},kj=class extends Y{constructor(){super(...arguments),this.b=[],this.c=[]}createIterable(){this.a||(this.a=new Cr);const e=this.a,t=new zm(async i=>{this.c.push(i),await e.wait()});return this.b.push(t),t}emitData(e){for(const t of this.c)t.emitOne(e)}endExecution(){this.a?.open()}async flush(){await Promise.all(this.b.map(e=>e.toPromise()))}};function rg(e){return e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0)}function I$(e,t){if(e.length===0)return!1;const i=[...e],r=rg(t.value);if(i&&i.length>0){for(;i.length>0&&i[0]===r[0];)i.shift(),r.shift();if(r.length===0)return{unresolvedCommandLines:i}}return!1}var D$;(function(e){e[e.CR=13]="CR",e[e.LF=10]="LF",e[e.COLON=58]="COLON",e[e.SPACE=32]="SPACE"})(D$||(D$={}));var Qb=class{constructor(e){this.a="",this.b="",this.f=[],this.g=!1,this.h=e,this.i=new TextDecoder("utf-8")}getLastEventId(){return this.d}getReconnectionTime(){return this.e}feed(e){if(e.length===0)return;let t=0;for(this.g&&e[0]===10&&t++,this.g=!1;t<e.length;){const i=e.indexOf(13,t),r=e.indexOf(10,t),s=i===-1?r:r===-1?i:Math.min(i,r);if(s===-1)break;let n="";for(const o of this.f)n+=this.i.decode(o,{stream:!0});n+=this.i.decode(e.subarray(t,s)),this.j(n),this.f.length=0,t=s+(e[s]===13&&e[s+1]===10?2:1)}t<e.length?this.f.push(e.subarray(t)):this.g=e[e.length-1]===13}j(e){if(!e.length){this.l();return}if(e.startsWith(":"))return;let t,i;const r=e.indexOf(":");r===-1?(t=e,i=""):(t=e.substring(0,r),i=e.substring(r+1),i.startsWith(" ")&&(i=i.substring(1))),this.k(t,i)}k(e,t){switch(e){case"event":this.b=t;break;case"data":this.a+=t,this.a+=`
`;break;case"id":t.includes("\0")?this.c=void 0:this.c=this.d=t;break;case"retry":/^\d+$/.test(t)&&(this.e=parseInt(t,10));break}}l(){if(this.a===""){this.a="",this.b="";return}this.a.endsWith(`
`)&&(this.a=this.a.substring(0,this.a.length-1));const e={type:this.b||"message",data:this.a};this.c!==void 0&&(e.id=this.c),this.e!==void 0&&(e.retry=this.e),this.h(e),this.reset()}reset(){this.a="",this.b="",this.c=void 0}},Zb=class{validateOrThrow(e){const t=this.validate(e);if(t.error)throw new Error(t.error.message);return t.content}},sg=class extends Zb{constructor(e){super(),this.a=e}validate(e){return typeof e!==this.a?{content:void 0,error:{message:`Expected ${this.a}, but got ${typeof e}`}}:{content:e,error:void 0}}getJSONSchema(){return{type:this.a}}},$j=new sg("string");function ng(){return $j}var Ij=new sg("number");function Dj(){return Ij}var oQ=new sg("boolean"),Pj=new sg("object");function Xb(){return Pj}var Yb=class{constructor(e){this.validator=e}};function Ic(e){return new Yb(e)}var Aj=class extends Zb{constructor(e){super(),this.a=e}validate(e){if(typeof e!="object"||e===null)return{content:void 0,error:{message:"Expected object"}};const t={};for(const i in this.a){const r=this.a[i],s=e[i],n=r instanceof Yb,o=n?r.validator:r;if(n&&s===void 0)continue;const{content:a,error:c}=o.validate(s);if(c)return{content:void 0,error:{message:`Error in property '${i}': ${c.message}`}};t[i]=a}return{content:t,error:void 0}}getJSONSchema(){const e=[],t={};for(const[r,s]of Object.entries(this.a)){const n=s instanceof Yb,o=n?s.validator:s;t[r]=o.getJSONSchema(),n||e.push(r)}return{type:"object",properties:t,...e.length>0?{required:e}:{}}}};function og(e){return new Aj(e)}var Tj=class extends Zb{constructor(e){super(),this.a=e}validate(e){if(!Array.isArray(e))return{content:void 0,error:{message:"Expected array"}};const t=[];for(let i=0;i<e.length;i++){const{content:r,error:s}=this.a.validate(e[i]);if(s)return{content:void 0,error:{message:`Error in element ${i}: ${s.message}`}};t.push(r)}return{content:t,error:void 0}}getJSONSchema(){return{type:"array",items:this.a.getJSONSchema()}}};function P$(e){return new Tj(e)}var Kb=U("IExtHostMpcService"),Rj=og({label:ng(),version:Ic(ng()),metadata:Ic(og({capabilities:Ic(Xb()),serverInfo:Ic(Xb()),tools:Ic(P$(og({availability:Dj(),definition:Xb()})))})),authentication:Ic(og({providerId:ng(),scopes:P$(ng())}))}),ey=class extends Y{constructor(t,i,r,s,n){super(),this.h=i,this.j=r,this.n=s,this.q=n,this.c=new Set,this.f=this.D(new Xc),this.g=new Map,this.b=t.getProxy(V.MainThreadMcp)}$startMcp(t,i){this.r(t,Pl.fromSerialized(i.launch),i.defaultCwd&&y.revive(i.defaultCwd),i.errorOnUserInteraction)}r(t,i,r,s){if(i.type===2){this.f.set(t,new Mj(t,i,this.b,this.h,s));return}throw new Error("not implemented")}async $substituteVariables(t,i){const r=y.revive(t),s=r&&await this.n.resolveWorkspaceFolder(r);return(await this.q.getResolver()).resolveAsync(s&&{uri:s.uri,name:s.name,index:s.index},i)}$stopMcp(t){this.f.get(t)?.close().then(()=>this.u(t))}u(t){this.f.deleteAndDispose(t)}$sendMessage(t,i){this.f.get(t)?.send(i)}async $waitForInitialCollectionProviders(){await Promise.all(this.c)}async $resolveMcpLaunch(t,i){const r=this.g.get(t);if(!r)return;const s=r.servers.find(o=>o.label===i);if(!s)return;if(!r.provider.resolveMcpServerDefinition)return Au.from(s);const n=await r.provider.resolveMcpServerDefinition(s,Be.None);return n?Au.from(n):void 0}registerMcpConfigurationProvider(t,i,r){const s=new ae,n=t.contributes?.mcpServerDefinitionProviders?.find(l=>l.id===i);if(!n)throw new Error(`MCP configuration providers must be registered in the contributes.mcpServerDefinitionProviders array within your package.json, but "${i}" was not`);const o={id:oN(t.identifier,i),isTrustedByDefault:!0,label:n?.label??t.displayName??t.name,scope:1,canResolveLaunch:typeof r.resolveMcpServerDefinition=="function",extensionId:t.identifier.value,configTarget:this.j.remote.isRemote?4:2},a=async()=>{const l=await r.provideMcpServerDefinitions(Be.None);this.g.set(o.id,{servers:l??[],provider:r});const u=[];for(const h of l??[]){let f=qe.toKey(t.identifier)+"/"+h.label;if(u.some(w=>w.id===f)){let w=2;for(;u.some(S=>S.id===f+w);)w++;f=f+w}Rj.validateOrThrow(h),h.authentication&&T(t,"mcpToolDefinitions");let g;const m=h;Je(t,"mcpToolDefinitions")&&m.metadata&&(g={capabilities:m.metadata.capabilities,instructions:m.metadata.instructions,serverInfo:m.metadata.serverInfo,tools:m.metadata.tools?.map(w=>({availability:w.availability===Vf.Dynamic?1:0,definition:w.definition}))}),u.push({id:f,label:h.label,cacheNonce:h.version||"$$NONE",staticMetadata:g,launch:Au.from(h)})}this.b.$upsertMcpCollection(o,u)};s.add(se(()=>{this.g.delete(o.id),this.b.$deleteMcpCollection(o.id)})),r.onDidChangeMcpServerDefinitions&&s.add(r.onDidChangeMcpServerDefinitions(a)),r.onDidChangeServerDefinitions&&s.add(r.onDidChangeServerDefinitions(a)),r.onDidChange&&s.add(r.onDidChange(a));const c=new Promise(l=>{setTimeout(()=>a().finally(()=>{this.c.delete(c),l()}),0)});return this.c.add(c),s}};ey=__decorate([__param(0,Ne),__param(1,De),__param(2,Mt),__param(3,os),__param(4,ig)],ey);var A$;(function(e){e[e.Unknown=0]="Unknown",e[e.Http=1]="Http",e[e.SSE=2]="SSE"})(A$||(A$={}));var Lj=5,Nj=[301,302,303,307,308],Mj=class extends Y{constructor(e,t,i,r,s){super(),this.q=e,this.r=t,this.u=i,this.w=r,this.y=s,this.b=new jT,this.c=new Vr,this.f={value:0},this.g=new rt,this.h=new AbortController,this.n=!1,this.D(se(()=>{this.h.abort(),this.g.dispose(!0)})),this.u.$onDidChangeState(this.q,{state:2})}async send(e){try{this.f.value===0?await this.b.queue(()=>this.C(e)):await this.C(e)}catch(t){const i=`Error sending message to ${this.r.uri}: ${String(t)}`;this.u.$onDidChangeState(this.q,{state:3,message:i})}}async close(){if(this.f.value===1&&this.f.sessionId&&!this.n){this.n=!0;try{await this.z(this.f.sessionId)}catch{}}this.u.$onDidChangeState(this.q,{state:0})}async z(e){const t={...Object.fromEntries(this.r.headers),"Mcp-Session-Id":e};await this.N(t),await this.R(this.r.uri.toString(!0),{method:"DELETE",headers:t})}C(e){return this.f.value===2?this.L(this.f.endpoint,e):this.F(e,this.f.value===1?this.f.sessionId:void 0)}async F(e,t){const i=new TextEncoder().encode(e),r={...Object.fromEntries(this.r.headers),"Content-Type":"application/json","Content-Length":String(i.length),Accept:"text/event-stream, application/json"};t&&(r["Mcp-Session-Id"]=t),await this.N(r);const s=await this.Q(this.r.uri.toString(!0),{method:"POST",headers:r,body:i},r),n=this.f.value===0,o=s.headers.get("Mcp-Session-Id");if(o&&(this.f={value:1,sessionId:o}),this.f.value===0&&s.status>=400&&s.status<500&&!ty(s.status)){this.O(de.Info,`${s.status} status sending message to ${this.r.uri}, will attempt to fall back to legacy SSE`),this.G(e);return}if(s.status>=300){const a=this.f.value===1&&!!this.f.sessionId&&(s.status===400||s.status===404);this.u.$onDidChangeState(this.q,{state:3,message:`${s.status} status sending message to ${this.r.uri}: ${await this.P(s)}`+(a?"; will retry with new session ID":""),shouldRetry:a});return}this.f.value===0&&(this.f={value:1,sessionId:void 0}),n&&this.I(),await this.H(s,e)}async G(e){const t=await this.J();t&&(this.f={value:2,endpoint:t},await this.L(t,e))}async H(e,t){if(e.status===202)return;const i=e.headers.get("Content-Type")?.toLowerCase()||"";if(i.startsWith("text/event-stream")){const r=new Qb(s=>{if(s.type==="message")this.u.$onDidReceiveMessage(this.q,s.data);else if(s.type==="endpoint")throw this.O(de.Warning,`Received SSE endpoint from a POST to ${this.r.uri}, will fall back to legacy SSE`),this.G(t),new oi});try{await this.M(r,e)}catch(s){this.O(de.Warning,`Error reading SSE stream: ${String(s)}`)}}else if(i.startsWith("application/json"))this.u.$onDidReceiveMessage(this.q,await e.text());else{const r=await e.text();Oj(r)?this.u.$onDidReceiveMessage(this.q,r):this.O(de.Warning,`Unexpected ${e.status} response for request: ${r}`)}}async I(){let e,t;for(let i=0;!this.B.isDisposed;i++){t!==void 0?(await Qi(Math.max(0,t-Date.now()),this.g.token),t=void 0):await Qi(Math.min(i*1e3,3e4),this.g.token);let r;try{const n={...Object.fromEntries(this.r.headers),Accept:"text/event-stream"};await this.N(n),this.f.value===1&&this.f.sessionId!==void 0&&(n["Mcp-Session-Id"]=this.f.sessionId),e&&(n["Last-Event-ID"]=e),r=await this.Q(this.r.uri.toString(!0),{method:"GET",headers:n},n)}catch{this.O(de.Info,`Error connecting to ${this.r.uri} for async notifications, will retry`);continue}if(r.status>=400){this.O(de.Debug,`${r.status} status connecting to ${this.r.uri} for async notifications; they will be disabled: ${await this.P(r)}`);return}r.headers.get("content-type")?.toLowerCase().includes("text/event-stream")&&(i=0);const s=new Qb(n=>{n.retry&&(t=Date.now()+n.retry),n.type==="message"&&n.data&&this.u.$onDidReceiveMessage(this.q,n.data),n.id&&(e=n.id)});try{await this.M(s,r)}catch(n){this.O(de.Info,`Error reading from async stream, we will reconnect: ${n}`)}}}async J(){const e=new Vr,t={...Object.fromEntries(this.r.headers),Accept:"text/event-stream"};await this.N(t);let i;try{if(i=await this.Q(this.r.uri.toString(!0),{method:"GET",headers:t},t),i.status>=300){this.u.$onDidChangeState(this.q,{state:3,message:`${i.status} status connecting to ${this.r.uri} as SSE: ${await this.P(i)}`});return}}catch(s){this.u.$onDidChangeState(this.q,{state:3,message:`Error connecting to ${this.r.uri} as SSE: ${s}`});return}const r=new Qb(s=>{s.type==="message"?this.u.$onDidReceiveMessage(this.q,s.data):s.type==="endpoint"&&e.complete(new URL(s.data,this.r.uri.toString(!0)).toString())});return this.D(se(()=>e.cancel())),this.M(r,i).catch(s=>{this.u.$onDidChangeState(this.q,{state:3,message:`Error reading SSE stream: ${String(s)}`})}),e.p}async L(e,t){const i=new TextEncoder().encode(t),r={...Object.fromEntries(this.r.headers),"Content-Type":"application/json","Content-Length":String(i.length)};await this.N(r);const s=await this.R(e,{method:"POST",headers:r,body:i});s.status>=300&&this.O(de.Warning,`${s.status} status sending message to ${this.c}: ${await this.P(s)}`)}async M(e,t){if(!t.body)return;const i=t.body.getReader();let r;do{try{r=await qm(i.read(),this.g.token)}catch(s){if(i.cancel(),this.B.isDisposed)return;throw s}r.value&&e.feed(r.value)}while(!r.done)}async N(e,t){if(this.j)try{const i={authorizationServer:this.j.authorizationServer.toJSON(),authorizationServerMetadata:this.j.serverMetadata,resourceMetadata:this.j.resourceMetadata,scopes:this.j.scopes},r=await this.u.$getTokenFromServerMetadata(this.q,i,{errorOnUserInteraction:this.y,forceNewRegistration:t});r&&(e.Authorization=`Bearer ${r}`)}catch(i){if(AE.is(i))throw this.u.$onDidChangeState(this.q,{state:0,reason:"needs-user-interaction"}),new oi;this.O(de.Warning,`Error getting token from server metadata: ${String(i)}`)}if(this.r.authentication)try{this.O(de.Debug,`Using provided authentication config: providerId=${this.r.authentication.providerId}, scopes=${this.r.authentication.scopes.join(", ")}`);const i=await this.u.$getTokenForProviderId(this.q,this.r.authentication.providerId,this.r.authentication.scopes,{errorOnUserInteraction:this.y,forceNewRegistration:t});i&&(e.Authorization=`Bearer ${i}`,this.O(de.Info,"Successfully obtained token from provided authentication config"))}catch(i){if(AE.is(i))throw this.u.$onDidChangeState(this.q,{state:0,reason:"needs-user-interaction"}),new oi;this.O(de.Warning,`Error getting token from provided authentication config: ${String(i)}`)}return e}O(e,t){this.B.isDisposed||this.u.$onDidPublishLog(this.q,e,t)}async P(e){try{return await e.text()}catch{return e.statusText}}async Q(e,t,i){const r=()=>this.R(e,t);let s=await r();if(ty(s.status)&&(this.j?this.j.update(s)&&(await this.N(i),i.Authorization&&(t.headers=i,s=await r())):(this.j=await Fj(e,s,{launchHeaders:this.r.headers,fetch:(n,o)=>this.R(n,o),log:(n,o)=>this.O(n,o)}),await this.N(i),i.Authorization&&(t.headers=i,s=await r()))),i.Authorization&&ty(s.status)){const n=await this.P(s);this.O(de.Debug,`Received ${s.status} status with Authorization header, retrying with new auth registration. Error details: ${n||"no additional details"}`),await this.N(i,!0),s=await r()}return s}async R(e,t){if(t.headers["user-agent"]=`${gi.nameLong}/${gi.version}`,a1(this.w.getLevel(),de.Trace)){const s={...t,headers:{...t.headers}};s.body&&(s.body=new TextDecoder().decode(s.body)),s.headers?.Authorization&&(s.headers.Authorization="***"),this.O(de.Trace,`Fetching ${e} with options: ${JSON.stringify(s)}`)}let i=e,r;for(let s=0;s<Lj&&(r=await this.S(i,{...t,signal:this.h.signal,redirect:"manual"}),!!Nj.includes(r.status));s++){const n=r.headers.get("location");if(!n)break;const o=new URL(n,i).toString();this.O(de.Trace,`Redirect (${r.status}) from ${i} to ${o}`),i=o,(r.status===303||(r.status===301||r.status===302)&&t.method==="POST")&&(t.method="GET",delete t.body)}if(a1(this.w.getLevel(),de.Trace)){const s={};r.headers.forEach((n,o)=>{s[o]=n}),this.O(de.Trace,`Fetched ${i}: ${JSON.stringify({status:r.status,headers:s})}`)}return r}S(e,t){return fetch(e,t)}};function Oj(e){try{return JSON.parse(e),!0}catch{return!1}}function ty(e){return e===401||e===403}var T$=class{constructor(e,t,i,r,s){this.authorizationServer=e,this.serverMetadata=t,this.resourceMetadata=i,this.b=s,this.a=r}get scopes(){return this.a}update(e){const t=this.c(e);return mF(t,this.a)?!1:(this.b(de.Debug,`Scopes changed from ${JSON.stringify(this.a)} to ${JSON.stringify(t)}, updating`),this.a=t,!0)}c(e){if(!e.headers.has("WWW-Authenticate"))return;const t=e.headers.get("WWW-Authenticate"),i=qx(t);for(const r of i)if(r.scheme==="Bearer"&&r.params.scope){const s=r.params.scope.split(Xw).filter(n=>n.trim().length);if(s.length)return this.b(de.Debug,`Found scope challenge in WWW-Authenticate header: ${r.params.scope}`),s}}};async function Fj(e,t,i){const{launchHeaders:r,fetch:s,log:n}=i,{resourceMetadataChallenge:o,scopesChallenge:a}=Uj(t,n);let c,l,u=a;try{const{metadata:m,errors:w}=await vF(e,o,{sameOriginHeaders:{...Object.fromEntries(r),"MCP-Protocol-Version":vd.LATEST_PROTOCOL_VERSION},fetch:(S,C)=>s(S,C)});for(const S of w)n(de.Warning,`Error fetching resource metadata: ${S}`);c=m.authorization_servers?.[0],n(de.Debug,`Using auth server metadata url: ${c}`),u??=m.scopes_supported,l=m}catch(m){n(de.Warning,`Could not fetch resource metadata: ${String(m)}`)}const h=new URL(t.url).origin;let f={};c||(c=h,f={...Object.fromEntries(r),"MCP-Protocol-Version":vd.LATEST_PROTOCOL_VERSION});try{n(de.Debug,`Fetching auth server metadata for: ${c} ...`);const m=await yF(c,{additionalHeaders:f,fetch:(w,S)=>s(w,S)});return n(de.Info,"Populated auth metadata"),new T$(y.parse(c),m,l,u,n)}catch(m){n(de.Warning,`Error populating auth server metadata for ${c}: ${String(m)}`)}const g=pF(new URL(h));return n(de.Info,"Using default auth metadata"),new T$(y.parse(h),g,l,u,n)}function Uj(e,t){let i,r;if(e.headers.has("WWW-Authenticate")){const s=e.headers.get("WWW-Authenticate"),n=qx(s);for(const o of n)if(o.scheme==="Bearer"){if(!i&&o.params.resource_metadata&&(i=o.params.resource_metadata,t(de.Debug,`Found resource_metadata challenge in WWW-Authenticate header: ${i}`)),!r&&o.params.scope){const a=o.params.scope.split(Xw).filter(c=>c.trim().length);a.length&&(t(de.Debug,`Found scope challenge in WWW-Authenticate header: ${o.params.scope}`),r=a)}if(i&&r)break}}return{resourceMetadataChallenge:i,scopesChallenge:r}}var R$=U("IExtHostDataChannels"),jj=class{constructor(){this.a=new Map}createDataChannel(e,t){T(e,"dataChannels");let i=this.a.get(t);return i||(i=new Hj(t),this.a.set(t,i)),i}$onDidReceiveData(e,t){const i=this.a.get(e);i&&i._fireDidReceiveData(t)}},Hj=class extends Y{constructor(e){super(),this.b=e,this.a=new P,this.onDidReceiveData=this.a.event,this.D(this.a)}_fireDidReceiveData(e){this.a.fire({data:e})}toString(){return`DataChannel(${this.b})`}};Ge(bb,wb,1),Ge(ro,Gb,1),Ge(Hu,xb,1),Ge(zo,qw,0),Ge(qp,rb,0),Ge(cb,lb,0),Ge(Rs,Pw,0),Ge(Hp,Nw,0),Ge(tg,Wb,0),Ge(y$,qb,0),Ge(Rk,$b,0),Ge(kc,Db,0),Ge(yb,Sb,0),Ge(ma,_2,0),Ge(Tk,kb,1),Ge(x$,zb,0),Ge(Lw,yx,0),Ge(l$,jb,0),Ge(Ec,Gw,0),Ge(k$,Jb,0),Ge(Hw,Ww,0),Ge(_p,Kw,0),Ge(Bp,tb,0),Ge(os,kw,0),Ge(vb,xk,0),Ge(Qu,Hb,0),Ge(ig,_b,0),Ge(Kb,ey,0),Ge(R$,jj,0);var Wj=class extends Y{constructor(e,t=[]){super(),this.a=new k2([e,...t]),this.D(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},iy=class extends Wj{constructor(t,i,r){const s=r.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=r.remote.isRemote?d(3042,null):d(t?3043:3044,null);super(i.createLogger(s,{name:n}))}};iy=__decorate([__param(1,ro),__param(2,Mt)],iy);var _j=new class{constructor(){this.a=0,this.b=new P,this.onDidChangeZoomLevel=this.b.event}getZoomLevel(){return this.a}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this.a!==e&&(this.a=e,this.b.fire(this.a))}},Bj=yi?1.5:1.35,ry=8,qj=class O4{static _create(t,i,r,s,n,o,a,c,l){o===0?o=Bj*r:o<ry&&(o=o*r),o=Math.round(o),o<ry&&(o=ry);const u=1+(l?0:_j.getZoomLevel()*.1);return r*=u,o*=u,n===N$&&(i==="normal"||i==="bold"?n=L$:(n=`'wght' ${parseInt(i,10)}`,i="normal")),new O4({pixelRatio:c,fontFamily:t,fontWeight:i,fontSize:r,fontFeatureSettings:s,fontVariationSettings:n,lineHeight:o,letterSpacing:a})}constructor(t){this._bareFontInfoBrand=void 0,this.pixelRatio=t.pixelRatio,this.fontFamily=String(t.fontFamily),this.fontWeight=String(t.fontWeight),this.fontSize=t.fontSize,this.fontFeatureSettings=t.fontFeatureSettings,this.fontVariationSettings=t.fontVariationSettings,this.lineHeight=t.lineHeight|0,this.letterSpacing=t.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const t=cs.fontFamily,i=O4.a(this.fontFamily);return t&&this.fontFamily!==t?`${i}, ${t}`:i}static a(t){return/[,"']/.test(t)?t:/[+ ]/.test(t)?`"${t}"`:t}},zj=2,Vj=class extends qj{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=zj,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}},L$="normal",N$="translate",Gj="Consolas, 'Courier New', monospace",Jj="Menlo, Monaco, 'Courier New', monospace",Qj="'Droid Sans Mono', monospace",cs={fontFamily:yi?Jj:ai?Gj:Qj,fontWeight:"normal",fontSize:yi?12:14,lineHeight:0,letterSpacing:0},M$={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},O$;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(O$||(O$={}));var Zj=8,Xj=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},et=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return cg(e,t)}compute(e,t,i){return i}},ag=class{constructor(e,t){this.newValue=e,this.didChange=t}};function cg(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new ag(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const r=Array.isArray(e)&&Array.isArray(t)&&wi(e,t);return new ag(t,!r)}let i=!1;for(const r in t)if(t.hasOwnProperty(r)){const s=cg(e[r],t[r]);s.didChange&&(e[r]=s.newValue,i=!0)}return new ag(e,i)}var An=class{constructor(e,t){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=t}applyUpdate(e,t){return cg(e,t)}validate(e){return this.defaultValue}},Dc=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return cg(e,t)}compute(e,t,i){return i}};function Q(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var le=class extends Dc{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return Q(e,this.defaultValue)}};function Yj(e,t,i,r){if(typeof e=="string"&&(e=parseInt(e,10)),typeof e!="number"||isNaN(e))return t;let s=e;return s=Math.max(i,s),s=Math.min(r,s),s|0}var Me=class b3 extends Dc{static clampedInt(t,i,r,s){return Yj(t,i,r,s)}constructor(t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=r,o.minimum=s,o.maximum=n),super(t,i,r,o),this.minimum=s,this.maximum=n}validate(t){return b3.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},fr=class y3 extends Dc{static clamp(t,i,r){return t<i?i:t>r?r:t}static float(t,i){return typeof t=="string"&&(t=parseFloat(t)),typeof t!="number"||isNaN(t)?i:t}constructor(t,i,r,s,n,o,a){typeof n<"u"&&(n.type="number",n.default=r,n.minimum=o,n.maximum=a),super(t,i,r,n),this.validationFn=s,this.minimum=o,this.maximum=a}validate(t){return this.validationFn(y3.float(t,this.defaultValue))}},mi=class S3 extends Dc{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.default=r),super(t,i,r,s)}validate(t){return S3.string(t,this.defaultValue)}};function Ye(e,t,i,r){return typeof e!="string"?t:r&&e in r?r[e]:i.indexOf(e)===-1?t:e}var tt=class extends Dc{constructor(e,t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r.slice(0),s.default=i),super(e,t,i,s),this.c=r}validate(e){return Ye(e,this.defaultValue,this.c)}},Xu=class extends et{constructor(e,t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=r),super(e,t,i,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function Kj(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var eH=class extends et{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(316,null),d(317,null),d(318,null)],default:"auto",tags:["accessibility"],description:d(319,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}},tH=class extends et{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(29,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(320,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(321,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Q(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Q(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},F$;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(F$||(F$={}));function iH(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var pr;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(pr||(pr={}));function U$(e){switch(e){case"line":return pr.Line;case"block":return pr.Block;case"underline":return pr.Underline;case"line-thin":return pr.LineThin;case"block-outline":return pr.BlockOutline;case"underline-thin":return pr.UnderlineThin}}var rH=class extends An{constructor(){super(162,"")}compute(e,t,i){const r=["monaco-editor"];return t.get(48)&&r.push(t.get(48)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(82)==="default"?r.push("mouse-default"):t.get(82)==="copy"&&r.push("mouse-copy"),t.get(127)&&r.push("showUnused"),t.get(157)&&r.push("showDeprecated"),r.join(" ")}},sH=class extends le{constructor(){super(45,"emptySelectionClipboard",!0,{description:d(322,null)})}compute(e,t,i){return i&&e.emptySelectionClipboard}},nH=class extends et{constructor(){const e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(50,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(323,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(324,null),d(325,null),d(326,null)],description:d(327,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(328,null),d(329,null),d(330,null)],description:d(331,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(332,null),included:yi},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(333,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(334,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(335,null),d(336,null)],description:d(337,null)},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(338,null),d(339,null)],description:d(340,null)},"editor.find.findOnType":{type:"boolean",default:e.findOnType,description:d(341,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Q(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:Q(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:typeof t.seedSearchStringFromSelection=="boolean"?t.seedSearchStringFromSelection?"always":"never":Ye(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof t.autoFindInSelection=="boolean"?t.autoFindInSelection?"always":"never":Ye(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Q(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Q(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Q(t.loop,this.defaultValue.loop),history:Ye(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:Ye(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}},oH=class Uc extends et{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(60,"fontLigatures",Uc.OFF,{anyOf:[{type:"boolean",description:d(342,null)},{type:"string",description:d(343,null)}],description:d(344,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Uc.OFF:t==="true"?Uc.ON:t:t?Uc.ON:Uc.OFF}},aH=class jc extends et{static{this.OFF=L$}static{this.TRANSLATE=N$}constructor(){super(63,"fontVariations",jc.OFF,{anyOf:[{type:"boolean",description:d(345,null)},{type:"string",description:d(346,null)}],description:d(347,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?jc.OFF:t==="true"?jc.TRANSLATE:t:t?jc.TRANSLATE:jc.OFF}compute(t,i,r){return t.fontInfo.fontVariationSettings}},cH=class extends An{constructor(){super(59,new Vj({pixelRatio:0,fontFamily:"",fontWeight:"",fontSize:0,fontFeatureSettings:"",fontVariationSettings:"",lineHeight:0,letterSpacing:0,isMonospace:!1,typicalHalfwidthCharacterWidth:0,typicalFullwidthCharacterWidth:0,canUseHalfwidthRightwardsArrow:!1,spaceWidth:0,middotWidth:0,wsmiddotWidth:0,maxDigitWidth:0},!1))}compute(e,t,i){return e.fontInfo}},lH=class extends An{constructor(){super(161,pr.Line)}compute(e,t,i){return e.inputMode==="overtype"?t.get(92):t.get(34)}},uH=class extends An{constructor(){super(170,!1)}compute(e,t){return e.editContextSupported&&t.get(44)}},hH=class extends An{constructor(){super(172,!1)}compute(e,t){return e.accessibilitySupport===2?t.get(7):t.get(6)}},dH=class extends Dc{constructor(){super(61,"fontSize",cs.fontSize,{type:"number",minimum:6,maximum:100,default:cs.fontSize,description:d(348,null)})}validate(e){const t=fr.float(e,this.defaultValue);return t===0?cs.fontSize:fr.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},fH=class Hc extends et{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(62,"fontWeight",cs.fontWeight,{anyOf:[{type:"number",minimum:Hc.d,maximum:Hc.e,errorMessage:d(349,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Hc.c}],default:cs.fontWeight,description:d(350,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Me.clampedInt(t,cs.fontWeight,Hc.d,Hc.e))}},pH=class extends et{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(351,null),d(352,null),d(353,null)]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(67,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(354,null)},"editor.gotoLocation.multipleDefinitions":{description:d(355,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(356,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(357,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(358,null),...t},"editor.gotoLocation.multipleReferences":{description:d(359,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:d(360,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:d(361,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:d(362,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:d(363,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:d(364,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Ye(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:Ye(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:Ye(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:Ye(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:Ye(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:Ye(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:Ye(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:mi.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:mi.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:mi.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:mi.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:mi.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:mi.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},gH=class extends et{constructor(){const e={enabled:"on",delay:300,hidingDelay:300,sticky:!0,above:!0};super(69,"hover",e,{"editor.hover.enabled":{type:"string",enum:["on","off","onKeyboardModifier"],default:e.enabled,markdownEnumDescriptions:[d(365,null),d(366,null),d(367,null,yi?"Command":"Control")],description:d(368,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(369,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(370,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,markdownDescription:d(371,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(372,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Ye(t.enabled,this.defaultValue.enabled,["on","off","onKeyboardModifier"]),delay:Me.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Q(t.sticky,this.defaultValue.sticky),hidingDelay:Me.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Q(t.above,this.defaultValue.above)}}},j$;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(j$||(j$={}));var mH=class tm extends An{constructor(){super(165,{width:0,height:0,glyphMarginLeft:0,glyphMarginWidth:0,glyphMarginDecorationLaneCount:0,lineNumbersLeft:0,lineNumbersWidth:0,decorationsLeft:0,decorationsWidth:0,contentLeft:0,contentWidth:0,minimap:{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:0,minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:0},viewportColumn:0,isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:-1,verticalScrollbarWidth:0,horizontalScrollbarHeight:0,overviewRuler:{top:0,width:0,height:0,right:0}})}compute(t,i,r){return tm.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,r=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,i-1));const n=(r+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,i){const r=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let f=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const g=t.minimap.maxColumn,m=t.minimap.size,w=t.minimap.side,S=t.verticalScrollbarWidth,C=t.viewLineCount,k=t.remainingWidth,A=t.isViewportWrapping,G=h?2:3;let H=Math.floor(n*s);const K=H/n;let F=!1,z=!1,Z=G*f,Le=f/n,it=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:pe,extraLinesBeforeFirstLine:$e,extraLinesBeyondLastLine:Ie,desiredRatio:lt,minimapLineCount:At}=tm.computeContainedMinimapLineCount({viewLineCount:C,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(C/At>1)F=!0,z=!0,f=1,Z=1,Le=f/n;else{let Et=!1,ui=f+1;if(m==="fit"){const Wt=Math.ceil(($e+C+Ie)*Z);A&&a&&k<=i.stableFitRemainingWidth?(Et=!0,ui=i.stableFitMaxMinimapScale):Et=Wt>H}if(m==="fill"||Et){F=!0;const Wt=f;Z=Math.min(c*n,Math.max(1,Math.floor(1/lt))),A&&a&&k<=i.stableFitRemainingWidth&&(ui=i.stableFitMaxMinimapScale),f=Math.min(ui,Math.max(1,Math.floor(Z/G))),f>Wt&&(it=Math.min(2,f/Wt)),Le=f/n/it,H=Math.ceil(Math.max(pe,$e+C+Ie)*Z),A?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=k,i.stableFitMaxMinimapScale=f):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const Pe=Math.floor(g*Le),q=Math.min(Pe,Math.max(0,Math.floor((k-S-2)*Le/(l+Le)))+Zj);let W=Math.floor(n*q);const _=W/n;W=Math.floor(W*it);const J=h?1:2,X=w==="left"?0:r-q-S;return{renderMinimap:J,minimapLeft:X,minimapWidth:q,minimapHeightIsEditorHeight:F,minimapIsSampling:z,minimapScale:f,minimapLineHeight:Z,minimapCanvasInnerWidth:W,minimapCanvasInnerHeight:H,minimapCanvasOuterWidth:_,minimapCanvasOuterHeight:K}}static computeLayout(t,i){const r=i.outerWidth|0,s=i.outerHeight|0,n=i.lineHeight|0,o=i.lineNumbersDigitCount|0,a=i.typicalHalfwidthCharacterWidth,c=i.maxDigitWidth,l=i.pixelRatio,u=i.viewLineCount,h=t.get(154),f=h==="inherit"?t.get(153):h,g=f==="inherit"?t.get(149):f,m=t.get(152),w=i.isDominatedByLongLines,S=t.get(66),C=t.get(76).renderType!==0,k=t.get(77),A=t.get(119),G=t.get(96),H=t.get(81),K=t.get(117),F=K.verticalScrollbarSize,z=K.verticalHasArrows,Z=K.arrowSize,Le=K.horizontalScrollbarSize,it=t.get(52),Pe=t.get(126)!=="never";let q=t.get(74);it&&Pe&&(q+=16);let W=0;if(C){const _s=Math.max(o,k);W=Math.round(_s*c)}let _=0;S&&(_=n*i.glyphMarginDecorationLaneCount);let J=0,X=J+_,pe=X+W,$e=pe+q;const Ie=r-_-W-q;let lt=!1,At=!1,Qe=-1;t.get(2)===2&&f==="inherit"&&w?(lt=!0,At=!0):g==="on"||g==="bounded"?At=!0:g==="wordWrapColumn"&&(Qe=m);const Et=tm.c({outerWidth:r,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:A,paddingTop:G.top,paddingBottom:G.bottom,minimap:H,verticalScrollbarWidth:F,viewLineCount:u,remainingWidth:Ie,isViewportWrapping:At},i.memory||new Xj);Et.renderMinimap!==0&&Et.minimapLeft===0&&(J+=Et.minimapWidth,X+=Et.minimapWidth,pe+=Et.minimapWidth,$e+=Et.minimapWidth);const ui=Ie-Et.minimapWidth,Wt=Math.max(1,Math.floor((ui-F-2)/a)),ir=z?Z:0;return At&&(Qe=Math.max(1,Wt),g==="bounded"&&(Qe=Math.min(Qe,m))),{width:r,height:s,glyphMarginLeft:J,glyphMarginWidth:_,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:X,lineNumbersWidth:W,decorationsLeft:pe,decorationsWidth:q,contentLeft:$e,contentWidth:ui,minimap:Et,viewportColumn:Wt,isWordWrapMinified:lt,isViewportWrapping:At,wrappingColumn:Qe,verticalScrollbarWidth:F,horizontalScrollbarHeight:Le,overviewRuler:{top:ir,width:F,height:s-2*ir,right:0}}}},vH=class extends et{constructor(){super(156,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(373,null),d(374,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(375,null)}})}validate(e){return Ye(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}},Ms;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(Ms||(Ms={}));var wH=class extends et{constructor(){const e={enabled:Ms.OnCode};super(73,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[Ms.Off,Ms.OnCode,Ms.On],default:e.enabled,enumDescriptions:[d(376,null),d(377,null),d(378,null)],description:d(379,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Ye(e.enabled,this.defaultValue.enabled,[Ms.Off,Ms.OnCode,Ms.On])}}},bH=class extends et{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(131,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(380,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(381,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(382,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(383,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),maxLineCount:Me.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Ye(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Q(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},yH=class extends et{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(159,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(384,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(385,null),d(386,null,yi?"Ctrl+Option":"Ctrl+Alt"),d(387,null,yi?"Ctrl+Option":"Ctrl+Alt"),d(388,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(389,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(390,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(391,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(392,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Ye(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Me.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:mi.string(t.fontFamily,this.defaultValue.fontFamily),padding:Q(t.padding,this.defaultValue.padding),maximumLength:Me.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},SH=class extends et{constructor(){super(74,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Me.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Me.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}},EH=class extends fr{constructor(){super(75,"lineHeight",cs.lineHeight,e=>fr.clamp(e,0,150),{markdownDescription:d(393,null)},0,150)}compute(e,t,i){return e.fontInfo.lineHeight}},CH=class extends et{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:"none",renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(81,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(394,null)},"editor.minimap.autohide":{type:"string",enum:["none","mouseover","scroll"],enumDescriptions:[d(395,null),d(396,null),d(397,null)],default:e.autohide,description:d(398,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(399,null),d(400,null),d(401,null)],default:e.size,description:d(402,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(403,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(404,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(405,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(406,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(407,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(408,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(409,null)},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:d(410,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(411,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(412,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let i=this.defaultValue.markSectionHeaderRegex;const r=t.markSectionHeaderRegex;if(typeof r=="string")try{new RegExp(r,"d"),i=r}catch{}return{enabled:Q(t.enabled,this.defaultValue.enabled),autohide:Ye(t.autohide,this.defaultValue.autohide,["none","mouseover","scroll"]),size:Ye(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Ye(t.side,this.defaultValue.side,["right","left"]),showSlider:Ye(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Q(t.renderCharacters,this.defaultValue.renderCharacters),scale:Me.clampedInt(t.scale,1,1,3),maxColumn:Me.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Q(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Q(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:i,sectionHeaderFontSize:fr.clamp(fr.float(t.sectionHeaderFontSize,this.defaultValue.sectionHeaderFontSize),4,32),sectionHeaderLetterSpacing:fr.clamp(fr.float(t.sectionHeaderLetterSpacing,this.defaultValue.sectionHeaderLetterSpacing),0,5)}}};function xH(e){return e==="ctrlCmd"?yi?"metaKey":"ctrlKey":"altKey"}var kH=class extends et{constructor(){super(96,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(413,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(414,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Me.clampedInt(t.top,0,0,1e3),bottom:Me.clampedInt(t.bottom,0,0,1e3)}}},$H=class extends et{constructor(){const e={enabled:!0,cycle:!0};super(98,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(415,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(416,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),cycle:Q(t.cycle,this.defaultValue.cycle)}}},IH=class extends An{constructor(){super(163,1)}compute(e,t,i){return e.pixelRatio}},DH=class extends et{constructor(){super(100,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},PH=class extends et{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(417,null),d(418,null),d(419,null)]}];super(102,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(420,null)},comments:{anyOf:t,default:e.comments,description:d(421,null)},other:{anyOf:t,default:e.other,description:d(422,null)}},default:e,markdownDescription:d(423,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=Ye(t,this.defaultValue.other,s),typeof i=="boolean"?o=i?"on":"off":o=Ye(i,this.defaultValue.comments,s),typeof r=="boolean"?a=r?"on":"off":a=Ye(r,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},H$;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(H$||(H$={}));var AH=class extends et{constructor(){super(76,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(424,null),d(425,null),d(426,null),d(427,null)],default:"on",description:d(428,null)})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}},TH=class extends et{constructor(){const e=[],t={type:"number",description:d(429,null)};super(116,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(430,null),format:"color-hex"}}}]},default:e,description:d(431,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Me.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:Me.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}},RH=class extends et{constructor(){super(105,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function W$(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var LH=class extends et{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(117,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(432,null),d(433,null),d(434,null)],default:"auto",description:d(435,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(436,null),d(437,null),d(438,null)],default:"auto",description:d(439,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(440,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(441,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(442,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(443,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Me.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=Me.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Me.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:W$(t.vertical,this.defaultValue.vertical),horizontal:W$(t.horizontal,this.defaultValue.horizontal),useShadows:Q(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Q(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Q(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Q(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Q(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Me.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:Me.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:Q(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Q(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},Or="inUntrustedWorkspace",Vo={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},NH=class extends et{constructor(){const e={nonBasicASCII:Or,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Or,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(142,"unicodeHighlight",e,{[Vo.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Or],default:e.nonBasicASCII,description:d(444,null)},[Vo.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(445,null)},[Vo.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(446,null)},[Vo.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Or],default:e.includeComments,description:d(447,null)},[Vo.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Or],default:e.includeStrings,description:d(448,null)},[Vo.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(449,null),additionalProperties:{type:"boolean"}},[Vo.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(450,null)}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Ci(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Ci(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new ag(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Pc(t.nonBasicASCII,Or,[!0,!1,Or]),invisibleCharacters:Q(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Q(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Pc(t.includeComments,Or,[!0,!1,Or]),includeStrings:Pc(t.includeStrings,Or,[!0,!1,Or]),allowedCharacters:this.c(t.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(t.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,s]of Object.entries(e))s===!0&&(i[r]=!0);return i}},MH=class extends et{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,minShowDelay:0,suppressInSnippetMode:!0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always",showLongDistanceHint:!0},triggerCommandOnProviderChange:!1,experimental:{suppressInlineSuggestions:"",showOnSuggestConflict:"never",emptyResponseInformation:!0}};super(71,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(451,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(452,null),d(453,null),d(454,null)],description:d(455,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(456,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(457,null)},"editor.inlineSuggest.suppressInSnippetMode":{type:"boolean",default:e.suppressInSnippetMode,description:d(458,null)},"editor.inlineSuggest.minShowDelay":{type:"number",default:0,minimum:0,maximum:1e4,description:d(459,null)},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:"string",default:e.experimental.suppressInlineSuggestions,tags:["experimental"],description:d(460,null),experiment:{mode:"auto"}},"editor.inlineSuggest.experimental.emptyResponseInformation":{type:"boolean",default:e.experimental.emptyResponseInformation,tags:["experimental"],description:d(461,null),experiment:{mode:"auto"}},"editor.inlineSuggest.triggerCommandOnProviderChange":{type:"boolean",default:e.triggerCommandOnProviderChange,tags:["experimental"],description:d(462,null),experiment:{mode:"auto"}},"editor.inlineSuggest.experimental.showOnSuggestConflict":{type:"string",default:e.experimental.showOnSuggestConflict,tags:["experimental"],enum:["always","never","whenSuggestListIsIncomplete"],description:d(463,null),experiment:{mode:"auto"}},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(464,null)},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:d(465,null),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showLongDistanceHint":{type:"boolean",default:e.edits.showLongDistanceHint,description:d(466,null),tags:["nextEditSuggestions","experimental"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:d(467,null),enum:["auto","never"],enumDescriptions:[d(468,null),d(469,null)],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:d(470,null),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),mode:Ye(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Ye(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Q(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Q(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:mi.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:Q(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),minShowDelay:Me.clampedInt(t.minShowDelay,0,0,1e4),suppressInSnippetMode:Q(t.suppressInSnippetMode,this.defaultValue.suppressInSnippetMode),edits:this.c(t.edits),triggerCommandOnProviderChange:Q(t.triggerCommandOnProviderChange,this.defaultValue.triggerCommandOnProviderChange),experimental:this.d(t.experimental)}}c(e){if(!e||typeof e!="object")return this.defaultValue.edits;const t=e;return{enabled:Q(t.enabled,this.defaultValue.edits.enabled),showCollapsed:Q(t.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:Ye(t.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),showLongDistanceHint:Q(t.showLongDistanceHint,this.defaultValue.edits.showLongDistanceHint),renderSideBySide:Ye(t.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"])}}d(e){if(!e||typeof e!="object")return this.defaultValue.experimental;const t=e;return{suppressInlineSuggestions:mi.string(t.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions),showOnSuggestConflict:Ye(t.showOnSuggestConflict,this.defaultValue.experimental.showOnSuggestConflict,["always","never","whenSuggestListIsIncomplete"]),emptyResponseInformation:Q(t.emptyResponseInformation,this.defaultValue.experimental.emptyResponseInformation)}}},OH=class extends et{constructor(){const e={enabled:M$.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:M$.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(21,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(471,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(472,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Q(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},FH=class extends et{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(22,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(473,null),d(474,null),d(475,null)],default:e.bracketPairs,description:d(476,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(477,null),d(478,null),d(479,null)],default:e.bracketPairsHorizontal,description:d(480,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(481,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(482,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(483,null),d(484,null),d(485,null)],default:e.highlightActiveIndentation,description:d(486,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Pc(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Pc(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Q(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Q(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Pc(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Pc(e,t,i){const r=i.indexOf(e);return r===-1?t:i[r]}var UH=class extends et{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(134,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(487,null),d(488,null)],default:e.insertMode,description:d(489,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(490,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(491,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(492,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(493,null),d(494,null),d(495,null),d(496,null)],default:e.selectionMode,markdownDescription:d(497,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(498,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(499,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(500,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(501,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(502,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(503,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(504,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(505,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(506,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(507,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(508,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(509,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(510,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(511,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(512,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(513,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(514,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(515,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(516,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(517,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(518,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(519,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(520,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(521,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(522,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(523,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(524,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(525,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(526,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(527,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(528,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(529,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(530,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(531,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(532,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(533,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(534,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Ye(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Q(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Q(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Q(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Q(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Ye(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Q(t.showIcons,this.defaultValue.showIcons),showStatusBar:Q(t.showStatusBar,this.defaultValue.showStatusBar),preview:Q(t.preview,this.defaultValue.preview),previewMode:Ye(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Q(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Q(t.showMethods,this.defaultValue.showMethods),showFunctions:Q(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Q(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Q(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Q(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Q(t.showFields,this.defaultValue.showFields),showVariables:Q(t.showVariables,this.defaultValue.showVariables),showClasses:Q(t.showClasses,this.defaultValue.showClasses),showStructs:Q(t.showStructs,this.defaultValue.showStructs),showInterfaces:Q(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Q(t.showModules,this.defaultValue.showModules),showProperties:Q(t.showProperties,this.defaultValue.showProperties),showEvents:Q(t.showEvents,this.defaultValue.showEvents),showOperators:Q(t.showOperators,this.defaultValue.showOperators),showUnits:Q(t.showUnits,this.defaultValue.showUnits),showValues:Q(t.showValues,this.defaultValue.showValues),showConstants:Q(t.showConstants,this.defaultValue.showConstants),showEnums:Q(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Q(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Q(t.showKeywords,this.defaultValue.showKeywords),showWords:Q(t.showWords,this.defaultValue.showWords),showColors:Q(t.showColors,this.defaultValue.showColors),showFiles:Q(t.showFiles,this.defaultValue.showFiles),showReferences:Q(t.showReferences,this.defaultValue.showReferences),showFolders:Q(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Q(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Q(t.showSnippets,this.defaultValue.showSnippets),showUsers:Q(t.showUsers,this.defaultValue.showUsers),showIssues:Q(t.showIssues,this.defaultValue.showIssues)}}},jH=class extends et{constructor(){super(129,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(535,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(536,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Q(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Q(e.selectSubwords,this.defaultValue.selectSubwords)}}},HH=class extends et{constructor(){const e=[];super(147,"wordSegmenterLocales",e,{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:d(537,null),type:"array",items:{type:"string"},default:e})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}},_$;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(_$||(_$={}));var WH=class extends et{constructor(){super(155,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(538,null),d(539,null),d(540,null),d(541,null)],description:d(542,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}},_H=class extends An{constructor(){super(166,{isDominatedByLongLines:!1,isWordWrapMinified:!1,isViewportWrapping:!1,wrappingColumn:-1})}compute(e,t,i){const r=t.get(165);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}},BH=class extends et{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(43,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(543,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(544,null),enum:["afterDrop","never"],enumDescriptions:[d(545,null),d(546,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showDropSelector:Ye(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},qH=class extends et{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(97,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(547,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(548,null),enum:["afterPaste","never"],enumDescriptions:[d(549,null),d(550,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showPasteSelector:Ye(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},zH=[];function R(e){return zH[e.id]=e,e}var B$;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.allowOverflow=4]="allowOverflow",e[e.allowVariableLineHeights=5]="allowVariableLineHeights",e[e.allowVariableFonts=6]="allowVariableFonts",e[e.allowVariableFontsInAccessibilityMode=7]="allowVariableFontsInAccessibilityMode",e[e.ariaLabel=8]="ariaLabel",e[e.ariaRequired=9]="ariaRequired",e[e.autoClosingBrackets=10]="autoClosingBrackets",e[e.autoClosingComments=11]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=12]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=13]="autoClosingDelete",e[e.autoClosingOvertype=14]="autoClosingOvertype",e[e.autoClosingQuotes=15]="autoClosingQuotes",e[e.autoIndent=16]="autoIndent",e[e.autoIndentOnPaste=17]="autoIndentOnPaste",e[e.autoIndentOnPasteWithinString=18]="autoIndentOnPasteWithinString",e[e.automaticLayout=19]="automaticLayout",e[e.autoSurround=20]="autoSurround",e[e.bracketPairColorization=21]="bracketPairColorization",e[e.guides=22]="guides",e[e.codeLens=23]="codeLens",e[e.codeLensFontFamily=24]="codeLensFontFamily",e[e.codeLensFontSize=25]="codeLensFontSize",e[e.colorDecorators=26]="colorDecorators",e[e.colorDecoratorsLimit=27]="colorDecoratorsLimit",e[e.columnSelection=28]="columnSelection",e[e.comments=29]="comments",e[e.contextmenu=30]="contextmenu",e[e.copyWithSyntaxHighlighting=31]="copyWithSyntaxHighlighting",e[e.cursorBlinking=32]="cursorBlinking",e[e.cursorSmoothCaretAnimation=33]="cursorSmoothCaretAnimation",e[e.cursorStyle=34]="cursorStyle",e[e.cursorSurroundingLines=35]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=36]="cursorSurroundingLinesStyle",e[e.cursorWidth=37]="cursorWidth",e[e.cursorHeight=38]="cursorHeight",e[e.disableLayerHinting=39]="disableLayerHinting",e[e.disableMonospaceOptimizations=40]="disableMonospaceOptimizations",e[e.domReadOnly=41]="domReadOnly",e[e.dragAndDrop=42]="dragAndDrop",e[e.dropIntoEditor=43]="dropIntoEditor",e[e.editContext=44]="editContext",e[e.emptySelectionClipboard=45]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=46]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=47]="experimentalWhitespaceRendering",e[e.extraEditorClassName=48]="extraEditorClassName",e[e.fastScrollSensitivity=49]="fastScrollSensitivity",e[e.find=50]="find",e[e.fixedOverflowWidgets=51]="fixedOverflowWidgets",e[e.folding=52]="folding",e[e.foldingStrategy=53]="foldingStrategy",e[e.foldingHighlight=54]="foldingHighlight",e[e.foldingImportsByDefault=55]="foldingImportsByDefault",e[e.foldingMaximumRegions=56]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=57]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=58]="fontFamily",e[e.fontInfo=59]="fontInfo",e[e.fontLigatures=60]="fontLigatures",e[e.fontSize=61]="fontSize",e[e.fontWeight=62]="fontWeight",e[e.fontVariations=63]="fontVariations",e[e.formatOnPaste=64]="formatOnPaste",e[e.formatOnType=65]="formatOnType",e[e.glyphMargin=66]="glyphMargin",e[e.gotoLocation=67]="gotoLocation",e[e.hideCursorInOverviewRuler=68]="hideCursorInOverviewRuler",e[e.hover=69]="hover",e[e.inDiffEditor=70]="inDiffEditor",e[e.inlineSuggest=71]="inlineSuggest",e[e.letterSpacing=72]="letterSpacing",e[e.lightbulb=73]="lightbulb",e[e.lineDecorationsWidth=74]="lineDecorationsWidth",e[e.lineHeight=75]="lineHeight",e[e.lineNumbers=76]="lineNumbers",e[e.lineNumbersMinChars=77]="lineNumbersMinChars",e[e.linkedEditing=78]="linkedEditing",e[e.links=79]="links",e[e.matchBrackets=80]="matchBrackets",e[e.minimap=81]="minimap",e[e.mouseStyle=82]="mouseStyle",e[e.mouseWheelScrollSensitivity=83]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=84]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=85]="multiCursorMergeOverlapping",e[e.multiCursorModifier=86]="multiCursorModifier",e[e.mouseMiddleClickAction=87]="mouseMiddleClickAction",e[e.multiCursorPaste=88]="multiCursorPaste",e[e.multiCursorLimit=89]="multiCursorLimit",e[e.occurrencesHighlight=90]="occurrencesHighlight",e[e.occurrencesHighlightDelay=91]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=92]="overtypeCursorStyle",e[e.overtypeOnPaste=93]="overtypeOnPaste",e[e.overviewRulerBorder=94]="overviewRulerBorder",e[e.overviewRulerLanes=95]="overviewRulerLanes",e[e.padding=96]="padding",e[e.pasteAs=97]="pasteAs",e[e.parameterHints=98]="parameterHints",e[e.peekWidgetDefaultFocus=99]="peekWidgetDefaultFocus",e[e.placeholder=100]="placeholder",e[e.definitionLinkOpensInPeek=101]="definitionLinkOpensInPeek",e[e.quickSuggestions=102]="quickSuggestions",e[e.quickSuggestionsDelay=103]="quickSuggestionsDelay",e[e.readOnly=104]="readOnly",e[e.readOnlyMessage=105]="readOnlyMessage",e[e.renameOnType=106]="renameOnType",e[e.renderRichScreenReaderContent=107]="renderRichScreenReaderContent",e[e.renderControlCharacters=108]="renderControlCharacters",e[e.renderFinalNewline=109]="renderFinalNewline",e[e.renderLineHighlight=110]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=111]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=112]="renderValidationDecorations",e[e.renderWhitespace=113]="renderWhitespace",e[e.revealHorizontalRightPadding=114]="revealHorizontalRightPadding",e[e.roundedSelection=115]="roundedSelection",e[e.rulers=116]="rulers",e[e.scrollbar=117]="scrollbar",e[e.scrollBeyondLastColumn=118]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=119]="scrollBeyondLastLine",e[e.scrollPredominantAxis=120]="scrollPredominantAxis",e[e.selectionClipboard=121]="selectionClipboard",e[e.selectionHighlight=122]="selectionHighlight",e[e.selectionHighlightMaxLength=123]="selectionHighlightMaxLength",e[e.selectionHighlightMultiline=124]="selectionHighlightMultiline",e[e.selectOnLineNumbers=125]="selectOnLineNumbers",e[e.showFoldingControls=126]="showFoldingControls",e[e.showUnused=127]="showUnused",e[e.snippetSuggestions=128]="snippetSuggestions",e[e.smartSelect=129]="smartSelect",e[e.smoothScrolling=130]="smoothScrolling",e[e.stickyScroll=131]="stickyScroll",e[e.stickyTabStops=132]="stickyTabStops",e[e.stopRenderingLineAfter=133]="stopRenderingLineAfter",e[e.suggest=134]="suggest",e[e.suggestFontSize=135]="suggestFontSize",e[e.suggestLineHeight=136]="suggestLineHeight",e[e.suggestOnTriggerCharacters=137]="suggestOnTriggerCharacters",e[e.suggestSelection=138]="suggestSelection",e[e.tabCompletion=139]="tabCompletion",e[e.tabIndex=140]="tabIndex",e[e.trimWhitespaceOnDelete=141]="trimWhitespaceOnDelete",e[e.unicodeHighlighting=142]="unicodeHighlighting",e[e.unusualLineTerminators=143]="unusualLineTerminators",e[e.useShadowDOM=144]="useShadowDOM",e[e.useTabStops=145]="useTabStops",e[e.wordBreak=146]="wordBreak",e[e.wordSegmenterLocales=147]="wordSegmenterLocales",e[e.wordSeparators=148]="wordSeparators",e[e.wordWrap=149]="wordWrap",e[e.wordWrapBreakAfterCharacters=150]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=151]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=152]="wordWrapColumn",e[e.wordWrapOverride1=153]="wordWrapOverride1",e[e.wordWrapOverride2=154]="wordWrapOverride2",e[e.wrappingIndent=155]="wrappingIndent",e[e.wrappingStrategy=156]="wrappingStrategy",e[e.showDeprecated=157]="showDeprecated",e[e.inertialScroll=158]="inertialScroll",e[e.inlayHints=159]="inlayHints",e[e.wrapOnEscapedLineFeeds=160]="wrapOnEscapedLineFeeds",e[e.effectiveCursorStyle=161]="effectiveCursorStyle",e[e.editorClassName=162]="editorClassName",e[e.pixelRatio=163]="pixelRatio",e[e.tabFocusMode=164]="tabFocusMode",e[e.layoutInfo=165]="layoutInfo",e[e.wrappingInfo=166]="wrappingInfo",e[e.defaultColorDecorators=167]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=168]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=169]="inlineCompletionsAccessibilityVerbose",e[e.effectiveEditContext=170]="effectiveEditContext",e[e.scrollOnMiddleClick=171]="scrollOnMiddleClick",e[e.effectiveAllowVariableFonts=172]="effectiveAllowVariableFonts"})(B$||(B$={}));var lQ={acceptSuggestionOnCommitCharacter:R(new le(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(551,null)})),acceptSuggestionOnEnter:R(new tt(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(552,null),""],markdownDescription:d(553,null)})),accessibilitySupport:R(new eH),accessibilityPageSize:R(new Me(3,"accessibilityPageSize",500,1,1073741824,{description:d(554,null),tags:["accessibility"]})),allowOverflow:R(new le(4,"allowOverflow",!0)),allowVariableLineHeights:R(new le(5,"allowVariableLineHeights",!0,{description:d(555,null)})),allowVariableFonts:R(new le(6,"allowVariableFonts",!0,{description:d(556,null)})),allowVariableFontsInAccessibilityMode:R(new le(7,"allowVariableFontsInAccessibilityMode",!1,{description:d(557,null),tags:["accessibility"]})),ariaLabel:R(new mi(8,"ariaLabel",d(558,null))),ariaRequired:R(new le(9,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:R(new le(12,"screenReaderAnnounceInlineSuggestion",!0,{description:d(559,null),tags:["accessibility"]})),autoClosingBrackets:R(new tt(10,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(560,null),d(561,null),""],description:d(562,null)})),autoClosingComments:R(new tt(11,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(563,null),d(564,null),""],description:d(565,null)})),autoClosingDelete:R(new tt(13,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(566,null),""],description:d(567,null)})),autoClosingOvertype:R(new tt(14,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(568,null),""],description:d(569,null)})),autoClosingQuotes:R(new tt(15,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(570,null),d(571,null),""],description:d(572,null)})),autoIndent:R(new Xu(16,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Kj,{enumDescriptions:[d(573,null),d(574,null),d(575,null),d(576,null),d(577,null)],description:d(578,null)})),autoIndentOnPaste:R(new le(17,"autoIndentOnPaste",!1,{description:d(579,null)})),autoIndentOnPasteWithinString:R(new le(18,"autoIndentOnPasteWithinString",!0,{description:d(580,null)})),automaticLayout:R(new le(19,"automaticLayout",!1)),autoSurround:R(new tt(20,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(581,null),d(582,null),d(583,null),""],description:d(584,null)})),bracketPairColorization:R(new OH),bracketPairGuides:R(new FH),stickyTabStops:R(new le(132,"stickyTabStops",!1,{description:d(585,null)})),codeLens:R(new le(23,"codeLens",!0,{description:d(586,null)})),codeLensFontFamily:R(new mi(24,"codeLensFontFamily","",{description:d(587,null)})),codeLensFontSize:R(new Me(25,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(588,null)})),colorDecorators:R(new le(26,"colorDecorators",!0,{description:d(589,null)})),colorDecoratorActivatedOn:R(new tt(168,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(590,null),d(591,null),d(592,null)],description:d(593,null)})),colorDecoratorsLimit:R(new Me(27,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(594,null)})),columnSelection:R(new le(28,"columnSelection",!1,{description:d(595,null)})),comments:R(new tH),contextmenu:R(new le(30,"contextmenu",!0)),copyWithSyntaxHighlighting:R(new le(31,"copyWithSyntaxHighlighting",!0,{description:d(596,null)})),cursorBlinking:R(new Xu(32,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],iH,{description:d(597,null)})),cursorSmoothCaretAnimation:R(new tt(33,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(598,null),d(599,null),d(600,null)],description:d(601,null)})),cursorStyle:R(new Xu(34,"cursorStyle",pr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],U$,{description:d(602,null)})),overtypeCursorStyle:R(new Xu(92,"overtypeCursorStyle",pr.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],U$,{description:d(603,null)})),cursorSurroundingLines:R(new Me(35,"cursorSurroundingLines",0,0,1073741824,{description:d(604,null)})),cursorSurroundingLinesStyle:R(new tt(36,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(605,null),d(606,null)],markdownDescription:d(607,null)})),cursorWidth:R(new Me(37,"cursorWidth",0,0,1073741824,{markdownDescription:d(608,null)})),cursorHeight:R(new Me(38,"cursorHeight",0,0,1073741824,{markdownDescription:d(609,null)})),disableLayerHinting:R(new le(39,"disableLayerHinting",!1)),disableMonospaceOptimizations:R(new le(40,"disableMonospaceOptimizations",!1)),domReadOnly:R(new le(41,"domReadOnly",!1)),dragAndDrop:R(new le(42,"dragAndDrop",!0,{description:d(610,null)})),emptySelectionClipboard:R(new sH),dropIntoEditor:R(new BH),editContext:R(new le(44,"editContext",!0,{description:d(611,null),included:Pm||U5||T5})),renderRichScreenReaderContent:R(new le(107,"renderRichScreenReaderContent",!1,{markdownDescription:d(612,null)})),stickyScroll:R(new bH),experimentalGpuAcceleration:R(new tt(46,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[d(613,null),d(614,null)],description:d(615,null)})),experimentalWhitespaceRendering:R(new tt(47,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(616,null),d(617,null),d(618,null)],description:d(619,null)})),extraEditorClassName:R(new mi(48,"extraEditorClassName","")),fastScrollSensitivity:R(new fr(49,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(620,null)})),find:R(new nH),fixedOverflowWidgets:R(new le(51,"fixedOverflowWidgets",!1)),folding:R(new le(52,"folding",!0,{description:d(621,null)})),foldingStrategy:R(new tt(53,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(622,null),d(623,null)],description:d(624,null)})),foldingHighlight:R(new le(54,"foldingHighlight",!0,{description:d(625,null)})),foldingImportsByDefault:R(new le(55,"foldingImportsByDefault",!1,{description:d(626,null)})),foldingMaximumRegions:R(new Me(56,"foldingMaximumRegions",5e3,10,65e3,{description:d(627,null)})),unfoldOnClickAfterEndOfLine:R(new le(57,"unfoldOnClickAfterEndOfLine",!1,{description:d(628,null)})),fontFamily:R(new mi(58,"fontFamily",cs.fontFamily,{description:d(629,null)})),fontInfo:R(new cH),fontLigatures2:R(new oH),fontSize:R(new dH),fontWeight:R(new fH),fontVariations:R(new aH),formatOnPaste:R(new le(64,"formatOnPaste",!1,{description:d(630,null)})),formatOnType:R(new le(65,"formatOnType",!1,{description:d(631,null)})),glyphMargin:R(new le(66,"glyphMargin",!0,{description:d(632,null)})),gotoLocation:R(new pH),hideCursorInOverviewRuler:R(new le(68,"hideCursorInOverviewRuler",!1,{description:d(633,null)})),hover:R(new gH),inDiffEditor:R(new le(70,"inDiffEditor",!1)),inertialScroll:R(new le(158,"inertialScroll",!1,{description:d(634,null)})),letterSpacing:R(new fr(72,"letterSpacing",cs.letterSpacing,e=>fr.clamp(e,-5,20),{description:d(635,null)})),lightbulb:R(new wH),lineDecorationsWidth:R(new SH),lineHeight:R(new EH),lineNumbers:R(new AH),lineNumbersMinChars:R(new Me(77,"lineNumbersMinChars",5,1,300)),linkedEditing:R(new le(78,"linkedEditing",!1,{description:d(636,null)})),links:R(new le(79,"links",!0,{description:d(637,null)})),matchBrackets:R(new tt(80,"matchBrackets","always",["always","near","never"],{description:d(638,null)})),minimap:R(new CH),mouseStyle:R(new tt(82,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:R(new fr(83,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(639,null)})),mouseWheelZoom:R(new le(84,"mouseWheelZoom",!1,{markdownDescription:d(yi?640:641,null)})),multiCursorMergeOverlapping:R(new le(85,"multiCursorMergeOverlapping",!0,{description:d(642,null)})),multiCursorModifier:R(new Xu(86,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],xH,{markdownEnumDescriptions:[d(643,null),d(644,null)],markdownDescription:d(645,null)})),mouseMiddleClickAction:R(new tt(87,"mouseMiddleClickAction","default",["default","openLink","ctrlLeftClick"],{description:d(646,null)})),multiCursorPaste:R(new tt(88,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(647,null),d(648,null)],markdownDescription:d(649,null)})),multiCursorLimit:R(new Me(89,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(650,null)})),occurrencesHighlight:R(new tt(90,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(651,null),d(652,null),d(653,null)],markdownDescription:d(654,null)})),occurrencesHighlightDelay:R(new Me(91,"occurrencesHighlightDelay",0,0,2e3,{description:d(655,null),tags:["preview"]})),overtypeOnPaste:R(new le(93,"overtypeOnPaste",!0,{description:d(656,null)})),overviewRulerBorder:R(new le(94,"overviewRulerBorder",!0,{description:d(657,null)})),overviewRulerLanes:R(new Me(95,"overviewRulerLanes",3,0,3)),padding:R(new kH),pasteAs:R(new qH),parameterHints:R(new $H),peekWidgetDefaultFocus:R(new tt(99,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(658,null),d(659,null)],description:d(660,null)})),placeholder:R(new DH),definitionLinkOpensInPeek:R(new le(101,"definitionLinkOpensInPeek",!1,{description:d(661,null)})),quickSuggestions:R(new PH),quickSuggestionsDelay:R(new Me(103,"quickSuggestionsDelay",10,0,1073741824,{description:d(662,null),experiment:{mode:"auto"}})),readOnly:R(new le(104,"readOnly",!1)),readOnlyMessage:R(new RH),renameOnType:R(new le(106,"renameOnType",!1,{description:d(663,null),markdownDeprecationMessage:d(664,null)})),renderControlCharacters:R(new le(108,"renderControlCharacters",!0,{description:d(665,null),restricted:!0})),renderFinalNewline:R(new tt(109,"renderFinalNewline",Qs?"dimmed":"on",["off","on","dimmed"],{description:d(666,null)})),renderLineHighlight:R(new tt(110,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(667,null)],description:d(668,null)})),renderLineHighlightOnlyWhenFocus:R(new le(111,"renderLineHighlightOnlyWhenFocus",!1,{description:d(669,null)})),renderValidationDecorations:R(new tt(112,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:R(new tt(113,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(670,null),d(671,null),d(672,null),""],description:d(673,null)})),revealHorizontalRightPadding:R(new Me(114,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:R(new le(115,"roundedSelection",!0,{description:d(674,null)})),rulers:R(new TH),scrollbar:R(new LH),scrollBeyondLastColumn:R(new Me(118,"scrollBeyondLastColumn",4,0,1073741824,{description:d(675,null)})),scrollBeyondLastLine:R(new le(119,"scrollBeyondLastLine",!0,{description:d(676,null)})),scrollOnMiddleClick:R(new le(171,"scrollOnMiddleClick",!1,{description:d(677,null)})),scrollPredominantAxis:R(new le(120,"scrollPredominantAxis",!0,{description:d(678,null)})),selectionClipboard:R(new le(121,"selectionClipboard",!0,{description:d(679,null),included:Qs})),selectionHighlight:R(new le(122,"selectionHighlight",!0,{description:d(680,null)})),selectionHighlightMaxLength:R(new Me(123,"selectionHighlightMaxLength",200,0,1073741824,{description:d(681,null)})),selectionHighlightMultiline:R(new le(124,"selectionHighlightMultiline",!1,{description:d(682,null)})),selectOnLineNumbers:R(new le(125,"selectOnLineNumbers",!0)),showFoldingControls:R(new tt(126,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(683,null),d(684,null),d(685,null)],description:d(686,null)})),showUnused:R(new le(127,"showUnused",!0,{description:d(687,null)})),showDeprecated:R(new le(157,"showDeprecated",!0,{description:d(688,null)})),inlayHints:R(new yH),snippetSuggestions:R(new tt(128,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(689,null),d(690,null),d(691,null),d(692,null)],description:d(693,null)})),smartSelect:R(new jH),smoothScrolling:R(new le(130,"smoothScrolling",!1,{description:d(694,null)})),stopRenderingLineAfter:R(new Me(133,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:R(new UH),inlineSuggest:R(new MH),inlineCompletionsAccessibilityVerbose:R(new le(169,"inlineCompletionsAccessibilityVerbose",!1,{description:d(695,null)})),suggestFontSize:R(new Me(135,"suggestFontSize",0,0,1e3,{markdownDescription:d(696,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:R(new Me(136,"suggestLineHeight",0,0,1e3,{markdownDescription:d(697,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:R(new le(137,"suggestOnTriggerCharacters",!0,{description:d(698,null)})),suggestSelection:R(new tt(138,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(699,null),d(700,null),d(701,null)],description:d(702,null)})),tabCompletion:R(new tt(139,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(703,null),d(704,null),d(705,null)],description:d(706,null)})),tabIndex:R(new Me(140,"tabIndex",0,-1,1073741824)),trimWhitespaceOnDelete:R(new le(141,"trimWhitespaceOnDelete",!1,{description:d(707,null)})),unicodeHighlight:R(new NH),unusualLineTerminators:R(new tt(143,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(708,null),d(709,null),d(710,null)],description:d(711,null)})),useShadowDOM:R(new le(144,"useShadowDOM",!0)),useTabStops:R(new le(145,"useTabStops",!0,{description:d(712,null)})),wordBreak:R(new tt(146,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(713,null),d(714,null)],description:d(715,null)})),wordSegmenterLocales:R(new HH),wordSeparators:R(new mi(148,"wordSeparators",Lk,{description:d(716,null)})),wordWrap:R(new tt(149,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(717,null),d(718,null),d(719,null),d(720,null)],description:d(721,null)})),wordWrapBreakAfterCharacters:R(new mi(150,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:R(new mi(151,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:R(new Me(152,"wordWrapColumn",80,1,1073741824,{markdownDescription:d(722,null)})),wordWrapOverride1:R(new tt(153,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:R(new tt(154,"wordWrapOverride2","inherit",["off","on","inherit"])),wrapOnEscapedLineFeeds:R(new le(160,"wrapOnEscapedLineFeeds",!1,{markdownDescription:d(723,null)})),effectiveCursorStyle:R(new lH),editorClassName:R(new rH),defaultColorDecorators:R(new tt(167,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[d(724,null),d(725,null),d(726,null)],description:d(727,null)})),pixelRatio:R(new IH),tabFocusMode:R(new le(164,"tabFocusMode",!1,{markdownDescription:d(728,null)})),layoutInfo:R(new mH),wrappingInfo:R(new _H),wrappingIndent:R(new WH),wrappingStrategy:R(new vH),effectiveEditContextEnabled:R(new uH),effectiveAllowVariableFonts:R(new hH)};function q$(e,t,i,r,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=q$(a,t,i,r,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return r?e==="*"?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!r&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===i)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let f;if(typeof a=="string"?f=a:f={...a,base:aa(a.base)},f===t.fsPath||ka(f,t.fsPath))h=10;else return 0}return h}else return 0}}function z$(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(z$):!!e.notebookType}var sy;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(sy||(sy={}));var uQ=U("editSessionIdentityService"),ny;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(ny||(ny={}));var hQ=new x("debugType",void 0,{type:"string",description:d(7738,null)}),dQ=new x("debugConfigurationType",void 0,{type:"string",description:d(7739,null)}),fQ=new x("debugState","inactive",{type:"string",description:d(7740,null)}),VH="debugUx",pQ=new x(VH,"default",{type:"string",description:d(7741,null)}),gQ=new x("hasDebugged",!1,{type:"boolean",description:d(7742,null)}),mQ=new x("inDebugMode",!1,{type:"boolean",description:d(7743,null)}),vQ=new x("inDebugRepl",!1,{type:"boolean",description:d(7744,null)}),wQ=new x("breakpointWidgetVisible",!1,{type:"boolean",description:d(7745,null)}),bQ=new x("inBreakpointWidget",!1,{type:"boolean",description:d(7746,null)}),yQ=new x("breakpointsFocused",!0,{type:"boolean",description:d(7747,null)}),SQ=new x("watchExpressionsFocused",!0,{type:"boolean",description:d(7748,null)}),EQ=new x("watchExpressionsExist",!1,{type:"boolean",description:d(7749,null)}),CQ=new x("variablesFocused",!0,{type:"boolean",description:d(7750,null)}),xQ=new x("expressionSelected",!1,{type:"boolean",description:d(7751,null)}),kQ=new x("breakpointInputFocused",!1,{type:"boolean",description:d(7752,null)}),$Q=new x("callStackItemType",void 0,{type:"string",description:d(7753,null)}),IQ=new x("callStackSessionIsAttach",!1,{type:"boolean",description:d(7754,null)}),DQ=new x("callStackItemStopped",!1,{type:"boolean",description:d(7755,null)}),PQ=new x("callStackSessionHasOneThread",!1,{type:"boolean",description:d(7756,null)}),AQ=new x("callStackFocused",!0,{type:"boolean",description:d(7757,null)}),TQ=new x("watchItemType",void 0,{type:"string",description:d(7758,null)}),RQ=new x("canViewMemory",void 0,{type:"boolean",description:d(7759,null)}),LQ=new x("breakpointItemType",void 0,{type:"string",description:d(7760,null)}),NQ=new x("breakpointItemBytes",void 0,{type:"boolean",description:d(7761,null)}),MQ=new x("breakpointHasModes",!1,{type:"boolean",description:d(7762,null)}),OQ=new x("breakpointSupportsCondition",!1,{type:"boolean",description:d(7763,null)}),FQ=new x("loadedScriptsSupported",!1,{type:"boolean",description:d(7764,null)}),UQ=new x("loadedScriptsItemType",void 0,{type:"string",description:d(7765,null)}),jQ=new x("focusedSessionIsAttach",!1,{type:"boolean",description:d(7766,null)}),HQ=new x("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(7767,null)}),WQ=new x("stepBackSupported",!1,{type:"boolean",description:d(7768,null)}),_Q=new x("restartFrameSupported",!1,{type:"boolean",description:d(7769,null)}),BQ=new x("stackFrameSupportsRestart",!1,{type:"boolean",description:d(7770,null)}),qQ=new x("jumpToCursorSupported",!1,{type:"boolean",description:d(7771,null)}),zQ=new x("stepIntoTargetsSupported",!1,{type:"boolean",description:d(7772,null)}),VQ=new x("breakpointsExist",!1,{type:"boolean",description:d(7773,null)}),GQ=new x("debuggersAvailable",!1,{type:"boolean",description:d(7774,null)}),JQ=new x("debugExtensionAvailable",!0,{type:"boolean",description:d(7775,null)}),QQ=new x("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(7776,null)}),ZQ=new x("debugSetVariableSupported",!1,{type:"boolean",description:d(7777,null)}),XQ=new x("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(7778,null)}),YQ=new x("debugSetExpressionSupported",!1,{type:"boolean",description:d(7779,null)}),KQ=new x("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(7780,null)}),eZ=new x("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(7781,null)}),tZ=new x("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(7782,null)}),iZ=new x("terminateDebuggeeSupported",!1,{type:"boolean",description:d(7783,null)}),rZ=new x("suspendDebuggeeSupported",!1,{type:"boolean",description:d(7784,null)}),sZ=new x("terminateThreadsSupported",!1,{type:"boolean",description:d(7785,null)}),nZ=new x("variableEvaluateNamePresent",!1,{type:"boolean",description:d(7786,null)}),oZ=new x("variableIsReadonly",!1,{type:"boolean",description:d(7787,null)}),aZ=new x("variableValue",!1,{type:"string",description:d(7788,null)}),cZ=new x("variableType",!1,{type:"string",description:d(7789,null)}),lZ=new x("variableInterfaces",!1,{type:"array",description:d(7790,null)}),uZ=new x("variableName",!1,{type:"string",description:d(7791,null)}),hZ=new x("variableLanguage",!1,{type:"string",description:d(7792,null)}),dZ=new x("variableExtensionId",!1,{type:"string",description:d(7793,null)}),fZ=new x("exceptionWidgetVisible",!1,{type:"boolean",description:d(7794,null)}),pZ=new x("multiSessionRepl",!1,{type:"boolean",description:d(7795,null)}),gZ=new x("multiSessionDebug",!1,{type:"boolean",description:d(7796,null)}),mZ=new x("disassembleRequestSupported",!1,{type:"boolean",description:d(7797,null)}),vZ=new x("disassemblyViewFocus",!1,{type:"boolean",description:d(7798,null)}),wZ=new x("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(7799,null)}),bZ=new x("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(7800,null)}),yZ={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(7802,null)},V$;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(V$||(V$={}));var G$;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(G$||(G$={}));var J$;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(J$||(J$={}));var lg;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(lg||(lg={}));var Q$;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(Q$||(Q$={}));var SZ=U("debugService"),Z$;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(Z$||(Z$={}));var X$;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(X$||(X$={}));var Y$;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Y$||(Y$={}));var K$;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(K$||(K$={}));var e8;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:y.revive(t.iconPath.light),dark:y.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(e8||(e8={}));var GH=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this.a.size===0)throw new Error("No related information providers registered");const r=this.a.get(e);if(!r)throw new Error("related information provider not found");return await r.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this.c.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiRelatedInformationProvider(r,t),new Ee(()=>{this.c.$unregisterAiRelatedInformationProvider(r),this.a.delete(r)})}},JH=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiSettingsSearch)}async $startSearch(e,t,i,r){if(this.a.size===0)throw new Error("No related information providers registered");const s=this.a.get(e);if(!s)throw new Error("Settings search provider not found");const n=new Jw(o=>{this.c.$handleSearchResult(e,pw.fromSettingsSearchResult(o))});return s.provideSettingsSearchResults(t,i,n,r)}registerSettingsSearchProvider(e,t){const i=this.b;return this.b++,this.a.set(i,t),this.c.$registerAiSettingsSearchProvider(i),new Ee(()=>{this.c.$unregisterAiSettingsSearchProvider(i),this.a.delete(i)})}},t8;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(t8||(t8={}));function i8(e){for(let t=0,i=e.length;t<i;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function QH(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return F5()||i8(t),re.wrap(t)}function ZH(e){const t=e.buffer;if(F5()||i8(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const i=new Uint8Array(t.byteLength);return i.set(t),new Uint32Array(i.buffer,i.byteOffset,i.length/4)}}function oy(e){const t=new Uint32Array(XH(e));let i=0;if(t[i++]=e.id,e.type==="full")t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const r of e.deltas)t[i++]=r.start,t[i++]=r.deleteCount,r.data?(t[i++]=r.data.length,t.set(r.data,i),i+=r.data.length):t[i++]=0}return QH(t)}function XH(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}function r8(e){const t=ZH(e);let i=0;const r=t[i++];if(t[i++]===1){const a=t[i++],c=t.subarray(i,i+a);return i+=a,{id:r,type:"full",data:c}}const n=t[i++],o=[];for(let a=0;a<n;a++){const c=t[i++],l=t[i++],u=t[i++];let h;u>0&&(h=t.subarray(i,i+u),i+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:r,type:"delta",deltas:o}}var YH=[new we("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[j.Uri,j.Position],new me("A promise that resolves to an array of DocumentHighlight-instances.",Fr(rc.to))),new we("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[j.Uri],new me("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(dm(e))return;class i extends jl{constructor(){super(...arguments),this.containerName=""}static to(s){const n=new i(s.name,dr.to(s.kind),s.containerName||"",new ji(t[0],O.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=O.to(s.selectionRange),n.children=s.children?s.children.map(i.to):[],n}}return e.map(i.to)})),new we("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[j.Uri,new j("options","Formatting options",e=>!0,e=>e)],new me("A promise that resolves to an array of TextEdits.",Fr(jt.to))),new we("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[j.Uri,j.Range,new j("options","Formatting options",e=>!0,e=>e)],new me("A promise that resolves to an array of TextEdits.",Fr(jt.to))),new we("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[j.Uri,j.Position,new j("ch","Trigger character",e=>typeof e=="string",e=>e),new j("options","Formatting options",e=>!0,e=>e)],new me("A promise that resolves to an array of TextEdits.",Fr(jt.to))),new we("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Tn)),new we("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Tn)),new we("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Tn)),new we("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Tn)),new we("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Tn)),new we("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Tn)),new we("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Tn)),new we("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",Tn)),new we("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location-instances.",Fr(Di.to))),new we("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Location-instances.",Fr(Di.to))),new we("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Hover-instances.",Fr(vu.to))),new we("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[j.Uri,j.Position],new me("A promise that resolves to an array of Hover-instances.",Fr(vu.to))),new we("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[j.Uri,new j("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>xe.isPosition(t)),e=>e.map(ze.from))],new me("A promise that resolves to an array of ranges.",e=>e.map(t=>{let i;for(const r of t.reverse())i=new ql(O.to(r),i);return i}))),new we("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[j.String.with("query","Search string")],new me("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Mo.to))),new we("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[j.Uri,j.Position],new me("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Oo.to))),new we("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[j.CallHierarchyItem],new me("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(R0.to))),new we("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[j.CallHierarchyItem],new me("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(L0.to))),new we("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[j.Uri,j.Position],new me("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:O.to(e.range),placeholder:e.text}})),new we("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[j.Uri,j.Position,j.String.with("newName","The new symbol name")],new me("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return Wi.to(e)}})),new we("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[j.Uri,j.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new me("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Fo.to))),new we("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[j.Uri],new me("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new zv(e.tokenTypes,e.tokenModifiers)})),new we("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[j.Uri],new me("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=r8(e);if(t.type==="full")return new Qa(t.data,void 0)})),new we("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[j.Uri,j.Range.optional()],new me("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new zv(e.tokenTypes,e.tokenModifiers)})),new we("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[j.Uri,j.Range],new me("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=r8(e);if(t.type==="full")return new Qa(t.data,void 0)})),new we("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[j.Uri,j.Position,j.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),j.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new me("A promise that resolves to a CompletionList-instance.",(e,t,i)=>{if(!e)return new Na([]);const r=e.suggestions.map(s=>j0.to(s,i));return new Na(r,e.incomplete)})),new we("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[j.Uri,j.Position,j.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new me("A promise that resolves to SignatureHelp.",e=>{if(e)return wu.to(e)})),new we("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[j.Uri,j.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new me("A promise that resolves to an array of CodeLens-instances.",(e,t,i)=>Fr(r=>new ef(O.to(r.range),r.command&&i.fromInternal(r.command)))(e))),new we("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[j.Uri,new j("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>Se.isRange(e),e=>Kr.isSelection(e)?Nr.from(e):O.from(e)),j.String.with("kind","Code action kind to return code actions for").optional(),j.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new me("A promise that resolves to an array of Command-instances.",(e,t,i)=>Fr(r=>{if(r._isSynthetic){if(!r.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(r.command)}else{const s=new Bl(r.title,r.kind?new pt(r.kind):void 0);return r.edit&&(s.edit=Wi.to(r.edit)),r.command&&(s.command=i.fromInternal(r.command)),s.isPreferred=r.isPreferred,s}})(e))),new we("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[j.Uri],new me("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new af(O.to(t.range),sc.to(t.color))):[])),new we("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new j("color","The color to show and insert",e=>e instanceof Wa,sc.from),new j("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:O.from(e.range)}))],new me("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(sp.to):[])),new we("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[j.Uri,j.Range],new me("A promise that resolves to an array of Inlay objects",(e,t,i)=>e.map(H0.to.bind(void 0,i)))),new we("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[j.Uri],new me("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(ap.to)})),new we("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new me("A promise that resolves to an array of NotebookContentProvider static info objects.",Fr(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>lp.to(t))})))),new we("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[j.Uri,j.Range,new j("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof Se,e=>Yf.from(e))],new me("A promise that resolves to an array of InlineValue objects",e=>e.map(Xf.to))),new we("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new j("uriOrString","Uri-instance or string (only http/https)",e=>y.isUri(e)||typeof e=="string"&&ET(e,B.http,B.https),e=>e),new j("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Ut.from(e),void 0]:[Ut.from(e.viewColumn),bu.from(e)])).optional(),j.String.with("label","").optional()],me.Void),new we("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[j.Uri.with("resource","Resource to open"),j.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new j("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Ut.from(e),void 0]:[Ut.from(e.viewColumn),bu.from(e)])).optional()],me.Void),new we("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[j.Uri.with("left","Left-hand side resource of the diff editor"),j.Uri.with("right","Right-hand side resource of the diff editor"),j.String.with("title","Human readable title for the diff editor").optional(),new j("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Ut.from(e.viewColumn),bu.from(e)]).optional()],me.Void),new we("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[j.String.with("title","Human readable title for the changes editor"),new j("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[i,r,s]=t;if(!y.isUri(i)||!y.isUri(r)&&r!==void 0&&r!==null||!y.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],me.Void),new we("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[j.Uri,j.Position],new me("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Uo.to))),new we("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[j.TypeHierarchyItem],new me("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Uo.to))),new we("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[j.TypeHierarchyItem],new me("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Uo.to))),new we("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[j.TestItem],me.Void),new we("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[j.TestProfile,j.Arr(j.TestItem)],me.Void),new we("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[j.Arr(j.TestItem)],me.Void),new we("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[j.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],me.Void),new we("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[j.String.with("name","The context key name"),new j("value","The context key value",()=>!0,e=>e)],me.Void),new we("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new j("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?O.from(e.initialRange):void 0,initialSelection:Kr.isSelection(e.initialSelection)?Nr.from(e.initialSelection):void 0,message:e.message,attachments:e.attachments,autoSend:e.autoSend,position:e.position?ze.from(e.position):void 0,blockOnResponse:e.blockOnResponse}})],me.Void)],KH=class{static register(e){YH.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",S2)}};function Fr(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Tn(e){if(!Array.isArray(e))return;const t=[];for(const i of e)JR(i)?t.push(mu.to(i)):t.push(Di.to(i));return t}var ay=class{constructor(t,i){this.a=t.getProxy(V.MainThreadBulkEdits),this.b={getTextDocumentVersion:r=>i.getDocument(r)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,i,r){const s=new ei(Wi.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,r?.isRefactoring??!1)}};ay=__decorate([__param(0,Ne)],ay);function eW(e){return!!e&&y.isUri(e.sessionResource)&&e.$mid===19}var s8;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(s8||(s8={}));var n8;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(n8||(n8={}));var o8;(function(e){e[e.NoReason=0]="NoReason",e[e.FilteredContentRetry=1]="FilteredContentRetry",e[e.CopyrightContentRetry=2]="CopyrightContentRetry"})(o8||(o8={}));var a8;(function(e){e.Pending="pending",e.Accepted="accepted",e.Rejected="rejected"})(a8||(a8={}));var c8;(function(e){e[e.Denied=0]="Denied",e[e.ConfirmationNotNeeded=1]="ConfirmationNotNeeded",e[e.Setting=2]="Setting",e[e.LmServicePerTool=3]="LmServicePerTool",e[e.UserAction=4]="UserAction",e[e.Skipped=5]="Skipped"})(c8||(c8={}));var l8;(function(e){let t;(function(l){l[l.WaitingForConfirmation=0]="WaitingForConfirmation",l[l.Executing=1]="Executing",l[l.WaitingForPostApproval=2]="WaitingForPostApproval",l[l.Completed=3]="Completed",l[l.Cancelled=4]="Cancelled"})(t=e.StateKind||(e.StateKind={}));function i(l,u){if(l.kind==="toolInvocationSerialized")return l.isConfirmed===void 0||typeof l.isConfirmed=="boolean"?{type:l.isConfirmed?4:0}:l.isConfirmed;const h=l.state.read(u);if(h.type!==0)return h.type===4?{type:h.reason}:h.confirmed}e.executionConfirmedOrDenied=i;function r(l,u){const h=i(l);if(h)return Promise.resolve(h);const f=new ae;return new Promise(g=>{u&&f.add(u.onCancellationRequested(()=>{g({type:0})})),f.add(fd(m=>{const w=i(l,m);w&&(f.dispose(),g(w))}))}).finally(()=>{f.dispose()})}e.awaitConfirmation=r;function s(l,u){const h=l.state.read(u);if(h.type===3)return h.postConfirmed||{type:1};if(h.type===4)return{type:h.reason}}function n(l,u){const h=l?.state.get();return h?.type===0||h?.type===2?(h.confirm(u),!0):!1}e.confirmWith=n;function o(l,u){const h=s(l);if(h)return Promise.resolve(h);const f=new ae;return new Promise(g=>{u&&f.add(u.onCancellationRequested(()=>{g({type:0})})),f.add(fd(m=>{const w=s(l,m);w&&(f.dispose(),g(w))}))}).finally(()=>{f.dispose()})}e.awaitPostConfirmation=o;function a(l,u){if(l.kind==="toolInvocationSerialized")return l.resultDetails;const h=l.state.read(u);if(h.type===3||h.type===2)return h.resultDetails}e.resultDetails=a;function c(l,u){if(l.kind==="toolInvocationSerialized")return!0;const h=l.state.read(u);return h.type===3||h.type===4}e.isComplete=c})(l8||(l8={}));var ug;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(ug||(ug={}));var u8;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(u8||(u8={}));var h8;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(h8||(h8={}));var d8;(function(e){e[e.Pending=0]="Pending",e[e.Complete=1]="Complete",e[e.Cancelled=2]="Cancelled",e[e.Failed=3]="Failed",e[e.NeedsInput=4]="NeedsInput"})(d8||(d8={}));var f8=U("IChatService"),cy=class{constructor(e,t,i,r,s){this.j=e,this.l=t,this.m=i,this.n=r,this.o=s,this.b=qn.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let i=function(l){if(s.c){const u=new Error("Response stream has been closed");throw Error.captureStackTrace(u,l),u}},r=function(l,u){if(o.push(u!==void 0?[l,u]:l)===1&&queueMicrotask(()=>{const f=a;a=[],s.m.$handleProgressChunk(s.l.requestId,o).finally(()=>{f.forEach(g=>g())}),o.length=0}),u!==void 0)return new Promise(f=>{a.push(f)})};var e=i,t=r;const s=this;this.b.reset();let n=0;const o=[];let a=[];const c=(l,u)=>{if(typeof this.d>"u"&&(l.kind==="markdownContent"||l.kind==="markdownVuln"||l.kind==="prepareToolInvocation")&&(this.d=this.b.elapsed()),u){const h=n++,f=r(l,h),g={report:m=>{f.then(()=>{ki.isMarkdownString(m.value)?r($u.from(m),h):r(Ho.from(m),h)})}};Promise.all([f,u(g)]).then(([m,w])=>{r(tw.from(w),h)})}else r(l)};this.g=Object.freeze({clearToPreviousToolInvocation(l){return i(this.markdown),r({kind:"clearToPreviousToolInvocation",reason:l}),this},markdown(l){i(this.markdown);const u=new Lf(l),h=Eu.from(u);return c(h),this},markdownWithVulnerabilities(l,u){i(this.markdown),u&&T(s.j,"chatParticipantAdditions");const h=new uu(l,u),f=gp.from(h);return c(f),this},codeblockUri(l,u){i(this.codeblockUri),T(s.j,"chatParticipantAdditions");const h=new Uf(l,u),f=pp.from(h);return c(f),this},filetree(l,u){i(this.filetree);const h=new Mf(l,u),f=Cu.from(h);return c(f),this},anchor(l,u){const h=new hu(l,u);return this.push(h)},button(l){i(this.anchor);const u=new Ff(l),h=Du.from(u,s.n,s.o);return c(h),this},progress(l,u){i(this.progress);const h=new Of(l,u),f=u?vp.from(h):xu.from(h);return c(f,u),this},thinkingProgress(l){i(this.thinkingProgress),T(s.j,"chatParticipantAdditions");const u=new Ka(l.text??"",l.id,l.metadata),h=ku.from(u);return c(h),this},warning(l){i(this.progress),T(s.j,"chatParticipantAdditions");const u=new du(l),h=$u.from(u);return c(h),this},reference(l,u){return this.reference2(l,u)},reference2(l,u,h){if(i(this.reference),typeof l=="object"&&"variableName"in l&&T(s.j,"chatParticipantAdditions"),typeof l=="object"&&"variableName"in l&&!l.value){const f=s.l.variables.variables.find(g=>g.name===l.variableName);if(f){let g;if(f.references?.length)g=f.references.map(m=>({kind:"reference",reference:{variableName:l.variableName,value:m.reference}}));else{const m=new To(l,u,h);g=[Ho.from(m)]}return g.forEach(m=>c(m)),this}}else{const f=new To(l,u,h),g=Ho.from(f);c(g)}return this},codeCitation(l,u,h){i(this.codeCitation),T(s.j,"chatParticipantAdditions");const f=new jf(l,u,h),g=Sp.from(f);c(g)},textEdit(l,u){i(this.textEdit),T(s.j,"chatParticipantAdditions");const h=new fu(l,u);h.isDone=u===!0?!0:void 0;const f=wp.from(h);return c(f),this},notebookEdit(l,u){i(this.notebookEdit),T(s.j,"chatParticipantAdditions");const h=new Wf(l,u),f=yp.from(h);return c(f),this},async externalEdit(l,u){i(this.externalEdit);const h=Array.isArray(l)?l:[l],f=n++,g=ci();await r({kind:"externalEdits",start:!0,resources:h,undoStopId:g},f);try{return await u(),g}finally{await r({kind:"externalEdits",start:!1,resources:h,undoStopId:g},f)}},confirmation(l,u,h,f){i(this.confirmation),T(s.j,"chatParticipantAdditions");const g=new Nf(l,u,h,f),m=mp.from(g);return c(m),this},prepareToolInvocation(l){i(this.prepareToolInvocation),T(s.j,"chatParticipantAdditions");const u=new pu(l),h=Iu.from(u);return c(h),this},push(l){if(i(this.push),(l instanceof fu||l instanceof Wf||l instanceof uu||l instanceof du||l instanceof Nf||l instanceof jf||l instanceof Hf||l instanceof p0||l instanceof d0||l instanceof Ka||l instanceof g0||l instanceof Of)&&T(s.j,"chatParticipantAdditions"),l instanceof To)this.reference2(l.value,l.iconPath,l.options);else if(l instanceof Of){const u=l.task?vp.from(l):xu.from(l);c(u,l.task)}else if(l instanceof Ka){const u=ku.from(l);c(u)}else if(l instanceof hu){const u=pc.from(l);if(l.resolve){T(s.j,"chatParticipantAdditions"),u.resolveId=ci();const h=new rt;l.resolve(h.token).then(()=>{const f=pc.from(l);s.m.$handleAnchorResolve(s.l.requestId,u.resolveId,f)}).then(()=>h.dispose(),()=>h.dispose()),s.o.add(se(()=>h.dispose(!0)))}c(u)}else if(l instanceof pu){T(s.j,"chatParticipantAdditions");const u=Iu.from(l);return c(u),this}else{if(l instanceof d0)return this.externalEdit(l.uris,l.callback).then(h=>l.didGetApplied(h)),this;{const u=Pu.from(l,s.n,s.o);c(u)}}return this}})}return this.g}},tW=class Wc extends Y{static{this.b=0}static{this.j=0}static{this.n=0}static{this.s=0}constructor(t,i,r,s,n,o,a,c){super(),this.F=i,this.G=r,this.H=s,this.I=n,this.J=o,this.L=a,this.M=c,this.c=new Map,this.m=new Map,this.q=new Map,this.t=new Map,this.u=this.D(new FP),this.w=this.D(new Xc),this.y=new Set,this.z=this.D(new P),this.onDidChangeChatRequestTools=this.z.event,this.C=this.D(new P),this.onDidDisposeChatSession=this.C.event,this.g=t.getProxy(V.MainThreadChatAgents2),r.registerArgumentProcessor({processArgument:l=>eW(l)?null:l})}async transferActiveChat(t){await this.g.$transferActiveChatSession(t)}createChatAgent(t,i,r){const s=Wc.b++,n=new p8(t,i,this.g,s,r);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,i,{},void 0),n.apiAgent}createDynamicChatAgent(t,i,r,s){const n=Wc.b++,o=new p8(t,i,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,i,{isSticky:!0},r),o.apiAgent}registerChatParticipantDetectionProvider(t,i){const r=Wc.j++;return this.m.set(r,new iW(t,i)),this.g.$registerChatParticipantDetectionProvider(r),se(()=>{this.m.delete(r),this.g.$unregisterChatParticipantDetectionProvider(r)})}registerRelatedFilesProvider(t,i,r){const s=Wc.n++;return this.q.set(s,new rW(t,i)),this.g.$registerRelatedFilesProvider(s,r),se(()=>{this.q.delete(s),this.g.$unregisterRelatedFilesProvider(s)})}registerCustomAgentsProvider(t,i){const r=Wc.s++;this.t.set(r,{extension:t,provider:i}),this.g.$registerCustomAgentsProvider(r,t.identifier);const s=new ae;return i.onDidChangeCustomAgents&&s.add(i.onDidChangeCustomAgents(()=>{this.g.$onDidChangeCustomAgents(r)})),s.add(se(()=>{this.t.delete(r),this.g.$unregisterCustomAgentsProvider(r)})),s}async $provideRelatedFiles(t,i,r){const s=this.q.get(t);if(!s)return Promise.resolve([]);const n=iw.to(i);return await s.provider.provideRelatedFiles(n,r)??void 0}async $provideCustomAgents(t,i,r){const s=this.t.get(t);return s?await s.provider.provideCustomAgents(i,r)??void 0:Promise.resolve(void 0)}async $detectChatParticipant(t,i,r,s,n){const o=this.m.get(t);if(!o)return;const{request:a,location:c,history:l}=await this.N(i,r,o.extension),u=await this.O(a,o.extension),h=gc.to(a,c,u,this.P(o.extension),this.Q(o.extension,a.userSelectedTools),o.extension,this.F);return o.provider.provideParticipantDetection(h,{history:l},{participants:s.participants,location:Ep.to(s.location)},n)}async N(t,i,r){const s=Xt(t),n=await this.R(r,s.agentId,i);let o;if(s.locationData?.type===Yt.EditorInline){const a=this.H.getDocument(s.locationData.document),c=this.I.getEditor(s.locationData.id);o=new I9(c.value,a,Nr.to(s.locationData.selection),O.to(s.locationData.wholeRange))}else if(s.locationData?.type===Yt.Notebook){const a=this.H.getDocument(s.locationData.sessionInputUri);o=new D9(a)}else s.locationData?.type,Yt.Terminal;return{request:s,location:o,history:n}}async O(t,i){let r;if(t.userSelectedModelId&&(r=await this.J.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!r&&(r=await this.J.getDefaultLanguageModel(i),!r))throw new Error("Language model unavailable");return r}async $setRequestTools(t,i){const r=[...this.y].find(s=>s.requestId===t);if(r){r.extRequest.tools.clear();for(const[s,n]of this.Q(r.extension,i))r.extRequest.tools.set(s,n);this.z.fire(r.extRequest)}}async $invokeAgent(t,i,r,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o,a;try{const{request:c,location:l,history:u}=await this.N(i,r,n.extension);let h=this.u.get(c.sessionResource);h||(h=new ae,this.u.set(c.sessionResource,h)),o=new cy(n.extension,c,this.g,this.G.converter,h);const f=await this.O(c,n.extension),g=gc.to(c,l,f,this.P(n.extension),this.Q(n.extension,c.userSelectedTools),n.extension,this.F);a={requestId:i.requestId,extRequest:g,extension:n.extension},this.y.add(a);let m;r.chatSessionContext&&(m={chatSessionItem:{resource:y.revive(r.chatSessionContext.chatSessionResource),label:r.chatSessionContext.isUntitled?"Untitled Session":"Session"},isUntitled:r.chatSessionContext.isUntitled});const w={history:u,chatSessionContext:m},S=n.invoke(g,w,o.apiObject,s);return await sW(1e3,Promise.resolve(S).then(C=>{if(C?.metadata)try{JSON.stringify(C.metadata)}catch(A){const G=`result.metadata MUST be JSON.stringify-able. Got error: ${A.message}`;return this.F.error(`[${n.extension.identifier.value}] [@${n.id}] ${G}`,n.extension),{errorDetails:{message:G},timings:o?.timings,nextQuestion:C.nextQuestion}}let k;return C?.errorDetails&&(k={...C.errorDetails,responseIsIncomplete:!0}),(k?.responseIsRedacted||k?.isQuotaExceeded||k?.isRateLimited||k?.confirmationButtons||k?.code)&&T(n.extension,"chatParticipantPrivate"),{errorDetails:k,timings:o?.timings,metadata:C?.metadata,nextQuestion:C?.nextQuestion,details:C?.details}}),s)}catch(c){this.F.error(c,n.extension),c instanceof Ps&&c.cause&&(c=c.cause);const l=c instanceof Error&&c.name==="ChatQuotaExceeded",u=c instanceof Error&&c.name==="ChatRateLimited";return{errorDetails:{message:fa(c),responseIsIncomplete:!0,isQuotaExceeded:l,isRateLimited:u}}}finally{a&&this.y.delete(a),o?.close()}}P(t){return Je(t,"chatReferenceDiagnostic")?this.L.getDiagnostics():[]}Q(t,i){if(!i)return new Map;const r=new Map;for(const s of this.M.getTools(t))typeof i[s.name]=="boolean"&&r.set(s.name,i[s.name]);return r}async R(t,i,r){const s=[];for(const n of r.history){const o=mc.to(n.result),a=i===n.request.agentId||g8(n.request.agentId)&&g8(i)?o:{...o,metadata:void 0},c=[],l=[];for(const g of n.request.variables.variables)if(g.kind==="tool")l.push(Wo.to(g));else if(g.kind==="toolset")l.push(...g.value.map(Wo.to));else{const m=Cp.to(g,this.P(t),this.F);m&&c.push(m)}const u=Je(t,"chatParticipantPrivate")?n.request.editedFileEvents:void 0,h=new _f(n.request.message,n.request.command,c,n.request.agentId,l,u,n.request.requestId);s.push(h);const f=mt(n.response.map(g=>Pu.toContent(g,this.G.converter)));s.push(new $9(f,a,n.request.agentId,n.request.command))}return s}$releaseSession(t){const i=y.revive(t);this.u.deleteAndDispose(i);const r=Jr.parseLocalSessionId(i);r&&this.C.fire(r)}async $provideFollowups(t,i,r,s,n){const o=this.c.get(i);if(!o)return Promise.resolve([]);const a=Xt(t),c=await this.R(o.extension,o.id,s),l=mc.to(r);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||Dt.some(this.c.values(),f=>f.id===u.participant&&qe.equals(f.extension.identifier,o.extension.identifier));return h||this.F.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>dp.from(u,a))}$acceptFeedback(t,i,r){const s=this.c.get(t);if(!s)return;const n=mc.to(i);let o;switch(r.direction){case ug.Down:o=lu.Unhelpful;break;case ug.Up:o=lu.Helpful;break}const a={result:n,kind:o,unhelpfulReason:Je(s.extension,"chatParticipantAdditions")?r.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,i,r){const s=this.c.get(t);if(!s||r.action.kind==="vote")return;const n=nw.to(i,r,this.G.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,i,r){const s=this.c.get(t);if(!s)return[];let n=this.w.get(t);return n?n.clear():(n=new ae,this.w.set(t,n)),(await s.invokeCompletionProvider(i,r)).map(a=>sw.from(a,this.G.converter,n))}async $provideChatTitle(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.R(s.extension,s.id,{history:i});return await s.provideTitle({history:n},r)}async $provideChatSummary(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.R(s.extension,s.id,{history:i});return await s.provideSummary({history:n},r)}},iW=class{constructor(e,t){this.extension=e,this.provider=t}},rW=class{constructor(e,t){this.extension=e,this.provider=t}},p8=class{constructor(e,t,i,r,s){this.extension=e,this.id=t,this.u=i,this.w=r,this.x=s,this.j=new P,this.l=new P,this.t=new P}acceptFeedback(e){this.j.fire(e)}acceptAction(e){this.l.fire(e)}setChatRequestPauseState(e){this.t.fire(e)}async invokeCompletionProvider(e,t){return this.n?await this.n.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this.b)return[];const r=await this.b.provideFollowups(e,t,i);return r?r.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideTitle(e,t){if(this.q)return await this.q.provideChatTitle(e,t)??void 0}async provideSummary(e,t){if(this.s)return await this.s.provideChatSummary(e,t)??void 0}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this.u.$updateAgent(this.w,{icon:this.c?this.c instanceof y?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof Ii?this.c:void 0,hasFollowups:this.b!==void 0,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:ue.from(this.d),helpTextPostfix:!this.g||typeof this.g=="string"?this.g:ue.from(this.g),supportIssueReporting:this.m,additionalWelcomeMessage:!this.o||typeof this.o=="string"?this.o:ue.from(this.o)}),t=!1}))},r=this;return{get id(){return r.id},get iconPath(){return r.c},set iconPath(s){r.c=s,i()},get requestHandler(){return r.x},set requestHandler(s){s5(typeof s=="function","Invalid request handler"),r.x=s},get followupProvider(){return r.b},set followupProvider(s){r.b=s,i()},get helpTextPrefix(){return T(r.extension,"defaultChatParticipant"),r.d},set helpTextPrefix(s){T(r.extension,"defaultChatParticipant"),r.d=s,i()},get helpTextPostfix(){return T(r.extension,"defaultChatParticipant"),r.g},set helpTextPostfix(s){T(r.extension,"defaultChatParticipant"),r.g=s,i()},get supportIssueReporting(){return T(r.extension,"chatParticipantPrivate"),r.m},set supportIssueReporting(s){T(r.extension,"chatParticipantPrivate"),r.m=s,i()},get onDidReceiveFeedback(){return r.j.event},set participantVariableProvider(s){if(T(r.extension,"chatParticipantAdditions"),r.n=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");r.u.$registerAgentCompletionsProvider(r.w,r.id,s.triggerCharacters)}else r.u.$unregisterAgentCompletionsProvider(r.w,r.id)},get participantVariableProvider(){return T(r.extension,"chatParticipantAdditions"),r.n},set additionalWelcomeMessage(s){T(r.extension,"defaultChatParticipant"),r.o=s,i()},get additionalWelcomeMessage(){return T(r.extension,"defaultChatParticipant"),r.o},set titleProvider(s){T(r.extension,"defaultChatParticipant"),r.q=s,i()},get titleProvider(){return T(r.extension,"defaultChatParticipant"),r.q},set summarizer(s){T(r.extension,"defaultChatParticipant"),r.s=s},get summarizer(){return T(r.extension,"defaultChatParticipant"),r.s},get onDidChangePauseState(){return T(r.extension,"chatParticipantAdditions"),r.t.event},onDidPerformAction:Je(this.extension,"chatParticipantAdditions")?this.l.event:void 0,dispose(){e=!0,r.b=void 0,r.j.dispose(),r.u.$unregisterAgent(r.w)}}}invoke(e,t,i,r){return this.x(e,t,i,r)}};function sW(e,t,i){return new Promise((r,s)=>{const n=i.onCancellationRequested(async()=>{n.dispose(),await Qi(e),r(void 0)});t.then(r,s).finally(()=>n.dispose())})}function g8(e){return e.startsWith("github.copilot")}var nW=class{constructor(e,t){this.c=t,this.b=new Map,this.a=e.getProxy(V.MainThreadChatOutputRenderer)}registerChatOutputRenderer(e,t,i){if(this.b.has(t))throw new Error(`Chat output renderer already registered for: ${t}`);return this.b.set(t,{extension:e,renderer:i}),this.a.$registerChatOutputRenderer(t,e.identifier,e.extensionLocation),new Ee(()=>{this.b.delete(t),this.a.$unregisterChatOutputRenderer(t)})}async $renderChatOutput(e,t,i,r,s){const n=this.b.get(e);if(!n)throw new Error(`No chat output renderer registered for: ${e}`);const o=this.c.createNewWebview(r,{},n.extension);return n.renderer.renderChatOutput(Object.freeze({mime:t,value:i.buffer}),o,{},s)}},ly,oW=class{constructor(e,t,i,r,s,n){this.session=e,this.extension=t,this.proxy=r,this.commandsConverter=s,this.sessionDisposables=n,this.a=new cy(t,i,r,s,n)}get activeResponseStream(){return this.a}getActiveRequestStream(e){return new cy(this.extension,e,this.proxy,this.commandsConverter,this.sessionDisposables)}},uy=class extends Y{static{ly=this}static{this.a=0}constructor(t,i,r,s){super(),this.n=t,this.q=i,this.s=r,this.t=s,this.c=new Map,this.f=new Map,this.g=0,this.h=0,this.j=new wt,this.m=new wt,this.b=this.s.getProxy(V.MainThreadChatSessions),t.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===25){const o=n.session.resource||n.sessionId,a=this.j.get(o);return a||(this.t.warn(`No chat session found for ID: ${o}`),n)}return n}})}registerChatSessionItemProvider(t,i,r){const s=this.g++,n=new ae;return this.c.set(s,{provider:r,extension:t,disposable:n,sessionType:i}),this.b.$registerChatSessionItemProvider(s,i),r.onDidChangeChatSessionItems&&n.add(r.onDidChangeChatSessionItems(()=>{this.b.$onDidChangeChatSessionItems(s)})),r.onDidCommitChatSessionItem&&n.add(r.onDidCommitChatSessionItem(o=>{const{original:a,modified:c}=o;this.b.$onDidCommitChatSessionItem(s,a.resource,c.resource)})),{dispose:()=>{this.c.delete(s),n.dispose(),this.b.$unregisterChatSessionItemProvider(s)}}}registerChatSessionContentProvider(t,i,r,s,n){const o=this.h++,a=new ae;return this.f.set(o,{provider:s,extension:t,capabilities:n,disposable:a}),this.b.$registerChatSessionContentProvider(o,i),s.onDidChangeChatSessionOptions&&a.add(s.onDidChangeChatSessionOptions(c=>{this.b.$onDidChangeChatSessionOptions(o,c.resource,c.updates)})),s.onDidChangeChatSessionProviderOptions&&a.add(s.onDidChangeChatSessionProviderOptions(()=>{this.b.$onDidChangeChatSessionProviderOptions(o)})),new Ee(()=>{this.f.delete(o),a.dispose(),this.b.$unregisterChatSessionContentProvider(o)})}u(t){if(t!==void 0)switch(t){case 0:return 0;case 1:return 1;case 2:return 2;default:return}}w(t,i){return{resource:i.resource,label:i.label,description:i.description?ue.from(i.description):void 0,badge:i.badge?ue.from(i.badge):void 0,status:this.u(i.status),tooltip:ue.fromStrict(i.tooltip),timing:{startTime:i.timing?.startTime??0,endTime:i.timing?.endTime},changes:i.changes instanceof Array?i.changes:i.changes&&{files:i.changes?.files??0,insertions:i.changes?.insertions??0,deletions:i.changes?.deletions??0}}}async $provideNewChatSessionItem(t,i,r){const s=this.c.get(t);if(!s||!s.provider.provideNewChatSessionItem)throw new Error(`No provider registered for handle ${t} or provider does not support creating sessions`);try{const n=await this.y(i.request,s.extension),a={request:gc.to(Xt(i.request),void 0,n,[],new Map,s.extension,this.t),metadata:i.metadata},c=await s.provider.provideNewChatSessionItem(a,r);if(!c)throw new Error("Provider did not create session");return this.j.set(c.resource,c),this.w(s.sessionType,c)}catch(n){throw this.t.error(`Error creating chat session: ${n}`),n}}async $provideChatSessionItems(t,i){const r=this.c.get(t);if(!r)return this.t.error(`No provider registered for handle ${t}`),[];const s=await r.provider.provideChatSessionItems(i);if(!s)return[];const n=[];for(const o of s)this.j.set(o.resource,o),n.push(this.w(r.sessionType,o));return n}async $provideChatSessionContent(t,i,r){const s=this.f.get(t);if(!s)throw new Error(`No provider for handle ${t}`);const n=y.revive(i),o=await s.provider.provideChatSessionContent(n,r);if(r.isCancellationRequested)throw new oi;const a=new ae,c=ly.a++,l=n.toString(),u=new oW(o,s.extension,{sessionResource:n,requestId:"ongoing",agentId:l,message:"",variables:{variables:[]},location:Yt.Chat},{$handleProgressChunk:(g,m)=>this.b.$handleProgressChunk(t,n,g,m),$handleAnchorResolve:(g,m,w)=>{this.b.$handleAnchorResolve(t,n,g,m,w)}},this.n.converter,a),h=a.add(new rt);this.m.set(n,{sessionObj:u,disposeCts:h}),o.activeResponseCallback&&Promise.resolve(o.activeResponseCallback(u.activeResponseStream.apiObject,h.token)).finally(()=>{this.b.$handleProgressComplete(t,n,"ongoing")});const{capabilities:f}=s;return{id:c+"",resource:y.revive(n),hasActiveResponseCallback:!!o.activeResponseCallback,hasRequestHandler:!!o.requestHandler,supportsInterruption:!!f?.supportsInterruptions,options:o.options,history:o.history.map(g=>g instanceof _f?this.z(g):this.F(g,a))}}async $provideHandleOptionsChange(t,i,r,s){const n=y.revive(i),o=this.f.get(t);if(!o){this.t.warn(`No provider for handle ${t}`);return}if(!o.provider.provideHandleOptionsChange){this.t.debug(`Provider for handle ${t} does not implement provideHandleOptionsChange`);return}try{const a=r.map(c=>({optionId:c.optionId,value:c.value===void 0?void 0:typeof c.value=="string"?c.value:c.value.id}));await o.provider.provideHandleOptionsChange(n,a,s)}catch(a){this.t.error(`Error calling provideHandleOptionsChange for handle ${t}, sessionResource ${n}:`,a)}}async $provideChatSessionProviderOptions(t,i){const r=this.f.get(t);if(!r){this.t.warn(`No provider for handle ${t} when requesting chat session options`);return}const s=r.provider;if(s.provideChatSessionProviderOptions)try{const{optionGroups:n}=await s.provideChatSessionProviderOptions(i);return n?{optionGroups:n}:void 0}catch(n){this.t.error(`Error calling provideChatSessionProviderOptions for handle ${t}:`,n);return}}async $interruptChatSessionActiveResponse(t,i,r){this.m.get(y.revive(i))?.disposeCts.cancel()}async $disposeChatSessionContent(t,i){const r=this.m.get(y.revive(i));if(!r){this.t.warn(`No chat session found for resource: ${i}`);return}r.disposeCts.cancel(),r.sessionObj.sessionDisposables.dispose(),this.m.delete(y.revive(i))}async $invokeChatSessionRequestHandler(t,i,r,s,n){const o=this.m.get(y.revive(i));if(!o||!o.sessionObj.session.requestHandler)return{};const a=gc.to(r,void 0,await this.y(r,o.sessionObj.extension),[],new Map,o.sessionObj.extension,this.t),c=o.sessionObj.getActiveRequestStream(r);return await o.sessionObj.session.requestHandler(a,{history:s},c.apiObject,n),{}}async y(t,i){let r;if(t.userSelectedModelId&&(r=await this.q.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!r&&(r=await this.q.getDefaultLanguageModel(i),!r))throw new Error("Language model unavailable");return r}z(t){const i=t.references.map(r=>this.C(r));return{type:"request",id:t.id,prompt:t.prompt,participant:t.participant,command:t.command,variableData:i.length>0?{variables:i}:void 0}}C(t){const i=t.value&&typeof t.value=="object"&&"uri"in t.value&&"range"in t.value?hr.from(t.value):t.value,r=t.range?{start:t.range[0],endExclusive:t.range[1]}:void 0;if(i&&i instanceof y0&&Array.isArray(i.diagnostics)&&i.diagnostics.length&&i.diagnostics[0][1].length){const o=No.from(i.diagnostics[0][1][0]),a={filterRange:{startLineNumber:o.startLineNumber,startColumn:o.startColumn,endLineNumber:o.endLineNumber,endColumn:o.endColumn},filterSeverity:o.severity,filterUri:i.diagnostics[0][0],problemMessage:i.diagnostics[0][1][0].message};return O1.toEntry(a)}if(ji.isLocation(t.value)&&t.name.startsWith("sym:")){const o=hr.from(t.value);return{id:t.id,name:t.name,fullName:t.name.substring(4),value:{uri:t.value.uri,range:o.range},symbolKind:6,icon:A1.toIcon(6),kind:"symbol",range:r}}if(y.isUri(i)&&t.name.startsWith("prompt:")&&t.id.startsWith(nn.PromptFile)&&t.id.endsWith(i.toString()))return{id:t.id,name:`prompt:${Ji(i)}`,value:i,kind:"promptFile",modelDescription:"Prompt instructions file",isRoot:!0,automaticallyAdded:!1,range:r};const s=y.isUri(i)||i&&typeof i=="object"&&"uri"in i,n=s&&y.isUri(i)&&i.path.endsWith("/");return{id:t.id,name:t.name,value:i,modelDescription:t.modelDescription,range:r,kind:n?"directory":s?"file":"generic"}}F(t,i){return{type:"response",parts:mt(t.response.map(s=>Pu.from(s,this.n.converter,i))),participant:t.participant}}};uy=ly=__decorate([__param(2,Ne),__param(3,De)],uy);var aW=class{constructor(e){this.b=new Map,this.a=e.getProxy(V.MainThreadChatStatus)}createChatStatusItem(e,t){const i=cW(e.identifier,t);if(this.b.has(i))throw new Error(`Chat status item '${t}' already exists`);const r={id:i,title:"",description:"",detail:""};let s=!1,n=!1;const o=()=>{if(s)throw new Error("Chat status item is disposed");n&&this.a.$setEntry(t,r)},a=Object.freeze({id:t,get title(){return r.title},set title(c){r.title=c,o()},get description(){return r.description},set description(c){r.description=c,o()},get detail(){return r.detail},set detail(c){r.detail=c,o()},show:()=>{n=!0,o()},hide:()=>{n=!1,this.a.$disposeEntry(t)},dispose:()=>{s=!0,this.a.$disposeEntry(t),this.b.delete(i)}});return this.b.set(i,a),a}};function cW(e,t){return`${qe.toKey(e)}.${t}`}var lW=class{constructor(e){const t=e.getProxy(V.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}},m8="vscode-cdn.net",uW=`vscode-resource.${m8}`,hy=`'self' https://*.${m8}`;function Yu(e,t){return e.scheme===B.http||e.scheme===B.https?e:(t&&t.authority&&t.isRemote&&e.scheme===B.file&&(e=y.from({scheme:B.vscodeRemote,authority:t.authority,path:e.path})),y.from({scheme:B.https,authority:`${e.scheme}+${hW(e.authority)}.${uW}`,path:e.path,fragment:e.fragment,query:e.query}))}function hW(e){return e.replace(/./g,t=>{const i=t.charCodeAt(0);return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57?t:"-"+i.toString(16).padStart(4,"0")})}var dW=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i,this.a=0,this.b=new ae,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const r=t.getVisibleTextEditors();for(const s of this.c.values())r.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,i,r,s){let n;for(const f of this.e.getVisibleTextEditors(!0))if(f.value===e){n=f;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new P,l=new P,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(f){return Yu(f,o.f)}get cspSource(){return hy}set options(f){this.b=f,o.d.$setOptions(a,f)}get options(){return this.b}set html(f){this.a=f,o.d.$setHtml(a,f)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(f){return o.d.$postMessage(a,f)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.delete(a)&&(o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,i,r||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}},fW=class E3{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(V.MainThreadCodeMapper)}async $mapCode(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=nr(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(jt.from)})},notebookEdit:(c,l)=>{l=nr(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(bp.from)})}},o={location:i.location,chatRequestId:i.chatRequestId,chatRequestModel:i.chatRequestModel,chatSessionId:i.chatSessionResource?Jr.parseLocalSessionId(y.revive(i.chatSessionResource)):void 0,codeBlocks:i.codeBlocks.map(c=>({code:c.code,resource:y.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock}))};return await s.provideMappedEdits(o,n,r)??null}registerMappedEditsProvider(t,i){const r=E3.a++;return this.b.$registerCodeMapperProvider(r,t.displayName??t.name),this.c.set(r,i),{dispose:()=>this.b.$unregisterCodeMapperProvider(r)}}};function pW(e,t,i){const r=e.getProxy(V.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new Ks,t.registerArgumentProcessor({processArgument:m=>{if(m&&m.$mid===6){const w=this.b.get(m.handle);return w?w.value:m}else if(m&&m.$mid===7){const w=m,S=this.b.get(w.commentControlHandle);if(!S)return w;const C=S.getCommentThread(w.commentThreadHandle);return C?C.value:w}else if(m&&(m.$mid===9||m.$mid===8)){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const S=w.getCommentThread(m.thread.commentThreadHandle);return S?m.$mid===8?S.value:{thread:S.value,text:m.text}:m}else if(m&&m.$mid===10){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const S=w.getCommentThread(m.thread.commentThreadHandle);if(!S)return m;const C=m.commentUniqueId,k=S.getCommentByUniqueId(C);return k||m}else if(m&&m.$mid===11){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const S=w.getCommentThread(m.thread.commentThreadHandle);if(!S)return m;const C=m.text,k=m.commentUniqueId,A=S.getCommentByUniqueId(k);return A?(typeof A.body=="string"?A.body=C:A.body=new ki(C),A):m}return m}})}createCommentController(m,w,S){const C=s.a++,k=new o(m,C,w,S);this.b.set(k.handle,k);const A=this.c.get(m.identifier)||[];return A.push(k),this.c.set(m.identifier,A),k.value}async $createCommentThreadTemplate(m,w,S,C){const k=this.b.get(m);k&&k.$createCommentThreadTemplate(w,S,C)}async $setActiveComment(m,w){const S=this.b.get(m);S&&S.$setActiveComment(w??void 0)}async $updateCommentThreadTemplate(m,w,S){const C=this.b.get(m);C&&C.$updateCommentThreadTemplate(w,S)}$deleteCommentThread(m,w){this.b.get(m)?.$deleteCommentThread(w)}async $updateCommentThread(m,w,S){this.b.get(m)?.$updateCommentThread(w,S)}async $provideCommentingRanges(m,w,S){const C=this.b.get(m);if(!C||!C.commentingRangeProvider)return Promise.resolve(void 0);const k=await i.ensureDocumentData(y.revive(w));return ti(async()=>{const A=await C.commentingRangeProvider?.provideCommentingRanges(k.document,S);let G;return Array.isArray(A)?G={ranges:A,fileComments:!1}:A?G={ranges:A.ranges||[],fileComments:A.enableFileComments||!1}:G=A??void 0,G}).then(A=>{let G;return A&&(G={ranges:A.ranges.map(H=>O.from(H)),fileComments:A.fileComments}),G})}$toggleReaction(m,w,S,C,k){const A=this.b.get(m);return!A||!A.reactionHandler?Promise.resolve(void 0):ti(()=>{const G=A.getCommentThread(w);if(G){const H=G.getCommentByUniqueId(C.uniqueIdInThread);if(A!==void 0&&H&&A.reactionHandler)return A.reactionHandler(H,l(k))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(m){this.n=m}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(m){(m===void 0!=(this.p===void 0)||!m||!this.p||!m.isEqual(this.p))&&(this.p=m,this.b.range=m,this.c.fire())}get range(){return this.p}set canReply(m){this.d!==m&&(this.d=m,this.b.canReply=m,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(m){this.e=m,this.b.label=m,this.c.fire()}get contextValue(){return this.f}set contextValue(m){this.f=m,this.b.contextValue=m,this.c.fire()}get comments(){return this.q}set comments(m){this.q=m,this.b.comments=m,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(m){this.g!==m&&(this.g=m,this.b.collapsibleState=m,this.c.fire())}get state(){return this.h}set state(m){this.h=m,typeof m=="object"?(T(this.extensionDescription,"commentThreadApplicability"),this.b.state=m.resolved,this.b.applicability=m.applicability):this.b.state=m,this.c.fire()}get isDisposed(){return this.j}constructor(m,w,S,C,k,A,G,H,K){this.m=w,this.n=S,this.o=C,this.p=k,this.q=A,this.extensionDescription=G,this.r=H,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new P,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new ms,this.l.value=new ae,this.n===void 0&&(this.n=`${m}.${this.handle}`),r.$createCommentThread(w,this.handle,this.n,this.o,O.from(this.p),this.q.map(z=>a(this,z,this.k,this.extensionDescription)),G.identifier,this.r,K),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{r.$deleteCommentThread(w,this.handle)}});const F=this;this.value={get uri(){return F.uri},get range(){return F.range},set range(z){F.range=z},get comments(){return F.comments},set comments(z){F.comments=z},get collapsibleState(){return F.collapsibleState},set collapsibleState(z){F.collapsibleState=z},get canReply(){return F.canReply},set canReply(z){F.canReply=z},get contextValue(){return F.contextValue},set contextValue(z){F.contextValue=z},get label(){return F.label},set label(z){F.label=z},get state(){return F.state},set state(z){F.state=z},reveal:(z,Z)=>F.reveal(z,Z),hide:()=>F.hide(),dispose:()=>{F.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new ae);const m=S=>Object.prototype.hasOwnProperty.call(this.b,S),w={};m("range")&&(w.range=O.from(this.p)),m("label")&&(w.label=this.label),m("contextValue")&&(w.contextValue=this.contextValue??null),m("comments")&&(w.comments=this.q.map(S=>a(this,S,this.k,this.extensionDescription))),m("collapsibleState")&&(w.collapseState=u(this.g)),m("canReply")&&(w.canReply=this.canReply),m("state")&&(w.state=h(this.h)),m("applicability")&&(w.applicability=f(this.h)),m("isTemplate")&&(w.isTemplate=this.r),this.b={},r.$updateCommentThread(this.m,this.handle,this.n,this.o,w)}getCommentByUniqueId(m){for(const w of this.k){const S=w[0],C=w[1];if(m===C)return S}}async reveal(m,w){T(this.extensionDescription,"commentReveal");let S;m&&m.body!==void 0?S=m:w=w??m;let C=S?this.k.get(S):void 0;C??=this.k.get(this.q[0]);let k=!0,A=!1;return w?.focus===su.Reply?(A=!0,k=!1):w?.focus===su.Comment&&(k=!1),r.$revealCommentThread(this.m,this.handle,C,{preserveFocus:k,focusReply:A})}async hide(){return r.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(m=>m.dispose())}}__decorate([ib(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(m){this.b=m,m?.resourceHints&&T(this.h,"commentingRangeHint"),r.$updateCommentingRanges(this.handle,m?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(m){this.c=m,r.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!m})}get options(){return this.d}set options(m){this.d=m,r.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return T(this.h,"activeComment"),this.e}get activeCommentThread(){return T(this.h,"activeComment"),this.f?.value}constructor(m,w,S,C){this.h=m,this.i=w,this.j=S,this.k=C,this.a=new Map,r.$registerCommentController(this.handle,S,C,this.h.identifier.value);const k=this;this.value=Object.freeze({id:k.id,label:k.label,get options(){return k.options},set options(A){k.options=A},get commentingRangeProvider(){return k.commentingRangeProvider},set commentingRangeProvider(A){k.commentingRangeProvider=A},get reactionHandler(){return k.reactionHandler},set reactionHandler(A){k.reactionHandler=A},get activeCommentThread(){return k.activeCommentThread},createCommentThread(A,G,H){return k.createCommentThread(A,G,H).value},dispose:()=>{k.dispose()}}),this.g=[],this.g.push({dispose:()=>{r.$unregisterCommentController(this.handle)}})}createCommentThread(m,w,S){const C=new n(this.id,this.handle,void 0,m,w,S,this.h,!1);return this.a.set(C.handle,C),C}$setActiveComment(m){if(!m){this.e=void 0,this.f=void 0;return}const w=this.a.get(m.commentThreadHandle);w&&(this.e=m.uniqueIdInThread?w.getCommentByUniqueId(m.uniqueIdInThread):void 0,this.f=w)}$createCommentThreadTemplate(m,w,S){const C=new n(this.id,this.handle,void 0,y.revive(m),O.to(w),[],this.h,!0,S);return C.collapsibleState=ya.Expanded,this.a.set(C.handle,C),C}$updateCommentThreadTemplate(m,w){const S=this.a.get(m);S&&(S.range=O.to(w))}$updateCommentThread(m,w){const S=this.a.get(m);if(!S)return;(k=>Object.prototype.hasOwnProperty.call(w,k))("collapseState")&&(S.collapsibleState=u(w.collapseState))}$deleteCommentThread(m){this.a.get(m)?.dispose(),this.a.delete(m)}getCommentThread(m){return this.a.get(m)}dispose(){this.a.forEach(m=>{m.dispose()}),this.g.forEach(m=>m.dispose())}}function a(g,m,w,S){let C=w.get(m);return C||(C=++g.commentHandle,w.set(m,C)),m.state!==void 0&&T(S,"commentsDraftState"),m.reactions?.some(k=>k.reactors!==void 0)&&T(S,"commentReactor"),{mode:m.mode,contextValue:m.contextValue,uniqueIdInThread:C,body:typeof m.body=="string"?m.body:ue.from(m.body),userName:m.author.name,userIconPath:m.author.iconPath,label:m.label,commentReactions:m.reactions?m.reactions.map(k=>c(k)):void 0,state:m.state,timestamp:m.timestamp?.toJSON()}}function c(g){return{label:g.label,iconPath:g.iconPath?Qf(g.iconPath):void 0,count:g.count,hasReacted:g.authorHasReacted,reactors:g.reactors&&g.reactors.length>0&&typeof g.reactors[0]!="string"?g.reactors.map(m=>m.name):g.reactors}}function l(g){return{label:g.label||"",count:g.count||0,iconPath:g.iconPath?y.revive(g.iconPath):"",authorHasReacted:g.hasReacted||!1,reactors:g.reactors?.map(m=>({name:m}))}}function u(g){if(g!==void 0)switch(g){case tu.Expanded:return ya.Expanded;case tu.Collapsed:return ya.Collapsed}return ya.Collapsed}function h(g){let m;if(typeof g=="object"?m=g.resolved:m=g,m!==void 0)switch(m){case iu.Unresolved:return El.Unresolved;case iu.Resolved:return El.Resolved}return El.Unresolved}function f(g){let m;if(typeof g=="object"&&(m=g.applicability),m!==void 0)switch(m){case ru.Current:return Cl.Current;case ru.Outdated:return Cl.Outdated}return Cl.Current}return new s}var hg={},Ue={exports:hg};(function(e,t){if(typeof hg=="object"&&typeof Ue=="object")Ue.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var i=t();for(var r in i)(typeof hg=="object"?hg:e)[r]=i[r]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(r,s,n){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:n})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var o in r)i.d(n,o,function(a){return r[a]}.bind(null,o));return n},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="",i(i.s=0)}([function(e,t,i){(function(r){var s;t=e.exports=_e,s=typeof r=="object"&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var D=Array.prototype.slice.call(arguments,0);D.unshift("SEMVER"),console.log.apply(console,D)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var f=l++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var g=l++;c[g]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var w=l++;c[w]="(?:"+c[u]+"|"+c[f]+")";var S=l++;c[S]="(?:"+c[h]+"|"+c[f]+")";var C=l++;c[C]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var k=l++;c[k]="(?:-?("+c[S]+"(?:\\."+c[S]+")*))";var A=l++;c[A]="[0-9A-Za-z-]+";var G=l++;c[G]="(?:\\+("+c[A]+"(?:\\."+c[A]+")*))";var H=l++,K="v?"+c[g]+c[C]+"?"+c[G]+"?";c[H]="^"+K+"$";var F="[v=\\s]*"+c[m]+c[k]+"?"+c[G]+"?",z=l++;c[z]="^"+F+"$";var Z=l++;c[Z]="((?:<|>)?=?)";var Le=l++;c[Le]=c[h]+"|x|X|\\*";var it=l++;c[it]=c[u]+"|x|X|\\*";var Pe=l++;c[Pe]="[v=\\s]*("+c[it]+")(?:\\.("+c[it]+")(?:\\.("+c[it]+")(?:"+c[C]+")?"+c[G]+"?)?)?";var q=l++;c[q]="[v=\\s]*("+c[Le]+")(?:\\.("+c[Le]+")(?:\\.("+c[Le]+")(?:"+c[k]+")?"+c[G]+"?)?)?";var W=l++;c[W]="^"+c[Z]+"\\s*"+c[Pe]+"$";var _=l++;c[_]="^"+c[Z]+"\\s*"+c[q]+"$";var J=l++;c[J]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var X=l++;c[X]="(?:~>?)";var pe=l++;c[pe]="(\\s*)"+c[X]+"\\s+",a[pe]=new RegExp(c[pe],"g");var $e=l++;c[$e]="^"+c[X]+c[Pe]+"$";var Ie=l++;c[Ie]="^"+c[X]+c[q]+"$";var lt=l++;c[lt]="(?:\\^)";var At=l++;c[At]="(\\s*)"+c[lt]+"\\s+",a[At]=new RegExp(c[At],"g");var Qe=l++;c[Qe]="^"+c[lt]+c[Pe]+"$";var Et=l++;c[Et]="^"+c[lt]+c[q]+"$";var ui=l++;c[ui]="^"+c[Z]+"\\s*("+F+")$|^$";var Wt=l++;c[Wt]="^"+c[Z]+"\\s*("+K+")$|^$";var ir=l++;c[ir]="(\\s*)"+c[Z]+"\\s*("+F+"|"+c[Pe]+")",a[ir]=new RegExp(c[ir],"g");var _s=l++;c[_s]="^\\s*("+c[Pe]+")\\s+-\\s+("+c[Pe]+")\\s*$";var ni=l++;c[ni]="^\\s*("+c[q]+")\\s+-\\s+("+c[q]+")\\s*$";var _c=l++;c[_c]="(<|>)?=?\\s*\\*";for(var gs=0;gs<35;gs++)s(gs,c[gs]),a[gs]||(a[gs]=new RegExp(c[gs]));function zi(D,N){if(D instanceof _e)return D;if(typeof D!="string"||D.length>n||!(N?a[z]:a[H]).test(D))return null;try{return new _e(D,N)}catch{return null}}function _e(D,N){if(D instanceof _e){if(D.loose===N)return D;D=D.version}else if(typeof D!="string")throw new TypeError("Invalid Version: "+D);if(D.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof _e))return new _e(D,N);s("SemVer",D,N),this.loose=N;var M=D.trim().match(N?a[z]:a[H]);if(!M)throw new TypeError("Invalid Version: "+D);if(this.raw=D,this.major=+M[1],this.minor=+M[2],this.patch=+M[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");M[4]?this.prerelease=M[4].split(".").map(function(ce){if(/^[0-9]+$/.test(ce)){var ge=+ce;if(ge>=0&&ge<o)return ge}return ce}):this.prerelease=[],this.build=M[5]?M[5].split("."):[],this.format()}t.parse=zi,t.valid=function(D,N){var M=zi(D,N);return M?M.version:null},t.clean=function(D,N){var M=zi(D.trim().replace(/^[=v]+/,""),N);return M?M.version:null},t.SemVer=_e,_e.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},_e.prototype.toString=function(){return this.version},_e.prototype.compare=function(D){return s("SemVer.compare",this.version,this.loose,D),D instanceof _e||(D=new _e(D,this.loose)),this.compareMain(D)||this.comparePre(D)},_e.prototype.compareMain=function(D){return D instanceof _e||(D=new _e(D,this.loose)),Bs(this.major,D.major)||Bs(this.minor,D.minor)||Bs(this.patch,D.patch)},_e.prototype.comparePre=function(D){if(D instanceof _e||(D=new _e(D,this.loose)),this.prerelease.length&&!D.prerelease.length)return-1;if(!this.prerelease.length&&D.prerelease.length)return 1;if(!this.prerelease.length&&!D.prerelease.length)return 0;var N=0;do{var M=this.prerelease[N],ce=D.prerelease[N];if(s("prerelease compare",N,M,ce),M===void 0&&ce===void 0)return 0;if(ce===void 0)return 1;if(M===void 0)return-1;if(M!==ce)return Bs(M,ce)}while(++N)},_e.prototype.inc=function(D,N){switch(D){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",N);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",N);break;case"prepatch":this.prerelease.length=0,this.inc("patch",N),this.inc("pre",N);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",N),this.inc("pre",N);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var M=this.prerelease.length;--M>=0;)typeof this.prerelease[M]=="number"&&(this.prerelease[M]++,M=-2);M===-1&&this.prerelease.push(0)}N&&(this.prerelease[0]===N?isNaN(this.prerelease[1])&&(this.prerelease=[N,0]):this.prerelease=[N,0]);break;default:throw new Error("invalid increment argument: "+D)}return this.format(),this.raw=this.version,this},t.inc=function(D,N,M,ce){typeof M=="string"&&(ce=M,M=void 0);try{return new _e(D,M).inc(N,ce).version}catch{return null}},t.diff=function(D,N){if(Xo(D,N))return null;var M=zi(D),ce=zi(N);if(M.prerelease.length||ce.prerelease.length){for(var ge in M)if((ge==="major"||ge==="minor"||ge==="patch")&&M[ge]!==ce[ge])return"pre"+ge;return"prerelease"}for(var ge in M)if((ge==="major"||ge==="minor"||ge==="patch")&&M[ge]!==ce[ge])return ge},t.compareIdentifiers=Bs;var Ae=/^[0-9]+$/;function Bs(D,N){var M=Ae.test(D),ce=Ae.test(N);return M&&ce&&(D=+D,N=+N),M&&!ce?-1:ce&&!M?1:D<N?-1:D>N?1:0}function br(D,N,M){return new _e(D,M).compare(new _e(N,M))}function rr(D,N,M){return br(D,N,M)>0}function Br(D,N,M){return br(D,N,M)<0}function Xo(D,N,M){return br(D,N,M)===0}function Ch(D,N,M){return br(D,N,M)!==0}function Bc(D,N,M){return br(D,N,M)>=0}function qc(D,N,M){return br(D,N,M)<=0}function Yo(D,N,M,ce){var ge;switch(N){case"===":typeof D=="object"&&(D=D.version),typeof M=="object"&&(M=M.version),ge=D===M;break;case"!==":typeof D=="object"&&(D=D.version),typeof M=="object"&&(M=M.version),ge=D!==M;break;case"":case"=":case"==":ge=Xo(D,M,ce);break;case"!=":ge=Ch(D,M,ce);break;case">":ge=rr(D,M,ce);break;case">=":ge=Bc(D,M,ce);break;case"<":ge=Br(D,M,ce);break;case"<=":ge=qc(D,M,ce);break;default:throw new TypeError("Invalid operator: "+N)}return ge}function vi(D,N){if(D instanceof vi){if(D.loose===N)return D;D=D.value}if(!(this instanceof vi))return new vi(D,N);s("comparator",D,N),this.loose=N,this.parse(D),this.semver===Fn?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(D,N){return Bs(N,D)},t.major=function(D,N){return new _e(D,N).major},t.minor=function(D,N){return new _e(D,N).minor},t.patch=function(D,N){return new _e(D,N).patch},t.compare=br,t.compareLoose=function(D,N){return br(D,N,!0)},t.rcompare=function(D,N,M){return br(N,D,M)},t.sort=function(D,N){return D.sort(function(M,ce){return t.compare(M,ce,N)})},t.rsort=function(D,N){return D.sort(function(M,ce){return t.rcompare(M,ce,N)})},t.gt=rr,t.lt=Br,t.eq=Xo,t.neq=Ch,t.gte=Bc,t.lte=qc,t.cmp=Yo,t.Comparator=vi;var Fn={};function ht(D,N){if(D instanceof ht)return D.loose===N?D:new ht(D.raw,N);if(D instanceof vi)return new ht(D.value,N);if(!(this instanceof ht))return new ht(D,N);if(this.loose=N,this.raw=D,this.set=D.split(/\s*\|\|\s*/).map(function(M){return this.parseRange(M.trim())},this).filter(function(M){return M.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+D);this.format()}function Vt(D){return!D||D.toLowerCase()==="x"||D==="*"}function nm(D,N,M,ce,ge,_t,Ze,hi,$t,Gt,sr,dt,Jt){return((N=Vt(M)?"":Vt(ce)?">="+M+".0.0":Vt(ge)?">="+M+"."+ce+".0":">="+N)+" "+(hi=Vt($t)?"":Vt(Gt)?"<"+(+$t+1)+".0.0":Vt(sr)?"<"+$t+"."+(+Gt+1)+".0":dt?"<="+$t+"."+Gt+"."+sr+"-"+dt:"<="+hi)).trim()}function om(D,N){for(var M=0;M<D.length;M++)if(!D[M].test(N))return!1;if(N.prerelease.length){for(M=0;M<D.length;M++)if(s(D[M].semver),D[M].semver!==Fn&&D[M].semver.prerelease.length>0){var ce=D[M].semver;if(ce.major===N.major&&ce.minor===N.minor&&ce.patch===N.patch)return!0}return!1}return!0}function yr(D,N,M){try{N=new ht(N,M)}catch{return!1}return N.test(D)}function zc(D,N,M,ce){var ge,_t,Ze,hi,$t;switch(D=new _e(D,ce),N=new ht(N,ce),M){case">":ge=rr,_t=qc,Ze=Br,hi=">",$t=">=";break;case"<":ge=Br,_t=Bc,Ze=rr,hi="<",$t="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yr(D,N,ce))return!1;for(var Gt=0;Gt<N.set.length;++Gt){var sr=N.set[Gt],dt=null,Jt=null;if(sr.forEach(function(di){di.semver===Fn&&(di=new vi(">=0.0.0")),dt=dt||di,Jt=Jt||di,ge(di.semver,dt.semver,ce)?dt=di:Ze(di.semver,Jt.semver,ce)&&(Jt=di)}),dt.operator===hi||dt.operator===$t||(!Jt.operator||Jt.operator===hi)&&_t(D,Jt.semver)||Jt.operator===$t&&Ze(D,Jt.semver))return!1}return!0}vi.prototype.parse=function(D){var N=this.loose?a[ui]:a[Wt],M=D.match(N);if(!M)throw new TypeError("Invalid comparator: "+D);this.operator=M[1],this.operator==="="&&(this.operator=""),M[2]?this.semver=new _e(M[2],this.loose):this.semver=Fn},vi.prototype.toString=function(){return this.value},vi.prototype.test=function(D){return s("Comparator.test",D,this.loose),this.semver===Fn||(typeof D=="string"&&(D=new _e(D,this.loose)),Yo(D,this.operator,this.semver,this.loose))},vi.prototype.intersects=function(D,N){if(!(D instanceof vi))throw new TypeError("a Comparator is required");var M;if(this.operator==="")return M=new ht(D.value,N),yr(this.value,M,N);if(D.operator==="")return M=new ht(this.value,N),yr(D.semver,M,N);var ce=!(this.operator!==">="&&this.operator!==">"||D.operator!==">="&&D.operator!==">"),ge=!(this.operator!=="<="&&this.operator!=="<"||D.operator!=="<="&&D.operator!=="<"),_t=this.semver.version===D.semver.version,Ze=!(this.operator!==">="&&this.operator!=="<="||D.operator!==">="&&D.operator!=="<="),hi=Yo(this.semver,"<",D.semver,N)&&(this.operator===">="||this.operator===">")&&(D.operator==="<="||D.operator==="<"),$t=Yo(this.semver,">",D.semver,N)&&(this.operator==="<="||this.operator==="<")&&(D.operator===">="||D.operator===">");return ce||ge||_t&&Ze||hi||$t},t.Range=ht,ht.prototype.format=function(){return this.range=this.set.map(function(D){return D.join(" ").trim()}).join("||").trim(),this.range},ht.prototype.toString=function(){return this.range},ht.prototype.parseRange=function(D){var N=this.loose;D=D.trim(),s("range",D,N);var M=N?a[ni]:a[_s];D=D.replace(M,nm),s("hyphen replace",D),D=D.replace(a[ir],"$1$2$3"),s("comparator trim",D,a[ir]),D=(D=(D=D.replace(a[pe],"$1~")).replace(a[At],"$1^")).split(/\s+/).join(" ");var ce=N?a[ui]:a[Wt],ge=D.split(" ").map(function(_t){return function(Ze,hi){return s("comp",Ze),Ze=function($t,Gt){return $t.trim().split(/\s+/).map(function(sr){return function(dt,Jt){s("caret",dt,Jt);var di=Jt?a[Et]:a[Qe];return dt.replace(di,function(Vi,be,Re,ct,E){var gt;return s("caret",dt,Vi,be,Re,ct,E),Vt(be)?gt="":Vt(Re)?gt=">="+be+".0.0 <"+(+be+1)+".0.0":Vt(ct)?gt=be==="0"?">="+be+"."+Re+".0 <"+be+"."+(+Re+1)+".0":">="+be+"."+Re+".0 <"+(+be+1)+".0.0":E?(s("replaceCaret pr",E),E.charAt(0)!=="-"&&(E="-"+E),gt=be==="0"?Re==="0"?">="+be+"."+Re+"."+ct+E+" <"+be+"."+Re+"."+(+ct+1):">="+be+"."+Re+"."+ct+E+" <"+be+"."+(+Re+1)+".0":">="+be+"."+Re+"."+ct+E+" <"+(+be+1)+".0.0"):(s("no pr"),gt=be==="0"?Re==="0"?">="+be+"."+Re+"."+ct+" <"+be+"."+Re+"."+(+ct+1):">="+be+"."+Re+"."+ct+" <"+be+"."+(+Re+1)+".0":">="+be+"."+Re+"."+ct+" <"+(+be+1)+".0.0"),s("caret return",gt),gt})}(sr,Gt)}).join(" ")}(Ze,hi),s("caret",Ze),Ze=function($t,Gt){return $t.trim().split(/\s+/).map(function(sr){return function(dt,Jt){var di=Jt?a[Ie]:a[$e];return dt.replace(di,function(Vi,be,Re,ct,E){var gt;return s("tilde",dt,Vi,be,Re,ct,E),Vt(be)?gt="":Vt(Re)?gt=">="+be+".0.0 <"+(+be+1)+".0.0":Vt(ct)?gt=">="+be+"."+Re+".0 <"+be+"."+(+Re+1)+".0":E?(s("replaceTilde pr",E),E.charAt(0)!=="-"&&(E="-"+E),gt=">="+be+"."+Re+"."+ct+E+" <"+be+"."+(+Re+1)+".0"):gt=">="+be+"."+Re+"."+ct+" <"+be+"."+(+Re+1)+".0",s("tilde return",gt),gt})}(sr,Gt)}).join(" ")}(Ze,hi),s("tildes",Ze),Ze=function($t,Gt){return s("replaceXRanges",$t,Gt),$t.split(/\s+/).map(function(sr){return function(dt,Jt){dt=dt.trim();var di=Jt?a[_]:a[W];return dt.replace(di,function(Vi,be,Re,ct,E,gt){s("xRange",dt,Vi,be,Re,ct,E,gt);var Ko=Vt(Re),ee=Ko||Vt(ct),je=ee||Vt(E);return be==="="&&je&&(be=""),Ko?Vi=be===">"||be==="<"?"<0.0.0":"*":be&&je?(ee&&(ct=0),je&&(E=0),be===">"?(be=">=",ee?(Re=+Re+1,ct=0,E=0):je&&(ct=+ct+1,E=0)):be==="<="&&(be="<",ee?Re=+Re+1:ct=+ct+1),Vi=be+Re+"."+ct+"."+E):ee?Vi=">="+Re+".0.0 <"+(+Re+1)+".0.0":je&&(Vi=">="+Re+"."+ct+".0 <"+Re+"."+(+ct+1)+".0"),s("xRange return",Vi),Vi})}(sr,Gt)}).join(" ")}(Ze,hi),s("xrange",Ze),Ze=function($t,Gt){return s("replaceStars",$t,Gt),$t.trim().replace(a[_c],"")}(Ze,hi),s("stars",Ze),Ze}(_t,N)}).join(" ").split(/\s+/);return this.loose&&(ge=ge.filter(function(_t){return!!_t.match(ce)})),ge=ge.map(function(_t){return new vi(_t,N)})},ht.prototype.intersects=function(D,N){if(!(D instanceof ht))throw new TypeError("a Range is required");return this.set.some(function(M){return M.every(function(ce){return D.set.some(function(ge){return ge.every(function(_t){return ce.intersects(_t,N)})})})})},t.toComparators=function(D,N){return new ht(D,N).set.map(function(M){return M.map(function(ce){return ce.value}).join(" ").trim().split(" ")})},ht.prototype.test=function(D){if(!D)return!1;typeof D=="string"&&(D=new _e(D,this.loose));for(var N=0;N<this.set.length;N++)if(om(this.set[N],D))return!0;return!1},t.satisfies=yr,t.maxSatisfying=function(D,N,M){var ce=null,ge=null;try{var _t=new ht(N,M)}catch{return null}return D.forEach(function(Ze){_t.test(Ze)&&(ce&&ge.compare(Ze)!==-1||(ge=new _e(ce=Ze,M)))}),ce},t.minSatisfying=function(D,N,M){var ce=null,ge=null;try{var _t=new ht(N,M)}catch{return null}return D.forEach(function(Ze){_t.test(Ze)&&(ce&&ge.compare(Ze)!==1||(ge=new _e(ce=Ze,M)))}),ce},t.validRange=function(D,N){try{return new ht(D,N).range||"*"}catch{return null}},t.ltr=function(D,N,M){return zc(D,N,"<",M)},t.gtr=function(D,N,M){return zc(D,N,">",M)},t.outside=zc,t.prerelease=function(D,N){var M=zi(D,N);return M&&M.prerelease.length?M.prerelease:null},t.intersects=function(D,N,M){return D=new ht(D,M),N=new ht(N,M),D.intersects(N)},t.coerce=function(D){if(D instanceof _e)return D;if(typeof D!="string")return null;var N=D.match(a[J]);return N==null?null:zi((N[1]||"0")+"."+(N[2]||"0")+"."+(N[3]||"0"))}}).call(this,i(1))},function(e,t){var i,r,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(S){if(i===setTimeout)return setTimeout(S,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(S,0);try{return i(S,0)}catch{try{return i.call(null,S,0)}catch{return i.call(this,S,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:n}catch{i=n}try{r=typeof clearTimeout=="function"?clearTimeout:o}catch{r=o}})();var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&g())}function g(){if(!u){var S=a(f);u=!0;for(var C=l.length;C;){for(c=l,l=[];++h<C;)c&&c[h].run();h=-1,C=l.length}c=null,u=!1,function(k){if(r===clearTimeout)return clearTimeout(k);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(k);try{r(k)}catch{try{return r.call(null,k)}catch{return r.call(this,k)}}}(S)}}function m(S,C){this.fun=S,this.array=C}function w(){}s.nextTick=function(S){var C=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)C[k-1]=arguments[k];l.push(new m(S,C)),l.length!==1||u||a(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(S){return[]},s.binding=function(S){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(S){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var xZ=Ue.exports.SEMVER_SPEC_VERSION,kZ=Ue.exports.parse,$Z=Ue.exports.valid,IZ=Ue.exports.coerce,DZ=Ue.exports.clean,PZ=Ue.exports.inc,AZ=Ue.exports.major,TZ=Ue.exports.minor,RZ=Ue.exports.patch,LZ=Ue.exports.prerelease,NZ=Ue.exports.gt,MZ=Ue.exports.gte,OZ=Ue.exports.lt,FZ=Ue.exports.lte,UZ=Ue.exports.eq,jZ=Ue.exports.neq,HZ=Ue.exports.cmp,WZ=Ue.exports.compare,_Z=Ue.exports.rcompare,BZ=Ue.exports.compareIdentifiers,qZ=Ue.exports.rcompareIdentifiers,zZ=Ue.exports.compareBuild,VZ=Ue.exports.sort,GZ=Ue.exports.rsort,JZ=Ue.exports.diff,QZ=Ue.exports.validRange,ZZ=Ue.exports.satisfies,XZ=Ue.exports.maxSatisfying,YZ=Ue.exports.minSatisfying,KZ=Ue.exports.minVersion,eX=Ue.exports.gtr,tX=Ue.exports.ltr,iX=Ue.exports.outside,rX=Ue.exports.intersects,sX=Ue.exports.SemVer,nX=Ue.exports.Comparator,oX=Ue.exports.Range,v8=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,gW=/^-(\d{4})(\d{2})(\d{2})$/;function mW(e){return e=e.trim(),e==="*"||v8.test(e)}function w8(e){if(!mW(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(v8);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function b8(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,r=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=gW.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var vW=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function wW(e,t){if(t.serializeBuffersForPostMessage){const i=new vW,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a)};if(ArrayBuffer.isView(a)){const c=bW(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=i.buffers.map(o=>{const a=new Uint8Array(o);return re.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function bW(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function yW(e,t){const i=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),r=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=i[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,r),arrayBuffers:i}}var SW=class{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,i,r,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new P,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new P,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=i,this.#r=r,this.#n=s,this.#s=n,this.#u=Ac(n),this.#d=EW(n),this.#i=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,Yu(e,this.#r)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===B.https||e.scheme===B.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+hy}return hy}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#i.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),Ci(this.#o,e)||this.#t.$setOptions(this.#e,y8(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=wW(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===B.vscodeRemote,i=this.#s.extensionLocation.scheme===B.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Yu(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=Yu(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`})}};function Ac(e){try{const t=b8(w8(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function EW(e){try{const t=b8(w8(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var CW=class extends Y{constructor(e,t,i,r,s){super(),this.c=t,this.f=i,this.g=r,this.h=s,this.b=new Map,this.a=e.getProxy(V.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,i){const r=this.j(e);if(r){const{message:s}=yW(t,i.value);r._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const r=new SW(e,this.a,xW(t),this.c,this.f,i,this.h);this.b.set(e,r);const s=r._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return r}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function dg(e){return{id:e.identifier,location:e.extensionLocation}}function y8(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||kW(e,t)}}function xW(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>y.from(t))}}function kW(e,t){return[...(t?.getWorkspaceFolders()||[]).map(i=>i.uri),e.extensionLocation]}var Ur=class C3{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const i=this.c++;return this.b.set(i,t),this.e(),i}get(t,i){return this.b.has(t)?this.b.get(t)[i]:void 0}delete(t){this.b.delete(t),this.e()}e(){C3.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},$W=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new Ur("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=RW(this.document.uri)+this.a++;return Qt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},IW=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,i){const r=this.b(e,t.uri);if(this.a.has(r))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new $W(t,i);return this.a.set(r,s),s}delete(e,t){const i=this.b(e,t.uri);this.a.delete(i)}b(e,t){return`${e}@@@${t}`}},S8;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(S8||(S8={}));var DW=class{constructor(){this.a=new Map}addTextProvider(e,t,i){return this.b(e,{type:0,extension:t,provider:i})}addCustomProvider(e,t,i){return this.b(e,{type:1,extension:t,provider:i})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Ee(()=>this.a.delete(e))}},PW=class{constructor(e,t,i,r,s){this.d=t,this.f=i,this.g=r,this.h=s,this.b=new DW,this.c=new IW,this.a=e.getProxy(V.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,r){const s=new ae;return AW(i)?(s.add(this.b.addTextProvider(t,e,i)),this.a.$registerTextEditorProvider(dg(e),t,r.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},Ac(e))):(s.add(this.b.addCustomProvider(t,e,i)),fg(i)&&s.add(i.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(TW(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(dg(e),t,r.webviewOptions||{},!!r.supportsMultipleEditorsPerDocument,Ac(e))),Ee.from(s,new Ee(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=y.revive(e),a=await n.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:r?.buffer},s);let c;return fg(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:fg(n.provider)}}async $disposeCustomDocument(e,t){const i=this.b.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==1)throw new Error(`Invalid provider type for '${t}'`);const r=y.revive(e),{document:s}=this.i(t,r);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,i,r,s,n){const o=this.b.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=Ut.to(s),c=this.g.createNewWebview(t,r.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,i,r.title,a,r.options,c,r.active),u=y.revive(e);switch(o.type){case 1:{const{document:h}=this.i(i,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.i(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this.b.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=y.revive(t),o=this.d.getDocument(n);await r.provider.moveCustomTextEditor(o,s,Be.None)}async $undo(e,t,i,r){return this.i(t,e).undo(i,r)}async $redo(e,t,i,r){return this.i(t,e).redo(i,r)}async $revert(e,t,i){const r=this.i(t,e);await this.j(t).revertCustomDocument(r.document,i),r.disposeBackup()}async $onSave(e,t,i){const r=this.i(t,e);await this.j(t).saveCustomDocument(r.document,i),r.disposeBackup()}async $onSaveAs(e,t,i,r){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,y.revive(i),r)}async $backup(e,t,i){const r=this.i(t,e),n=await this.j(t).backupCustomDocument(r.document,{destination:r.getNewBackupUri()},i);return r.updateBackup(n),n.id}i(e,t){const i=this.c.get(e,y.revive(t));if(!i)throw new Error("No custom document found");return i}j(e){const i=this.b.get(e)?.provider;if(!i||!fg(i))throw new Error("Custom document is not editable");return i}};function fg(e){return!!e.onDidChangeCustomDocument}function AW(e){return typeof e.resolveCustomTextEditor=="function"}function TW(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function RW(e){const t=e.scheme===B.file||e.scheme===B.untitled?e.fsPath:e.toString();return ul(t)+""}var Go,E8=class x3{#e;#t;#i;constructor(t,i,r,s,n,o,a,c){this.d=t,this.e=i,this.f=r,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,r),this.#i=new wt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#i.keys()]),this.#e?.$clear(this.e),this.#i.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,i){if(!t){this.clear();return}this.j();let r=[];if(y.isUri(t)){if(!i){this.delete(t);return}this.#i.set(t,mt(i)),r=[t]}else if(Array.isArray(t)){r=[];let o;t=[...t].sort(x3.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#i.get(o).length===0&&this.#i.delete(o),o=c,r.push(c),this.#i.set(c,[])),l)this.#i.get(c)?.push(...mt(l));else{const u=this.#i.get(c);u&&(u.length=0)}}}if(this.#t.fire(r),!this.#e)return;const s=[];let n=0;for(const o of r){let a=[];const c=this.#i.get(o);if(c)if(c.length>this.g){a=[];const l=[ii.Error,ii.Warning,ii.Information,ii.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...No.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:xi.Info,message:d(3036,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...No.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#i.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#i.keys()]),this.#i.clear(),this.#e?.$clear(this.e)}forEach(t,i){this.j();for(const[r,s]of this)t.call(i,r,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#i.keys())yield[t,this.get(t)]}get(t){this.j();const i=this.#i.get(t);return Array.isArray(i)?Object.freeze(i.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#i.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,i){return t[0].toString()<i[0].toString()?-1:t[0].toString()>i[0].toString()?1:0}},dy=class{static{Go=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const i=new wt;for(const r of t)i.set(r,r);return{uris:Object.freeze(Array.from(i.values()))}}constructor(t,i,r,s){this.j=i,this.k=r,this.l=s,this.g=new Map,this.h=new lA({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=Ke.map(this.h.event,Go._mapper),this.f=t.getProxy(V.MainThreadDiagnostics)}createDiagnosticCollection(t,i){const{g:r,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(f,g){s.$changeMany(f,g),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,f,g.length===0?"CLEARING":g)}$clear(f){s.$clear(f),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,f)}dispose(){s.dispose()}};let u;if(!i)i="_generated_diagnostic_collection_name_#"+Go.c++,u=i;else if(!r.has(i))u=i;else{this.j.warn(`DiagnosticCollection with name '${i}' does already exist.`);do u=i+Go.c++;while(r.has(u))}return new class extends E8{constructor(){super(i,u,Go.e,Go.d,f=>c.getDocument(f)?.version,a.extUri,l,n),r.set(u,this)}dispose(){super.dispose(),r.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const i=new Map,r=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=i.get(n.toString());typeof a>"u"&&(a=r.length,i.set(n.toString(),a),r.push([n,[]])),r[a][1]=r[a][1].concat(...o)});return r}}m(t){let i=[];for(const r of this.g.values())r.has(t)&&(i=i.concat(r.get(t)));return i}$acceptMarkersChange(t){if(!this.n){const i="_generated_mirror",r=new E8(i,i,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(i,r),this.n=r}for(const[i,r]of t)this.n.set(y.revive(i),r.map(No.to))}};dy=Go=__decorate([__param(1,De),__param(2,ma)],dy);var LW=class{constructor(e){this.a=e.getProxy(V.MainThreadDialogs)}showOpenDialog(e){return this.a.$showOpenDialog(e).then(t=>t?t.map(i=>y.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?y.revive(t):void 0)}},NW=class k3{static{this.a=0}constructor(t,i,r){this.d=i,this.e=r,this.b=new Map,this.c=t.getProxy(V.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,i){if(Object.keys(B).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const r=k3.a++;this.b.set(r,i),this.c.$registerTextContentProvider(r,t);let s;if(typeof i.onDidChange=="function"){let n;s=i.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(r,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=a6(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(Bt).finally(()=>{n===a&&(n=void 0)});n=a})}return new Ee(()=>{this.b.delete(r)&&this.c.$unregisterTextContentProvider(r),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,i){const r=this.b.get(t);return r?Promise.resolve(r.provideTextDocumentContent(y.revive(i),Be.None)):Promise.reject(new Error(`unsupported uri-scheme: ${i.scheme}`))}},MW=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=i,this.g=r,this.a=new Gs,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,r)=>{const n={dispose:this.a.push([t,i,e])};return Array.isArray(r)&&r.push(n),n}}async $participateInSave(e,t){const i=y.revive(e);let r=!1;const s=setTimeout(()=>r=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(r)break;const a=this.d.getDocument(i),c=await this.h(o,{document:a,reason:np.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,i],r){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(i,e,t,r).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,i,r){const s=[],n=Date.now(),{document:o,reason:a}=r,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw um("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(i,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const f=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(g=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(f),u(g)}).catch(g=>{clearTimeout(f),h(g)})}).then(u=>{const h={edits:[]};for(const f of u)if(Array.isArray(f)&&f.every(g=>g instanceof pn))for(const{newText:g,newEol:m,range:w}of f)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:w&&O.from(w),text:g,eol:m&&oc.from(m)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new ei(h)):Promise.reject(new Error("concurrent_edits"))})}},OW=class{constructor(e,t){this.a=new P,this.b=new P,this.c=new P,this.d=new P,this.e=new P,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidChangeDocumentWithReason=this.d.event,this.onDidSaveDocument=this.e.event,this.f=new ae,this.i=new Map,this.g=e.getProxy(V.MainThreadDocuments),this.h=t,this.h.onDidRemoveDocuments(i=>{for(const r of i)this.b.fire(r.document)},void 0,this.f),this.h.onDidAddDocuments(i=>{for(const r of i)this.a.fire(r.document)},void 0,this.f)}dispose(){this.f.dispose()}getAllDocumentData(){return[...this.h.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.h.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e,t){const i=this.h.getDocument(e);if(i&&(!t?.encoding||i.document.encoding===t.encoding))return Promise.resolve(i);let r=this.i.get(e.toString());return r?t?.encoding&&(r=r.then(s=>s.document.encoding!==t.encoding?this.ensureDocumentData(e,t):s)):(r=this.g.$tryOpenDocument(e,t).then(s=>{this.i.delete(e.toString());const n=y.revive(s);return ia(this.h.getDocument(n))},s=>(this.i.delete(e.toString()),Promise.reject(s))),this.i.set(e.toString(),r)),r}createDocumentData(e){return this.g.$tryCreateDocument(e).then(t=>y.revive(t))}$acceptModelLanguageChanged(e,t){const i=y.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");this.b.fire(r.document),r._acceptLanguageId(t),this.a.fire(r.document)}$acceptModelSaved(e){const t=y.revive(e),i=this.h.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.e.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=y.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0}),this.d.fire({document:r.document,contentChanges:[],reason:void 0,detailedReason:void 0})}$acceptEncodingChanged(e,t){const i=y.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");r._acceptEncoding(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0}),this.d.fire({document:r.document,contentChanges:[],reason:void 0,detailedReason:void 0})}$acceptModelChanged(e,t,i){const r=y.revive(e),s=this.h.getDocument(r);if(!s)throw new Error("unknown document");s._acceptIsDirty(i),s.onEvents(t);let n;t.isUndoing?n=Gl.Undo:t.isRedoing&&(n=Gl.Redo),this.c.fire(u1({document:s.document,contentChanges:t.changes.map(o=>({range:O.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n})),this.d.fire(u1({document:s.document,contentChanges:t.changes.map(o=>({range:O.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n,detailedReason:t.detailedReason?{source:t.detailedReason.source,metadata:t.detailedReason}:void 0}))}setWordDefinitionFor(e,t){fU(e,t)}},FW=class{constructor(e){this.b=new Map,this.c=new P,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(V.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const r=this.e++;return this.a.$registerEmbeddingProvider(r,t),this.b.set(r,{id:t,provider:i}),se(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(r),this.b.delete(r)})}async computeEmbeddings(e,t,i){i??=Be.None;let r=!1;typeof t=="string"&&(t=[t],r=!0);const s=await this.a.$computeEmbeddings(e,t,i);if(s.length!==t.length)throw new Error;if(r){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,i){const r=this.b.get(e);if(!r)return[];const s=await r.provider.provideEmbeddings(t,i);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},UW=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this.a.size===0)throw new Error("No embedding vector providers registered");const r=this.a.get(e);if(!r)throw new Error("Embedding vector provider not found");const s=await r.provideEmbeddingVector(t,i);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiEmbeddingVectorProvider(t,r),new Ee(()=>{this.c.$unregisterAiEmbeddingVectorProvider(r),this.a.delete(r)})}},C8;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(C8||(C8={}));var jW=class{constructor(e,t,i){const r=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)r[s]=i;this.a=r,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,i){this.a[e*this.cols+t]=i}},x8=class{constructor(e){let t=0,i=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>i&&(i=o),c>i&&(i=c)}t++,i++;const r=new jW(i,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];r.set(o,a,c)}this.a=r,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},fy=null;function HW(){return fy===null&&(fy=new x8([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),fy}var k8;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(k8||(k8={}));var Ku=null;function WW(){if(Ku===null){Ku=new Yx(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026|`;for(let i=0;i<e.length;i++)Ku.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)Ku.set(t.charCodeAt(i),2)}return Ku}var _W=class F4{static a(t,i,r,s,n){let o=n-1;do{const a=i.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=i.charCodeAt(s-1),c=i.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:r,startColumn:s+1,endLineNumber:r,endColumn:o+2},url:i.substring(s,o+1)}}static computeLinks(t,i=HW()){const r=WW(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,f=1,g=!1,m=!1,w=!1,S=!1;for(;l<c;){let C=!1;const k=a.charCodeAt(l);if(f===13){let A;switch(k){case 40:g=!0,A=0;break;case 41:A=g?0:1;break;case 91:w=!0,m=!0,A=0;break;case 93:w=!1,A=m?0:1;break;case 123:S=!0,A=0;break;case 125:A=S?0:1;break;case 39:case 34:case 96:h===k?A=1:h===39||h===34||h===96?A=0:A=1;break;case 42:A=h===42?1:0;break;case 32:A=w?0:1;break;default:A=r.get(k)}A===1&&(s.push(F4.a(r,a,n,u,l)),C=!0)}else if(f===12){let A;k===91?(m=!0,A=0):A=r.get(k),A===1?C=!0:f=13}else f=i.nextState(f,k),f===0&&(C=!0);C&&(f=1,g=!1,m=!1,S=!1,u=l+1,h=k),l++}f===13&&s.push(F4.a(r,a,n,u,c))}return s}},BW=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let i,r,s=14,n=14;for(const o of e){let a=i?tT(i,o):0;for(a===0?r=1:r=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([r,o.toUpperCase().charCodeAt(a),n]),t.push([r,o.toLowerCase().charCodeAt(a),n]),r=n;i=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new x8(t)}}provideDocumentLinks(e){this.c();const t=[],i=_W.computeLinks({getLineContent(r){return e.lineAt(r-1).text},getLineCount(){return e.lineCount}},this.b);for(const r of i){const s=Fo.to(r);s.target&&t.push(s)}return t}},qW=class U4{constructor(t,i){this.i=i,this.b=new BW,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(V.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,i,r,s={}){if(U4.j(r),this.d.has(i))throw new Error(`a provider for the scheme '${i}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(i),this.d.add(i),this.c.set(n,r);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof r.copy=="function"&&(o+=8),typeof r.open=="function"&&typeof r.close=="function"&&typeof r.read=="function"&&typeof r.write=="function"&&(T(t,"fsChunks"),o+=4);let a;s.isReadonly&&rn(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,i,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${i}`),console.error(l)});const c=r.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:f,type:g}=h;if(f.scheme!==i)continue;let m;switch(g){case Ja.Changed:m=0;break;case Ja.Created:m=1;break;case Ja.Deleted:m=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:f,type:m})}this.a.$onFileSystemChange(n,u)});return se(()=>{c.dispose(),this.b.delete(i),this.d.delete(i),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:i,ctime:r,mtime:s,size:n,permissions:o}=t;return{type:i,ctime:r,mtime:s,size:n,permissions:o}}$stat(t,i){return Promise.resolve(this.l(t).stat(y.revive(i))).then(r=>U4.k(r))}$readdir(t,i){return Promise.resolve(this.l(t).readDirectory(y.revive(i)))}$readFile(t,i){return Promise.resolve(this.l(t).readFile(y.revive(i))).then(r=>re.wrap(r))}$writeFile(t,i,r,s){return Promise.resolve(this.l(t).writeFile(y.revive(i),r.buffer,s))}$delete(t,i,r){return Promise.resolve(this.l(t).delete(y.revive(i),r))}$rename(t,i,r,s){return Promise.resolve(this.l(t).rename(y.revive(i),y.revive(r),s))}$copy(t,i,r,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(y.revive(i),y.revive(r),s))}$mkdir(t,i){return Promise.resolve(this.l(t).createDirectory(y.revive(i)))}$watch(t,i,r,s){const n=this.l(t).watch(y.revive(r),s);this.f.set(i,n)}$unwatch(t,i){const r=this.f.get(i);r&&(r.dispose(),this.f.delete(i))}$open(t,i,r){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(y.revive(i),r))}$close(t,i){const r=this.l(t);if(!r.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(r.close(i))}$read(t,i,r,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=re.alloc(s);return Promise.resolve(n.read(i,r,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,i,r,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(i,r,s.buffer,0,s.byteLength))}l(t){const i=this.c.get(t);if(!i){const r=new Error;throw r.name="ENOPRO",r.message="no provider",r}return i}},cX=class $3 extends Y{static{this.a=5}constructor(t,i,r,s){super(),this.h=t,this.j=i,this.m=r,this.n=s,this.c=this.D(new ms),this.f=void 0,this.g=0}r(){const t=new ae;this.c.value=t,this.b=this.q(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(i=>this.h(i))),t.add(this.b.onDidLogMessage(i=>this.j(i))),t.add(this.b.onDidError(i=>this.s(i.error,i.request)))}s(t,i){this.t(t,i)?this.g<$3.a&&this.f?(this.w(`restarting watcher after unexpected error: ${t}`),this.u(this.f)):this.w(`gave up attempting to restart watcher after unexpected error: ${t}`):this.w(t)}t(t,i){return!(!this.n.restartOnError||i||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}u(t){this.g++,this.r(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}w(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}y(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}};function zW(e,t){return typeof t=="string"&&!t.startsWith(go)&&!Mh(t)?{base:e,pattern:t}:t}var VW=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,i,r,s,n,o,a){this.a=Math.random(),this.b=new P,this.c=new P,this.d=new P,this.h=0,a.ignoreCreateEvents&&(this.h+=1),a.ignoreChangeEvents&&(this.h+=2),a.ignoreDeleteEvents&&(this.h+=4);const c=typeof o=="string"?!((i.getCapabilities(B.file)??0)&1024):i.extUri.ignorePathCasing(y.revive(o.baseUri)),l=$a(o,{ignoreCase:c}),u=typeof o=="string",h=!1,f=n(g=>{if(!(typeof g.session=="number"&&g.session!==this.a)&&!(h&&typeof g.session>"u")){if(!a.ignoreCreateEvents)for(const m of g.created){const w=y.revive(m);l(w.fsPath)&&(!u||r.getWorkspaceFolder(w))&&this.b.fire(w)}if(!a.ignoreChangeEvents)for(const m of g.changed){const w=y.revive(m);l(w.fsPath)&&(!u||r.getWorkspaceFolder(w))&&this.c.fire(w)}if(!a.ignoreDeleteEvents)for(const m of g.deleted){const w=y.revive(m);l(w.fsPath)&&(!u||r.getWorkspaceFolder(w))&&this.d.fire(w)}}});this.g=Ee.from(this.i(e,r,t,s,o,a,!1),this.b,this.c,this.d,f)}i(e,t,i,r,s,n,o){const a=Ee.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(V.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(go)||s.pattern.includes(Q1))&&(l=!0);const u=[];let h,f;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(f=14,n.ignoreChangeEvents&&(f&=-3),n.ignoreCreateEvents&&(f&=-5),n.ignoreDeleteEvents&&(f&=-9));else if(l&&u.length===0){const g=t.getWorkspaceFolder(y.revive(s.baseUri)),m=i.getConfiguration("files",g).get("watcherExclude");if(m)for(const w in m)w&&m[w]===!0&&u.push(w)}else if(!l){const g=t.getWorkspaceFolder(y.revive(s.baseUri));if(g){const m=i.getConfiguration("files",g).get("watcherExclude");if(m){for(const w in m)if(w&&m[w]===!0){const S=`${Mm(w,"/")}/${go}`;h||(h=[]),h.push(zW(g.uri.fsPath,S))}}if(!h||h.length===0)return a}}return c.$watch(r.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:f},!!o),Ee.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},GW=class{get created(){return this.a.value}get changed(){return this.b.value}get deleted(){return this.c.value}constructor(e){this.d=e,this.a=new It(()=>this.d.created.map(y.revive)),this.b=new It(()=>this.d.changed.map(y.revive)),this.c=new It(()=>this.d.deleted.map(y.revive)),this.session=this.d.session}},JW=class{constructor(e,t,i){this.j=e,this.k=t,this.l=i,this.a=new P,this.b=new P,this.c=new P,this.d=new P,this.g=new el,this.h=new el,this.i=new el,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,i,r,s,n){return new VW(this.j,t,i,e,r,this.a.event,Pi.from(s),n)}$onFileEvent(e){this.a.fire(new GW(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(i=>({oldUri:y.revive(i.source),newUri:y.revive(i.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,i,r){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:y.revive(s.source),newUri:y.revive(s.target)}))},i,r);case 1:return await this.n(this.i,{files:t.map(s=>y.revive(s.target))},i,r);case 0:case 3:return await this.n(this.h,{files:t.map(s=>y.revive(s.target))},i,r)}}async n(e,t,i,r){const s=new Set,n=[];if(await e.fireAsync(t,r,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof Co&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>i&&this.k.warn("SLOW file-participant",c.extension.identifier)}),r.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=Wi.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},QW=class{constructor(e,t,i,r,s){this.a=t,this.b=i,this.c=r;const n=new we("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new j("showOptions","Show Options",o=>!0,o=>o),new j("resource","Interactive resource Uri",o=>!0,o=>o),new j("controllerId","Notebook controller Id",o=>!0,o=>o),new j("title","Interactive editor title",o=>!0,o=>o)],new me("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,i,r){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1,encoding:"utf8"}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},ZW=class{constructor(e){this.b=0,this.a=e.getProxy(V.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),se(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},$8;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})($8||($8={}));var XW=class wr extends Xe{constructor(t,i,r,s){super(t,i,r,s),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=r,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return wr.selectionsEqual(this,t)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,i){return this.getDirection()===0?new wr(this.startLineNumber,this.startColumn,t,i):new wr(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new Xi(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Xi(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===0?new wr(t,i,this.endLineNumber,this.endColumn):new wr(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t,i=t){return new wr(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===0?new wr(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new wr(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new wr(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!this.selectionsEqual(t[r],i[r]))return!1;return!0}static isISelection(t){return!!t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,i,r,s,n){return n===0?new wr(t,i,r,s):new wr(r,s,t,i)}},I8=class I3{constructor(t,i){this.d=t,this.e=i}async provideDocumentSymbols(t,i){const r=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(r,i);if(!dm(s))return s[0]instanceof Wl?s.map(T0.from):I3.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const i=[],r=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:dr.from(s.kind),tags:s.tags?.map(As.from)||[],detail:"",containerName:s.containerName,range:O.from(s.location.range),selectionRange:O.from(s.location.range),children:[]};for(;;){if(r.length===0){r.push(n),i.push(n);break}const o=r[r.length-1];if(Xe.containsRange(o.range,n.range)&&!Xe.equalsRange(o.range,n.range)){o.children?.push(n),r.push(n);break}r.pop()}}return i}},pg=class{constructor(e,t,i,r,s,n){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.d=new Ur("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const i=this.f.getDocument(e),r=await this.h.provideCodeLenses(i,t);if(!r||t.isCancellationRequested)return;const s=this.d.add(r),n=new ae;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<r.length;a++){if(!Se.isRange(r[a].range)){console.warn("INVALID code lens, range is not defined",this.j.identifier.value);continue}o.lenses.push({cacheId:[s,a],range:O.from(r[a].range),command:this.g.toInternal(r[a].command,n)})}return o}async resolveCodeLens(e,t){const i=e.cacheId&&this.d.get(...e.cacheId);if(!i)return;let r;if(typeof this.h.resolveCodeLens!="function"||i.isResolved?r=i:r=await this.h.resolveCodeLens(i,t),r||(r=i),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!r.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(r.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function gg(e){return Array.isArray(e)?e.map(mu.from):e?[mu.from(e)]:[]}var D8=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDefinition(r,s,i);return gg(n)}},P8=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDeclaration(r,s,i);return gg(n)}},A8=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideImplementation(r,s,i);return gg(n)}},T8=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideTypeDefinition(r,s,i);return gg(n)}},py=class D3{static{this.f=10}constructor(t,i){this.g=t,this.h=i,this.d=0,this.e=new Map}async provideHover(t,i,r,s){const n=this.g.getDocument(t),o=ze.to(i);let a;if(r&&r.verbosityRequest){const h=r.verbosityRequest.previousHover.id,f=this.e.get(h);if(!f)throw new Error(`Hover with id ${h} not found`);const g={verbosityDelta:r.verbosityRequest.verbosityDelta,previousHover:f};a=await this.h.provideHover(n,o,s,g)}else a=await this.h.provideHover(n,o,s);if(!a||dm(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new Se(o,o));const c=vu.from(a),l=this.d;if(this.e.size===D3.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},R8=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideEvaluatableExpression(r,s,i);if(n)return N0.from(n)}},L8=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,i,r){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,O.to(t),Yf.to(i),r);if(Array.isArray(n))return n.map(o=>Xf.from(o))}},N8=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDocumentHighlights(r,s,i);if(Array.isArray(n))return n.map(rc.from)}},M8=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideMultiDocumentHighlights(e,t,i,r){const s=this.d.getDocument(e),n=i.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=ze.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,r);if(Array.isArray(a))return a.map(M0.from)}},O8=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideLinkedEditingRanges(r,s,i);if(n&&Array.isArray(n.ranges))return{ranges:mt(n.ranges.map(O.from)),wordPattern:n.wordPattern}}},F8=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,i,r){const s=this.d.getDocument(e),n=ze.to(t),o=await this.e.provideReferences(s,n,i,r);if(Array.isArray(o))return o.map(Di.from)}},mg=class im{static{this.d=1e3}constructor(t,i,r,s,n,o,a){this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new Ur("CodeAction"),this.f=new Map}async provideCodeActions(t,i,r,s){const n=this.g.getDocument(t),o=XW.isISelection(i)?Nr.to(i):O.to(i),a=[];for(const g of this.j.getDiagnostics(t))if(o.intersection(g.range)&&a.push(g)>im.d)break;const c={diagnostics:a,only:r.only?new pt(r.only):void 0,triggerKind:Q0.to(r.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!Jc(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new ae;this.f.set(u,h);const f=[];for(let g=0;g<l.length;g++){const m=l[g];if(m)if(im.o(m)&&!(m instanceof Bl))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),f.push({_isSynthetic:!0,title:m.title,command:this.h.toInternal(m,h)});else{const w=m;c.only&&(w.kind?c.only.contains(w.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${w.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const S=w.ranges??[];f.push({cacheId:[u,g],title:w.title,command:w.command&&this.h.toInternal(w.command,h),diagnostics:w.diagnostics&&w.diagnostics.map(No.from),edit:w.edit&&Wi.from(w.edit,void 0),kind:w.kind&&w.kind.value,isPreferred:w.isPreferred,isAI:Je(this.m,"codeActionAI")?w.isAI:!1,ranges:Je(this.m,"codeActionRanges")?mt(S.map(O.from)):void 0,disabled:w.disabled?.reason})}}return{cacheId:u,actions:f}}async resolveCodeAction(t,i){const[r,s]=t,n=this.e.get(r,s);if(!n||im.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,i)??n;let a;o.edit&&(a=Wi.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(r);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},eh=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.e=new Ur("DocumentPasteEdit.edits")}async prepareDocumentPaste(e,t,i,r){if(!this.h.prepareDocumentPaste)return;this.d=void 0;const s=this.g.getDocument(e),n=t.map(u=>O.to(u)),o=dc.toDataTransfer(i,()=>{throw new dP});if(await this.h.prepareDocumentPaste(s,n,o,r),r.isCancellationRequested)return;const a=Array.from(o).filter(([,u])=>!(u instanceof df)),c=new Map,l=await Promise.all(Array.from(a,async([u,h])=>{const f=ci();return c.set(f,h),[u,await jo.from(u,h,f)]}));return this.d=c,{items:l}}async providePasteEdits(e,t,i,r,s,n){if(!this.h.provideDocumentPasteEdits)return[];const o=this.g.getDocument(t),a=i.map(f=>O.to(f)),c=r.items.map(([f,g])=>{const m=this.d?.get(g.id);return m?[f,m]:[f,jo.to(f,g,async w=>(await this.f.$resolvePasteFileData(this.j,e,w)).buffer)]}),l=new qa(c),u=await this.h.provideDocumentPasteEdits(o,a,l,{only:s.only?new wn(s.only):void 0,triggerKind:s.triggerKind},n);if(!u||n.isCancellationRequested)return[];const h=this.e.add(u);return u.map((f,g)=>({_cacheId:[h,g],title:f.title??d(3039,null,this.k.displayName||this.k.name),kind:f.kind,yieldTo:f.yieldTo?.map(m=>m.value),insertText:typeof f.insertText=="string"?f.insertText:{snippet:f.insertText.value},additionalEdit:f.additionalEdit?Wi.from(f.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[i,r]=e,s=this.e.get(i,r);if(!s||!this.h.resolveDocumentPasteEdit)return{};const n=await this.h.resolveDocumentPasteEdit(s,t)??s;return{insertText:n.insertText,additionalEdit:n.additionalEdit?Wi.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.e.delete(e)}},U8=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(r,t,i);if(Array.isArray(s))return s.map(jt.from)}},gy=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,i,r){const s=this.d.getDocument(e),n=O.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(jt.from)}async provideDocumentRangesFormattingEdits(e,t,i,r){s5(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(O.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(jt.from)}},j8=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,r,s){const n=this.d.getDocument(e),o=ze.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,i,r,s);if(Array.isArray(a))return a.map(jt.from)}},vg=class{constructor(e,t){this.e=e,this.f=t,this.d=new Ur("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this.e.provideWorkspaceSymbols(e,t);if(!Jc(i))return{symbols:[]};const r=this.d.add(i),s={cacheId:r,symbols:[]};for(let n=0;n<i.length;n++){const o=i[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Mo.from(o),cacheId:[r,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this.d.get(...e.cacheId);if(i){const r=await this.e.resolveWorkspaceSymbol(i,t);return r&&no(e,Mo.from(r),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},wg=class j4{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,i,r){this.d=t,this.e=i,this.f=r}async provideRenameEdits(t,i,r,s){const n=this.d.getDocument(t),o=ze.to(i);try{const a=await this.e.provideRenameEdits(n,o,r,s);return a?Wi.from(a):void 0}catch(a){const c=j4.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,i,r){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=ze.to(i);try{const o=await this.e.prepareRename(s,n,r);let a,c;if(Se.isRange(o)?(a=o,c=s.getText(o)):bt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:O.from(a),text:c}}catch(o){const a=j4.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},my=class H4{static{this.d={[ad.Invoke]:eu.Invoke,[ad.Automatic]:eu.Automatic}}constructor(t,i,r){this.e=t,this.f=i,this.g=r}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,i,r,s){const n=this.e.getDocument(t),o=O.to(i);try{const a=H4.d[r],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(H4.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},vy=class{constructor(e,t){this.resultId=e,this.tokens=t}},wy=class _r{constructor(t,i){this.f=t,this.g=i,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,i,r){const s=this.f.getDocument(t),n=i!==0?this.d.get(i):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,r):await this.g.provideDocumentSemanticTokens(s,r);return n&&this.d.delete(i),o?(o=_r.h(o),this.o(_r.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return _r.j(t)?_r.k(t)?t:new Qa(new Uint32Array(t.data),t.resultId):_r.l(t)?_r.m(t)?t:new yf(t.edits.map(i=>new p9(i.start,i.deleteCount,i.data?new Uint32Array(i.data):i.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const i of t.edits)if(!(i.data instanceof Uint32Array))return!1;return!0}static n(t,i){if(!_r.j(i)||!t||!t.tokens)return i;const r=t.tokens,s=r.length,n=i.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&r[a]===n[a];)a++;if(a===s&&a===o)return new yf([],i.resultId);let l=0;const u=c-a;for(;l<u&&r[s-l-1]===n[o-l-1];)l++;return new yf([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],i.resultId)}o(t,i){if(_r.j(t)){const r=this.e++;return this.d.set(r,new vy(t.resultId,t.data)),oy({id:r,type:"full",data:t.data})}if(_r.l(t)){const r=this.e++;return _r.j(i)?this.d.set(r,new vy(i.resultId,i.data)):this.d.set(r,new vy(t.resultId)),oy({id:r,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},H8=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(r,O.to(t),i);return s?this.f(s):null}f(e){return oy({id:0,type:"full",data:e.data})}},th=class P3{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,i,r,s,n){this.f=t,this.g=i,this.h=r,this.j=s,this.k=n,this.d=new Ur("CompletionItem"),this.e=new Map}async provideCompletionItems(t,i,r,s){const n=this.f.getDocument(t),o=ze.to(i),a=n.getWordRangeAtPosition(o)||new Se(o,o),c=a.with({end:o}),l=new qn,u=await this.h.provideCompletionItems(n,o,s,F0.to(r));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new Na(u):u,f=P3.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),g=new ae;this.e.set(f,g);const m=[],w={x:f,b:m,a:{replace:O.from(a),insert:O.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let S=0;S<h.items.length;S++){const C=h.items[S],k=this.l(C,[f,S],c,a);m.push(k)}return w}async resolveCompletionItem(t,i){if(typeof this.h.resolveCompletionItem!="function")return;const r=this.d.get(...t);if(!r)return;const s=this.l(r,t),n=await this.h.resolveCompletionItem(r,i);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!Ci(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,i,r,s){const n=this.e.get(i[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:i,a:t.label,b:t.kind!==void 0?ep.from(t.kind):void 0,m:t.tags&&t.tags.map(Kf.from),c:t.detail,d:typeof t.documentation>"u"?void 0:ue.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(jt.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof So&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),Se.isRange(c)?a.j=O.from(c):c&&(!r?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:O.from(c.inserting),replace:O.from(c.replacing)}),a}},Rn=class{constructor(e,t,i,r){this.f=e,this.g=t,this.h=i,this.j=r,this.d=new YW,this.k={[nd.Automatic]:Kl.Automatic,[nd.Explicit]:Kl.Invoke},this.e=Je(this.f,"inlineCompletionsAdditions")}get supportsHandleEvents(){return Je(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function"||typeof this.h.handleDidRejectCompletionItem=="function"||typeof this.h.handleEndOfLifetime=="function")}get supportsSetModelId(){return Je(this.f,"inlineCompletionsAdditions")&&typeof this.h.setCurrentModelId=="function"}get modelInfo(){if(this.e)return this.h.modelInfo?{models:this.h.modelInfo.models,currentModelId:this.h.modelInfo.currentModelId}:void 0}setCurrentModelId(e){this.e&&this.h.setCurrentModelId?.(e)}async provideInlineCompletions(e,t,i,r){const s=this.g.getDocument(e),n=ze.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:O.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],requestUuid:i.requestUuid,requestIssuedDateTime:i.requestIssuedDateTime,earliestShownDateTime:i.earliestShownDateTime},r);if(!o)return;const{resultItems:a,list:c}=Array.isArray(o)?{resultItems:o,list:void 0}:{resultItems:o.items,list:o},l=this.e?Array.isArray(o)?[]:o.commands||[]:[],u=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let h;return{pid:this.d.createReferenceId({dispose(){h?.dispose()},items:a,list:c}),languageId:s.languageId,items:a.map((m,w)=>{let S;m.command&&(h||(h=new ae),S=this.j.toInternal(m.command,h));let C;m.action&&(h||(h=new ae),C=this.j.toInternal(m.action,h));const k=m.insertText;return{insertText:k===void 0?void 0:typeof k=="string"?k:{snippet:k.value},range:m.range?O.from(m.range):void 0,showRange:this.e&&m.showRange?O.from(m.showRange):void 0,command:S,gutterMenuLinkAction:C,idx:w,completeBracketPairs:this.e?m.completeBracketPairs:!1,isInlineEdit:this.e?m.isInlineEdit:!1,showInlineEditMenu:this.e?m.showInlineEditMenu:!1,hint:m.displayLocation&&this.e?{range:O.from(m.displayLocation.range),content:m.displayLocation.label,style:m.displayLocation.kind?hw.from(m.displayLocation.kind):wa.Code}:void 0,warning:m.warning&&this.e?{message:ue.from(m.warning.message),icon:m.warning.icon?xn.fromThemeIcon(m.warning.icon):void 0}:void 0,correlationId:this.e?m.correlationId:void 0,suggestionId:void 0,uri:this.e&&m.uri?m.uri:void 0,supportsRename:this.e?m.supportsRename:!1,jumpToPosition:this.e&&m.jumpToPosition?ze.from(m.jumpToPosition):void 0}}),commands:l.map(m=>(h||(h=new ae),U0.from(m,this.j,h))),suppressSuggestions:!1,enableForwardStability:u}}disposeCompletions(e,t){const i=this.d.get(e);if(this.h.handleListEndOfLifetime&&this.e&&i?.list){let n=function(o){switch(o.kind){case"lostRace":return{kind:Is.LostRace};case"tokenCancellation":return{kind:Is.TokenCancellation};case"other":return{kind:Is.Other};case"empty":return{kind:Is.Empty};case"notTaken":return{kind:Is.NotTaken};default:return{kind:Is.Other}}};var r=n;this.h.handleListEndOfLifetime(i.list,n(t))}this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,i){const r=this.d.get(e)?.items[t];r&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(r,i)}handlePartialAccept(e,t,i,r){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,i),this.h.handleDidPartiallyAcceptCompletionItem(s,cw.to(r)))}handleEndOfLifetime(e,t,i){const r=this.d.get(e)?.items[t];if(r&&this.h.handleEndOfLifetime&&this.e){const s=uw.to(i,n=>this.d.get(n.pid)?.items[n.idx]);this.h.handleEndOfLifetime(r,s)}}handleRejection(e,t){const i=this.d.get(e)?.items[t];i&&this.h.handleDidRejectCompletionItem&&this.e&&this.h.handleDidRejectCompletionItem(i)}},YW=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},by=class{constructor(e,t){this.e=e,this.f=t,this.d=new Ur("SignatureHelp")}async provideSignatureHelp(e,t,i,r){const s=this.e.getDocument(e),n=ze.to(t),o=this.g(i),a=await this.f.provideSignatureHelp(s,n,r,o);if(a){const c=this.d.add([a]);return{...wu.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const i=wu.to(e.activeSignatureHelp),r=this.d.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},bg=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.d=new Ur("InlayHints"),this.e=new Map}async provideInlayHints(e,t,i){const r=this.f.getDocument(e),s=O.to(t),n=await this.h.provideInlayHints(r,s,i);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new ae);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const i=this.d.get(...e);if(!i)return;const r=await this.h.resolveInlayHint(i,t);if(r&&this.l(r))return this.m(r,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const i=this.e.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:ue.fromStrict(e.tooltip),position:ze.from(e.position),textEdits:e.textEdits&&e.textEdits.map(jt.from),kind:e.kind&&rp.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")r.label=e.label;else{const s=[];r.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:ue.fromStrict(n.tooltip)};ji.isLocation(n.location)&&(o.location=Di.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,i)),s.push(o)}}return r}},yg=class rm{constructor(t,i){this.e=t,this.f=i,this.d=new Ur("DocumentLink")}async provideLinks(t,i){const r=this.e.getDocument(t),s=await this.f.provideDocumentLinks(r,i);if(!(!Array.isArray(s)||s.length===0)&&!i.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(rm.g).map(Fo.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!rm.g(s[a]))continue;const c=Fo.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,i){if(typeof this.f.resolveDocumentLink!="function")return;const r=this.d.get(...t);if(!r)return;const s=await this.f.resolveDocumentLink(r,i);if(!(!s||!rm.g(s)))return Fo.from(s)}releaseLinks(t){this.d.delete(t)}},yy=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const i=this.d.getDocument(e),r=await this.e.provideDocumentColors(i,t);return Array.isArray(r)?r.map(n=>({color:sc.from(n.color),range:O.from(n.range)})):[]}async provideColorPresentations(e,t,i){const r=this.d.getDocument(e),s=O.to(t.range),n=sc.to(t.color),o=await this.e.provideColorPresentations(n,{document:r,range:s},i);if(Array.isArray(o))return o.map(sp.from)}},W8=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideFoldingRanges(r,t,i);if(Array.isArray(s))return s.map(ap.from)}},_8=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideSelectionRanges(e,t,i){const r=this.d.getDocument(e),s=t.map(ze.to),n=await this.e.provideSelectionRanges(r,s,i);if(!Jc(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(_0.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},ih=class{constructor(e,t){this.f=e,this.g=t,this.d=new Gp(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=ze.to(t),n=await this.g.prepareCallHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(r,i);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>O.from(o))}))}async provideCallsFrom(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(r,i);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>O.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Oo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},rh=class{constructor(e,t){this.f=e,this.g=t,this.d=new Gp(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=ze.to(t),n=await this.g.prepareTypeHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(r,i);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(r,i);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Uo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},Sg=class{constructor(e,t,i,r,s){this.e=e,this.f=t,this.g=i,this.h=r,this.j=s,this.d=new Ur("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,r,s){const n=this.f.getDocument(t),o=ze.to(i),a=dc.toDataTransfer(r,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=nr(c),u=this.d.add(l);return l.map((h,f)=>({_cacheId:[u,f],title:h.title??d(3040,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(g=>g.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?Wi.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[i,r]=e,s=this.d.get(i,r);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?Wi.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},sh=class{constructor(e,t){this.adapter=e,this.extension=t}},KW=class zt extends Y{static{this.f=0}get inlineCompletionsUnificationState(){return this.j}constructor(t,i,r,s,n,o,a,c){super(),this.n=i,this.q=r,this.s=s,this.t=n,this.u=o,this.w=a,this.y=c,this.h=new Map,this.m=this.D(new P),this.onDidChangeInlineCompletionsUnificationState=this.m.event,this.g=t.getProxy(V.MainThreadLanguageFeatures),this.j={codeUnification:!1,modelUnification:!1,extensionUnification:!1,expAssignments:[]}}z(t,i){return Lo.from(t,this.n,i)}C(t){return new Ee(()=>{this.h.delete(t),this.g.$unregister(t)})}F(){return zt.f++}async G(t,i,r,s,n,o=!1){const a=this.h.get(t);if(!a||!(a.adapter instanceof i))return s;const c=Date.now();o||this.u.trace(`[${a.extension.identifier.value}] INVOKE provider '${r.toString().replace(/[\r\n]/g,"")}'`);const l=r(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{qr(u)||(this.u.error(`[${a.extension.identifier.value}] provider FAILED`),this.u.error(u),this.y.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.u.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Be.isCancellationToken(n)?qm(l,n):l}H(t,i){const r=this.F();return this.h.set(r,new sh(t,i)),r}static I(t){return t.displayName||t.name}static J(t){return t.identifier.value}registerDocumentSymbolProvider(t,i,r,s){const n=this.H(new I8(this.q,r),t),o=s&&s.label||zt.I(t);return this.g.$registerDocumentSymbolProvider(n,this.z(i,t),o),this.C(n)}$provideDocumentSymbols(t,i,r){return this.G(t,I8,s=>s.provideDocumentSymbols(y.revive(i),r),void 0,r)}registerCodeLensProvider(t,i,r){const s=this.F(),n=typeof r.onDidChangeCodeLenses=="function"?this.F():void 0;this.h.set(s,new sh(new pg(this.q,this.s.converter,r,t,this.y,this.u),t)),this.g.$registerCodeLensSupport(s,this.z(i,t),n);let o=this.C(s);if(n!==void 0){const a=r.onDidChangeCodeLenses(c=>this.g.$emitCodeLensEvent(n));o=Ee.from(o,a)}return o}$provideCodeLenses(t,i,r){return this.G(t,pg,s=>s.provideCodeLenses(y.revive(i),r),void 0,r,i.scheme==="output")}$resolveCodeLens(t,i,r){return this.G(t,pg,s=>s.resolveCodeLens(i,r),void 0,void 0,!0)}$releaseCodeLenses(t,i){this.G(t,pg,r=>Promise.resolve(r.releaseCodeLenses(i)),void 0,void 0,!0)}registerDefinitionProvider(t,i,r){const s=this.H(new D8(this.q,r),t);return this.g.$registerDefinitionSupport(s,this.z(i,t)),this.C(s)}$provideDefinition(t,i,r,s){return this.G(t,D8,n=>n.provideDefinition(y.revive(i),r,s),[],s)}registerDeclarationProvider(t,i,r){const s=this.H(new P8(this.q,r),t);return this.g.$registerDeclarationSupport(s,this.z(i,t)),this.C(s)}$provideDeclaration(t,i,r,s){return this.G(t,P8,n=>n.provideDeclaration(y.revive(i),r,s),[],s)}registerImplementationProvider(t,i,r){const s=this.H(new A8(this.q,r),t);return this.g.$registerImplementationSupport(s,this.z(i,t)),this.C(s)}$provideImplementation(t,i,r,s){return this.G(t,A8,n=>n.provideImplementation(y.revive(i),r,s),[],s)}registerTypeDefinitionProvider(t,i,r){const s=this.H(new T8(this.q,r),t);return this.g.$registerTypeDefinitionSupport(s,this.z(i,t)),this.C(s)}$provideTypeDefinition(t,i,r,s){return this.G(t,T8,n=>n.provideTypeDefinition(y.revive(i),r,s),[],s)}registerHoverProvider(t,i,r,s){const n=this.H(new py(this.q,r),t);return this.g.$registerHoverProvider(n,this.z(i,t)),this.C(n)}$provideHover(t,i,r,s,n){return this.G(t,py,o=>o.provideHover(y.revive(i),r,s,n),void 0,n)}$releaseHover(t,i){this.G(t,py,r=>Promise.resolve(r.releaseHover(i)),void 0,void 0)}registerEvaluatableExpressionProvider(t,i,r,s){const n=this.H(new R8(this.q,r),t);return this.g.$registerEvaluatableExpressionProvider(n,this.z(i,t)),this.C(n)}$provideEvaluatableExpression(t,i,r,s){return this.G(t,R8,n=>n.provideEvaluatableExpression(y.revive(i),r,s),void 0,s)}registerInlineValuesProvider(t,i,r,s){const n=typeof r.onDidChangeInlineValues=="function"?this.F():void 0,o=this.H(new L8(this.q,r),t);this.g.$registerInlineValuesProvider(o,this.z(i,t),n);let a=this.C(o);if(n!==void 0){const c=r.onDidChangeInlineValues(l=>this.g.$emitInlineValuesEvent(n));a=Ee.from(a,c)}return a}$provideInlineValues(t,i,r,s,n){return this.G(t,L8,o=>o.provideInlineValues(y.revive(i),r,s,n),void 0,n)}registerDocumentHighlightProvider(t,i,r){const s=this.H(new N8(this.q,r),t);return this.g.$registerDocumentHighlightProvider(s,this.z(i,t)),this.C(s)}registerMultiDocumentHighlightProvider(t,i,r){const s=this.H(new M8(this.q,r,this.u),t);return this.g.$registerMultiDocumentHighlightProvider(s,this.z(i,t)),this.C(s)}$provideDocumentHighlights(t,i,r,s){return this.G(t,N8,n=>n.provideDocumentHighlights(y.revive(i),r,s),void 0,s)}$provideMultiDocumentHighlights(t,i,r,s,n){return this.G(t,M8,o=>o.provideMultiDocumentHighlights(y.revive(i),r,s.map(a=>y.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,i,r){const s=this.H(new O8(this.q,r),t);return this.g.$registerLinkedEditingRangeProvider(s,this.z(i,t)),this.C(s)}$provideLinkedEditingRanges(t,i,r,s){return this.G(t,O8,async n=>{const o=await n.provideLinkedEditingRanges(y.revive(i),r,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?zt.L(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,i,r){const s=this.H(new F8(this.q,r),t);return this.g.$registerReferenceSupport(s,this.z(i,t)),this.C(s)}$provideReferences(t,i,r,s,n){return this.G(t,F8,o=>o.provideReferences(y.revive(i),r,s,n),void 0,n)}registerCodeActionProvider(t,i,r,s){const n=new ae,o=this.H(new mg(this.q,this.s.converter,this.t,r,this.u,t,this.w),t);return this.g.$registerCodeActionSupport(o,this.z(i,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.s.converter.toInternal(a.command,n)}))},zt.I(t),zt.J(t),!!r.resolveCodeAction),n.add(this.C(o)),n}$provideCodeActions(t,i,r,s,n){return this.G(t,mg,o=>o.provideCodeActions(y.revive(i),r,s,n),void 0,n)}$resolveCodeAction(t,i,r){return this.G(t,mg,s=>s.resolveCodeAction(i,r),{},void 0)}$releaseCodeActions(t,i){this.G(t,mg,r=>Promise.resolve(r.releaseCodeActions(i)),void 0,void 0)}registerDocumentFormattingEditProvider(t,i,r){const s=this.H(new U8(this.q,r),t);return this.g.$registerDocumentFormattingSupport(s,this.z(i,t),t.identifier,t.displayName||t.name),this.C(s)}$provideDocumentFormattingEdits(t,i,r,s){return this.G(t,U8,n=>n.provideDocumentFormattingEdits(y.revive(i),r,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,i,r){const s=typeof r.provideDocumentRangesFormattingEdits=="function",n=this.H(new gy(this.q,r),t);return this.g.$registerRangeFormattingSupport(n,this.z(i,t),t.identifier,t.displayName||t.name,s),this.C(n)}$provideDocumentRangeFormattingEdits(t,i,r,s,n){return this.G(t,gy,o=>o.provideDocumentRangeFormattingEdits(y.revive(i),r,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,i,r,s,n){return this.G(t,gy,o=>o.provideDocumentRangesFormattingEdits(y.revive(i),r,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,i,r,s){const n=this.H(new j8(this.q,r),t);return this.g.$registerOnTypeFormattingSupport(n,this.z(i,t),s,t.identifier),this.C(n)}$provideOnTypeFormattingEdits(t,i,r,s,n,o){return this.G(t,j8,a=>a.provideOnTypeFormattingEdits(y.revive(i),r,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,i){const r=this.H(new vg(i,this.u),t);return this.g.$registerNavigateTypeSupport(r,typeof i.resolveWorkspaceSymbol=="function"),this.C(r)}$provideWorkspaceSymbols(t,i,r){return this.G(t,vg,s=>s.provideWorkspaceSymbols(i,r),{symbols:[]},r)}$resolveWorkspaceSymbol(t,i,r){return this.G(t,vg,s=>s.resolveWorkspaceSymbol(i,r),void 0,void 0)}$releaseWorkspaceSymbols(t,i){this.G(t,vg,r=>r.releaseWorkspaceSymbols(i),void 0,void 0)}registerRenameProvider(t,i,r){const s=this.H(new wg(this.q,r,this.u),t);return this.g.$registerRenameSupport(s,this.z(i,t),wg.supportsResolving(r)),this.C(s)}$provideRenameEdits(t,i,r,s,n){return this.G(t,wg,o=>o.provideRenameEdits(y.revive(i),r,s,n),void 0,n)}$resolveRenameLocation(t,i,r,s){return this.G(t,wg,n=>n.resolveRenameLocation(y.revive(i),r,s),void 0,s)}registerNewSymbolNamesProvider(t,i,r){const s=this.H(new my(this.q,r,this.u),t);return this.g.$registerNewSymbolNamesProvider(s,this.z(i,t)),this.C(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.G(t,my,i=>i.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,i,r,s,n){return this.G(t,my,o=>o.provideNewSymbolNames(y.revive(i),r,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,i,r,s){const n=this.H(new wy(this.q,r),t),o=typeof r.onDidChangeSemanticTokens=="function"?this.F():void 0;this.g.$registerDocumentSemanticTokensProvider(n,this.z(i,t),s,o);let a=this.C(n);if(o){const c=r.onDidChangeSemanticTokens(l=>this.g.$emitDocumentSemanticTokensEvent(o));a=Ee.from(a,c)}return a}$provideDocumentSemanticTokens(t,i,r,s){return this.G(t,wy,n=>n.provideDocumentSemanticTokens(y.revive(i),r,s),null,s)}$releaseDocumentSemanticTokens(t,i){this.G(t,wy,r=>r.releaseDocumentSemanticColoring(i),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,i,r,s){const n=this.H(new H8(this.q,r),t),o=typeof r.onDidChangeSemanticTokens=="function"?this.F():void 0;this.g.$registerDocumentRangeSemanticTokensProvider(n,this.z(i,t),s,o);let a=this.C(n);if(o){const c=r.onDidChangeSemanticTokens(l=>this.g.$emitDocumentRangeSemanticTokensEvent(o));a=Ee.from(a,c)}return a}$provideDocumentRangeSemanticTokens(t,i,r,s){return this.G(t,H8,n=>n.provideDocumentRangeSemanticTokens(y.revive(i),r,s),null,s)}registerCompletionItemProvider(t,i,r,s){const n=this.H(new th(this.q,this.s.converter,r,this.w,t),t);return this.g.$registerCompletionsProvider(n,this.z(i,t),s,th.supportsResolving(r),t.identifier),this.C(n)}$provideCompletionItems(t,i,r,s,n){return this.G(t,th,o=>o.provideCompletionItems(y.revive(i),r,s,n),void 0,n)}$resolveCompletionItem(t,i,r){return this.G(t,th,s=>s.resolveCompletionItem(i,r),void 0,r)}$releaseCompletionItems(t,i){this.G(t,th,r=>r.releaseCompletionItems(i),void 0,void 0)}registerInlineCompletionsProvider(t,i,r,s){const n=new Rn(t,this.q,r,this.s.converter),o=this.H(n,t);let a=this.C(o);const c=Je(t,"inlineCompletionsAdditions")&&typeof r.onDidChange=="function";if(c){const u=r.onDidChange(h=>this.g.$emitInlineCompletionsChange(o));a=Ee.from(a,u)}const l=Je(t,"inlineCompletionsAdditions")&&typeof r.onDidChangeModelInfo=="function";if(l){const u=r.onDidChangeModelInfo(h=>this.g.$emitInlineCompletionModelInfoChange(o,n.modelInfo));a=Ee.from(a,u)}return this.g.$registerInlineCompletionsSupport(o,this.z(i,t),n.supportsHandleEvents,qe.toKey(t.identifier.value),t.version,s?.groupId?qe.toKey(s.groupId):void 0,s?.yieldTo?.map(u=>qe.toKey(u))||[],s?.displayName,s?.debounceDelayMs,s?.excludes?.map(u=>qe.toKey(u))||[],c,n.supportsSetModelId,n.modelInfo,l),a}$provideInlineCompletions(t,i,r,s,n){return this.G(t,Rn,o=>o.provideInlineCompletions(y.revive(i),r,s,n),void 0,void 0)}$handleInlineCompletionDidShow(t,i,r,s){this.G(t,Rn,async n=>{n.handleDidShowCompletionItem(i,r,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,i,r,s,n){this.G(t,Rn,async o=>{o.handlePartialAccept(i,r,s,n)},void 0,void 0)}$handleInlineCompletionEndOfLifetime(t,i,r,s){this.G(t,Rn,async n=>{n.handleEndOfLifetime(i,r,s)},void 0,void 0)}$handleInlineCompletionRejection(t,i,r){this.G(t,Rn,async s=>{s.handleRejection(i,r)},void 0,void 0)}$freeInlineCompletionsList(t,i,r){this.G(t,Rn,async s=>{s.disposeCompletions(i,r)},void 0,void 0)}$acceptInlineCompletionsUnificationState(t){this.j=t,this.m.fire()}$handleInlineCompletionSetCurrentModelId(t,i){this.G(t,Rn,async r=>{r.setCurrentModelId(i)},void 0,void 0)}registerSignatureHelpProvider(t,i,r,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.H(new by(this.q,r),t);return this.g.$registerSignatureHelpProvider(o,this.z(i,t),n),this.C(o)}$provideSignatureHelp(t,i,r,s,n){return this.G(t,by,o=>o.provideSignatureHelp(y.revive(i),r,s,n),void 0,n)}$releaseSignatureHelp(t,i){this.G(t,by,r=>r.releaseSignatureHelp(i),void 0,void 0)}registerInlayHintsProvider(t,i,r){const s=typeof r.onDidChangeInlayHints=="function"?this.F():void 0,n=this.H(new bg(this.q,this.s.converter,r,this.u,t),t);this.g.$registerInlayHintsProvider(n,this.z(i,t),typeof r.resolveInlayHint=="function",s,zt.I(t));let o=this.C(n);if(s!==void 0){const a=r.onDidChangeInlayHints(c=>this.g.$emitInlayHintsEvent(s));o=Ee.from(o,a)}return o}$provideInlayHints(t,i,r,s){return this.G(t,bg,n=>n.provideInlayHints(y.revive(i),r,s),void 0,s)}$resolveInlayHint(t,i,r){return this.G(t,bg,s=>s.resolveInlayHint(i,r),void 0,r)}$releaseInlayHints(t,i){this.G(t,bg,r=>r.releaseHints(i),void 0,void 0)}registerDocumentLinkProvider(t,i,r){const s=this.H(new yg(this.q,r),t);return this.g.$registerDocumentLinkProvider(s,this.z(i,t),typeof r.resolveDocumentLink=="function"),this.C(s)}$provideDocumentLinks(t,i,r){return this.G(t,yg,s=>s.provideLinks(y.revive(i),r),void 0,r,i.scheme==="output")}$resolveDocumentLink(t,i,r){return this.G(t,yg,s=>s.resolveLink(i,r),void 0,void 0,!0)}$releaseDocumentLinks(t,i){this.G(t,yg,r=>r.releaseLinks(i),void 0,void 0,!0)}registerColorProvider(t,i,r){const s=this.H(new yy(this.q,r),t);return this.g.$registerDocumentColorProvider(s,this.z(i,t)),this.C(s)}$provideDocumentColors(t,i,r){return this.G(t,yy,s=>s.provideColors(y.revive(i),r),[],r)}$provideColorPresentations(t,i,r,s){return this.G(t,yy,n=>n.provideColorPresentations(y.revive(i),r,s),void 0,s)}registerFoldingRangeProvider(t,i,r){const s=this.F(),n=typeof r.onDidChangeFoldingRanges=="function"?this.F():void 0;this.h.set(s,new sh(new W8(this.q,r),t)),this.g.$registerFoldingRangeProvider(s,this.z(i,t),t.identifier,n);let o=this.C(s);if(n!==void 0){const a=r.onDidChangeFoldingRanges(()=>this.g.$emitFoldingRangeEvent(n));o=Ee.from(o,a)}return o}$provideFoldingRanges(t,i,r,s){return this.G(t,W8,n=>n.provideFoldingRanges(y.revive(i),r,s),void 0,s)}registerSelectionRangeProvider(t,i,r){const s=this.H(new _8(this.q,r,this.u),t);return this.g.$registerSelectionRangeProvider(s,this.z(i,t)),this.C(s)}$provideSelectionRanges(t,i,r,s){return this.G(t,_8,n=>n.provideSelectionRanges(y.revive(i),r,s),[],s)}registerCallHierarchyProvider(t,i,r){const s=this.H(new ih(this.q,r),t);return this.g.$registerCallHierarchyProvider(s,this.z(i,t)),this.C(s)}$prepareCallHierarchy(t,i,r,s){return this.G(t,ih,n=>Promise.resolve(n.prepareSession(y.revive(i),r,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,i,r,s){return this.G(t,ih,n=>n.provideCallsTo(i,r,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,i,r,s){return this.G(t,ih,n=>n.provideCallsFrom(i,r,s),void 0,s)}$releaseCallHierarchy(t,i){this.G(t,ih,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerTypeHierarchyProvider(t,i,r){const s=this.H(new rh(this.q,r),t);return this.g.$registerTypeHierarchyProvider(s,this.z(i,t)),this.C(s)}$prepareTypeHierarchy(t,i,r,s){return this.G(t,rh,n=>Promise.resolve(n.prepareSession(y.revive(i),r,s)),void 0,s)}$provideTypeHierarchySupertypes(t,i,r,s){return this.G(t,rh,n=>n.provideSupertypes(i,r,s),void 0,s)}$provideTypeHierarchySubtypes(t,i,r,s){return this.G(t,rh,n=>n.provideSubtypes(i,r,s),void 0,s)}$releaseTypeHierarchy(t,i){this.G(t,rh,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerDocumentOnDropEditProvider(t,i,r,s){const n=this.F();return this.h.set(n,new sh(new Sg(this.g,this.q,r,n,t),t)),this.g.$registerDocumentOnDropEditProvider(n,this.z(i,t),s?{supportsResolve:!!r.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes,providedDropKinds:s.providedDropEditKinds?.map(o=>o.value)}:void 0),this.C(n)}$provideDocumentOnDropEdits(t,i,r,s,n,o){return this.G(t,Sg,a=>Promise.resolve(a.provideDocumentOnDropEdits(i,y.revive(r),s,n,o)),void 0,void 0)}$resolveDropEdit(t,i,r){return this.G(t,Sg,s=>s.resolveDropEdit(i,r),{},void 0)}$releaseDocumentOnDropEdits(t,i){this.G(t,Sg,r=>Promise.resolve(r.releaseDropEdits(i)),void 0,void 0)}registerDocumentPasteEditProvider(t,i,r,s){const n=this.F();return this.h.set(n,new sh(new eh(this.g,this.q,r,n,t),t)),this.g.$registerPasteEditProvider(n,this.z(i,t),{supportsCopy:!!r.prepareDocumentPaste,supportsPaste:!!r.provideDocumentPasteEdits,supportsResolve:!!r.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.C(n)}$prepareDocumentPaste(t,i,r,s,n){return this.G(t,eh,o=>o.prepareDocumentPaste(y.revive(i),r,s,n),void 0,n)}$providePasteEdits(t,i,r,s,n,o,a){return this.G(t,eh,c=>c.providePasteEdits(i,y.revive(r),s,n,o,a),void 0,a)}$resolvePasteEdit(t,i,r){return this.G(t,eh,s=>s.resolvePasteEdit(i,r),{},void 0)}$releasePasteEdits(t,i){this.G(t,eh,r=>Promise.resolve(r.releasePasteEdits(i)),void 0,void 0)}static L(t){return{pattern:t.source,flags:t.flags}}static M(t){return{decreaseIndentPattern:zt.L(t.decreaseIndentPattern),increaseIndentPattern:zt.L(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?zt.L(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?zt.L(t.unIndentedLinePattern):void 0}}static N(t){return{beforeText:zt.L(t.beforeText),afterText:t.afterText?zt.L(t.afterText):void 0,previousLineText:t.previousLineText?zt.L(t.previousLineText):void 0,action:t.action}}static O(t){return t.map(zt.N)}static P(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(i=>Ha.toString(i)):void 0}}static Q(t){return t.map(zt.P)}setLanguageConfiguration(t,i,r){const{wordPattern:s}=r;if(s&&o6(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.q.setWordDefinitionFor(i,s):this.q.setWordDefinitionFor(i,void 0),r.__electricCharacterSupport&&this.w.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),r.__characterPairSupport&&this.w.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.F(),o={comments:r.comments,brackets:r.brackets,wordPattern:r.wordPattern?zt.L(r.wordPattern):void 0,indentationRules:r.indentationRules?zt.M(r.indentationRules):void 0,onEnterRules:r.onEnterRules?zt.O(r.onEnterRules):void 0,__electricCharacterSupport:r.__electricCharacterSupport,__characterPairSupport:r.__characterPairSupport,autoClosingPairs:r.autoClosingPairs?zt.Q(r.autoClosingPairs):void 0};return this.g.$setLanguageConfiguration(n,i,o),this.C(n)}$setWordDefinitions(t){for(const i of t)this.q.setWordDefinitionFor(i.languageId,new RegExp(i.regexSource,i.regexFlags))}},e_=U("notebookService"),t_=U("codeMapperService"),B8="vscode_editFile",Sy="vscode_editFile_internal",i_={id:Sy,displayName:"",modelDescription:"",source:Pr.Internal},Ey=class{constructor(t,i,r){this.a=t,this.b=i,this.c=r}async invoke(t,i,r,s){if(!t.context)throw new Error("toolInvocationToken is required for this tool");const n=t.parameters,o=y.revive(n.uri),a=ev.parse(o)?.notebook||o,c=this.a.getSession(Jr.forSession(t.context?.sessionId)),l=c.getRequests().at(-1);c.acceptResponseProgress(l,{kind:"markdownContent",content:new tn("\n````\n")}),c.acceptResponseProgress(l,{kind:"codeblockUri",uri:a,isEdit:!0}),c.acceptResponseProgress(l,{kind:"markdownContent",content:new tn("\n````\n")}),this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",edits:[],uri:a}):c.acceptResponseProgress(l,{kind:"textEdit",edits:[],uri:a});const u=c.editingSession;if(!u)throw new Error("This tool must be called from within an editing session");const h=await this.b.mapCode({codeBlocks:[{code:n.code,resource:a,markdownBeforeBlock:n.explanation}],location:"tool",chatRequestId:t.chatRequestId,chatRequestModel:t.modelId,chatSessionResource:t.context.sessionResource},{textEdit:(g,m)=>{c.acceptResponseProgress(l,{kind:"textEdit",uri:g,edits:m})},notebookEdit(g,m){c.acceptResponseProgress(l,{kind:"notebookEdit",uri:g,edits:m})}},s);if(this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",uri:a,edits:[],done:!0}):c.acceptResponseProgress(l,{kind:"textEdit",uri:a,edits:[],done:!0}),h?.errorMessage)throw new Error(h.errorMessage);let f;return await new Promise(g=>{let m=!1;f=fd(w=>{const C=u.entries.read(w)?.find(k=>k.modifiedURI.toString()===a.toString());C&&(C.isCurrentlyBeingModifiedBy.read(w)?m=!0:m&&g(!0))})}).finally(()=>{f.dispose()}),{content:[{kind:"text",value:"The file was edited successfully"}]}}async prepareToolInvocation(t,i){return{presentation:xa.Hidden}}};Ey=__decorate([__param(0,f8),__param(1,t_),__param(2,e_)],Ey);var r_="vscode_get_confirmation",s_={id:r_,displayName:"Confirmation Tool",modelDescription:"A tool that demonstrates different types of confirmations. Takes a title, message, and confirmation type (basic or terminal).",source:Pr.Internal,inputSchema:{type:"object",properties:{title:{type:"string",description:"Title for the confirmation dialog"},message:{type:"string",description:"Message to show in the confirmation dialog"},confirmationType:{type:"string",enum:["basic","terminal"],description:"Type of confirmation to show - basic for simple confirmation, terminal for terminal command confirmation"},terminalCommand:{type:"string",description:'Terminal command to show (only used when confirmationType is "terminal")'}},required:["title","message","confirmationType"],additionalProperties:!1}},n_=class{async prepareToolInvocation(e,t){const i=e.parameters;if(!i.title||!i.message)throw new Error("Missing required parameters for ConfirmationTool");const r=i.confirmationType??"basic";let s;return r==="terminal"?s={kind:"terminal",commandLine:{original:i.terminalCommand??""},language:"bash"}:s=void 0,{confirmationMessages:{title:i.title,message:new tn(i.message),allowAutoConfirm:!0},toolSpecificData:s,presentation:xa.HiddenAfterComplete}}async invoke(e,t,i,r){return{content:[{kind:"text",value:"yes"}]}}},nh;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(nh||(nh={}));var jr;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(jr||(jr={}));var uX=class A3 extends Y{static{this.a=100}constructor(t,i=Object.create(null)){super(),this.q=t,this.r=i,this.b=this.D(new Ph),this.onDidChangeStorage=this.b.event,this.c=jr.None,this.f=new Map,this.g=this.D(new P6(A3.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.s()}s(){this.D(this.q.onDidChangeItemsExternal(t=>this.t(t)))}t(t){this.b.pause();try{t.changed?.forEach((i,r)=>this.u(r,i)),t.deleted?.forEach(i=>this.u(i,void 0))}finally{this.b.resume()}}u(t,i){if(this.c===jr.Closed)return;let r=!1;Tt(i)?r=this.f.delete(t):this.f.get(t)!==i&&(this.f.set(t,i),r=!0),r&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===jr.None&&(this.c=jr.Initialized,this.r.hint!==nh.STORAGE_DOES_NOT_EXIST&&(this.f=await this.q.getItems()))}get(t,i){const r=this.f.get(t);return Tt(r)?i:r}getBoolean(t,i){const r=this.get(t);return Tt(r)?i:r==="true"}getNumber(t,i){const r=this.get(t);return Tt(r)?i:parseInt(r,10)}getObject(t,i){const r=this.get(t);return Tt(r)?i:i7(r)}async set(t,i,r=!1){if(this.c===jr.Closed)return;if(Tt(i))return this.delete(t,r);const s=bt(i)||Array.isArray(i)?_R(i):String(i);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:r}),this.C()}async delete(t,i=!1){if(!(this.c===jr.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:i}),this.C()}async optimize(){if(this.c!==jr.Closed)return await this.flush(0),this.q.optimize()}async close(){return this.m||(this.m=this.w()),this.m}async w(){this.c=jr.Closed;try{await this.C(0)}catch{}await this.q.close(()=>this.f)}get y(){return this.j.size>0||this.h.size>0}async z(){if(!this.y)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.q.updateItems(t).finally(()=>{if(!this.y)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===jr.Closed||this.m))return this.C(t)}async C(t){return this.r.hint===nh.STORAGE_IN_MEMORY?this.z():this.g.trigger(()=>this.z(),t)}async whenFlushed(){if(this.y)return new Promise(t=>this.n.push(t))}isInMemory(){return this.r.hint===nh.STORAGE_IN_MEMORY}},q8;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Prompts="prompts",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState",e.Mcp="mcp"})(q8||(q8={}));function o_(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&y.isUri(t.location)&&y.isUri(t.globalStorageHome)&&y.isUri(t.settingsResource)&&y.isUri(t.keybindingsResource)&&y.isUri(t.tasksResource)&&y.isUri(t.snippetsHome)&&y.isUri(t.promptsHome)&&y.isUri(t.extensionsResource)&&y.isUri(t.mcpResource))}var a_=U("IUserDataProfilesService");function Eg(e,t,i,r,s,n){return{id:e,name:t,location:i,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:Qt(i,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:Qt(i,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:Qt(i,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:Qt(i,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:Qt(i,"snippets"),promptsHome:n&&s?.useDefaultFlags?.prompts?n.promptsHome:Qt(i,"prompts"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:Qt(i,"extensions.json"),mcpResource:n&&s?.useDefaultFlags?.mcp?n.mcpResource:Qt(i,"mcp.json"),cacheHome:Qt(r,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var z8=class extends Y{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.z.profiles,...this.q.profiles]}constructor(t,i,r,s){super(),this.r=t,this.s=i,this.t=r,this.u=s,this.g=this.D(new P),this.onDidChangeProfiles=this.g.event,this.h=this.D(new P),this.onWillCreateProfile=this.h.event,this.j=this.D(new P),this.onWillRemoveProfile=this.j.event,this.m=this.D(new P),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.q={profiles:[],emptyWindows:new Map},this.profilesHome=Qt(this.r.userRoamingDataHome,"profiles"),this.f=Qt(this.r.cacheHome,"CachedProfilesData")}init(){this.y=void 0}get z(){if(!this.y){const t=this.C(),i=[t];try{for(const s of this.N()){if(!s.name||!Oe(s.name)||!s.location){this.u.warn("Skipping the invalid stored profile",s.location||s.name);continue}i.push(Eg(Ji(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.u.error(s)}const r=new Map;if(i.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=y.parse(n),c=i.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=i.find(c=>c.id===o);a&&r.set(n,a)}}catch(s){this.u.error(s)}this.y={profiles:i,emptyWindows:r}}return this.y}C(){const t=Eg("__default__profile__",d(2729,null),this.r.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const i="Temp",r=new RegExp(`${Zn(i)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=r.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${i} ${s+1}`;return this.createProfile(ul(ci()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,i,r){return this.createProfile(ul(ci()).toString(16),t,i,r)}async createProfile(t,i,r,s){return await this.F(t,i,r,s)}async F(t,i,r,s){if(!Oe(i)||!i)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(i);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!r?.transient&&u.name===i))throw new Error(`Profile with ${i} name already exists`);const a=s?this.G(s):void 0;y.isUri(a)&&(r={...r,workspaces:[a]});const c=Eg(t,i,Qt(this.profilesHome,t),this.f,r,this.defaultProfile);await this.s.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await da.settled(l),a&&!y.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(i)}})(),this.n.set(i,n)),n}async updateProfile(t,i){const r=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?i.workspaces&&(o=n,o.workspaces=i.workspaces):o=Eg(n.id,i.name??n.name,n.location,this.f,{icon:i.icon===null?void 0:i.icon??n.icon,transient:i.transient??n.isTransient,useDefaultFlags:i.useDefaultFlags??n.useDefaultFlags,workspaces:i.workspaces??n.workspaces},this.defaultProfile);else if(i.workspaces){const a=n.workspaces?.filter(c=>!i.workspaces?.some(l=>this.t.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&r.push(o)}if(!r.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],r);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const i=this.profiles.find(s=>s.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);const r=[];this.j.fire({profile:i,join(s){r.push(s)}});try{await Promise.allSettled(r)}catch(s){this.u.error(s)}this.I([],[i],[]);try{await this.s.del(i.cacheHome,{recursive:!0})}catch(s){XR(s)!==1&&this.u.error(s)}}async setProfileForWorkspace(t,i){const r=this.profiles.find(n=>n.id===i.id);if(!r)throw new Error(`Profile '${i.name}' does not exist`);const s=this.G(t);if(y.isUri(s)){const n=r.workspaces?[...r.workspaces]:[];n.some(o=>this.t.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(r,{workspaces:n}))}else this.L(s,r,!1),this.M(this.profiles)}unsetWorkspace(t,i=!1){const r=this.G(t);if(y.isUri(r)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.t.extUri.isEqual(n,r))})}else this.L(r,void 0,i),this.M(this.profiles)}async resetWorkspaces(){this.q.emptyWindows.clear(),this.z.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.s.exists(this.profilesHome)){const t=await this.s.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(i=>i.isDirectory&&this.profiles.every(r=>!this.t.extUri.isEqual(r.location,i.resource))).map(i=>this.s.del(i.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.q.profiles.filter(i=>!this.H(i));await Promise.allSettled(t.map(i=>this.removeProfile(i)))}getProfileForWorkspace(t){const i=this.G(t);return y.isUri(i)?this.profiles.find(r=>r.workspaces?.some(s=>this.t.extUri.isEqual(s,i))):this.z.emptyWindows.get(i)??this.q.emptyWindows.get(i)}G(t){return j2(t)?t.uri:H2(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.z.emptyWindows.values()].some(i=>this.t.extUri.isEqual(i.location,t.location))||[...this.q.emptyWindows.values()].some(i=>this.t.extUri.isEqual(i.location,t.location)))}I(t,i,r){const s=[...this.profiles,...t],n=this.q.profiles;this.q.profiles=[];const o=[];for(let a of s){if(i.some(c=>a.id===c.id)){for(const c of[...this.z.emptyWindows.keys()])a.id===this.z.emptyWindows.get(c)?.id&&this.z.emptyWindows.delete(c);continue}if(!a.isDefault){a=r.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.q.profiles.push(a);else if(c){for(const[l,u]of this.q.emptyWindows.entries())if(a.id===u.id){this.q.emptyWindows.delete(l),this.z.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,i,r)}J(t,i,r){this.g.fire({added:t,removed:i,updated:r,all:this.profiles})}L(t,i,r){r=i?.isTransient?!0:r,r?i?this.q.emptyWindows.set(t,i):this.q.emptyWindows.delete(t):(this.q.emptyWindows.delete(t),i?this.z.emptyWindows.set(t,i):this.z.emptyWindows.delete(t))}M(t){const i=[],r={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||i.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)r[o.toString()]=n.id;for(const[n,o]of this.z.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:r,emptyWindows:s}),this.O(i),this.y=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};z8=__decorate([__param(0,fb),__param(1,R1),__param(2,vk),__param(3,De)],z8);var c_="__$__isNewStorageMarker",Cg="__$__targetStorageMarker",Tc=U("storageService"),Rc;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(Rc||(Rc={}));var V8;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(V8||(V8={}));var G8;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(G8||(G8={}));function l_(e){const t=e.get(Cg);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var dX=class T3 extends Y{static{this.a=60*1e3}constructor(t={flushInterval:T3.a}){super(),this.b=this.D(new Ph),this.f=this.D(new Ph),this.onDidChangeTarget=this.f.event,this.g=this.D(new P),this.onWillSaveState=this.g.event,this.m=this.D(new ms),this.z=void 0,this.F=void 0,this.H=void 0,this.j=this.D(new Yn(()=>this.n(),t.flushInterval))}onDidChangeValue(t,i,r){return Ke.filter(this.b.event,s=>s.scope===t&&(i===void 0||s.key===i),r)}n(){this.m.value=A6(()=>{this.q()&&this.flush(),this.j.schedule()})}q(){return!0}r(){or([this.m,this.j])}initialize(){return this.h||(this.h=(async()=>{bi("code/willInitStorage");try{await this.O()}finally{bi("code/didInitStorage")}this.j.schedule()})()),this.h}t(t,i){const{key:r,external:s}=i;if(r===Cg){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.z=void 0;break}this.f.fire({scope:t})}else this.b.fire({scope:t,key:r,target:this.J(t)[r],external:s})}u(t){this.g.fire({reason:t})}get(t,i,r){return this.P(i)?.get(t,r)}getBoolean(t,i,r){return this.P(i)?.getBoolean(t,r)}getNumber(t,i,r){return this.P(i)?.getNumber(t,r)}getObject(t,i,r){return this.P(i)?.getObject(t,r)}storeAll(t,i){this.w(()=>{for(const r of t)this.store(r.key,r.value,r.scope,r.target,i)})}store(t,i,r,s,n=!1){if(Tt(i)){this.remove(t,r,n);return}this.w(()=>{this.y(t,r,s),this.P(r)?.set(t,i,n)})}remove(t,i,r=!1){this.w(()=>{this.y(t,i,void 0),this.P(i)?.delete(t,r)})}w(t){this.b.pause(),this.f.pause();try{t()}finally{this.b.resume(),this.f.resume()}}keys(t,i){const r=[],s=this.J(t);for(const n of Object.keys(s))s[n]===i&&r.push(n);return r}y(t,i,r,s=!1){const n=this.J(i);typeof r=="number"?n[t]!==r&&(n[t]=r,this.P(i)?.set(Cg,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(i)?.set(Cg,JSON.stringify(n),s))}get C(){return this.z||(this.z=this.L(1)),this.z}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.C}}L(t){const i=this.P(t);return i?l_(i):Object.create(null)}isNew(t){return this.getBoolean(c_,t)===!0}async flush(t=Rc.NONE){this.g.fire({reason:t});const i=this.P(-1),r=this.P(0),s=this.P(1);switch(t){case Rc.NONE:await da.settled([i?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case Rc.SHUTDOWN:await da.settled([i?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,i=this.P(0)?.items??new Map,r=this.P(1)?.items??new Map;return u_(t,i,r,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,i){return this.u(Rc.NONE),o_(t)?this.R(t,i):this.S(t,i)}M(t,i){return!(t.id===i.id||J8(i)&&J8(t))}N(t,i,r){this.w(()=>{const s=new Set;for(const[n,o]of t)s.add(n),i.get(n)!==o&&this.t(r,{key:n,external:!0});for(const[n]of i.items)s.has(n)||this.t(r,{key:n,external:!0})})}};function J8(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function u_(e,t,i,r,s,n){const o=w=>{try{return JSON.parse(w)}catch{return w}},a=new Map,c=new Map;e.forEach((w,S)=>{a.set(S,w),c.set(S,o(w))});const l=new Map,u=new Map;t.forEach((w,S)=>{l.set(S,w),u.set(S,o(w))});const h=new Map,f=new Map;i.forEach((w,S)=>{h.set(S,w),f.set(S,o(w))}),console.group(r!==s?`Storage: Application (path: ${r})`:`Storage: Application & Profile (path: ${r}, default profile)`);const g=[];if(a.forEach((w,S)=>{g.push({key:S,value:w})}),console.table(g),console.groupEnd(),console.log(c),r!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const w=[];l.forEach((S,C)=>{w.push({key:C,value:S})}),console.table(w),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const m=[];h.forEach((w,S)=>{m.push({key:S,value:w})}),console.table(m),console.groupEnd(),console.log(f)}var h_=class li{static{this.a=new Map}static{this.b=new Map}static{this.c=new Map}static{this.d="memento/"}constructor(t,i){this.f=i,this.e=li.d+t}getMemento(t,i){switch(t){case 1:{let r=li.c.get(this.e);return r||(r=new Cy(this.e,t,i,this.f),li.c.set(this.e,r)),r.getMemento()}case 0:{let r=li.b.get(this.e);return r||(r=new Cy(this.e,t,i,this.f),li.b.set(this.e,r)),r.getMemento()}case-1:{let r=li.a.get(this.e);return r||(r=new Cy(this.e,t,i,this.f),li.a.set(this.e,r)),r.getMemento()}}}onDidChangeValue(t,i){return this.f.onDidChangeValue(t,this.e,i)}saveMemento(){li.c.get(this.e)?.save(),li.b.get(this.e)?.save(),li.a.get(this.e)?.save()}reloadMemento(t){let i;switch(t){case-1:i=li.a.get(this.e);break;case 0:i=li.b.get(this.e);break;case 1:i=li.c.get(this.e);break}i?.reload()}static clear(t){switch(t){case 1:li.c.clear();break;case 0:li.b.clear();break;case-1:li.a.clear();break}}},Cy=class{constructor(e,t,i,r){this.b=e,this.c=t,this.d=i,this.e=r,this.a=this.f()}f(){try{return this.e.getObject(this.b,this.c,{})}catch(e){Bt(`[memento]: failed to parse contents: ${e} (id: ${this.b}, scope: ${this.c}, contents: ${this.e.get(this.b,this.c)})`)}return{}}getMemento(){return this.a}reload(){for(const e of Object.getOwnPropertyNames(this.a))delete this.a[e];Object.assign(this.a,this.f())}save(){vm(this.a)?this.e.remove(this.b,this.c):this.e.store(this.b,this.a,this.c,this.d)}},d_=U("chatTodoListService"),xy=class{constructor(t){this.a=new h_("chat-todo-list",t)}b(t){return this.a.getMemento(1,1)[this.d(t)]||[]}c(t,i){const r=this.a.getMemento(1,1);r[this.d(t)]=i,this.a.saveMemento()}getTodoList(t){return this.b(t)}setTodoList(t,i){this.c(t,i)}d(t){return M1(t)}};xy=__decorate([__param(0,Tc)],xy);var Q8=class extends Y{constructor(t){super(),this.a=this.D(new P),this.onDidUpdateTodos=this.a.event,this.b=new xy(t)}getTodos(t){return this.b.getTodoList(t)}setTodos(t,i){this.b.setTodoList(t,i),this.a.fire(t)}};Q8=__decorate([__param(0,Tc)],Q8);var f_="chat.todoListTool.writeOnly",p_="chat.todoListTool.descriptionField",Z8="manage_todo_list";function X8(e,t=!0){const i={todoList:{type:"array",description:e?"Complete array of all todo items. Must include ALL items - both existing and new.":"Complete array of all todo items (required for write operation, ignored for read). Must include ALL items - both existing and new.",items:{type:"object",properties:{id:{type:"number",description:"Unique identifier for the todo. Use sequential numbers starting from 1."},title:{type:"string",description:"Concise action-oriented todo label (3-7 words). Displayed in UI."},...t&&{description:{type:"string",description:"Detailed context, requirements, or implementation notes. Include file paths, specific methods, or acceptance criteria."}},status:{type:"string",enum:["not-started","in-progress","completed"],description:"not-started: Not begun | in-progress: Currently working (max 1) | completed: Fully finished with no blockers"}},required:t?["id","title","description","status"]:["id","title","status"]}}},r=e?["todoList"]:[];return e||(i.operation={type:"string",enum:["write","read"],description:"write: Replace entire todo list with new content. read: Retrieve current todo list. ALWAYS provide complete list when writing - partial updates not supported."},r.unshift("operation")),{id:Z8,toolReferenceName:"todo",legacyToolReferenceFullNames:["todos"],canBeReferencedInPrompt:!0,icon:vt.fromId(ie.checklist.id),displayName:d(6670,null),userDescription:d(6671,null),modelDescription:`Manage a structured todo list to track progress and plan tasks throughout your coding session. Use this tool VERY frequently to ensure task visibility and proper planning.

When to use this tool:
- Complex multi-step work requiring planning and tracking
- When user provides multiple tasks or requests (numbered/comma-separated)
- After receiving new instructions that require multiple steps
- BEFORE starting work on any todo (mark as in-progress)
- IMMEDIATELY after completing each todo (mark completed individually)
- When breaking down larger tasks into smaller actionable steps
- To give users visibility into your progress and planning

When NOT to use:
- Single, trivial tasks that can be completed in one step
- Purely conversational/informational requests
- When just reading files or performing simple searches

CRITICAL workflow:
1. Plan tasks by writing todo list with specific, actionable items
2. Mark ONE todo as in-progress before starting work
3. Complete the work for that specific todo
4. Mark that todo as completed IMMEDIATELY
5. Move to next todo and repeat

Todo states:
- not-started: Todo not yet begun
- in-progress: Currently working (limit ONE at a time)
- completed: Finished successfully

IMPORTANT: Mark todos completed as soon as they are done. Do not batch completions.`,source:Pr.Internal,inputSchema:{type:"object",properties:i,required:r}}}var gX=X8(!1),ky=class extends Y{constructor(t,i,r,s,n){super(),this.a=t,this.b=i,this.c=r,this.f=s,this.g=n}async invoke(t,i,r,s){const n=t.parameters,a=t.context?.sessionId??n.chatSessionId??"default";this.f.debug(`ManageTodoListTool: Invoking with options ${JSON.stringify(n)}`);try{const c=this.a?"write":n.operation;return c?c==="read"?this.m(Jr.forSession(a)):c==="write"?this.q(n,Jr.forSession(a)):{content:[{kind:"text",value:"Error: Unknown operation"}]}:{content:[{kind:"text",value:"Error: operation parameter is required"}]}}catch(c){return{content:[{kind:"text",value:`Error: ${c instanceof Error?c.message:"Unknown error"}`}]}}}async prepareToolInvocation(t,i){const r=t.parameters,n=t.chatSessionId??r.chatSessionId??"default",o=this.c.getTodos(Jr.forSession(n));let a;switch(this.a?"write":r.operation){case"write":{r.todoList&&(a=this.h(o,r.todoList));break}case"read":{a=d(6672,null);break}default:break}const u=(r.todoList??o).map(h=>({id:h.id.toString(),title:h.title,description:h.description||"",status:h.status}));return{pastTenseMessage:new tn(a??d(6673,null)),toolSpecificData:{kind:"todoList",sessionId:n,todoList:u}}}h(t,i){if(t.length===0)return i.length===1?d(6674,null):d(6675,null,i.length);const r=new Map(t.map(a=>[a.id,a])),s=i.filter(a=>{const c=r.get(a.id);return c&&c.status!=="in-progress"&&a.status==="in-progress"});if(s.length>0){const a=s[0],c=i.length,l=i.findIndex(u=>u.id===a.id)+1;return d(6676,null,a.title,l,c)}const n=i.filter(a=>{const c=r.get(a.id);return c&&c.status!=="completed"&&a.status==="completed"});if(n.length>0){const a=n[0],c=i.length,l=i.findIndex(u=>u.id===a.id)+1;return d(6677,null,a.title,l,c)}const o=i.filter(a=>!r.has(a.id));return o.length>0?o.length===1?d(6678,null):d(6679,null,o.length):d(6680,null)}j(t,i){return t.length===0?"No todo list found.":`# Todo List

${this.s(t)}`}m(t){const i=this.c.getTodos(t),r=this.j(i,t),s=this.r(i);return this.g.publicLog2("todoListToolInvoked",{operation:"read",notStartedCount:s.notStartedCount,inProgressCount:s.inProgressCount,completedCount:s.completedCount,chatSessionId:M1(t)}),{content:[{kind:"text",value:r}]}}q(t,i){if(!t.todoList)return{content:[{kind:"text",value:"Error: todoList is required for write operation"}]};const r=t.todoList.map(c=>({id:c.id,title:c.title,description:c.description||"",status:c.status})),s=this.c.getTodos(i),n=this.t(s,r);this.c.setTodos(i,r);const o=this.r(r),a=[];return r.length<3?a.push("Warning: Small todo list (<3 items). This task might not need a todo list."):r.length>10&&a.push("Warning: Large todo list (>10 items). Consider keeping the list focused and actionable."),n>3&&a.push("Warning: Did you mean to update so many todos at the same time? Consider working on them one by one."),this.g.publicLog2("todoListToolInvoked",{operation:"write",notStartedCount:o.notStartedCount,inProgressCount:o.inProgressCount,completedCount:o.completedCount,chatSessionId:M1(i)}),{content:[{kind:"text",value:`Successfully wrote todo list${a.length?`

`+a.join(`
`):""}`}],toolMetadata:{warnings:a}}}r(t){const i=t.filter(n=>n.status==="not-started").length,r=t.filter(n=>n.status==="in-progress").length,s=t.filter(n=>n.status==="completed").length;return{notStartedCount:i,inProgressCount:r,completedCount:s}}s(t){return t.length===0?"":t.map(i=>{let r;switch(i.status){case"completed":r="[x]";break;case"in-progress":r="[-]";break;case"not-started":default:r="[ ]";break}const s=[`- ${r} ${i.title}`];return this.b&&i.description&&i.description.trim()&&s.push(`  - ${i.description.trim()}`),s.join(`
`)}).join(`
`)}t(t,i){let r=0;const s=Math.min(t.length,i.length);for(let c=0;c<s;c++){const l=t[c],u=i[c];(l.title!==u.title||(l.description??"")!==(u.description??"")||l.status!==u.status)&&r++}const n=Math.max(0,i.length-t.length),o=Math.max(0,t.length-i.length);return n+o+r}};ky=__decorate([__param(2,d_),__param(3,De),__param(4,Nl)],ky);var Y8=U("requestService");function g_(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function K8(e){return e.res.statusCode===204}async function $y(e){return K8(e)?null:(await h5(e.stream)).toString()}async function m_(e){if(!g_(e))throw new Error("Server returned "+e.res.statusCode);if(K8(e))return null;const i=(await h5(e.stream)).toString();try{return JSON.parse(i)}catch(r){throw r.message+=`:
`+i,r}}var v_=!1,Iy=[],eI=void 0,tI=void 0;function w_(e=!0,t=!0){if(eI===e&&tI===t)return;eI=e,tI=t;const i=Nt.as(hn.Configuration),r=Iy;Iy=[{id:"http",order:15,title:d(2294,null),type:"object",scope:2,properties:{"http.useLocalProxyConfiguration":{type:"boolean",default:t,markdownDescription:d(2295,null),restricted:!0}}},{id:"http",order:15,title:d(2296,null),type:"object",scope:1,properties:{"http.electronFetch":{type:"boolean",default:!1,description:d(2297,null),restricted:!0}}},{id:"http",order:15,title:d(2298,null),type:"object",scope:e?1:2,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(2299,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,markdownDescription:d(2300,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(2301,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(2302,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(2303,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(2304,null),d(2305,null),d(2306,null),d(2307,null)],default:"override",markdownDescription:d(2308,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,markdownDescription:d(2309,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificatesNode":{type:"boolean",tags:["experimental"],default:v_,markdownDescription:d(2310,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0,experiment:{mode:"auto"}},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,markdownDescription:d(2311,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:d(2312,null,"`#http.useLocalProxyConfiguration#`","`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0},"http.experimental.networkInterfaceCheckInterval":{type:"number",default:300,minimum:-1,tags:["experimental"],markdownDescription:d(2313,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0,experiment:{mode:"auto"}}}}],i.updateConfigurations({add:Iy,remove:r})}w_();var vX=new x("isMac",yi,d(1865,null)),wX=new x("isLinux",Qs,d(1866,null)),bX=new x("isWindows",ai,d(1867,null)),b_=new x("isWeb",zn,d(1868,null)),yX=new x("isMacNative",yi&&!zn,d(1869,null)),SX=new x("isIOS",xA,d(1870,null)),EX=new x("isMobile",kA,d(1871,null)),CX=new x("isDevelopment",!1,!0),xX=new x("productQualityType","",d(1872,null)),y_="inputFocus",kX=new x(y_,!1,d(1873,null)),iI=U("languageService"),rI=U("modelService"),sI=class extends H7{constructor(){super(...arguments),this.f=this.D(new P),this.g=this.D(new P),this.j=this.D(new P),this.n=this.D(new P),this.onDidChangeDirty=this.f.event,this.onDidChangeLabel=this.g.event,this.onDidChangeCapabilities=this.j.event,this.onWillDispose=this.n.event}get editorId(){}get capabilities(){return 2}hasCapability(e){return e===0?this.capabilities===0:(this.capabilities&e)!==0}isReadonly(){return this.hasCapability(2)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(0)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}canReopen(){return!0}matches(e){if($r(e))return this===e;const t=e.options?.override;return this.editorId!==t&&t!==void 0&&this.editorId!==void 0?!1:ha(this.resource,N1.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this.B.isDisposed}dispose(){this.isDisposed()||this.n.fire(),super.dispose()}},Lc,Dy=class extends sI{static{Lc=this}static{this.ID="workbench.editorinputs.sidebysideEditorInput"}get typeId(){return Lc.ID}get capabilities(){let t=this.primary.capabilities;return t&=-33,this.secondary.hasCapability(16)&&(t|=16),this.secondary.hasCapability(8)&&(t|=8),t|=256,t}get resource(){if(this.a)return this.primary.resource}constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.secondary=r,this.primary=s,this.h=n,this.a=this.primary.matches(this.secondary),this.m()}m(){this.D(Ke.once(Ke.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this.D(this.primary.onDidChangeDirty(()=>this.f.fire())),this.D(this.primary.onDidChangeCapabilities(()=>this.j.fire())),this.D(this.secondary.onDidChangeCapabilities(()=>this.j.fire())),this.D(this.primary.onDidChangeLabel(()=>this.g.fire())),this.D(this.secondary.onDidChangeLabel(()=>this.g.fire()))}getName(){const t=this.getPreferredName();return t||(this.a?this.primary.getName():d(4489,null,this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.b}getDescription(t){const i=this.getPreferredDescription();return i||(this.a?this.primary.getDescription(t):super.getDescription(t))}getPreferredDescription(){return this.c}getTitle(t){let i;this.a?i=this.primary.getTitle(t)??this.getName():i=super.getTitle(t);const r=this.q();return r&&(i=`${r} (${i})`),i}q(){if(this.b&&this.c)return`${this.b} ${this.c}`;if(this.b||this.c)return this.b??this.c}getLabelExtraClasses(){return this.a?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.a?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return{...this.primary.getTelemetryDescriptor(),...super.getTelemetryDescriptor()}}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(t,i){const r=await this.primary.save(t,i);return this.r(r)}async saveAs(t,i){const r=await this.primary.saveAs(t,i);return this.r(r)}r(t){if(!t||!this.a)return t;if(this.primary.matches(t))return this;if(t instanceof sI)return new Lc(this.b,this.c,t,t,this.h);if(!Cs(t)&&!xl(t)&&!ho(t)&&!fo(t))return{primary:t,secondary:t,label:this.b,description:this.c}}revert(t,i){return this.primary.revert(t,i)}async rename(t,i){if(!this.a)return;const r=await this.primary.rename(t,i);if(r){if($r(r.editor))return{editor:new Lc(this.b,this.c,r.editor,r.editor,this.h),options:{...r.options,viewState:L1(this,t,this.h)}};if(sL(r.editor))return{editor:{label:this.b,description:this.c,primary:r.editor,secondary:r.editor,options:{...r.options,viewState:L1(this,t,this.h)}}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(t){const i=this.primary.toUntyped(t),r=this.secondary.toUntyped(t);if(i&&r&&!Cs(i)&&!Cs(r)&&!xl(i)&&!xl(r)&&!ho(i)&&!ho(r)&&!fo(i)&&!fo(r)){const s={label:this.b,description:this.c,primary:i,secondary:r};return typeof t?.preserveViewState=="number"&&(s.options={viewState:L1(this,t.preserveViewState,this.h)}),s}}matches(t){return this===t?!0:W7(t)||Cs(t)?!1:t instanceof Lc?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):ho(t)?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):!1}};Dy=Lc=__decorate([__param(4,IC)],Dy);var nI=class extends Y{constructor(){super(...arguments),this.f=this.D(new P),this.onWillDispose=this.f.event,this.h=!1}async resolve(){this.h=!0}isResolved(){return this.h}isDisposed(){return this.B.isDisposed}dispose(){this.f.fire(),super.dispose()}},S_={ModesRegistry:"editor.modesRegistry"},E_=class extends Y{constructor(){super(),this.b=this.D(new P),this.onDidChangeLanguages=this.b.event,this.a=[]}registerLanguage(e){return this.a.push(e),this.b.fire(void 0),{dispose:()=>{for(let t=0,i=this.a.length;t<i;t++)if(this.a[t]===e){this.a.splice(t,1);return}}}}getLanguages(){return this.a}},oI=new E_;Nt.add(S_.ModesRegistry,oI);var xg="plaintext",C_=".txt";oI.registerLanguage({id:xg,extensions:[C_],aliases:[d(904,null),"text"],mimetypes:[kr.text]}),Nt.as(hn.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1},"[go]":{"editor.insertSpaces":!1},"[makefile]":{"editor.insertSpaces":!1},"[shellscript]":{"files.eol":`
`},"[yaml]":{"editor.insertSpaces":!0,"editor.tabSize":2}}}]);var x_=U("ILanguageDetectionService"),aI="languageDetection",k_=U("accessibilityService"),cI;(function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled"})(cI||(cI={}));var IX=new x("accessibilityModeEnabled",!1),Py,kg=class extends nI{static{Py=this}static{this.a=600}constructor(t,i,r,s,n){super(),this.n=t,this.q=i,this.r=r,this.s=s,this.b=void 0,this.j=this.D(new ms),this.m=this.D(new P6(Py.a)),this.w=!1,this.y=void 0,n&&this.t(n)}t(t){const i=this.n.getModel(t);if(!i)throw new Error(`Document with resource ${t.toString(!0)} does not exist`);this.b=t,this.u(i)}u(t){this.j.value=t.onWillDispose(()=>{this.b=void 0,this.dispose()})}get textEditorModel(){return this.b?this.n.getModel(this.b):null}isReadonly(){return!0}get languageChangeSource(){return this.y}get hasLanguageSetExplicitly(){return typeof this.y=="string"}setLanguageId(t,i){this.y="user",this.z(t,i)}z(t,i){if(this.isResolved()&&!(!t||t===this.textEditorModel.getLanguageId())){this.w=!0;try{this.textEditorModel.setLanguage(this.q.createById(t),i)}finally{this.w=!1}}}C(t){const i=this.D(t.onDidChangeLanguage(r=>{r.source===aI||this.w||(this.y="api",i.dispose())}))}getLanguageId(){return this.textEditorModel?.getLanguageId()}F(){return this.m.trigger(()=>this.G())}async G(){if(this.hasLanguageSetExplicitly||!this.b||!this.r.isEnabledForLanguage(this.getLanguageId()??xg))return;const t=await this.r.detectLanguage(this.b),i=this.getLanguageId();if(t&&t!==i&&!this.isDisposed()){this.z(t,aI);const r=this.q.getLanguageName(t);this.s.alert(d(4490,null,r??t))}}H(t,i,r){const s=this.J(t),n=this.L(i,this.q,r,s);return this.I(t,n,i)}I(t,i,r){let s=r&&this.n.getModel(r);return s?this.updateTextEditorModel(t,i.languageId):(s=this.n.createModel(t,i,r),this.g=!0,this.u(s)),this.b=s.uri,s}J(t){const i=t;return typeof i.getFirstLineText=="function"?i.getFirstLineText(1e3):t.getLineContent(1).substr(0,1e3)}L(t,i,r,s){return!r||r===xg?i.createByFilepathOrFirstLine(t??null,s):i.createById(r)}updateTextEditorModel(t,i,r){this.isResolved()&&(t&&this.n.updateModel(this.textEditorModel,t,r),i&&i!==xg&&this.textEditorModel.getLanguageId()!==i&&this.textEditorModel.setLanguage(this.q.createById(i)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.b}dispose(){this.j.dispose(),this.b&&this.g&&this.n.destroyModel(this.b),this.b=void 0,this.g=!1,super.dispose()}};kg=Py=__decorate([__param(0,rI),__param(1,iI),__param(2,x_),__param(3,k_)],kg);var lI=class extends nI{get originalModel(){return this.a}get modifiedModel(){return this.b}constructor(e,t){super(),this.a=e,this.b=t}async resolve(){await Promise.all([this.a?.resolve(),this.b?.resolve()])}isResolved(){return!!(this.a?.isResolved()&&this.b?.isResolved())}dispose(){super.dispose()}},$_=class extends lI{get originalModel(){return this.a}get modifiedModel(){return this.b}get textDiffEditorModel(){return this.j}constructor(e,t){super(e,t),this.j=void 0,this.a=e,this.b=t,this.m()}async resolve(){await super.resolve(),this.m()}m(){this.originalModel?.isResolved()&&this.modifiedModel?.isResolved()&&(this.j?(this.j.original=this.originalModel.textEditorModel,this.j.modified=this.modifiedModel.textEditorModel):this.j={original:this.originalModel.textEditorModel,modified:this.modifiedModel.textEditorModel})}isResolved(){return!!this.j}isReadonly(){return!!this.modifiedModel&&this.modifiedModel.isReadonly()}dispose(){this.j=void 0,super.dispose()}};function uI(e){const t=e;return typeof t?.resolve=="function"&&typeof t?.isResolved=="function"}var hI;(function(e){e[e.ACTIVATE=1]="ACTIVATE",e[e.RESTORE=2]="RESTORE",e[e.PRESERVE=3]="PRESERVE"})(hI||(hI={}));var dI;(function(e){e[e.PICK=0]="PICK",e[e.EXCLUSIVE_ONLY=1]="EXCLUSIVE_ONLY"})(dI||(dI={}));var fI;(function(e){e[e.API=0]="API",e[e.USER=1]="USER"})(fI||(fI={}));var pI;(function(e){e[e.Center=0]="Center",e[e.CenterIfOutsideViewport=1]="CenterIfOutsideViewport",e[e.NearTop=2]="NearTop",e[e.NearTopIfOutsideViewport=3]="NearTopIfOutsideViewport"})(pI||(pI={}));var gI;(function(e){e.PROGRAMMATIC="api",e.NAVIGATION="code.navigation",e.JUMP="code.jump"})(gI||(gI={}));var $g,mI=class extends Dy{static{$g=this}static{this.ID="workbench.editors.diffEditorInput"}get typeId(){return $g.ID}get editorId(){return this.modified.editorId===this.original.editorId?this.modified.editorId:void 0}get capabilities(){let t=super.capabilities;return this.t.forceDescription&&(t|=64),t}constructor(t,i,r,s,n,o){super(t,i,r,s,o),this.original=r,this.modified=s,this.u=n,this.s=void 0,this.t=this.w()}w(){let t,i=!1;if(this.b)t=this.b;else{const u=this.original.getName(),h=this.modified.getName();t=d(4488,null,u,h),i=u===h}let r,s,n;if(this.c)r=this.c,s=this.c,n=this.c;else{r=this.y(this.original.getDescription(0),this.modified.getDescription(0)),n=this.y(this.original.getDescription(2),this.modified.getDescription(2));const u=this.original.getDescription(1),h=this.modified.getDescription(1);if(typeof u=="string"&&typeof h=="string"&&(u||h)){const[f,g]=IF([u,h]);s=this.y(f,g)}}let o=this.y(this.original.getTitle(0)??this.original.getName(),this.modified.getTitle(0)??this.modified.getName()," \u2194 "),a=this.y(this.original.getTitle(1)??this.original.getName(),this.modified.getTitle(1)??this.modified.getName()," \u2194 "),c=this.y(this.original.getTitle(2)??this.original.getName(),this.modified.getTitle(2)??this.modified.getName()," \u2194 ");const l=this.q();return l&&(o=`${l} (${o})`,a=`${l} (${a})`,c=`${l} (${c})`),{name:t,shortDescription:r,mediumDescription:s,longDescription:n,forceDescription:i,shortTitle:o,mediumTitle:a,longTitle:c}}y(t,i,r=" - "){if(!(!t||!i))return t===i?i:`${t}${r}${i}`}getName(){return this.t.name}getDescription(t=1){switch(t){case 0:return this.t.shortDescription;case 2:return this.t.longDescription;case 1:default:return this.t.mediumDescription}}getTitle(t){switch(t){case 0:return this.t.shortTitle;case 2:return this.t.longTitle;default:case 1:return this.t.mediumTitle}}async resolve(){const t=await this.z();return this.s?.dispose(),this.s=t,this.s}prefersEditorPane(t){return this.u?t.find(i=>i.typeId===rL):t.find(i=>i.typeId===iL)}async z(){const[t,i]=await Promise.all([this.original.resolve(),this.modified.resolve()]);return i instanceof kg&&t instanceof kg?new $_(t,i):new lI(uI(t)?t:void 0,uI(i)?i:void 0)}toUntyped(t){const i=super.toUntyped(t);if(i)return{...i,modified:i.primary,original:i.secondary}}matches(t){return this===t?!0:t instanceof $g?this.modified.matches(t.modified)&&this.original.matches(t.original)&&t.u===this.u:Cs(t)?this.modified.matches(t.modified)&&this.original.matches(t.original):!1}dispose(){this.s&&(this.s.dispose(),this.s=void 0),super.dispose()}};mI=$g=__decorate([__param(5,IC)],mI);var Hr,AX=new x("workbenchState",void 0,{type:"string",description:d(4410,null)}),TX=new x("workspaceFolderCount",0,d(4411,null)),RX=new x("openFolderWorkspaceSupport",!0,!0),LX=new x("enterMultiRootWorkspaceSupport",!0,!0),NX=new x("emptyWorkspaceSupport",!0,!0),MX=new x("dirtyWorkingCopies",!1,d(4412,null)),I_=new x("remoteName","",d(4413,null)),OX=new x("virtualWorkspace","",d(4414,null)),FX=new x("temporaryWorkspace",!1,d(4415,null)),UX=new x("hasWebFileSystemAccess",!1,!0),jX=new x("embedderIdentifier",void 0,d(4416,null)),HX=new x("inAutomation",!1,d(4417,null)),WX=new x("isFullscreen",!1,d(4418,null)),_X=new x("isAuxiliaryWindowFocusedContext",!1,d(4419,null)),BX=new x("isWindowAlwaysOnTop",!1,d(4420,null)),qX=new x("isAuxiliaryWindow",!1,d(4421,null)),zX=new x("activeEditorIsDirty",!1,d(4422,null)),VX=new x("activeEditorIsNotPreview",!1,d(4423,null)),GX=new x("activeEditorIsFirstInGroup",!1,d(4424,null)),JX=new x("activeEditorIsLastInGroup",!1,d(4425,null)),QX=new x("activeEditorIsPinned",!1,d(4426,null)),ZX=new x("activeEditorIsReadonly",!1,d(4427,null)),XX=new x("activeCompareEditorCanSwap",!1,d(4428,null)),YX=new x("activeEditorCanToggleReadonly",!0,d(4429,null)),KX=new x("activeEditorCanRevert",!1,d(4430,null)),eY=new x("activeEditorCanSplitInGroup",!0),tY=new x("activeEditor",null,{type:"string",description:d(4431,null)}),iY=new x("activeEditorAvailableEditorIds","",d(4432,null)),rY=new x("textCompareEditorVisible",!1,d(4433,null)),sY=new x("textCompareEditorActive",!1,d(4434,null)),nY=new x("sideBySideEditorActive",!1,d(4435,null)),oY=new x("groupEditorsCount",0,d(4436,null)),aY=new x("activeEditorGroupEmpty",!1,d(4437,null)),cY=new x("activeEditorGroupIndex",0,d(4438,null)),lY=new x("activeEditorGroupLast",!1,d(4439,null)),uY=new x("activeEditorGroupLocked",!1,d(4440,null)),D_=new x("multipleEditorGroups",!1,d(4441,null)),hY=D_.toNegated(),dY=new x("multipleEditorsSelectedInGroup",!1,d(4442,null)),fY=new x("twoEditorsSelectedInGroup",!1,d(4443,null)),pY=new x("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,d(4444,null)),P_=new x("editorPartMultipleEditorGroups",!1,d(4445,null)),gY=P_.toNegated(),mY=new x("editorPartMaximizedEditorGroup",!1,d(4446,null)),vY=new x("editorIsOpen",!1,d(4447,null)),wY=new x("inZenMode",!1,d(4448,null)),bY=new x("isCenteredLayout",!1,d(4449,null)),yY=new x("splitEditorsVertically",!1,d(4450,null)),SY=new x("mainEditorAreaVisible",!0,d(4451,null)),EY=new x("editorTabsVisible",!0,d(4452,null)),CY=new x("sideBarVisible",!1,d(4453,null)),xY=new x("sideBarFocus",!1,d(4454,null)),kY=new x("activeViewlet","",d(4455,null)),$Y=new x("statusBarFocused",!1,d(4456,null)),IY=new x("titleBarStyle","custom",d(4457,null)),DY=new x("titleBarVisible",!1,d(4458,null)),PY=new x("isCompactTitleBar",!1,d(4459,null)),AY=new x("bannerFocused",!1,d(4460,null)),TY=new x("notificationFocus",!0,d(4461,null)),RY=new x("notificationCenterVisible",!1,d(4462,null)),LY=new x("notificationToastsVisible",!1,d(4463,null)),NY=new x("activeAuxiliary","",d(4464,null)),MY=new x("auxiliaryBarFocus",!1,d(4465,null)),OY=new x("auxiliaryBarVisible",!1,d(4466,null)),FY=new x("auxiliaryBarMaximized",!1,d(4467,null)),UY=new x("activePanel","",d(4468,null)),jY=new x("panelFocus",!1,d(4469,null)),HY=new x("panelPosition","bottom",d(4470,null)),WY=new x("panelAlignment","center",d(4471,null)),_Y=new x("panelVisible",!1,d(4472,null)),BY=new x("panelMaximized",!1,d(4473,null)),qY=new x("focusedView","",d(4474,null)),vI=class{static{Hr=this}static{this.Scheme=new x("resourceScheme",void 0,{type:"string",description:d(4475,null)})}static{this.Filename=new x("resourceFilename",void 0,{type:"string",description:d(4476,null)})}static{this.Dirname=new x("resourceDirname",void 0,{type:"string",description:d(4477,null)})}static{this.Path=new x("resourcePath",void 0,{type:"string",description:d(4478,null)})}static{this.LangId=new x("resourceLangId",void 0,{type:"string",description:d(4479,null)})}static{this.Resource=new x("resource",void 0,{type:"URI",description:d(4480,null)})}static{this.Extension=new x("resourceExtname",void 0,{type:"string",description:d(4481,null)})}static{this.HasResource=new x("resourceSet",void 0,{type:"boolean",description:d(4482,null)})}static{this.IsFileSystemResource=new x("isFileSystemResource",void 0,{type:"boolean",description:d(4483,null)})}constructor(t,i,r,s){this.m=t,this.n=i,this.o=r,this.p=s,this.a=new ae,this.d=Hr.Scheme.bindTo(this.m),this.f=Hr.Filename.bindTo(this.m),this.g=Hr.Dirname.bindTo(this.m),this.h=Hr.Path.bindTo(this.m),this.i=Hr.LangId.bindTo(this.m),this.c=Hr.Resource.bindTo(this.m),this.j=Hr.Extension.bindTo(this.m),this.k=Hr.HasResource.bindTo(this.m),this.l=Hr.IsFileSystemResource.bindTo(this.m),this.a.add(i.onDidChangeFileSystemProviderRegistrations(()=>{const n=this.get();this.l.set(!!(n&&i.hasProvider(n)))})),this.a.add(s.onModelAdded(n=>{ha(n.uri,this.get())&&this.q()})),this.a.add(s.onModelLanguageChanged(n=>{ha(n.model.uri,this.get())&&this.q()}))}dispose(){this.a.dispose()}q(){const t=this.get();if(!t){this.i.set(null);return}const i=this.p.getModel(t)?.getLanguageId()??this.o.guessLanguageIdByFilepathOrFirstLine(t);this.i.set(i)}set(t){t=t??void 0,!ha(this.b,t)&&(this.b=t,this.m.bufferChangeEvents(()=>{this.c.set(t?t.toString():null),this.d.set(t?t.scheme:null),this.f.set(t?Ji(t):null),this.g.set(t?this.r(cl(t)):null),this.h.set(t?this.r(t):null),this.q(),this.j.set(t?RT(t):null),this.k.set(!!t),this.l.set(t?this.n.hasProvider(t):!1)}))}r(t){return t.scheme===B.file?t.fsPath:t.path}reset(){this.b=void 0,this.m.bufferChangeEvents(()=>{this.c.reset(),this.d.reset(),this.f.reset(),this.g.reset(),this.h.reset(),this.i.reset(),this.j.reset(),this.k.reset(),this.l.reset()})}get(){return this.b}};vI=Hr=__decorate([__param(0,to),__param(1,R1),__param(2,iI),__param(3,rI)],vI);var A_=U("dialogService"),wI;(function(e){e[e.Confirmation=1]="Confirmation",e[e.Prompt=2]="Prompt",e[e.Input=3]="Input"})(wI||(wI={}));var VY=U("fileDialogService"),bI;(function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"})(bI||(bI={}));var T_=U("openerService"),yI=U("lifecycleService"),SI;(function(e){e[e.Default=1]="Default",e[e.Last=2]="Last"})(SI||(SI={}));var EI;(function(e){e[e.CLOSE=1]="CLOSE",e[e.QUIT=2]="QUIT",e[e.RELOAD=3]="RELOAD",e[e.LOAD=4]="LOAD"})(EI||(EI={}));var CI;(function(e){e[e.NewWindow=1]="NewWindow",e[e.ReloadedWindow=3]="ReloadedWindow",e[e.ReopenedWindow=4]="ReopenedWindow"})(CI||(CI={}));var xI;(function(e){e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Restored=3]="Restored",e[e.Eventually=4]="Eventually"})(xI||(xI={}));var Ln,Nc,ve;(function(e){e.Setup={hidden:new x("chatSetupHidden",!1,!0),installed:new x("chatSetupInstalled",!1,!0),disabled:new x("chatSetupDisabled",!1,!0),untrusted:new x("chatSetupUntrusted",!1,!0),later:new x("chatSetupLater",!1,!0),registered:new x("chatSetupRegistered",!1,!0)},e.Entitlement={signedOut:new x("chatEntitlementSignedOut",!1,!0),canSignUp:new x("chatPlanCanSignUp",!1,!0),planFree:new x("chatPlanFree",!1,!0),planPro:new x("chatPlanPro",!1,!0),planProPlus:new x("chatPlanProPlus",!1,!0),planBusiness:new x("chatPlanBusiness",!1,!0),planEnterprise:new x("chatPlanEnterprise",!1,!0),organisations:new x("chatEntitlementOrganisations",void 0,!0),internal:new x("chatEntitlementInternal",!1,!0),sku:new x("chatEntitlementSku",void 0,!0)},e.chatQuotaExceeded=new x("chatQuotaExceeded",!1,!0),e.completionsQuotaExceeded=new x("completionsQuotaExceeded",!1,!0),e.chatAnonymous=new x("chatAnonymous",!1,!0)})(ve||(ve={}));var kI=U("chatEntitlementService"),ke;(function(e){e[e.Unknown=1]="Unknown",e[e.Unresolved=2]="Unresolved",e[e.Available=3]="Available",e[e.Unavailable=4]="Unavailable",e[e.Free=5]="Free",e[e.Pro=6]="Pro",e[e.ProPlus=7]="ProPlus",e[e.Business=8]="Business",e[e.Enterprise=9]="Enterprise"})(ke||(ke={}));function R_(e){return e===ke.Pro||e===ke.ProPlus||e===ke.Business||e===ke.Enterprise}var si={extensionId:gi.defaultChatAgent?.extensionId??"",chatExtensionId:gi.defaultChatAgent?.chatExtensionId??"",upgradePlanUrl:gi.defaultChatAgent?.upgradePlanUrl??"",provider:gi.defaultChatAgent?.provider??{default:{id:""},enterprise:{id:""}},providerUriSetting:gi.defaultChatAgent?.providerUriSetting??"",providerScopes:gi.defaultChatAgent?.providerScopes??[[]],entitlementUrl:gi.defaultChatAgent?.entitlementUrl??"",entitlementSignupLimitedUrl:gi.defaultChatAgent?.entitlementSignupLimitedUrl??"",completionsAdvancedSetting:gi.defaultChatAgent?.completionsAdvancedSetting??"",chatQuotaExceededContext:gi.defaultChatAgent?.chatQuotaExceededContext??"",completionsQuotaExceededContext:gi.defaultChatAgent?.completionsQuotaExceededContext??""},$I="chat.allowAnonymousAccess";function Ay(e,t,i){return!(e.getValue($I)!==!0||t!==ke.Unknown||i.hidden||i.disabled)}function Ty(e,t,i){i.publicLog2("chatEntitlements",{chatHidden:!!e.hidden,chatDisabled:!!e.disabled,chatEntitlement:e.entitlement,chatRegistered:!!e.registered,chatAnonymous:Ay(t,e.entitlement,e)})}var Ry=class extends Y{constructor(t,i,r,s,n,o,a){if(super(),this.a=s,this.b=n,this.c=o,this.f=a,this.g=this.D(new P),this.onDidChangeQuotaExceeded=this.g.event,this.h=this.D(new P),this.onDidChangeQuotaRemaining=this.h.event,this.j={},this.q={chatQuotaExceeded:si.chatQuotaExceededContext,completionsQuotaExceeded:si.completionsQuotaExceededContext},this.w=this.D(new P),this.onDidChangeAnonymous=this.w.event,this.anonymousObs=Il(this.onDidChangeAnonymous,()=>this.anonymous),this.m=ve.chatQuotaExceeded.bindTo(this.a),this.n=ve.completionsQuotaExceeded.bindTo(this.a),this.u=ve.chatAnonymous.bindTo(this.a),this.u.set(this.anonymous),this.onDidChangeEntitlement=Ke.map(Ke.filter(this.a.onDidChangeContext,l=>l.affectsSome(new Set([ve.Entitlement.planPro.key,ve.Entitlement.planBusiness.key,ve.Entitlement.planEnterprise.key,ve.Entitlement.planProPlus.key,ve.Entitlement.planFree.key,ve.Entitlement.canSignUp.key,ve.Entitlement.signedOut.key,ve.Entitlement.organisations.key,ve.Entitlement.internal.key,ve.Entitlement.sku.key])),this.B),()=>{},this.B),this.entitlementObs=Il(this.onDidChangeEntitlement,()=>this.entitlement),this.onDidChangeSentiment=Ke.map(Ke.filter(this.a.onDidChangeContext,l=>l.affectsSome(new Set([ve.Setup.hidden.key,ve.Setup.disabled.key,ve.Setup.untrusted.key,ve.Setup.installed.key,ve.Setup.later.key,ve.Setup.registered.key])),this.B),()=>{},this.B),this.sentimentObs=Il(this.onDidChangeSentiment,()=>this.sentiment),zn&&!r.remoteAuthority){ve.Setup.hidden.bindTo(this.a).set(!0);return}if(!i.defaultChatAgent)return;const c=this.context=new It(()=>this.D(t.createInstance(Ny)));this.requests=new It(()=>this.D(t.createInstance(Ly,c.value,{clearQuotas:()=>this.clearQuotas(),acceptQuotas:l=>this.acceptQuotas(l)}))),this.r()}get entitlement(){return this.a.getContextKeyValue(ve.Entitlement.planPro.key)===!0?ke.Pro:this.a.getContextKeyValue(ve.Entitlement.planBusiness.key)===!0?ke.Business:this.a.getContextKeyValue(ve.Entitlement.planEnterprise.key)===!0?ke.Enterprise:this.a.getContextKeyValue(ve.Entitlement.planProPlus.key)===!0?ke.ProPlus:this.a.getContextKeyValue(ve.Entitlement.planFree.key)===!0?ke.Free:this.a.getContextKeyValue(ve.Entitlement.canSignUp.key)===!0?ke.Available:this.a.getContextKeyValue(ve.Entitlement.signedOut.key)===!0?ke.Unknown:ke.Unresolved}get isInternal(){return this.a.getContextKeyValue(ve.Entitlement.internal.key)===!0}get organisations(){return this.a.getContextKeyValue(ve.Entitlement.organisations.key)}get sku(){return this.a.getContextKeyValue(ve.Entitlement.sku.key)}get quotas(){return this.j}r(){const t=new Set([this.q.chatQuotaExceeded,this.q.completionsQuotaExceeded]),i=this.D(new ms);this.D(this.a.onDidChangeContext(n=>{n.affectsSome(t)&&(i.value&&i.value.cancel(),i.value=new rt,this.update(i.value.token))}));let r=this.anonymous;const s=()=>{const n=this.anonymous;n!==r&&(r=n,this.u.set(n),this.context?.hasValue&&Ty(this.context.value.state,this.b,this.c),this.w.fire())};this.D(this.b.onDidChangeConfiguration(n=>{n.affectsConfiguration($I)&&s()})),this.D(this.onDidChangeEntitlement(()=>s())),this.D(this.onDidChangeSentiment(()=>s())),this.f.when(4).then(()=>{this.context?.hasValue&&Ty(this.context.value.state,this.b,this.c)})}acceptQuotas(t){const i=this.j;this.j=t,this.t();const{changed:r}=this.s(i.chat,t.chat),{changed:s}=this.s(i.completions,t.completions),{changed:n}=this.s(i.premiumChat,t.premiumChat);(r.exceeded||s.exceeded||n.exceeded)&&this.g.fire(),(r.remaining||s.remaining||n.remaining)&&this.h.fire()}s(t,i){return{changed:{exceeded:t?.percentRemaining===0!=(i?.percentRemaining===0),remaining:t?.percentRemaining!==i?.percentRemaining}}}clearQuotas(){this.acceptQuotas({})}t(){this.m.set(this.j.chat?.percentRemaining===0),this.n.set(this.j.completions?.percentRemaining===0)}get sentiment(){return{installed:this.a.getContextKeyValue(ve.Setup.installed.key)===!0,hidden:this.a.getContextKeyValue(ve.Setup.hidden.key)===!0,disabled:this.a.getContextKeyValue(ve.Setup.disabled.key)===!0,untrusted:this.a.getContextKeyValue(ve.Setup.untrusted.key)===!0,later:this.a.getContextKeyValue(ve.Setup.later.key)===!0,registered:this.a.getContextKeyValue(ve.Setup.registered.key)===!0}}get anonymous(){return Ay(this.b,this.entitlement,this.sentiment)}async update(t){await this.requests?.value.forceResolveEntitlement(void 0,t)}};Ry=__decorate([__param(0,Kn),__param(1,Fk),__param(2,bk),__param(3,to),__param(4,Ki),__param(5,Nl),__param(6,yI)],Ry);var Ly=Ln=class extends Y{static providerId(t){return t.getValue(`${si.completionsAdvancedSetting}.authProvider`)===si.provider.enterprise.id?si.provider.enterprise.id:si.provider.default.id}constructor(t,i,r,s,n,o,a,c,l,u,h){super(),this.f=t,this.g=i,this.h=r,this.j=s,this.m=n,this.n=o,this.q=a,this.r=c,this.s=l,this.t=u,this.u=h,this.b=new rt,this.c=!1,this.a={entitlement:this.f.state.entitlement},this.w(),this.y()}w(){this.D(this.j.onDidChangeDeclaredProviders(()=>this.y())),this.D(this.j.onDidChangeSessions(t=>{t.providerId===Ln.providerId(this.s)&&this.y()})),this.D(this.j.onDidRegisterAuthenticationProvider(t=>{t.id===Ln.providerId(this.s)&&this.y()})),this.D(this.j.onDidUnregisterAuthenticationProvider(t=>{t.id===Ln.providerId(this.s)&&this.y()})),this.D(this.f.onDidChange(()=>{(!this.f.state.installed||this.f.state.disabled||this.f.state.entitlement===ke.Unknown)&&(this.a={entitlement:this.a.entitlement,quotas:void 0},this.g.clearQuotas())}))}async y(){this.b.dispose(!0);const t=this.b=new rt,i=await this.z(t.token);if(t.token.isCancellationRequested)return;let r;i?this.a.entitlement===ke.Unknown&&(r={entitlement:ke.Unresolved}):(this.c=!1,r={entitlement:ke.Unknown}),r&&this.M(r),i&&!this.c&&await this.G(i,t.token)}async z(t){const i=await this.C(Ln.providerId(this.s));if(t.isCancellationRequested)return;const r=new Set;for(const s of i)for(const n of si.providerScopes)this.F(s.scopes,n)&&r.add(s);return r.size>0?Array.from(r):void 0}async C(t){const i=this.t.getAccountPreference(si.chatExtensionId,t)??this.t.getAccountPreference(si.extensionId,t);let r;for(const s of await this.j.getAccounts(t))if(s.label===i){r=s;break}try{return await this.j.getSessions(t,void 0,{account:r})}catch{}return[]}F(t,i){return i.every(r=>t.includes(r))}async G(t,i){const r=await this.H(t,i);return typeof r?.entitlement=="number"&&!i.isCancellationRequested&&(this.c=!0,this.M(r)),r}async H(t,i){if(i.isCancellationRequested)return;const r=await this.L(this.I(),"GET",void 0,t,i);if(i.isCancellationRequested)return;if(!r)return this.m.trace("[chat entitlement]: no response"),{entitlement:ke.Unresolved};if(r.res.statusCode&&r.res.statusCode!==200)return this.m.trace(`[chat entitlement]: unexpected status code ${r.res.statusCode}`),r.res.statusCode===401||r.res.statusCode===404?{entitlement:ke.Unknown}:{entitlement:ke.Unresolved};let s=null;try{s=await $y(r)}catch{}if(i.isCancellationRequested)return;if(!s)return this.m.trace("[chat entitlement]: response has no content"),{entitlement:ke.Unresolved};let n;try{n=JSON.parse(s),this.m.trace(`[chat entitlement]: parsed result is ${JSON.stringify(n)}`)}catch(c){return this.m.trace(`[chat entitlement]: error parsing response (${c})`),{entitlement:ke.Unresolved}}let o;n.access_type_sku==="free_limited_copilot"?o=ke.Free:n.can_signup_for_limited?o=ke.Available:n.copilot_plan==="individual"?o=ke.Pro:n.copilot_plan==="individual_pro"?o=ke.ProPlus:n.copilot_plan==="business"?o=ke.Business:n.copilot_plan==="enterprise"?o=ke.Enterprise:n.chat_enabled?o=ke.Pro:o=ke.Unavailable;const a={entitlement:o,organisations:n.organization_login_list,quotas:this.J(n),sku:n.access_type_sku};return this.m.trace(`[chat entitlement]: resolved to ${a.entitlement}, quotas: ${JSON.stringify(a.quotas)}`),this.h.publicLog2("chatInstallEntitlement",{entitlement:a.entitlement,tid:n.analytics_tracking_id,sku:a.sku,quotaChat:a.quotas?.chat?.remaining,quotaPremiumChat:a.quotas?.premiumChat?.remaining,quotaCompletions:a.quotas?.completions?.remaining,quotaResetDate:a.quotas?.resetDate}),a}I(){if(Ln.providerId(this.s)===si.provider.enterprise.id)try{const t=new URL(this.s.getValue(si.providerUriSetting));return`${t.protocol}//api.${t.hostname}${t.port?":"+t.port:""}/copilot_internal/user`}catch(t){this.m.error(t)}return si.entitlementUrl}J(t){const i={resetDate:t.quota_reset_date_utc??t.quota_reset_date??t.limited_user_reset_date,resetDateHasTime:typeof t.quota_reset_date_utc=="string"};if(t.monthly_quotas?.chat&&typeof t.limited_user_quotas?.chat=="number"&&(i.chat={total:t.monthly_quotas.chat,remaining:t.limited_user_quotas.chat,percentRemaining:Math.min(100,Math.max(0,t.limited_user_quotas.chat/t.monthly_quotas.chat*100)),overageEnabled:!1,overageCount:0,unlimited:!1}),t.monthly_quotas?.completions&&typeof t.limited_user_quotas?.completions=="number"&&(i.completions={total:t.monthly_quotas.completions,remaining:t.limited_user_quotas.completions,percentRemaining:Math.min(100,Math.max(0,t.limited_user_quotas.completions/t.monthly_quotas.completions*100)),overageEnabled:!1,overageCount:0,unlimited:!1}),t.quota_snapshots)for(const r of["chat","completions","premium_interactions"]){const s=t.quota_snapshots[r];if(!s)continue;const n={total:s.entitlement,remaining:s.remaining,percentRemaining:Math.min(100,Math.max(0,s.percent_remaining)),overageEnabled:s.overage_permitted,overageCount:s.overage_count,unlimited:s.unlimited};switch(r){case"chat":i.chat=n;break;case"completions":i.completions=n;break;case"premium_interactions":i.premiumChat=n;break}}return i}async L(t,i,r,s,n){let o;for(const a of s){if(n.isCancellationRequested)return o;try{const c=await this.n.request({type:i,url:t,data:i==="POST"?JSON.stringify(r):void 0,disableCache:!0,headers:{Authorization:`Bearer ${a.accessToken}`}},n),l=c.res.statusCode;if(l&&l!==200){o=c;continue}return c}catch(c){n.isCancellationRequested||this.m.error(`[chat entitlement] request: error ${c}`)}}return o}M(t){this.a=t,this.f.update({entitlement:this.a.entitlement,organisations:this.a.organisations,sku:this.a.sku}),t.quotas&&this.g.acceptQuotas(t.quotas)}async forceResolveEntitlement(t,i=Be.None){if(t||(t=await this.z(i)),!(!t||t.length===0))return this.G(t,i)}async signUpFree(t){const i={restricted_telemetry:this.h.telemetryLevel===0?"disabled":"enabled",public_code_suggestions:"enabled"},r=await this.L(si.entitlementSignupLimitedUrl,"POST",i,t,Be.None);if(!r)return await this.N(d(15214,null),"[chat entitlement] sign-up: no response")?this.signUpFree(t):{errorCode:1};if(r.res.statusCode&&r.res.statusCode!==200){if(r.res.statusCode===422)try{const a=await $y(r);if(a){const c=JSON.parse(a);if(typeof c.message=="string"&&c.message)return this.O(`[chat entitlement] sign-up: unprocessable entity (${c.message})`,c.message),{errorCode:r.res.statusCode}}}catch{}return await this.N(d(15215,null,r.res.statusCode),`[chat entitlement] sign-up: unexpected status code ${r.res.statusCode}`)?this.signUpFree(t):{errorCode:r.res.statusCode}}let s=null;try{s=await $y(r)}catch{}if(!s)return await this.N(d(15216,null),"[chat entitlement] sign-up: response has no content")?this.signUpFree(t):{errorCode:2};let n;try{n=JSON.parse(s),this.m.trace(`[chat entitlement] sign-up: response is ${s}`)}catch(o){return await this.N(d(15217,null),`[chat entitlement] sign-up: error parsing response (${o})`)?this.signUpFree(t):{errorCode:3}}return this.M({entitlement:ke.Free}),!!n?.subscribed}async N(t,i){if(this.m.error(i),!this.u.willShutdown){const{confirmed:r}=await this.q.confirm({type:St.Error,message:d(15218,null),detail:t,primaryButton:d(15219,null)});return r}return!1}O(t,i){this.m.error(t),this.u.willShutdown||this.q.prompt({type:St.Error,message:d(15220,null),detail:i,buttons:[{label:d(15221,null),run:()=>{}},{label:d(15222,null),run:()=>this.r.open(y.parse(si.upgradePlanUrl))}]})}async signIn(t){const i=Ln.providerId(this.s),r=t?.additionalScopes?zs([...si.providerScopes[0],...t.additionalScopes]):si.providerScopes[0],s=await this.j.createSession(i,r,{extraAuthorizeParameters:{get_started_with:"copilot-vscode"},provider:t?.useSocialProvider});this.t.updateAccountPreference(si.extensionId,i,s.account),this.t.updateAccountPreference(si.chatExtensionId,i,s.account);const n=await this.forceResolveEntitlement([s]);return{session:s,entitlements:n}}dispose(){this.b.dispose(!0),super.dispose()}};Ly=Ln=__decorate([__param(2,Nl),__param(3,nF),__param(4,De),__param(5,Y8),__param(6,A_),__param(7,T_),__param(8,Ki),__param(9,oF),__param(10,yI)],Ly);var Ny=class extends Y{static{Nc=this}static{this.a="chat.setupContext"}static{this.b="chat.disableAIFeatures"}get state(){return this.P(this.G??this.F)}constructor(t,i,r,s,n){super(),this.J=i,this.L=r,this.M=s,this.N=n,this.G=void 0,this.H=this.D(new P),this.onDidChange=this.H.event,this.I=void 0,this.c=ve.Entitlement.canSignUp.bindTo(t),this.f=ve.Entitlement.signedOut.bindTo(t),this.g=ve.Entitlement.planFree.bindTo(t),this.h=ve.Entitlement.planPro.bindTo(t),this.j=ve.Entitlement.planProPlus.bindTo(t),this.m=ve.Entitlement.planBusiness.bindTo(t),this.n=ve.Entitlement.planEnterprise.bindTo(t),this.q=ve.Entitlement.organisations.bindTo(t),this.r=ve.Entitlement.internal.bindTo(t),this.s=ve.Entitlement.sku.bindTo(t),this.t=ve.Setup.hidden.bindTo(t),this.u=ve.Setup.later.bindTo(t),this.w=ve.Setup.installed.bindTo(t),this.y=ve.Setup.disabled.bindTo(t),this.z=ve.Setup.untrusted.bindTo(t),this.C=ve.Setup.registered.bindTo(t),this.F=this.J.getObject(Nc.a,0)??{entitlement:ke.Unknown,organisations:void 0,sku:void 0},this.R(),this.O()}O(){this.D(this.M.onDidChangeConfiguration(t=>{t.affectsConfiguration(Nc.b)&&this.Q()}))}P(t){return this.M.getValue(Nc.b)===!0?{...t,hidden:!0}:t}async update(t){this.L.trace(`[chat entitlement context] update(): ${JSON.stringify(t)}`);const i=JSON.stringify(this.F);if(typeof t.installed=="boolean"&&typeof t.disabled=="boolean"&&typeof t.untrusted=="boolean"&&(this.F.installed=t.installed,this.F.disabled=t.disabled,this.F.untrusted=t.untrusted,t.installed&&!t.disabled&&(t.hidden=!1)),typeof t.hidden=="boolean"&&(this.F.hidden=t.hidden),typeof t.later=="boolean"&&(this.F.later=t.later),typeof t.entitlement=="number"&&(this.F.entitlement=t.entitlement,this.F.organisations=t.organisations,this.F.sku=t.sku,this.F.entitlement===ke.Free||R_(this.F.entitlement)?this.F.registered=!0:this.F.entitlement===ke.Available&&(this.F.registered=!1)),Ay(this.M,this.F.entitlement,this.F)&&(this.F.sku="no_auth_limited_copilot"),i!==JSON.stringify(this.F))return this.J.store(Nc.a,{...this.F,later:void 0},0,1),this.Q()}async Q(){await this.I?.wait(),this.R()}R(){const t=this.P(this.F);this.f.set(t.entitlement===ke.Unknown),this.c.set(t.entitlement===ke.Available),this.g.set(t.entitlement===ke.Free),this.h.set(t.entitlement===ke.Pro),this.j.set(t.entitlement===ke.ProPlus),this.m.set(t.entitlement===ke.Business),this.n.set(t.entitlement===ke.Enterprise),this.q.set(t.organisations),this.r.set(!!t.organisations?.some(i=>i==="github"||i==="microsoft"||i==="ms-copilot"||i==="MicrosoftCopilot")),this.s.set(t.sku),this.t.set(!!t.hidden),this.u.set(!!t.later),this.w.set(!!t.installed),this.y.set(!!t.disabled),this.z.set(!!t.untrusted),this.C.set(!!t.registered),this.L.trace(`[chat entitlement context] updateContext(): ${JSON.stringify(t)}`),Ty(t,this.M,this.N),this.H.fire()}suspend(){this.G={...this.F},this.I=new Cr}resume(){this.G=void 0,this.I?.open(),this.I=void 0}};Ny=Nc=__decorate([__param(0,to),__param(1,Tc),__param(2,De),__param(3,Ki),__param(4,Nl)],Ny),Ge(kI,Ry,0);var gr;(function(e){e.responseVote=new x("chatSessionResponseVote","",{type:"string",description:d(6430,null)}),e.responseDetectedAgentCommand=new x("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:d(6431,null)}),e.responseSupportsIssueReporting=new x("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:d(6432,null)}),e.responseIsFiltered=new x("chatSessionResponseFiltered",!1,{type:"boolean",description:d(6433,null)}),e.responseHasError=new x("chatSessionResponseError",!1,{type:"boolean",description:d(6434,null)}),e.requestInProgress=new x("chatSessionRequestInProgress",!1,{type:"boolean",description:d(6435,null)}),e.currentlyEditing=new x("chatSessionCurrentlyEditing",!1,{type:"boolean",description:d(6436,null)}),e.currentlyEditingInput=new x("chatSessionCurrentlyEditingInput",!1,{type:"boolean",description:d(6437,null)}),e.isResponse=new x("chatResponse",!1,{type:"boolean",description:d(6438,null)}),e.isRequest=new x("chatRequest",!1,{type:"boolean",description:d(6439,null)}),e.itemId=new x("chatItemId","",{type:"string",description:d(6440,null)}),e.lastItemId=new x("chatLastItemId",[],{type:"string",description:d(6441,null)}),e.editApplied=new x("chatEditApplied",!1,{type:"boolean",description:d(6442,null)}),e.inputHasText=new x("chatInputHasText",!1,{type:"boolean",description:d(6443,null)}),e.inputHasFocus=new x("chatInputHasFocus",!1,{type:"boolean",description:d(6444,null)}),e.inChatInput=new x("inChatInput",!1,{type:"boolean",description:d(6445,null)}),e.inChatSession=new x("inChat",!1,{type:"boolean",description:d(6446,null)}),e.inChatEditor=new x("inChatEditor",!1,{type:"boolean",description:d(6447,null)}),e.inChatTerminalToolOutput=new x("inChatTerminalToolOutput",!1,{type:"boolean",description:d(6448,null)}),e.chatModeKind=new x("chatAgentKind",lr.Ask,{type:"string",description:d(6449,null)}),e.chatToolCount=new x("chatToolCount",0,{type:"number",description:d(6450,null)}),e.chatToolGroupingThreshold=new x("chat.toolGroupingThreshold",0,{type:"number",description:d(6451,null)}),e.supported=yt.or(b_.negate(),I_.notEqualsTo(""),yt.has("config.chat.experimental.serverlessWebEnabled")),e.enabled=new x("chatIsEnabled",!1,{type:"boolean",description:d(6452,null)}),e.lockedToCodingAgent=new x("lockedToCodingAgent",!1,{type:"boolean",description:d(6453,null)}),e.agentSupportsAttachments=new x("agentSupportsAttachments",!1,{type:"boolean",description:d(6454,null)}),e.withinEditSessionDiff=new x("withinEditSessionDiff",!1,{type:"boolean",description:d(6455,null)}),e.filePartOfEditSession=new x("filePartOfEditSession",!1,{type:"boolean",description:d(6456,null)}),e.extensionParticipantRegistered=new x("chatPanelExtensionParticipantRegistered",!1,{type:"boolean",description:d(6457,null)}),e.panelParticipantRegistered=new x("chatPanelParticipantRegistered",!1,{type:"boolean",description:d(6458,null)}),e.chatEditingCanUndo=new x("chatEditingCanUndo",!1,{type:"boolean",description:d(6459,null)}),e.chatEditingCanRedo=new x("chatEditingCanRedo",!1,{type:"boolean",description:d(6460,null)}),e.languageModelsAreUserSelectable=new x("chatModelsAreUserSelectable",!1,{type:"boolean",description:d(6461,null)}),e.chatSessionHasModels=new x("chatSessionHasModels",!1,{type:"boolean",description:d(6462,null)}),e.extensionInvalid=new x("chatExtensionInvalid",!1,{type:"boolean",description:d(6463,null)}),e.inputCursorAtTop=new x("chatCursorAtTop",!1),e.inputHasAgent=new x("chatInputHasAgent",!1),e.location=new x("chatLocation",void 0),e.inQuickChat=new x("quickChatHasFocus",!1,{type:"boolean",description:d(6464,null)}),e.hasFileAttachments=new x("chatHasFileAttachments",!1,{type:"boolean",description:d(6465,null)}),e.chatSessionIsEmpty=new x("chatSessionIsEmpty",!0,{type:"boolean",description:d(6466,null)}),e.remoteJobCreating=new x("chatRemoteJobCreating",!1,{type:"boolean",description:d(6467,null)}),e.hasRemoteCodingAgent=new x("hasRemoteCodingAgent",!1,d(6468,null)),e.hasCanDelegateProviders=new x("chatHasCanDelegateProviders",!1,{type:"boolean",description:d(6469,null)}),e.enableRemoteCodingAgentPromptFileOverlay=new x("enableRemoteCodingAgentPromptFileOverlay",!1,d(6470,null)),e.skipChatRequestInProgressMessage=new x("chatSkipRequestInProgressMessage",!1,{type:"boolean",description:d(6471,null)}),e.Setup=ve.Setup,e.Entitlement=ve.Entitlement,e.chatQuotaExceeded=ve.chatQuotaExceeded,e.completionsQuotaExceeded=ve.completionsQuotaExceeded,e.Editing={hasToolConfirmation:new x("chatHasToolConfirmation",!1,{type:"boolean",description:d(6472,null)}),hasElicitationRequest:new x("chatHasElicitationRequest",!1,{type:"boolean",description:d(6473,null)})},e.Tools={toolsCount:new x("toolsCount",0,{type:"number",description:d(6474,null)})},e.Modes={hasCustomChatModes:new x("chatHasCustomAgents",!1,{type:"boolean",description:d(6475,null)}),agentModeDisabledByPolicy:new x("chatAgentModeDisabledByPolicy",!1,{type:"boolean",description:d(6476,null)})},e.panelLocation=new x("chatPanelLocation",void 0,{type:"number",description:d(6477,null)}),e.agentSessionsViewerFocused=new x("agentSessionsViewerFocused",!0,{type:"boolean",description:d(6478,null)}),e.agentSessionsViewerLimited=new x("agentSessionsViewerLimited",void 0,{type:"boolean",description:d(6479,null)}),e.agentSessionsViewerOrientation=new x("agentSessionsViewerOrientation",void 0,{type:"number",description:d(6480,null)}),e.agentSessionsViewerPosition=new x("agentSessionsViewerPosition",void 0,{type:"number",description:d(6481,null)}),e.agentSessionsViewerVisible=new x("agentSessionsViewerVisible",void 0,{type:"boolean",description:d(6482,null)}),e.agentSessionType=new x("chatSessionType","",{type:"string",description:d(6483,null)}),e.agentSessionSection=new x("agentSessionSection","",{type:"string",description:d(6484,null)}),e.isArchivedAgentSession=new x("agentSessionIsArchived",!1,{type:"boolean",description:d(6485,null)}),e.isReadAgentSession=new x("agentSessionIsRead",!1,{type:"boolean",description:d(6486,null)}),e.hasAgentSessionChanges=new x("agentSessionHasChanges",!1,{type:"boolean",description:d(6487,null)}),e.isKatexMathElement=new x("chatIsKatexMathElement",!1,{type:"boolean",description:d(6488,null)})})(gr||(gr={}));var II;(function(e){e.inEditingMode=yt.or(gr.chatModeKind.isEqualTo(lr.Edit),gr.chatModeKind.isEqualTo(lr.Agent)),e.chatSetupTriggerContext=yt.or(gr.Setup.installed.negate(),gr.Entitlement.canSignUp)})(II||(II={}));var oh,DI=U("chatAgentService"),PI=class extends Y{static{this.AGENT_LEADER="@"}constructor(t,i){super(),this.r=t,this.s=i,this.b=new Map,this.f=new P,this.onDidChangeAgents=this.f.event,this.g=new Set,this.n=!1,this.q=new Map,this.w=new Map,this.h=gr.enabled.bindTo(this.r),this.j=gr.extensionParticipantRegistered.bindTo(this.r),this.m=gr.panelParticipantRegistered.bindTo(this.r),this.D(t.onDidChangeContext(r=>{r.affectsSome(this.g)&&this.u()}))}registerAgent(t,i){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const s=this,n=i.slashCommands;i={...i,get slashCommands(){return n.filter(a=>!a.when||s.r.contextMatchesRules(yt.deserialize(a.when)))}};const o={data:i};return this.b.set(t,o),this.t(),this.u(),this.f.fire(void 0),se(()=>{this.b.delete(t),this.t(),this.u(),this.f.fire(void 0)})}t(){this.g.clear();for(const t of this.b.values())if(t.data.when){const i=yt.deserialize(t.data.when);for(const r of i?.keys()||[])this.g.add(r)}}u(){let t=!1,i=!1,r=!1;for(const s of this.getAgents())s.isDefault&&(s.isCore||(t=!0),s.id==="chat.setup"||s.id==="github.copilot.editsAgent"?r=!0:i=!0);this.m.set(i),this.j.set(t),r!==this.n&&(this.n=r,this.f.fire(this.getDefaultAgent(Yt.Chat,lr.Agent)))}registerAgentImplementation(t,i){const r=this.b.get(t);if(!r)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(r.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return r.data.isDefault&&this.h.set(!0),r.impl=i,this.f.fire(new Ig(r.data,i)),se(()=>{r.impl=void 0,this.f.fire(void 0),r.data.isDefault&&this.h.set(Dt.some(this.b.values(),s=>s.data.isDefault))})}registerDynamicAgent(t,i){t.isDynamic=!0;const r={data:t,impl:i};return this.b.set(t.id,r),this.f.fire(new Ig(t,i)),se(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,i){return this.w.set(t,i),{dispose:()=>{this.w.delete(t)}}}async getAgentCompletionItems(t,i,r){return await this.w.get(t)?.(i,r)??[]}updateAgent(t,i){const r=this.b.get(t);if(!r?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);r.data.metadata={...r.data.metadata,...i},this.f.fire(new Ig(r.data,r.impl))}getDefaultAgent(t,i=lr.Ask){return this.y(this.getActivatedAgents().filter(r=>i&&!r.modes.includes(i)?!1:!!r.isDefault&&r.locations.includes(t)))}get hasToolsAgent(){return!!this.s.getValue(on.AgentEnabled)}getContributedDefaultAgent(t){return this.y(this.getAgents().filter(i=>!!i.isDefault&&i.locations.includes(t)))}y(t){return fP(t,i=>!i.isCore)??t.at(-1)}getAgent(t,i=!1){if(!(!this.z(t)&&!i))return this.b.get(t)?.data}z(t){const i=typeof t=="string"?this.b.get(t):t;return!i?.data.when||this.r.contextMatchesRules(yt.deserialize(i.data.when))}getAgentByFullyQualifiedId(t){const i=Dt.find(this.b.values(),r=>L_(r.data)===t)?.data;if(!(i&&!this.z(i.id)))return i}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.z(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.z(t.data.id)).map(t=>new Ig(t.data,t.impl))}getAgentsByName(t){return this.C(this.getAgents().filter(i=>i.name===t))}C(t){const i=t.filter(r=>!r.isCore);return i.length>0?i:t}agentHasDupeName(t){const i=this.getAgent(t);return i?this.getAgentsByName(i.name).filter(r=>r.extensionId.value!==i.extensionId.value).length>0:!1}async invokeAgent(t,i,r,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(i,r,s,n)}setRequestTools(t,i,r){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);s.impl.setRequestTools?.(i,r)}async getFollowups(t,i,r,s,n){const o=this.b.get(t);return o?.impl?.provideFollowups?o.impl.provideFollowups(i,r,s,n):[]}async getChatTitle(t,i,r){const s=this.b.get(t);if(s?.impl?.provideChatTitle)return s.impl.provideChatTitle(i,r)}async getChatSummary(t,i,r){const s=this.b.get(t);if(s?.impl?.provideChatSummary)return s.impl.provideChatSummary(i,r)}registerChatParticipantDetectionProvider(t,i){return this.q.set(t,i),se(()=>{this.q.delete(t)})}hasChatParticipantDetectionProviders(){return this.q.size>0}async detectAgentOrCommand(t,i,r,s){const n=Dt.first(this.q.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{if(h.locations.includes(r.location)){u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const f of h.slashCommands)u.push({participant:h.id,command:f.name,disambiguation:f.disambiguation??[]})}return u},[]),a=await n.provideParticipantDetection(t,i,{...r,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};PI=__decorate([__param(0,to),__param(1,Ki)],PI);var Ig=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionVersion(){return this.b.extensionVersion}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get isCore(){return this.b.isCore}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get modes(){return this.b.modes}get disambiguation(){return this.b.disambiguation}async invoke(e,t,i,r){return this.d.invoke(e,t,i,r)}setRequestTools(e,t){this.d.setRequestTools?.(e,t)}async provideFollowups(e,t,i,r){return this.d.provideFollowups?this.d.provideFollowups(e,t,i,r):[]}toJSON(){return this.b}},XY=U("chatAgentNameService"),AI=class{static{oh=this}static{this.b="chat.participantNameRegistry"}constructor(t,i,r,s){if(this.h=i,this.i=r,this.j=s,this.f=Fi(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(oh.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(oh.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>Qi(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},Be.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const i=await m_(t);if(!i||i.version!==1)throw new Error("Unexpected chat participant registry response.");const r=i.restrictedChatParticipants;this.f.set(r,void 0),this.j.store(oh.b,JSON.stringify(r),-1,1)}getAgentNameRestriction(t){if(t.isCore)return!0;const i=this.m(t.name,t).get(),r=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return i&&r}m(t,i){return this.f.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>Ss(n,n.includes(".")?i.extensionId.value:i.extensionPublisherId)):!0)}dispose(){this.g=!0}};AI=oh=__decorate([__param(0,Fk),__param(1,Y8),__param(2,De),__param(3,Tc)],AI);function L_(e){return`${e.extensionId.value}.${e.id}`}var TI=U("IPromptsService"),ls;(function(e){e.local="local",e.user="user",e.extension="extension"})(ls||(ls={}));var My;(function(e){e.contribution="contribution",e.provider="provider"})(My||(My={}));var Dg,N_=U("chatModeService"),RI=class extends Y{static{Dg=this}static{this.a="chat.customModes"}constructor(t,i,r,s,n,o){super(),this.h=t,this.j=i,this.m=s,this.n=n,this.q=o,this.f=new Map,this.g=new P,this.onDidChangeChatModes=this.g.event,this.b=gr.Modes.hasCustomChatModes.bindTo(r),this.c=gr.Modes.agentModeDisabledByPolicy.bindTo(r),this.z(),this.r(),this.u(!0),this.D(this.h.onDidChangeCustomAgents(()=>{this.u(!0)})),this.D(this.n.onWillSaveState(()=>this.t())),this.D(this.q.onDidChangeConfiguration(c=>{c.affectsConfiguration(on.AgentEnabled)&&(this.z(),this.g.fire())}));let a=this.j.hasToolsAgent;this.D(this.j.onDidChangeAgents(()=>{a!==this.j.hasToolsAgent&&(a=this.j.hasToolsAgent,this.g.fire())}))}r(){try{const t=this.n.getObject(Dg.a,1);t&&this.s(t)}catch(t){this.m.error(t,"Failed to load cached custom agents")}}s(t){if(!Array.isArray(t)){this.m.error("Invalid cached custom modes data: expected array");return}for(const i of t)if(M_(i)&&i.uri)try{const r=y.revive(i.uri),s={uri:r,name:i.name,description:i.description,tools:i.customTools,model:i.model,argumentHint:i.argumentHint,agentInstructions:i.modeInstructions??{content:i.body??"",toolReferences:[]},handOffs:i.handOffs,target:i.target,infer:i.infer,source:U_(i.source)??{storage:ls.local}},n=new LI(s);this.f.set(r.toString(),n)}catch(r){this.m.error(r,"Failed to revive cached custom agent")}this.b.set(this.f.size>0)}t(){try{const t=Array.from(this.f.values());this.n.store(Dg.a,t,1,1)}catch(t){this.m.warn("Failed to save cached custom agents",t)}}async u(t){try{const i=await this.h.getCustomAgents(Be.None),r=new Set;for(const s of i){const n=s.uri.toString();r.add(n);let o=this.f.get(n);o?o.updateData(s):(o=new LI(s),this.f.set(n,o))}for(const[s]of this.f.entries())r.has(s)||this.f.delete(s);this.b.set(this.f.size>0)}catch(i){this.m.error(i,"Failed to load custom agents"),this.f.clear(),this.b.set(!1)}t&&this.g.fire()}getModes(){return{builtin:this.w(),custom:this.y()}}findModeById(t){return this.w().find(i=>i.id===t)??this.f.get(t)}findModeByName(t){return this.w().find(i=>i.name.get()===t)??this.y().find(i=>i.name.get()===t)}w(){const t=[Nn.Ask];return(this.j.hasToolsAgent||this.C())&&t.unshift(Nn.Agent),t.push(Nn.Edit),t}y(){return this.j.hasToolsAgent||this.C()?Array.from(this.f.values()):[]}z(){this.c.set(this.C())}C(){return this.q.inspect(on.AgentEnabled).policyValue===!1}};RI=Dg=__decorate([__param(0,TI),__param(1,DI),__param(2,to),__param(3,De),__param(4,Tc),__param(5,Ki)],RI);function M_(e){if(typeof e!="object"||e===null)return!1;const t=e;return typeof t.id=="string"&&typeof t.name=="string"&&typeof t.kind=="string"&&(t.description===void 0||typeof t.description=="string")&&(t.customTools===void 0||Array.isArray(t.customTools))&&(t.modeInstructions===void 0||typeof t.modeInstructions=="object"&&t.modeInstructions!==null)&&(t.model===void 0||typeof t.model=="string")&&(t.argumentHint===void 0||typeof t.argumentHint=="string")&&(t.handOffs===void 0||Array.isArray(t.handOffs))&&(t.uri===void 0||typeof t.uri=="object"&&t.uri!==null)&&(t.source===void 0||O_(t.source))&&(t.target===void 0||typeof t.target=="string")&&(t.infer===void 0||typeof t.infer=="boolean")}var LI=class{get name(){return this.a}get description(){return this.b}get isBuiltin(){return NI(this)}get customTools(){return this.c}get model(){return this.g}get argumentHint(){return this.h}get modeInstructions(){return this.d}get uri(){return this.f}get label(){return this.name}get handOffs(){return this.i}get source(){return this.l}get target(){return this.j}get infer(){return this.k}constructor(e){this.kind=lr.Agent,this.id=e.uri.toString(),this.a=Fi("name",e.name),this.b=Fi("description",e.description),this.c=Fi("customTools",e.tools),this.g=Fi("model",e.model),this.h=Fi("argumentHint",e.argumentHint),this.i=Fi("handOffs",e.handOffs),this.j=Fi("target",e.target),this.k=Fi("infer",e.infer),this.d=Fi("_modeInstructions",e.agentInstructions),this.f=Fi("uri",e.uri),this.l=e.source}updateData(e){B1(t=>{this.a.set(e.name,t),this.b.set(e.description,t),this.c.set(e.tools,t),this.g.set(e.model,t),this.h.set(e.argumentHint,t),this.i.set(e.handOffs,t),this.j.set(e.target,t),this.k.set(e.infer,t),this.d.set(e.agentInstructions,t),this.f.set(e.uri,t),this.l=e.source})}toJSON(){return{id:this.id,name:this.name.get(),description:this.description.get(),kind:this.kind,customTools:this.customTools.get(),model:this.model.get(),argumentHint:this.argumentHint.get(),modeInstructions:this.modeInstructions.get(),uri:this.uri.get(),handOffs:this.handOffs.get(),source:F_(this.l),target:this.target.get(),infer:this.infer.get()}}};function O_(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.storage===ls.extension?typeof t.extensionId=="string":t.storage===ls.local||t.storage===ls.user}function F_(e){if(e)return e.storage===ls.extension?{storage:ls.extension,extensionId:e.extensionId.value,type:e.type}:{storage:e.storage}}function U_(e){if(e)return e.storage===ls.extension?{storage:ls.extension,extensionId:new qe(e.extensionId),type:e.type??My.contribution}:{storage:e.storage}}var Oy=class{constructor(e,t,i){this.kind=e,this.name=fE(e),this.label=fE(t),this.description=Fi("description",i)}get isBuiltin(){return NI(this)}get id(){return this.kind}get target(){return Fi("target",void 0)}toJSON(){return{id:this.id,name:this.name.get(),description:this.description.get(),kind:this.kind}}},Nn;(function(e){e.Ask=new Oy(lr.Ask,"Ask",d(6497,null)),e.Edit=new Oy(lr.Edit,"Edit",d(6498,null)),e.Agent=new Oy(lr.Agent,"Agent",d(6499,null))})(Nn||(Nn={}));function NI(e){return e.id===Nn.Ask.id||e.id===Nn.Edit.id||e.id===Nn.Agent.id}var MI;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.Assistant=2]="Assistant"})(MI||(MI={}));var OI;(function(e){e[e.Assistant=0]="Assistant",e[e.User=1]="User",e[e.Extension=2]="Extension"})(OI||(OI={}));var FI;(function(e){e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e.WEBP="image/webp",e.BMP="image/bmp"})(FI||(FI={}));var UI;(function(e){e.Low="low",e.High="high"})(UI||(UI={}));var Fy;(function(e){function t(s){return(typeof s.capabilities?.agentMode>"u"||s.capabilities.agentMode)&&!!s.capabilities?.toolCalling}e.suitableForAgentMode=t;function i(s){return`${s.name} (${s.vendor})`}e.asQualifiedName=i;function r(s,n){return n.vendor==="copilot"&&s===n.name?!0:s===i(n)}e.matchesQualifiedName=r})(Fy||(Fy={}));var j_=U("ILanguageModelsService"),jI={type:"object",required:["vendor","displayName"],properties:{vendor:{type:"string",description:d(6523,null)},displayName:{type:"string",description:d(6524,null)},managementCommand:{type:"string",description:d(6525,null)},when:{type:"string",description:d(6526,null)}}},H_=Hk.registerExtensionPoint({extensionPoint:"languageModelChatProviders",jsonSchema:{description:d(6527,null),oneOf:[jI,{type:"array",items:jI}]},activationEventsGenerator:function*(e){for(const t of e)yield`onLanguageModelChatProvider:${t.vendor}`}}),HI=class{constructor(t,i,r,s,n,o){this.j=t,this.k=i,this.l=r,this.n=n,this.o=o,this.a=new ae,this.b=new Map,this.c=new Map,this.d=new Map,this.e=new D6,this.f={},this.i=this.a.add(new P),this.onDidChangeLanguageModels=this.i.event,this.g=gr.languageModelsAreUserSelectable.bindTo(s),this.h=s,this.f=this.l.getObject("chatModelPickerPreferences",0,this.f);const a=()=>{(this.o.entitlement===ke.Business||this.o.entitlement===ke.Enterprise)&&!this.o.isInternal&&(this.f={},this.l.store("chatModelPickerPreferences",this.f,0,0))};a(),this.a.add(this.o.onDidChangeEntitlement(a)),this.a.add(this.onDidChangeLanguageModels(()=>{this.g.set(this.c.size>0&&Array.from(this.c.values()).some(c=>c.isUserSelectable))})),this.a.add(H_.setHandler(c=>{this.d.clear();for(const l of c)for(const u of Dt.wrap(l.value)){if(this.d.has(u.vendor)){l.collector.error(d(6528,null,u.vendor));continue}if(al(u.vendor)){l.collector.error(d(6529,null));continue}if(u.vendor.trim()!==u.vendor){l.collector.error(d(6530,null));continue}this.d.set(u.vendor,u),this.p(u.vendor)&&this.j.activateByEvent(`onLanguageModelChatProvider:${u.vendor}`)}for(const[l,u]of this.b)this.d.has(l)||this.b.delete(l)}))}p(t){return Object.keys(this.f).some(i=>i.startsWith(t))}dispose(){this.a.dispose(),this.b.clear()}updateModelPickerPreference(t,i){const r=this.c.get(t);if(!r){this.k.warn(`[LM] Cannot update model picker preference for unknown model ${t}`);return}this.f[t]=i,i===r.isUserSelectable?(delete this.f[t],this.l.store("chatModelPickerPreferences",this.f,0,0)):r.isUserSelectable!==i&&this.l.store("chatModelPickerPreferences",this.f,0,0),this.i.fire(r.vendor),this.k.trace(`[LM] Updated model picker preference for ${t} to ${i}`)}getVendors(){return Array.from(this.d.values()).filter(t=>{if(!t.when)return!0;const i=yt.deserialize(t.when);return i?this.h.contextMatchesRules(i):!1})}getLanguageModelIds(){return Array.from(this.c.keys())}lookupLanguageModel(t){const i=this.c.get(t);return i&&this.n.getValue("chat.experimentalShowAllModels")?{...i,isUserSelectable:!0}:i&&this.f[t]!==void 0?{...i,isUserSelectable:this.f[t]}:i}q(t){for(const[i,r]of this.c.entries())r.vendor===t&&this.c.delete(i)}async r(t,i){await this.j.activateByEvent(`onLanguageModelChatProvider:${t}`);const r=this.b.get(t);if(!r){this.k.warn(`[LM] No provider registered for vendor ${t}`);return}return this.e.queue(t,async()=>{try{let s=await r.provideLanguageModelChatInfo({silent:i},Be.None);!i&&s.some(n=>n.metadata.isUserSelectable)&&(s=s.filter(n=>n.metadata.isUserSelectable||this.f[n.identifier]===!0)),this.q(t);for(const n of s){if(this.c.has(n.identifier)){this.k.warn(`[LM] Model ${n.identifier} is already registered. Skipping.`);continue}this.c.set(n.identifier,n.metadata)}this.k.trace(`[LM] Resolved language models for vendor ${t}`,s)}catch(s){this.k.error(`[LM] Error resolving language models for vendor ${t}:`,s)}this.i.fire(t)})}async selectLanguageModels(t,i){if(t.vendor)await this.r(t.vendor,!i);else{const s=Array.from(this.d.keys());await Promise.all(s.map(n=>this.r(n,!i)))}const r=[];for(const[s,n]of this.c)(t.vendor===void 0||n.vendor===t.vendor)&&(t.family===void 0||n.family===t.family)&&(t.version===void 0||n.version===t.version)&&(t.id===void 0||n.id===t.id)&&r.push(s);return this.k.trace("[LM] selected language models",t,r),r}registerLanguageModelProvider(t,i){if(this.k.trace("[LM] registering language model provider",t,i),!this.d.has(t))throw new Error(`Chat model provider uses UNKNOWN vendor ${t}.`);if(this.b.has(t))throw new Error(`Chat model provider for vendor ${t} is already registered.`);this.b.set(t,i),this.p(t)&&this.r(t,!0);const r=i.onDidChange(async()=>{await this.r(t,!0)});return se(()=>{this.k.trace("[LM] UNregistered language model provider",t),this.q(t),this.b.delete(t),r.dispose()})}async sendChatRequest(t,i,r,s,n){const o=this.b.get(this.c.get(t)?.vendor||"");if(!o)throw new Error(`Chat provider for model ${t} is not registered.`);return o.sendChatRequest(t,r,i,s,n)}computeTokenLength(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Chat model ${t} could not be found.`);const n=this.b.get(s.vendor);if(!n)throw new Error(`Chat provider for model ${t} is not registered.`);return n.provideTokenCount(t,i,r)}};HI=__decorate([__param(0,uM),__param(1,De),__param(2,Tc),__param(3,to),__param(4,Ki),__param(5,kI)],HI);var W_=U("labelService"),WI;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(WI||(WI={}));var er;(function(e){e.instructions="instructions",e.prompt="prompt",e.agent="agent"})(er||(er={}));var __=".prompt.md",B_=".instructions.md",q_=".chatmode.md",z_=".agent.md",V_="copilot-instructions.md",G_=".github/prompts",J_=".github/instructions",Uy=".github/agents";function Q_(e){const t=Qn(e.path);return t.endsWith("/"+Uy)||t===Uy}function Z_(e){const t=Si(e.path);if(t.endsWith(__))return er.prompt;if(t.endsWith(B_)||t===V_)return er.instructions;if(t.endsWith(q_)||t.endsWith(z_)||t.endsWith(".md")&&Q_(e))return er.agent}function _I(e){return Z_(e)!==void 0}function X_(e){switch(e){case er.instructions:return J_;case er.prompt:return G_;case er.agent:return Uy;default:throw new Error("Unknown prompt type")}}var us;(function(e){e.PROMPT_LOCATIONS_KEY="chat.promptFilesLocations",e.INSTRUCTIONS_LOCATION_KEY="chat.instructionsFilesLocations",e.MODE_LOCATION_KEY="chat.modeFilesLocations",e.PROMPT_FILES_SUGGEST_KEY="chat.promptFilesRecommendations",e.USE_COPILOT_INSTRUCTION_FILES="github.copilot.chat.codeGeneration.useInstructionFiles",e.USE_AGENT_MD="chat.useAgentsMdFile",e.USE_NESTED_AGENT_MD="chat.useNestedAgentsMdFiles",e.USE_AGENT_SKILLS="chat.useAgentSkills";function t(s,n){const o=Y_(n),a=s.getValue(o);if(!(a==null||Array.isArray(a))&&typeof a=="object"){const c={};for(const[l,u]of Object.entries(a)){const h=l.trim(),f=BI(u);f!==void 0&&h&&(c[h]=f)}return c}}e.getLocationsValue=t;function i(s,n){const o=t(s,n),a=X_(n);if(o&&typeof o=="object"){const c=[];o[a]!==!1&&c.push(a);for(const[l,u]of Object.entries(o))u===!1||l===a||c.push(l);return c}return[]}e.promptSourceFolders=i;function r(s,n){const o=s.getValue(e.PROMPT_FILES_SUGGEST_KEY,{resource:n});if(!o||typeof o!="object"||Array.isArray(o))return;const a={};for(const[c,l]of Object.entries(o)){const u=c.trim();if(!u)continue;if(typeof l=="boolean"){a[u]=l;continue}if(typeof l=="string"){const f=l.trim();f&&(a[u]=f);continue}const h=BI(l);h!==void 0&&(a[u]=h)}return Object.keys(a).length>0?a:void 0}e.getPromptFilesRecommendationsValue=r})(us||(us={}));function Y_(e){switch(e){case er.instructions:return us.INSTRUCTIONS_LOCATION_KEY;case er.prompt:return us.PROMPT_LOCATIONS_KEY;case er.agent:return us.MODE_LOCATION_KEY;default:throw new Error("Unknown prompt type")}}function BI(e){if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.trim().toLowerCase();return t==="true"?!0:t==="false"?!1:void 0}}var K_=class qi{static fromTo(t,i){return new qi(t,i)}static addRange(t,i){let r=0;for(;r<i.length&&i[r].endExclusive<t.start;)r++;let s=r;for(;s<i.length&&i[s].start<=t.endExclusive;)s++;if(r===s)i.splice(r,0,t);else{const n=Math.min(t.start,i[r].start),o=Math.max(t.endExclusive,i[s-1].endExclusive);i.splice(r,s-r,new qi(n,o))}}static tryCreate(t,i){if(!(t>i))return new qi(t,i)}static ofLength(t){return new qi(0,t)}static ofStartAndLength(t,i){return new qi(t,t+i)}static emptyAt(t){return new qi(t,t)}constructor(t,i){if(this.start=t,this.endExclusive=i,t>i)throw new qt(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(t){return new qi(this.start+t,this.endExclusive+t)}deltaStart(t){return new qi(this.start+t,this.endExclusive)}deltaEnd(t){return new qi(this.start,this.endExclusive+t)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(t){return this.start===t.start&&this.endExclusive===t.endExclusive}containsRange(t){return this.start<=t.start&&t.endExclusive<=this.endExclusive}contains(t){return this.start<=t&&t<this.endExclusive}join(t){return new qi(Math.min(this.start,t.start),Math.max(this.endExclusive,t.endExclusive))}intersect(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);if(i<=r)return new qi(i,r)}intersectionLength(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return Math.max(0,r-i)}intersects(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return i<r}intersectsOrTouches(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return i<=r}isBefore(t){return this.endExclusive<=t.start}isAfter(t){return this.start>=t.endExclusive}slice(t){return t.slice(this.start,this.endExclusive)}substring(t){return t.substring(this.start,this.endExclusive)}clip(t){if(this.isEmpty)throw new qt(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,t))}clipCyclic(t){if(this.isEmpty)throw new qt(`Invalid clipping range: ${this.toString()}`);return t<this.start?this.endExclusive-(this.start-t)%this.length:t>=this.endExclusive?this.start+(t-this.start)%this.length:t}map(t){const i=[];for(let r=this.start;r<this.endExclusive;r++)i.push(t(r));return i}forEach(t){for(let i=this.start;i<this.endExclusive;i++)t(i)}joinRightTouching(t){if(this.endExclusive!==t.start)throw new qt(`Invalid join: ${this.toString()} and ${t.toString()}`);return new qi(this.start,t.endExclusive)}withMargin(t,i){return i===void 0&&(i=t),new qi(this.start-t,this.endExclusive+i)}};function eB(){return{applyingInstructionsCount:0,referencedInstructionsCount:0,agentInstructionsCount:0,listedInstructionsCount:0,totalInstructionsCount:0}}var jy=class{constructor(t,i,r,s,n,o,a,c,l){this.b=t,this.c=i,this._logService=r,this.d=s,this.e=n,this.f=o,this.g=a,this.h=c,this.j=l,this.a=new wt}async k(t,i){if(this.a.has(t))return this.a.get(t);try{const r=await this.c.parseNew(t,i);return this.a.set(t,r),r}catch(r){this._logService.error(`[InstructionsContextComputer] Failed to parse instruction file: ${t}`,r);return}}async collect(t,i){const r=await this.c.listPromptFiles(er.instructions,i);this._logService.trace(`[InstructionsContextComputer] ${r.length} instruction files available.`);const s=eB(),n=this.m(t);await this.addApplyingInstructions(r,n,t,s,i),await this.r(t,s,i),await this.n(t,s,i);const o=await this.q(r,t,i);o&&(t.add(o),s.listedInstructionsCount++),this.l(s)}l(t){t.totalInstructionsCount=t.agentInstructionsCount+t.referencedInstructionsCount+t.applyingInstructionsCount+t.listedInstructionsCount,this.h.publicLog2("instructionsCollected",t)}async addApplyingInstructions(t,i,r,s,n){for(const{uri:o}of t){const a=await this.k(o,n);if(!a){this._logService.trace(`[InstructionsContextComputer] Unable to read: ${o}`);continue}const c=a.header?.applyTo;if(!c){this._logService.trace(`[InstructionsContextComputer] No 'applyTo' found: ${o}`);continue}if(i.instructions.has(o)){this._logService.trace(`[InstructionsContextComputer] Skipping already processed instruction file: ${o}`);continue}const l=this.o(i.files,c);if(l){this._logService.trace(`[InstructionsContextComputer] Match for ${o} with ${l.pattern}${l.file?` for file ${l.file}`:""}`);const u=l.file?d(6548,null,c,this.d.getUriLabel(l.file,{relative:!0})):d(6547,null);r.add(ud(o,nn.Instruction,u,!0)),s.applyingInstructionsCount++}else this._logService.trace(`[InstructionsContextComputer] No match for ${o} with ${c}`)}}m(t){const i=new Qc,r=new Qc;for(const s of t.asArray())if(U1(s))r.add(s.value);else{const n=F1.toUri(s);n&&i.add(n)}return{files:i,instructions:r}}async n(t,i,r){const s=this.e.getValue(us.USE_COPILOT_INSTRUCTION_FILES),n=this.e.getValue(us.USE_AGENT_MD);if(!s&&!n){this._logService.trace("[InstructionsContextComputer] No agent instructions files added (settings disabled).");return}const o=new Z7;if(s){const a=await this.c.listCopilotInstructionsMDs(r);for(const c of a)o.add(ud(c,nn.Instruction,d(6549,null,us.USE_COPILOT_INSTRUCTION_FILES),!0)),i.agentInstructionsCount++,this._logService.trace(`[InstructionsContextComputer] copilot-instruction.md files added: ${c.toString()}`);await this.r(o,i,r)}if(n){const a=await this.c.listAgentMDs(r,!1);for(const c of a)o.add(ud(c,nn.Instruction,d(6550,null,us.USE_AGENT_MD),!0)),i.agentInstructionsCount++,this._logService.trace(`[InstructionsContextComputer] AGENTS.md files added: ${c.toString()}`)}for(const a of o.asArray())t.add(a)}o(t,i){const r=yd(i,","),s=n=>{if(n=n.trim(),n.length!==0){if(n==="**"||n==="**/*"||n==="*")return{pattern:n};!n.startsWith("/")&&!n.startsWith("**/")&&(n="**/"+n);for(const o of t)if(ka(n,o.path,{ignoreCase:!0}))return{pattern:n,file:o}}};for(const n of r){const o=s(n);if(o)return o}}p(t){if(!this.b)return;const i=this.j.getToolByName(t);if(i&&this.b.get(i))return{tool:i,variable:`#tool:${this.j.getFullReferenceName(i)}`}}async q(t,i,r){const s=this.p("readFile"),n=this.p(md.runSubagent),o=[];if(s){const h=this.e.getValue(us.USE_NESTED_AGENT_MD)?this.c.findAgentMDsInWorkspace(r):Promise.resolve([]);o.push("<instructions>"),o.push("Here is a list of instruction files that contain rules for modifying or creating new code."),o.push("These files are important for ensuring that the code is modified or created correctly."),o.push("Please make sure to follow the rules specified in these files when working with the codebase."),o.push(`If the file is not already available as attachment, use the ${s.variable} tool to acquire it.`),o.push("Make sure to acquire the instructions before making any changes to the code.");let f=!1;for(const{uri:w}of t){const S=await this.k(w,r);if(S){if(o.push("<instruction>"),S.header){const{description:C,applyTo:k}=S.header;C&&o.push(`<description>${C}</description>`),o.push(`<file>${Pg(w)}</file>`),k&&o.push(`<applyTo>${k}</applyTo>`)}else o.push(`<file>${Pg(w)}</file>`);o.push("</instruction>"),f=!0}}const g=await h;for(const w of g)if(w){const S=this.d.getUriLabel(cl(w),{relative:!0}),C=S.trim().length===0?d(6551,null):d(6552,null,S);o.push("<instruction>"),o.push(`<description>${C}</description>`),o.push(`<file>${Pg(w)}</file>`),o.push("</instruction>"),f=!0}f?o.push("</instructions>","",""):o.length=0;const m=await this.c.findAgentSkills(r);if(m&&m.length>0){o.push("<skills>"),o.push("Here is a list of skills that contain domain specific knowledge on a variety of topics."),o.push("Each skill comes with a description of the topic and a file path that contains the detailed instructions."),o.push(`When a user asks you to perform a task that falls within the domain of a skill, use the ${s.variable} tool to acquire the full instructions from the file URI.`);for(const w of m)o.push("<skill>"),o.push(`<name>${w.name}</name>`),w.description&&o.push(`<description>${w.description}</description>`),o.push(`<file>${Pg(w.uri)}</file>`),o.push("</skill>");o.push("</skills>","","")}}if(n&&this.e.getValue(on.SubagentToolCustomAgents)){const h=await this.c.getCustomAgents(r);if(h.length>0){o.push("<agents>"),o.push("Here is a list of agents that can be used when running a subagent."),o.push("Each agent has optionally a description with the agent's purpose and expertise. When asked to run a subagent, choose the most appropriate agent from this list."),o.push(`Use the ${n.variable} tool with the agent name to run the subagent.`);for(const f of h)f.infer!==!1&&(o.push("<agent>"),o.push(`<name>${f.name}</name>`),f.description&&o.push(`<description>${f.description}</description>`),f.argumentHint&&o.push(`<argumentHint>${f.argumentHint}</argumentHint>`),o.push("</agent>"));o.push("</agents>","","")}}if(o.length===0)return;const a=o.join(`
`),c=[],l=u=>{if(u){let h=a.indexOf(u.variable);for(;h>=0;)c.push(fL(u.tool,new K_(h,h+u.variable.length))),h=a.indexOf(u.variable,h+1)}};return l(s),l(n),dL(a,!0,c)}async r(t,i,r){const s=new Qc,n=[];for(const a of t.asArray())U1(a)&&(s.has(a.value)||(n.push(a.value),s.add(a.value)));let o=n.pop();for(;o;){const a=await this.k(o,r);if(a&&a.body){const c=[];for(const l of a.body.fileReferences){const u=a.body.resolveFilePath(l.content);u&&!s.has(u)&&(_I(u)||this.f.getWorkspaceFolder(u)!==void 0)&&(c.push({resource:u}),s.add(u))}if(c.length>0){const l=await this.g.resolveAll(c);for(let u=0;u<l.length;u++){const h=l[u],f=c[u].resource;if(h.success&&h.stat?.isFile){_I(f)&&n.push(f);const g=d(6553,null,Ji(o));t.add(ud(f,nn.InstructionReference,g,!0)),i.referencedInstructionsCount++,this._logService.trace(`[InstructionsContextComputer] ${f.toString()} added, referenced by ${o.toString()}`)}}}}o=n.pop()}}};jy=__decorate([__param(1,TI),__param(2,De),__param(3,W_),__param(4,Ki),__param(5,Zh),__param(6,R1),__param(7,Nl),__param(8,gd)],jy);function Pg(e){return e.scheme===B.file||e.scheme===B.vscodeRemote?e.fsPath:e.toString()}function Ag(e){return{content:[{kind:"text",value:e}]}}var qI="runSubagent",tB=`Launch a new agent to handle complex, multi-step tasks autonomously. This tool is good at researching complex questions, searching for code, and executing multi-step tasks. When you are searching for a keyword or file and are not confident that you will find the right match in the first few tries, use this agent to perform the search for you.

- Agents do not run async or in the background, you will wait for the agent's result.
- When the agent is done, it will return a single message back to you. The result returned by the agent is not visible to the user. To show the user the result, you should send a text message back to the user with a concise summary of the result.
- Each agent invocation is stateless. You will not be able to send additional messages to the agent, nor will the agent be able to communicate with you outside of its final report. Therefore, your prompt should contain a highly detailed task description for the agent to perform autonomously and you should specify exactly what information the agent should return back to you in its final and only message to you.
- The agent's outputs should generally be trusted
- Clearly tell the agent whether you expect it to write code or just to do research (search, file reads, web fetches, etc.), since it is not aware of the user's intent`,Hy=class extends Y{constructor(t,i,r,s,n,o,a,c,l){super(),this.a=t,this.b=i,this.c=r,this.f=s,this.g=n,this.h=o,this.j=a,this.m=c,this.n=l,this.onDidUpdateToolData=Ke.filter(this.m.onDidChangeConfiguration,u=>u.affectsConfiguration(on.SubagentToolCustomAgents))}getToolData(){let t=tB;const i={type:"object",properties:{prompt:{type:"string",description:"A detailed description of the task for the agent to perform"},description:{type:"string",description:"A short (3-5 word) description of the task"}},required:["prompt","description"]};return this.m.getValue(on.SubagentToolCustomAgents)&&(i.properties.agentName={type:"string",description:"Optional name of a specific agent to invoke. If not provided, uses the current agent."},t+=`
- If the user asks for a certain agent, you MUST provide that EXACT agent name (case-sensitive) to invoke that specific agent.`),{id:qI,toolReferenceName:md.runSubagent,icon:vt.fromId(ie.organization.id),displayName:d(6681,null),userDescription:d(6682,null),modelDescription:t,source:Pr.Internal,inputSchema:i}}async invoke(t,i,r,s){const n=t.parameters;if(this.h.debug(`RunSubagentTool: Invoking with prompt: ${n.prompt.substring(0,100)}...`),!t.context)throw new Error("toolInvocationToken is required for this tool");const o=this.b.getSession(t.context.sessionResource);if(!o)throw new Error("Chat model not found for session");const a=o.getRequests().at(-1);try{const c=this.a.getDefaultAgent(Yt.Chat,lr.Agent);if(!c)return Ag("Error: No default agent available");let l=t.modelId,u=t.userSelectedTools,h;if(n.agentName){const k=this.c.findModeByName(n.agentName);if(k){const A=k.model?.get();if(A){const K=this.g.getLanguageModelIds();for(const F of K){const z=this.g.lookupLanguageModel(F);if(z&&Fy.matchesQualifiedName(A,z)){l=F;break}}}const G=k.customTools?.get();if(G){const K=this.f.toToolAndToolSetEnablementMap(G,k.target?.get());u={};for(const[F,z]of K)F instanceof nN||(u[F.id]=z)}const H=k.modeInstructions?.get();h=H&&{name:k.name.get(),content:H.content,toolReferences:this.j.toToolReferences(H.toolReferences),metadata:H.metadata}}else this.h.warn(`RunSubagentTool: Agent '${n.agentName}' not found, using current configuration`)}const f=[];let g=!1;const m=k=>{for(const A of k)A.kind==="prepareToolInvocation"||A.kind==="textEdit"||A.kind==="notebookEdit"||A.kind==="codeblockUri"?(A.kind==="codeblockUri"&&!g&&(g=!0,o.acceptResponseProgress(a,{kind:"markdownContent",content:new tn("```\n"),fromSubagent:!0})),o.acceptResponseProgress(a,A),A.kind==="prepareToolInvocation"&&(f.length=0)):A.kind==="markdownContent"&&(g&&(o.acceptResponseProgress(a,{kind:"markdownContent",content:new tn("\n```\n\n"),fromSubagent:!0}),g=!1),f.push(A.content.value))};u&&(u[qI]=!1,u[Z8]=!1);const w=await this.q(u,s),S={sessionResource:t.context.sessionResource,requestId:t.callId??`subagent-${Date.now()}`,agentId:c.id,message:n.prompt,variables:{variables:w.asArray()},location:Yt.Chat,isSubagent:!0,userSelectedModelId:l,userSelectedTools:u,modeInstructions:h},C=await this.a.invokeAgent(c.id,S,m,[],s);return C.errorDetails?Ag(`Agent error: ${C.errorDetails.message}`):Ag(f.join("")||"Agent completed with no output")}catch(c){const l=`Error invoking subagent: ${c instanceof Error?c.message:"Unknown error"}`;return this.h.error(l,c),Ag(l)}}async prepareToolInvocation(t,i){return{invocationMessage:t.parameters.description}}async q(t,i){let r;if(t){const c=Object.entries(t).filter(([,l])=>l).map(([l])=>l).map(l=>this.f.getTool(l)).filter(l=>!!l).map(l=>this.f.getFullReferenceName(l));c.length>0&&(r=this.f.toToolAndToolSetEnablementMap(c,void 0))}const s=new Z7;return await this.n.createInstance(jy,r).collect(s,i),s}};Hy=__decorate([__param(0,DI),__param(1,f8),__param(2,N_),__param(3,gd),__param(4,j_),__param(5,De),__param(6,gd),__param(7,Ki),__param(8,Kn)],Hy);var zI=class extends Y{static{this.ID="chat.builtinTools"}constructor(t,i,r){super(),this.a=r;const s=i.createInstance(Ey);this.D(t.registerTool(i_,s));const n=this.a.getValue(f_)===!0,o=this.a.getValue(p_)!==!1,a=X8(n,o),c=this.D(i.createInstance(ky,n,o));this.D(t.registerTool(a,c));const l=i.createInstance(n_);this.D(t.registerTool(s_,l));const u=this.D(i.createInstance(Hy)),h=this.D(t.createToolSet(Pr.Internal,"custom-agent",G1.agent,{icon:vt.fromId(ie.agent.id),description:d(6683,null)}));let f,g;const m=()=>{f?.dispose(),g?.dispose();const w=u.getToolData();f=t.registerTool(w,u),g=h.addTool(w)};m(),this.D(u.onDidUpdateToolData(m)),this.D({dispose:()=>{f?.dispose(),g?.dispose()}})}};zI=__decorate([__param(0,gd),__param(1,Kn),__param(2,Ki)],zI);var iB="vscode_fetchWebPage_internal",VI=U("commandService"),Wy=new class{constructor(){this.a=new Map,this.b=new P,this.onDidRegisterCommand=this.b.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if(typeof e=="string"){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const o=[];for(const c of e.metadata.args)o.push(c.constraint);const a=e.handler;e.handler=function(c,...l){return RP(l,o),a(c,...l)}}const{id:i}=e;let r=this.a.get(i);r||(r=new Gs,this.a.set(i,r));const s=r.unshift(e),n=se(()=>{s(),this.a.get(i)?.isEmpty()&&this.a.delete(i)});return this.b.fire(i),wm(n)}registerCommandAlias(e,t){return Wy.registerCommand(e,(i,...r)=>i.get(VI).executeCommand(t,...r))}getCommand(e){const t=this.a.get(e);if(!(!t||t.isEmpty()))return Dt.first(t)}getCommands(){const e=new Map;for(const t of this.a.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};Wy.registerCommand("noop",()=>{});var GI;(function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"})(GI||(GI={}));function JI(e,t){if(typeof e=="number"){if(e===0)return null;const i=(e&65535)>>>0,r=(e&4294901760)>>>16;return r!==0?new Rg([Tg(i,t),Tg(r,t)]):new Rg([Tg(i,t)])}else{const i=[];for(let r=0;r<e.length;r++)i.push(Tg(e[r],t));return new Rg(i)}}function Tg(e,t){const i=!!(e&2048),r=!!(e&256),s=t===2?r:i,n=!!(e&1024),o=!!(e&512),a=t===2?i:r,c=e&255;return new rB(s,n,o,a,c)}var rB=class R3{constructor(t,i,r,s,n){this.ctrlKey=t,this.shiftKey=i,this.altKey=r,this.metaKey=s,this.keyCode=n}equals(t){return t instanceof R3&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){const t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",r=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`K${t}${i}${r}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Rg([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Rg=class{constructor(e){if(e.length===0)throw Ce("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}},QI;(function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"})(QI||(QI={}));var sB=class L3{constructor(){this.c=new Gs,this.d=[],this.e=null}static f(t){if(nl===1){if(t&&t.win)return t.win}else if(nl===2){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const i=L3.f(t),r=new ae;if(i&&i.primary){const s=JI(i.primary,nl);s&&r.add(this.g(s,t.id,t.args,t.weight,0,t.when))}if(i&&Array.isArray(i.secondary))for(let s=0,n=i.secondary.length;s<n;s++){const o=i.secondary[s],a=JI(o,nl);a&&r.add(this.g(a,t.id,t.args,t.weight,-s-1,t.when))}return r}setExtensionKeybindings(t){const i=[];let r=0;for(const s of t)s.keybinding&&(i[r++]={keybinding:s.keybinding,command:s.id,commandArgs:s.args,when:s.when,weight1:s.weight,weight2:0,extensionId:s.extensionId||null,isBuiltinExtension:s.isBuiltinExtension||!1});this.d=i,this.e=null}registerCommandAndKeybindingRule(t){return bm(this.registerKeybindingRule(t),Wy.registerCommand(t))}g(t,i,r,s,n,o){const a=this.c.push({keybinding:t,command:i,commandArgs:r,when:o,weight1:s,weight2:n,extensionId:null,isBuiltinExtension:!1});return this.e=null,se(()=>{a(),this.e=null})}getDefaultKeybindings(){return this.e||(this.e=Array.from(this.c).concat(this.d),this.e.sort(aB)),this.e.slice(0)}},nB=new sB,oB={EditorModes:"platform.keybindingsRegistry"};Nt.add(oB.EditorModes,nB);function aB(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}var Lg;function cB(e){return e.command!==void 0}var ah=class I{static{this.a=new Map}static{this.CommandPalette=new I("CommandPalette")}static{this.DebugBreakpointsContext=new I("DebugBreakpointsContext")}static{this.DebugCallStackContext=new I("DebugCallStackContext")}static{this.DebugConsoleContext=new I("DebugConsoleContext")}static{this.DebugVariablesContext=new I("DebugVariablesContext")}static{this.NotebookVariablesContext=new I("NotebookVariablesContext")}static{this.DebugHoverContext=new I("DebugHoverContext")}static{this.DebugWatchContext=new I("DebugWatchContext")}static{this.DebugToolBar=new I("DebugToolBar")}static{this.DebugToolBarStop=new I("DebugToolBarStop")}static{this.DebugDisassemblyContext=new I("DebugDisassemblyContext")}static{this.DebugCallStackToolbar=new I("DebugCallStackToolbar")}static{this.DebugCreateConfiguration=new I("DebugCreateConfiguration")}static{this.DebugScopesContext=new I("DebugScopesContext")}static{this.EditorContext=new I("EditorContext")}static{this.SimpleEditorContext=new I("SimpleEditorContext")}static{this.EditorContent=new I("EditorContent")}static{this.EditorLineNumberContext=new I("EditorLineNumberContext")}static{this.EditorContextCopy=new I("EditorContextCopy")}static{this.EditorContextPeek=new I("EditorContextPeek")}static{this.EditorContextShare=new I("EditorContextShare")}static{this.EditorTitle=new I("EditorTitle")}static{this.CompactWindowEditorTitle=new I("CompactWindowEditorTitle")}static{this.EditorTitleRun=new I("EditorTitleRun")}static{this.EditorTitleContext=new I("EditorTitleContext")}static{this.EditorTitleContextShare=new I("EditorTitleContextShare")}static{this.EmptyEditorGroup=new I("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new I("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new I("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new I("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new I("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new I("EditorActionsPositionSubmenu")}static{this.EditorSplitMoveSubmenu=new I("EditorSplitMoveSubmenu")}static{this.ExplorerContext=new I("ExplorerContext")}static{this.ExplorerContextShare=new I("ExplorerContextShare")}static{this.ExtensionContext=new I("ExtensionContext")}static{this.ExtensionEditorContextMenu=new I("ExtensionEditorContextMenu")}static{this.GlobalActivity=new I("GlobalActivity")}static{this.CommandCenter=new I("CommandCenter")}static{this.CommandCenterCenter=new I("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new I("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new I("LayoutControlMenu")}static{this.MenubarMainMenu=new I("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new I("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new I("MenubarDebugMenu")}static{this.MenubarEditMenu=new I("MenubarEditMenu")}static{this.MenubarCopy=new I("MenubarCopy")}static{this.MenubarFileMenu=new I("MenubarFileMenu")}static{this.MenubarGoMenu=new I("MenubarGoMenu")}static{this.MenubarHelpMenu=new I("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new I("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new I("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new I("PanelAlignmentMenu")}static{this.PanelPositionMenu=new I("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new I("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new I("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new I("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new I("MenubarSelectionMenu")}static{this.MenubarShare=new I("MenubarShare")}static{this.MenubarSwitchEditorMenu=new I("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new I("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new I("MenubarTerminalMenu")}static{this.MenubarTerminalSuggestStatusMenu=new I("MenubarTerminalSuggestStatusMenu")}static{this.MenubarViewMenu=new I("MenubarViewMenu")}static{this.MenubarHomeMenu=new I("MenubarHomeMenu")}static{this.OpenEditorsContext=new I("OpenEditorsContext")}static{this.OpenEditorsContextShare=new I("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new I("ProblemsPanelContext")}static{this.SCMInputBox=new I("SCMInputBox")}static{this.SCMChangeContext=new I("SCMChangeContext")}static{this.SCMResourceContext=new I("SCMResourceContext")}static{this.SCMResourceContextShare=new I("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new I("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new I("SCMResourceGroupContext")}static{this.SCMSourceControl=new I("SCMSourceControl")}static{this.SCMSourceControlInline=new I("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new I("SCMSourceControlTitle")}static{this.SCMHistoryTitle=new I("SCMHistoryTitle")}static{this.SCMHistoryItemContext=new I("SCMHistoryItemContext")}static{this.SCMHistoryItemChangeContext=new I("SCMHistoryItemChangeContext")}static{this.SCMHistoryItemRefContext=new I("SCMHistoryItemRefContext")}static{this.SCMArtifactGroupContext=new I("SCMArtifactGroupContext")}static{this.SCMArtifactContext=new I("SCMArtifactContext")}static{this.SCMQuickDiffDecorations=new I("SCMQuickDiffDecorations")}static{this.SCMTitle=new I("SCMTitle")}static{this.SearchContext=new I("SearchContext")}static{this.SearchActionMenu=new I("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new I("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new I("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new I("StickyScrollContext")}static{this.TestItem=new I("TestItem")}static{this.TestItemGutter=new I("TestItemGutter")}static{this.TestProfilesContext=new I("TestProfilesContext")}static{this.TestMessageContext=new I("TestMessageContext")}static{this.TestMessageContent=new I("TestMessageContent")}static{this.TestPeekElement=new I("TestPeekElement")}static{this.TestPeekTitle=new I("TestPeekTitle")}static{this.TestCallStack=new I("TestCallStack")}static{this.TestCoverageFilterItem=new I("TestCoverageFilterItem")}static{this.TouchBarContext=new I("TouchBarContext")}static{this.TitleBar=new I("TitleBar")}static{this.TitleBarContext=new I("TitleBarContext")}static{this.TitleBarTitleContext=new I("TitleBarTitleContext")}static{this.TunnelContext=new I("TunnelContext")}static{this.TunnelPrivacy=new I("TunnelPrivacy")}static{this.TunnelProtocol=new I("TunnelProtocol")}static{this.TunnelPortInline=new I("TunnelInline")}static{this.TunnelTitle=new I("TunnelTitle")}static{this.TunnelLocalAddressInline=new I("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new I("TunnelOriginInline")}static{this.ViewItemContext=new I("ViewItemContext")}static{this.ViewContainerTitle=new I("ViewContainerTitle")}static{this.ViewContainerTitleContext=new I("ViewContainerTitleContext")}static{this.ViewTitle=new I("ViewTitle")}static{this.ViewTitleContext=new I("ViewTitleContext")}static{this.CommentEditorActions=new I("CommentEditorActions")}static{this.CommentThreadTitle=new I("CommentThreadTitle")}static{this.CommentThreadActions=new I("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new I("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new I("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new I("CommentThreadCommentContext")}static{this.CommentTitle=new I("CommentTitle")}static{this.CommentActions=new I("CommentActions")}static{this.CommentsViewThreadActions=new I("CommentsViewThreadActions")}static{this.InteractiveToolbar=new I("InteractiveToolbar")}static{this.InteractiveCellTitle=new I("InteractiveCellTitle")}static{this.InteractiveCellDelete=new I("InteractiveCellDelete")}static{this.InteractiveCellExecute=new I("InteractiveCellExecute")}static{this.InteractiveInputExecute=new I("InteractiveInputExecute")}static{this.InteractiveInputConfig=new I("InteractiveInputConfig")}static{this.ReplInputExecute=new I("ReplInputExecute")}static{this.IssueReporter=new I("IssueReporter")}static{this.NotebookToolbar=new I("NotebookToolbar")}static{this.NotebookToolbarContext=new I("NotebookToolbarContext")}static{this.NotebookStickyScrollContext=new I("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new I("NotebookCellTitle")}static{this.NotebookCellDelete=new I("NotebookCellDelete")}static{this.NotebookCellInsert=new I("NotebookCellInsert")}static{this.NotebookCellBetween=new I("NotebookCellBetween")}static{this.NotebookCellListTop=new I("NotebookCellTop")}static{this.NotebookCellExecute=new I("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new I("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new I("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new I("NotebookDiffCellInputTitle")}static{this.NotebookDiffDocumentMetadata=new I("NotebookDiffDocumentMetadata")}static{this.NotebookDiffCellMetadataTitle=new I("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new I("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new I("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new I("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new I("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new I("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new I("NotebookKernelSource")}static{this.BulkEditTitle=new I("BulkEditTitle")}static{this.BulkEditContext=new I("BulkEditContext")}static{this.TimelineItemContext=new I("TimelineItemContext")}static{this.TimelineTitle=new I("TimelineTitle")}static{this.TimelineTitleContext=new I("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new I("TimelineFilterSubMenu")}static{this.AccountsContext=new I("AccountsContext")}static{this.SidebarTitle=new I("SidebarTitle")}static{this.PanelTitle=new I("PanelTitle")}static{this.AuxiliaryBarTitle=new I("AuxiliaryBarTitle")}static{this.TerminalInstanceContext=new I("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new I("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new I("TerminalNewDropdownContext")}static{this.TerminalTabContext=new I("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new I("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new I("TerminalStickyScrollContext")}static{this.WebviewContext=new I("WebviewContext")}static{this.InlineCompletionsActions=new I("InlineCompletionsActions")}static{this.InlineEditsActions=new I("InlineEditsActions")}static{this.NewFile=new I("NewFile")}static{this.MergeInput1Toolbar=new I("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new I("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new I("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new I("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new I("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new I("InlineEditToolbar")}static{this.ChatContext=new I("ChatContext")}static{this.ChatCodeBlock=new I("ChatCodeblock")}static{this.ChatCompareBlock=new I("ChatCompareBlock")}static{this.ChatMessageTitle=new I("ChatMessageTitle")}static{this.ChatWelcomeContext=new I("ChatWelcomeContext")}static{this.ChatMessageFooter=new I("ChatMessageFooter")}static{this.ChatExecute=new I("ChatExecute")}static{this.ChatInput=new I("ChatInput")}static{this.ChatInputSide=new I("ChatInputSide")}static{this.ChatModePicker=new I("ChatModePicker")}static{this.ChatEditingWidgetToolbar=new I("ChatEditingWidgetToolbar")}static{this.ChatEditingSessionChangesToolbar=new I("ChatEditingSessionChangesToolbar")}static{this.ChatEditingEditorContent=new I("ChatEditingEditorContent")}static{this.ChatEditingEditorHunk=new I("ChatEditingEditorHunk")}static{this.ChatEditingDeletedNotebookCell=new I("ChatEditingDeletedNotebookCell")}static{this.ChatInputAttachmentToolbar=new I("ChatInputAttachmentToolbar")}static{this.ChatEditingWidgetModifiedFilesToolbar=new I("ChatEditingWidgetModifiedFilesToolbar")}static{this.ChatInputResourceAttachmentContext=new I("ChatInputResourceAttachmentContext")}static{this.ChatInputSymbolAttachmentContext=new I("ChatInputSymbolAttachmentContext")}static{this.ChatInlineResourceAnchorContext=new I("ChatInlineResourceAnchorContext")}static{this.ChatInlineSymbolAnchorContext=new I("ChatInlineSymbolAnchorContext")}static{this.ChatMessageCheckpoint=new I("ChatMessageCheckpoint")}static{this.ChatMessageRestoreCheckpoint=new I("ChatMessageRestoreCheckpoint")}static{this.ChatNewMenu=new I("ChatNewMenu")}static{this.ChatEditingCodeBlockContext=new I("ChatEditingCodeBlockContext")}static{this.ChatTitleBarMenu=new I("ChatTitleBarMenu")}static{this.ChatAttachmentsContext=new I("ChatAttachmentsContext")}static{this.ChatToolOutputResourceToolbar=new I("ChatToolOutputResourceToolbar")}static{this.ChatTextEditorMenu=new I("ChatTextEditorMenu")}static{this.ChatToolOutputResourceContext=new I("ChatToolOutputResourceContext")}static{this.ChatMultiDiffContext=new I("ChatMultiDiffContext")}static{this.ChatConfirmationMenu=new I("ChatConfirmationMenu")}static{this.ChatEditorInlineExecute=new I("ChatEditorInputExecute")}static{this.ChatEditorInlineInputSide=new I("ChatEditorInputSide")}static{this.AccessibleView=new I("AccessibleView")}static{this.MultiDiffEditorContent=new I("MultiDiffEditorContent")}static{this.MultiDiffEditorFileToolbar=new I("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new I("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new I("DiffEditorSelectionToolbar")}static{this.AgentSessionsViewerFilterSubMenu=new I("AgentSessionsViewerFilterSubMenu")}static{this.AgentSessionsContext=new I("AgentSessionsContext")}static{this.AgentSessionsCreateSubMenu=new I("AgentSessionsCreateSubMenu")}static{this.AgentSessionsToolbar=new I("AgentSessionsToolbar")}static{this.AgentSessionItemToolbar=new I("AgentSessionItemToolbar")}static{this.AgentSessionSectionToolbar=new I("AgentSessionSectionToolbar")}static{this.ChatViewSessionTitleNavigationToolbar=new I("ChatViewSessionTitleNavigationToolbar")}static{this.ChatViewSessionTitleToolbar=new I("ChatViewSessionTitleToolbar")}static for(t){return I.a.get(t)??new I(t)}constructor(t){if(I.a.has(t))throw new TypeError(`MenuId with identifier '${t}' already exists. Use MenuId.for(ident) or a unique identifier`);I.a.set(t,this),this.id=t}},sK=U("menuService"),ch=class W4{static{this.a=new Map}static for(t){let i=this.a.get(t);return i||(i=new W4(t),this.a.set(t,i)),i}static merge(t){const i=new Set;for(const r of t)r instanceof W4&&i.add(r.b);return i}constructor(t){this.b=t,this.has=i=>i===t}},nK=new class{constructor(){this.a=new Map,this.b=new Map,this.c=new uA({merge:ch.merge}),this.onDidChangeMenu=this.c.event}addCommand(e){return this.a.set(e.id,e),this.c.fire(ch.for(ah.CommandPalette)),wm(se(()=>{this.a.delete(e.id)&&this.c.fire(ch.for(ah.CommandPalette))}))}getCommand(e){return this.a.get(e)}getCommands(){const e=new Map;return this.a.forEach((t,i)=>e.set(i,t)),e}appendMenuItem(e,t){let i=this.b.get(e);i||(i=new Gs,this.b.set(e,i));const r=i.push(t);return this.c.fire(ch.for(e)),wm(se(()=>{r(),this.c.fire(ch.for(e))}))}appendMenuItems(e){const t=new ae;for(const{id:i,item:r}of e)t.add(this.appendMenuItem(i,r));return t}getMenuItems(e){let t;return this.b.has(e)?t=[...this.b.get(e)]:t=[],e===ah.CommandPalette&&this.d(t),t}d(e){const t=new Set;for(const i of e)cB(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this.a.forEach((i,r)=>{t.has(r)||e.push({command:i})})}},ZI=Lg=class{static label(t,i){return i?.renderShortTitle&&t.shortTitle?typeof t.shortTitle=="string"?t.shortTitle:t.shortTitle.value:typeof t.title=="string"?t.title:t.title.value}constructor(t,i,r,s,n,o,a){this.hideActions=s,this.menuKeybinding=n,this.b=a,this.id=t.id,this.label=Lg.label(t,r),this.tooltip=(typeof t.tooltip=="string"?t.tooltip:t.tooltip?.value)??"",this.enabled=!t.precondition||o.contextMatchesRules(t.precondition),this.checked=void 0;let c;if(t.toggled){const l=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=o.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),this.checked&&vt.isThemeIcon(l.icon)&&(c=l.icon),this.checked&&l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}c||(c=vt.isThemeIcon(t.icon)?t.icon:void 0),this.item=t,this.alt=i?new Lg(i,void 0,r,s,void 0,o,a):void 0,this.a=r,this.class=c&&vt.asClassName(c)}run(...t){let i=[];return this.a?.arg&&(i=[...i,this.a.arg]),this.a?.shouldForwardArgs&&(i=[...i,...t]),this.b.executeCommand(this.id,...i)}};ZI=Lg=__decorate([__param(5,to),__param(6,VI)],ZI);var aK=Th(8635,"Extensions"),XI;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(XI||(XI={}));var YI;(function(e){e.ReloadWindow="reloadWindow",e.RestartExtensions="restartExtensions",e.DownloadUpdate="downloadUpdate",e.ApplyUpdate="applyUpdate",e.QuitAndInstall="quitAndInstall"})(YI||(YI={}));var KI=U("extensionsWorkbenchService"),eD;(function(e){e.Readme="readme",e.Features="features",e.Changelog="changelog",e.Dependencies="dependencies",e.ExtensionPack="extensionPack"})(eD||(eD={}));var tD=class extends Y{constructor(t,i){super(),this.a=t,this.D(i.onChange(this.b,this))}set extension(t){this.a.forEach(i=>i.extension=t)}b(t){for(const i of this.a)t&&i.extension?oM(i.extension.identifier,t.identifier)&&(i.extension.server&&t.server&&i.extension.server!==t.server?i.updateWhenCounterExtensionChanges&&i.update():i.extension=t):i.update()}};tD=__decorate([__param(1,KI)],tD);var lK=new x("defaultExtensionViews",!0),uK=new x("hasOutdatedExtensions",!1),hK=new x("hasGallery",!1),dK=new x("extensionsGalleryStatus","unavailable"),fK=new x("extensionResultListFocused ",!0),pK=new x("searchMcpServers",!1),gK=new ah("extensionsSearchActionsMenu"),mK=new ah("extensionsFilterSubMenu"),iD="vscode_searchExtensions_internal",vK={id:iD,toolReferenceName:"extensions",legacyToolReferenceFullNames:["extensions"],icon:vt.fromId(ie.extensions.id),displayName:d(8655,null),modelDescription:"This is a tool for browsing Visual Studio Code Extensions Marketplace. It allows the model to search for extensions and retrieve detailed information about them. The model should use this tool whenever it needs to discover extensions or resolve information about known ones. To use the tool, the model has to provide the category of the extensions, relevant search keywords, or known extension IDs. Note that search results may include false positives, so reviewing and filtering is recommended.",userDescription:d(8656,null),source:Pr.Internal,inputSchema:{type:"object",properties:{category:{type:"string",description:"The category of extensions to search for",enum:z6},keywords:{type:"array",items:{type:"string"},description:"The keywords to search for"},ids:{type:"array",items:{type:"string"},description:"The ids of the extensions to search for"}}}},rD=class{constructor(t){this.a=t}async invoke(t,i,r,s){const n=t.parameters;if(!n.keywords?.length&&!n.category&&!n.ids?.length)return{content:[{kind:"text",value:d(8657,null)}]};const o=new Map,a=u=>{for(const h of u)h.deprecationInfo||h.isMalicious||o.set(h.identifier.id.toLowerCase(),{id:h.identifier.id,name:h.displayName,description:h.description,installed:h.state===1,installCount:h.installCount??0,rating:h.rating??0,categories:h.categories??[],tags:h.gallery?.tags??[]})},c=async u=>{const h=await this.a.queryGallery({text:u,pageSize:10,sortBy:"InstallCount"},s);h.firstPage.length&&a(h.firstPage)};if(n.ids?.length){const u=await this.a.getExtensions(n.ids.map(h=>({id:h})),s);a(u)}if(n.keywords?.length)for(const u of n.keywords??[])if(u==="featured")await c("featured");else{let h=n.category?`category:"${n.category}"`:"";h=u?`${h} ${u}`.trim():h,await c(h)}else await c(`category:"${n.category}"`);const l=Array.from(o.values());return{content:[{kind:"text",value:`Here are the list of extensions:
${JSON.stringify(l)}
. Important: Use the following format to display extensions to the user because there is a renderer available to parse these extensions in this format and display them with all details. So, do not describe about the extensions to the user.
\`\`\`vscode-extensions
extensionId1,extensionId2
\`\`\`
.`}],toolResultDetails:{input:JSON.stringify(n),output:[{type:"embed",isText:!0,value:JSON.stringify(l.map(u=>u.id))}]}}}};rD=__decorate([__param(0,KI)],rD);var sD=class{constructor(e){this.b=new It(()=>{const t=this;return Object.freeze({get name(){return t.a.id},get description(){return t.a.modelDescription},get inputSchema(){return t.a.inputSchema},get tags(){return t.a.tags??[]},get source(){}})}),this.c=new It(()=>{const t=this,i=fw.to(t.a.source);return Object.freeze({get name(){return t.a.id},get description(){return t.a.modelDescription},get inputSchema(){return t.a.inputSchema},get tags(){return t.a.tags??[]},get source(){return i}})}),this.a=e}update(e){this.a=e}get data(){return this.a}get apiObject(){return this.b.value}get apiObjectWithChatParticipantAdditions(){return this.c.value}},lB=class{constructor(e,t){this.e=t,this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(V.MainThreadLanguageModelTools),this.b.$getTools().then(i=>{for(const r of i)this.d.set(r.id,new sD(Xt(r)))})}async $countTokensForInvocation(e,t,i){const r=this.c.get(e);if(!r)throw new Error(`Tool invocation call ${e} not found`);return await r(t,i)}async invokeTool(e,t,i,r){const s=ci();i.tokenizationOptions&&this.c.set(s,i.tokenizationOptions.countTokens);try{if(i.toolInvocationToken&&!sN(i.toolInvocationToken))throw new Error("Invalid tool invocation token");if((t===Sy||t===B8)&&!Je(e,"chatParticipantPrivate"))throw new Error(`Invalid tool: ${t}`);const n=await this.b.$invokeTool({toolId:t,callId:s,parameters:i.input,tokenBudget:i.tokenizationOptions?.tokenBudget,context:i.toolInvocationToken,chatRequestId:Je(e,"chatParticipantPrivate")?i.chatRequestId:void 0,chatInteractionId:Je(e,"chatParticipantPrivate")?i.chatInteractionId:void 0,fromSubAgent:Je(e,"chatParticipantPrivate")?i.fromSubAgent:void 0},r),o=n instanceof ei?n.value:n;return Ip.to(Xt(o))}finally{this.c.delete(s)}}$onDidChangeTools(e){const t=new Set(this.a.keys());for(const i of e){t.delete(i.id);const r=this.d.get(i.id);r?r.update(i):this.d.set(i.id,new sD(Xt(i)))}for(const i of t)this.d.delete(i)}getTools(e){const t=Je(e,"chatParticipantPrivate");return Array.from(this.d.values()).map(i=>t?i.apiObjectWithChatParticipantAdditions:i.apiObject).filter(i=>{switch(i.name){case Sy:case B8:case iB:case iD:return Je(e,"chatParticipantPrivate");default:return!0}})}async $invokeTool(e,t){const i=this.a.get(e.toolId);if(!i)throw new Error(`Unknown tool ${e.toolId}`);const r={input:e.parameters,toolInvocationToken:Xt(e.context)};Je(i.extension,"chatParticipantPrivate")&&(r.chatRequestId=e.chatRequestId,r.chatInteractionId=e.chatInteractionId,r.chatSessionId=e.context?.sessionId,r.fromSubAgent=e.fromSubAgent),Je(i.extension,"chatParticipantAdditions")&&e.modelId&&(r.model=await this.f(e.modelId,i.extension)),e.tokenBudget!==void 0&&(r.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((o,a=Be.None)=>this.b.$countTokensForInvocation(e.callId,o,a))});let s;if(Je(i.extension,"toolProgress")){let o;s={report:a=>{a.increment!==void 0&&(o=(o??0)+a.increment),this.b.$acceptToolProgress(e.callId,{message:ue.fromStrict(a.message),progress:o===void 0?void 0:o/100})}}}const n=await OT(Promise.resolve(i.tool.invoke(r,t,s)),t);if(!n)throw new oi;return Ip.from(n,i.extension)}async f(e,t){let i;if(e&&(i=await this.e.getLanguageModelByIdentifier(t,e)),!i&&(i=await this.e.getDefaultLanguageModel(t),!i))throw new Error("Language model unavailable");return i}async $prepareToolInvocation(e,t,i){const r=this.a.get(e);if(!r)throw new Error(`Unknown tool ${e}`);const s={input:t.parameters,chatRequestId:t.chatRequestId,chatSessionId:t.chatSessionId,chatInteractionId:t.chatInteractionId};if(r.tool.prepareInvocation){const n=await r.tool.prepareInvocation(s,i);return n?((n.pastTenseMessage||n.presentation)&&T(r.extension,"chatParticipantPrivate"),{confirmationMessages:n.confirmationMessages?{title:typeof n.confirmationMessages.title=="string"?n.confirmationMessages.title:ue.from(n.confirmationMessages.title),message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:ue.from(n.confirmationMessages.message)}:void 0,invocationMessage:ue.fromStrict(n.invocationMessage),pastTenseMessage:ue.fromStrict(n.pastTenseMessage),presentation:n.presentation}):void 0}}registerTool(e,t,i){return this.a.set(t,{extension:e,tool:i}),this.b.$registerTool(t),se(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},uB=class{constructor(e,t,i,r){this.c=t,this.d=i,this.e=r,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(V.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const i=this.c.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,r=ze.from(t),s=await this.a.$tokensAtPosition(e.uri,r),n={type:yn.Other,range:e.getWordRangeAtPosition(t)??new Se(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:O.to(s.range),type:D0.to(s.type)};return!o.range.contains(t)||i!==e.version?n:o}createLanguageStatusItem(e,t,i){const r=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:Ra.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new ae,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=BT(()=>{l.clear(),this.a.$setLanguageStatus(r,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:Lo.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===Ra.Error?St.Error:a.severity===Ra.Warning?St.Warning:St.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(r),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(f){a.name=f,u()},get selector(){return a.selector},set selector(f){a.selector=f,u()},get text(){return a.text},set text(f){a.text=f,u()},set text2(f){T(e,"languageStatusText"),a.text=f,u()},get text2(){return T(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(f){a.detail=f,u()},get severity(){return a.severity},set severity(f){a.severity=f,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(f){a.accessibilityInformation=f,u()},get command(){return a.command},set command(f){a.command=f,u()},get busy(){return a.busy},set busy(f){a.busy=f,u()}};return u(),h}};function hB(e){return e&&e.title}var _y=class{constructor(t,i){this.b=i,this.a=t.getProxy(V.MainThreadMessageService)}showMessage(t,i,r,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||hB(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&T(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:f,isCloseAffordance:g}=h;c.push({title:f,isCloseAffordance:!!g,handle:u}),g&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(i,r,o,c).then(u=>{if(typeof u=="number")return a[u]})}};_y=__decorate([__param(1,De)],_y);var By=class{constructor(e,t,i,r){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=r}asApiEvent(){return{range:new Yr(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},qy=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1,encoding:"utf8"}}constructor(e,t,i){this.notebook=e,this.h=t,this.j=i,this.handle=i.handle,this.uri=y.revive(i.uri),this.cellKind=i.cellKind,this.a=i.outputs.map(En.to),this.e=i.internalMetadata??{},this.b=Object.freeze(i.metadata??{}),this.d=Object.freeze(ac.to(i.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:yu.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(r){e.g=r},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(i)}return this.f}setOutputs(e){this.a=e.map(En.to)}setOutputItems(e,t,i){const r=i.map(lc.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...r),s.items.length>1&&s.items.every(n=>s7(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=PN(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(ac.to(e))}setMime(e){}},dB=class N3{static{this.a=0}constructor(t,i,r,s,n){this.k=t,this.l=i,this.m=r,this.uri=s,this.handle=N3.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,i={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===B.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(r){return r=t.n(r),t.b[r].apiCell},getCells(r){return(r?t.p(r):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(i)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,i,r){this.g=t.versionId,this.h=i,this.acceptDocumentPropertiesChanged({metadata:r});const s={notebook:this.apiNotebook,metadata:r,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===Ar.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===Ar.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===Ar.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Ar.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Ar.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===Ar.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===Ar.ChangeCellMime?this.w(a.index,a.mime):a.kind===Ar.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===Ar.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let i=t.start|0,r=t.end|0;return i<0&&(i=0),r>this.b.length&&(r=this.b.length),t.with({start:i,end:r})}p(t){t=this.o(t);const i=[];for(let r=t.start;r<t.end;r++)i.push(this.b[r]);return i}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,i,r){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(f=>{const g=new qy(this,this.l,f);return i||n.push(qy.asModelAddData(f)),g}),u=new By(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const f of h)o.push(f.uri),u.deletedItems.push(f.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),r)for(const a of s)r.push(a.asApiEvent())}s(t,i,r,s){const n=this.b.splice(t,i);this.b.splice(r,0,...n);const o=[new By(t,i,n.map(a=>a.apiCell),[]),new By(r,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,i){this.b[t].setOutputs(i)}u(t,i,r,s){this.b[t].setOutputItems(i,r,s)}v(t,i){const r=this.b[t];r.apiCell.document.languageId!==i&&this.m.$acceptModelLanguageChanged(r.uri,i)}w(t,i){const r=this.b[t];r.apiCell.mime=i}x(t,i){this.b[t].setMetadata(i)}y(t,i){this.b[t].setInternalMetadata(i)}getCellFromApiCell(t){return this.b.find(i=>i.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(i=>i.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},zy=class M3{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,i,r,s,n,o,a){this.id=t,this.c=i,this.notebookData=r,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(i){this.selections=[i]},get selections(){return t.e},set selections(i){if(!Array.isArray(i)||!i.every(Yr.isNotebookRange))throw Ce("selections");t.e=i.length===0?[new Yr(0,0)]:i,t.h(t.e)},get visibleRanges(){return t.d},revealRange(i,r){t.c.$tryRevealRange(t.id,ns.from(i),r??xf.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},M3.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(ns.from))}_acceptViewColumn(t){this.f=t}},Vy=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ne)return Gy(this.right);let e=this;for(;e.parent!==ne&&e.parent.left!==e;)e=e.parent;return e.parent===ne?ne:e.parent}prev(){if(this.left!==ne)return oD(this.left);let e=this;for(;e.parent!==ne&&e.parent.right!==e;)e=e.parent;return e.parent===ne?ne:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},nD;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(nD||(nD={}));var ne=new Vy(null,0);ne.parent=ne,ne.left=ne,ne.right=ne,ne.color=0;function Gy(e){for(;e.left!==ne;)e=e.left;return e}function oD(e){for(;e.right!==ne;)e=e.right;return e}function Jy(e){return e===ne?0:e.size_left+e.piece.length+Jy(e.right)}function Qy(e){return e===ne?0:e.lf_left+e.piece.lineFeedCnt+Qy(e.right)}function Zy(){ne.parent=ne}function lh(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==ne&&(i.left.parent=t),i.parent=t.parent,t.parent===ne?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function uh(e,t){const i=t.left;t.left=i.right,i.right!==ne&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===ne?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function Ng(e,t){let i,r;if(t.left===ne?(r=t,i=r.right):t.right===ne?(r=t,i=r.left):(r=Gy(t.right),i=r.right),r===e.root){e.root=i,i.color=0,t.detach(),Zy(),e.root.parent=ne;return}const s=r.color===1;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===t?(i.parent=r.parent,hh(e,i)):(r.parent===t?i.parent=r:i.parent=r.parent,hh(e,i),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==ne&&(r.left.parent=r),r.right!==ne&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,hh(e,r)),t.detach(),i.parent.left===i){const o=Jy(i),a=Qy(i);if(o!==i.parent.size_left||a!==i.parent.lf_left){const c=o-i.parent.size_left,l=a-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=a,Os(e,i.parent,c,l)}}if(hh(e,i.parent),s){Zy();return}let n;for(;i!==e.root&&i.color===0;)i===i.parent.left?(n=i.parent.right,n.color===1&&(n.color=0,i.parent.color=1,lh(e,i.parent),n=i.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.right.color===0&&(n.left.color=0,n.color=1,uh(e,n),n=i.parent.right),n.color=i.parent.color,i.parent.color=0,n.right.color=0,lh(e,i.parent),i=e.root)):(n=i.parent.left,n.color===1&&(n.color=0,i.parent.color=1,uh(e,i.parent),n=i.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.left.color===0&&(n.right.color=0,n.color=1,lh(e,n),n=i.parent.left),n.color=i.parent.color,i.parent.color=0,n.left.color=0,uh(e,i.parent),i=e.root));i.color=0,Zy()}function aD(e,t){for(hh(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,lh(e,t)),t.parent.color=0,t.parent.parent.color=1,uh(e,t.parent.parent))}else{const i=t.parent.parent.left;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,uh(e,t)),t.parent.color=0,t.parent.parent.color=1,lh(e,t.parent.parent))}e.root.color=0}function Os(e,t,i,r){for(;t!==e.root&&t!==ne;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}function hh(e,t){let i=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,i=Jy(t.left)-t.size_left,r=Qy(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=r;t!==e.root&&(i!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}}var Fs=65535;function cD(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var fB=class{constructor(e,t,i,r,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=s}};function Us(e,t=!0){const i=[0];let r=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(i[r++]=s+2,s++):i[r++]=s+1:o===10&&(i[r++]=s+1)}return t?cD(i):i}function pB(e,t){e.length=0,e[0]=0;let i=1,r=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[i++]=c+2,c++):(r++,e[i++]=c+1):u===10?(s++,e[i++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new fB(cD(e),r,s,n,o);return e.length=0,a}var Ti=class{constructor(e,t,i,r,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=s}},Jo=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},gB=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==ne&&e.iterate(e.root,i=>(i!==ne&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},mB=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const i=this.b;for(let r=0;r<i.length;r++){const s=i[r];if(s.node.parent===null||s.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const s of i)s!==null&&r.push(s);this.b=r}}},vB=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this.a=[new Jo("",[0])],this.g={line:0,column:0},this.root=ne,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=i;let r=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Us(e[s].buffer));const o=new Ti(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),r=this.S(r,o)}this.h=new mB(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=Fs,i=t-Math.floor(t/3),r=i*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=i||n+l<r)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new Jo(u,Us(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new Jo(a,Us(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new gB(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,r=>{if(r===ne)return!0;const s=this.R(r),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==ne;)if(r.left!==ne&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const s=this.B(r,e-r.lf_left-2);return i+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==ne;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(i+1,1),o=r-n;return new Xi(i+1,o+1)}return new Xi(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===ne){const s=this.getOffsetAt(i+1,1),n=r-e-s;return new Xi(i+1,n+1)}else t=t.right;return new Xi(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.H(e.startLineNumber,e.startColumn),r=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,r);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this.a[i.piece.bufferIndex].buffer,s=this.u(i.piece.bufferIndex,i.piece.start);let n=r.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==ne;){const o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(i===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,i.piece.length);i=i.next()}return n}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,s=>{if(s===ne)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(r&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=i,i="",r=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(r=!0,i+=a.substr(h,o-1)):i+=a.substr(h,o),!0;i+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=l+1;f<u;f++)i=this.f?a.substring(c[f],c[f+1]-this.e):a.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(r=!0,n.end.column===0?t--:i=a.substr(c[u],n.end.column-1)):i=a.substr(c[u],n.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this.a[t.piece.bufferIndex],r=this.u(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this.a[e.node.piece.bufferIndex],r=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.H(e,t+1);return this.l(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===ne)return"";const r=this.a[i.piece.bufferIndex],s=this.u(i.piece.bufferIndex,i.piece.start);return r.buffer.substring(s,s+i.piece.length)}else{const i=this.a[t.node.piece.bufferIndex],r=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=r+t.remainder,n=r+t.node.piece.length;return i.buffer.substring(s,n)}}findMatchesInNode(e,t,i,r,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],f=this.u(e.piece.bufferIndex,e.piece.start),g=this.u(e.piece.bufferIndex,s),m=this.u(e.piece.bufferIndex,n);let w;const S={line:0,column:0};let C,k;t._wordSeparators?(C=h.buffer.substring(g,m),k=A=>A+g,t.reset(0)):(C=h.buffer,k=A=>A,t.reset(g));do if(w=t.next(C),w){if(k(w.index)>=m)return l;this.s(e,k(w.index)-f,S);const A=this.t(e.piece.bufferIndex,s,S),G=S.line===s.line?S.column-s.column+r:S.column+1,H=G+w[0].length;if(u[l++]=gk(new Xe(i+A,G,i+A,H),w,a),k(w.index)+w[0].length>=m||l>=c)return l}while(w);return l}findMatchesLineByLine(e,t,i,r){const s=[];let n=0;const o=new FF(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,i,r,n,s),s;let h=e.startLineNumber,f=a.node;for(;f!==c.node;){const m=this.t(f.piece.bufferIndex,l,f.piece.end);if(m>=1){const S=this.a[f.piece.bufferIndex].lineStarts,C=this.u(f.piece.bufferIndex,f.piece.start),k=S[l.line+m],A=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(f,o,h,A,l,this.s(f,k-C),t,i,r,n,s),n>=r)return s;h+=m}const w=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const S=this.getLineContent(h).substring(w,e.endColumn-1);return n=this.n(t,o,S,e.endLineNumber,w,n,s,i,r),s}if(n=this.n(t,o,this.getLineContent(h).substr(w),h,w,n,s,i,r),n>=r)return s;h++,a=this.H(h,1),f=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,w=this.getLineContent(h).substring(m,e.endColumn-1);return n=this.n(t,o,w,e.endLineNumber,m,n,s,i,r),s}const g=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,g,l,u,t,i,r,n,s),s}n(e,t,i,r,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,g=i.length;let m=-f;for(;(m=i.indexOf(h,m+f))!==-1;)if((!l||mk(l,i,g,m,f))&&(o[n++]=new db(new Xe(r,m+1+s,r,m+1+f+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(i),u&&(o[n++]=gk(new Xe(r,u.index+1+s,r,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==ne){const{node:r,remainder:s,nodeStartOffset:n}=this.G(e),o=r.piece,a=o.bufferIndex,c=this.s(r,s);if(r.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<Fs){this.F(r,t),this.y();return}if(n===e)this.o(t,r),this.h.validate(e);else if(n+r.piece.length>e){const l=[];let u=new Ti(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(r,s)===10){const m={line:u.start.line+1,column:0};u=new Ti(u.bufferIndex,m,u.end,this.t(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(r,s-1)===13){const m=this.s(r,s-1);this.C(r,m),t="\r"+t,r.piece.length===0&&l.push(r)}else this.C(r,c);else this.C(r,c);const h=this.w(t);u.length>0&&this.S(r,u);let f=r;for(let g=0;g<h.length;g++)f=this.S(f,h[g]);this.v(l)}else this.q(t,r)}else{const r=this.w(t);let s=this.T(null,r[0]);for(let n=1;n<r.length;n++)s=this.S(s,r[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===ne)return;const i=this.G(e),r=this.G(e+t),s=i.node,n=r.node;if(s===n){const h=this.s(s,i.remainder),f=this.s(s,r.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const g=s.next();Ng(this,s),this.N(g),this.y();return}this.D(s,f),this.h.validate(e),this.N(s),this.y();return}if(i.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,f),this.y();return}const o=[],a=this.s(s,i.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,r.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==ne&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const i=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new Ti(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,Os(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.w(e);let s=this.T(t,r[r.length-1]);for(let n=r.length-2;n>=0;n--)s=this.T(s,r[n]);this.N(s),this.v(i)}q(e,t){this.Q(e,t)&&(e+=`
`);const i=this.w(e),r=this.S(t,i[0]);let s=r;for(let n=1;n<i.length;n++)s=this.S(s,i[n]);this.N(r)}s(e,t,i){const r=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[r.start.line]+r.start.column+t;let c=r.start.line,l=r.end.line,u=0,h=0,f=0;for(;c<=l&&(u=c+(l-c)/2|0,f=n[u],u!==l);)if(h=n[u+1],a<f)l=u-1;else if(a>=h)c=u+1;else break;return i?(i.line=u,i.column=a-f,null):{line:u,column:a-f}}t(e,t,i){if(i.column===0)return i.line-t.line;const r=this.a[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const s=r[i.line+1],n=r[i.line]+i.column;if(s>n+1)return i.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?i.line-t.line+1:i.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)Ng(this,e[t])}w(e){if(e.length>Fs){const l=[];for(;e.length>Fs;){const h=e.charCodeAt(Fs-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,Fs-1),e=e.substring(Fs-1)):(f=e.substring(0,Fs),e=e.substring(Fs));const g=Us(f);l.push(new Ti(this.a.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this.a.push(new Jo(f,g))}const u=Us(e);return l.push(new Ti(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new Jo(e,u)),l}let t=this.a[0].buffer.length;const i=Us(e,!1);let r=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},r=this.g;for(let l=0;l<i.length;l++)i[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<i.length;l++)i[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new Ti(0,r,a,this.t(0,r,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let i=this.root,r="";const s=this.h.get2(e);if(s){i=s.node;const n=this.B(i,e-s.nodeStartLineNumber-1),o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=o.substring(a+n,a+i.piece.length);else{const c=this.B(i,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;i!==ne;)if(i.left!==ne&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const a=this.B(i,e-i.lf_left-2),c=this.B(i,e-i.lf_left-1),l=this.a[i.piece.bufferIndex].buffer,u=this.u(i.piece.bufferIndex,i.piece.start);return n+=i.size_left,this.h.set({node:i,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-i.lf_left)}),l.substring(u+a,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const a=this.B(i,e-i.lf_left-2),c=this.a[i.piece.bufferIndex].buffer,l=this.u(i.piece.bufferIndex,i.piece.start);r=c.substring(l+a,l+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==ne;){const n=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const o=this.B(i,0),a=this.u(i.piece.bufferIndex,i.piece.start);return r+=n.substring(a,a+o-t),r}else{const o=this.u(i.piece.bufferIndex,i.piece.start);r+=n.substr(o,i.piece.length)}i=i.next()}return r}y(){let e=this.root,t=1,i=0;for(;e!==ne;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=i,this.h.validate(this.c)}A(e,t){const i=e.piece,r=this.s(e,t),s=r.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===t){const n=this.t(e.piece.bufferIndex,i.start,r);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:r.column}}B(e,t){if(t<0)return 0;const i=e.piece,r=this.a[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[s]-r[i.start.line]-i.start.column}C(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.end),n=t,o=this.u(i.bufferIndex,n),a=this.t(i.bufferIndex,i.start,n),c=a-r,l=o-s,u=i.length+l;e.piece=new Ti(i.bufferIndex,i.start,n,a,u),Os(this,e,l,c)}D(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.start),n=t,o=this.t(i.bufferIndex,n,i.end),a=this.u(i.bufferIndex,n),c=o-r,l=s-a,u=i.length+l;e.piece=new Ti(i.bufferIndex,n,i.end,o,u),Os(this,e,l,c)}E(e,t,i){const r=e.piece,s=r.start,n=r.end,o=r.length,a=r.lineFeedCnt,c=t,l=this.t(r.bufferIndex,r.start,c),u=this.u(r.bufferIndex,t)-this.u(r.bufferIndex,s);e.piece=new Ti(r.bufferIndex,r.start,c,l,u),Os(this,e,u-o,l-a);const h=new Ti(r.bufferIndex,i,n,this.t(r.bufferIndex,i,n),this.u(r.bufferIndex,n)-this.u(r.bufferIndex,i)),f=this.S(e,h);this.N(f)}F(e,t){this.Q(t,e)&&(t+=`
`);const i=this.K()&&this.L(t)&&this.M(e),r=this.a[0].buffer.length;this.a[0].buffer+=t;const s=Us(t,!1);for(let f=0;f<s.length;f++)s[f]+=r;if(i){const f=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:r-f}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new Ti(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,Os(this,e,t.length,h)}G(e){let t=this.root;const i=this.h.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==ne;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this.h.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let i=this.root,r=0;for(;i!==ne;)if(i.left!==ne&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.B(i,e-i.lf_left-2),n=this.B(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(s+t-1,n),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.B(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:r};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==ne;){if(i.piece.lineFeedCnt>0){const s=this.B(i,0),n=this.J(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(i.piece.length>=t-1){const s=this.J(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this.a[e.piece.bufferIndex],r=this.u(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ne||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this.a[t.bufferIndex].lineStarts,r=t.start.line,s=i[r]+t.start.column;return r===i.length-1||i[r+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ne||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const i=[],r=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Ti(e.piece.bufferIndex,e.piece.start,s,o,n),Os(this,e,-1,-1),e.piece.length===0&&i.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new Ti(t.piece.bufferIndex,a,t.piece.end,l,c),Os(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<i.length;h++)Ng(this,i[h])}Q(e,t){if(this.K()&&this.M(e)){const i=t.next();if(this.L(i)){if(e+=`
`,i.piece.length===1)Ng(this,i);else{const r=i.piece,s={line:r.start.line+1,column:0},n=r.length-1,o=this.t(r.bufferIndex,s,r.end);i.piece=new Ti(r.bufferIndex,s,r.end,o,n),Os(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ne)return t(ne);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}R(e){if(e===ne)return"";const t=this.a[e.piece.bufferIndex],i=e.piece,r=this.u(i.bufferIndex,i.start),s=this.u(i.bufferIndex,i.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this.a[e.bufferIndex],i=this.u(e.bufferIndex,e.start),r=this.u(e.bufferIndex,e.end);return t.buffer.substring(i,r)}S(e,t){const i=new Vy(t,1);if(i.left=ne,i.right=ne,i.parent=ne,i.size_left=0,i.lf_left=0,this.root===ne)this.root=i,i.color=0;else if(e.right===ne)e.right=i,i.parent=e;else{const s=Gy(e.right);s.left=i,i.parent=s}return aD(this,i),i}T(e,t){const i=new Vy(t,1);if(i.left=ne,i.right=ne,i.parent=ne,i.size_left=0,i.lf_left=0,this.root===ne)this.root=i,i.color=0;else if(e.left===ne)e.left=i,i.parent=e;else{const r=oD(e.left);r.right=i,i.parent=r}return aD(this,i),i}U(e){let t="";return this.iterate(e,i=>(t+=this.R(i),!0)),t}},lD;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(lD||(lD={}));function Xy(e){let t=0,i=0,r=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(i=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,r=n+1):a===10&&(s|=1,t===0&&(i=n),t++,r=n+1)}return t===0&&(i=e.length),[t,i,e.length-r,s]}var Yy;function wB(){return Yy||(Yy=new TextDecoder("UTF-16LE")),Yy}function bB(e,t,i){const r=new Uint16Array(e.buffer,t,i);return i>0&&(r[0]===65279||r[0]===65534)?yB(e,t,i):wB().decode(r)}function yB(e,t,i){const r=[];let s=0;for(let n=0;n<i;n++){const o=BP(e,t);t+=2,r[s++]=String.fromCharCode(o)}return r.join("")}function Mg(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var SB=class ps{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,r,s){this.oldPosition=t,this.oldText=i,this.newPosition=r,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Mg(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Mg(this.oldText)}")`:`(replace@${this.oldPosition} "${Mg(this.oldText)}" with "${Mg(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,i,r){const s=i.length;Ih(t,s,r),r+=4;for(let n=0;n<s;n++)qP(t,i.charCodeAt(n),r),r+=2;return r}static d(t,i){const r=$h(t,i);return i+=4,bB(t,i,r)}writeSize(){return 8+ps.a(this.oldText)+ps.a(this.newText)}write(t,i){return Ih(t,this.oldPosition,i),i+=4,Ih(t,this.newPosition,i),i+=4,i=ps.c(t,this.oldText,i),i=ps.c(t,this.newText,i),i}static read(t,i,r){const s=$h(t,i);i+=4;const n=$h(t,i);i+=4;const o=ps.d(t,i);i+=ps.a(o);const a=ps.d(t,i);return i+=ps.a(a),r.push(new ps(s,o,n,a)),i}},EB=class yh extends Y{get onDidChangeContent(){return this.m.event}constructor(t,i,r,s,n,o,a){super(),this.m=this.D(new P),this.f=i,this.j=!o,this.g=s,this.h=n,this.c=new vB(t,r,a)}equals(t){return!(t instanceof yh)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,i){return this.c.getOffsetAt(t,i)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,i){const r=t+i,s=this.getPositionAt(t),n=this.getPositionAt(r);return new Xe(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,i=0){if(t.isEmpty())return"";const r=this.n(i);return this.c.getValueInRange(t,r)}getValueLengthInRange(t,i=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const r=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(i),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-r+n}getCharacterCountInRange(t,i=0){if(this.j){let r=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)_h(a.charCodeAt(u))?(r=r+1,u=u+1):r=r+1}return r+=this.n(i).length*(n-s),r}return this.getValueLengthInRange(t,i)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,i){return this.c.getLineCharCode(t,i)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const i=Om(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=KA(this.getLineContent(t));return i===-1?0:i+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,i,r){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let w=0;w<t.length;w++){const S=t[w];a&&S._isTracked&&(a=!1);const C=S.range;if(S.text){let K=!0;o||(K=!aT(S.text),o=K),!s&&K&&(s=h6(S.text)),!n&&K&&(n=d6(S.text))}let k="",A=0,G=0,H=0;if(S.text){let K;[A,G,H,K]=Xy(S.text);const F=this.getEOL();K===0||K===(F===`\r
`?2:1)?k=S.text:k=S.text.replace(/\r\n|\r|\n/g,F)}c[w]={sortIndex:w,identifier:S.identifier||null,range:C,rangeOffset:this.getOffsetAt(C.startLineNumber,C.startColumn),rangeLength:this.getValueLengthInRange(C),text:k,eolCount:A,firstLineLength:G,lastLineLength:H,forceMoveMarkers:!!S.forceMoveMarkers,isAutoWhitespaceEdit:S.isAutoWhitespaceEdit||!1}}c.sort(yh.t);let l=!1;for(let w=0,S=c.length-1;w<S;w++){const C=c[w].range.getEndPosition(),k=c[w+1].range.getStartPosition();if(k.isBeforeOrEqual(C)){if(k.isBefore(C))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.q(c));const u=r||i?yh._getInverseEditRanges(c):[],h=[];if(i)for(let w=0;w<c.length;w++){const S=c[w],C=u[w];if(S.isAutoWhitespaceEdit&&S.range.isEmpty())for(let k=C.startLineNumber;k<=C.endLineNumber;k++){let A="";k===C.startLineNumber&&(A=this.getLineContent(S.range.startLineNumber),Om(A)!==-1)||h.push({lineNumber:k,oldContent:A})}}let f=null;if(r){let w=0;f=[];for(let S=0;S<c.length;S++){const C=c[S],k=u[S],A=this.getValueInRange(C.range),G=C.rangeOffset+w;w+=C.text.length-A.length,f[S]={sortIndex:C.sortIndex,identifier:C.identifier,range:k,text:A,textChange:new SB(C.rangeOffset,A,G,C.text)}}l||f.sort((S,C)=>S.sortIndex-C.sortIndex)}this.g=s,this.h=n,this.j=o;const g=this.s(c);let m=null;if(i&&h.length>0){h.sort((w,S)=>S.lineNumber-w.lineNumber),m=[];for(let w=0,S=h.length;w<S;w++){const C=h[w].lineNumber;if(w>0&&h[w-1].lineNumber===C)continue;const k=h[w].oldContent,A=this.getLineContent(C);A.length===0||A===k||Om(A)!==-1||m.push(C)}}return this.m.fire(),new NF(f,g,m)}q(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const r=t[0].range,s=t[t.length-1].range,n=new Xe(r.startLineNumber,r.startColumn,s.endLineNumber,s.endColumn);let o=r.startLineNumber,a=r.startColumn;const c=[];for(let g=0,m=t.length;g<m;g++){const w=t[g],S=w.range;i=i||w.forceMoveMarkers,c.push(this.getValueInRange(new Xe(o,a,S.startLineNumber,S.startColumn))),w.text.length>0&&c.push(w.text),o=S.endLineNumber,a=S.endColumn}const l=c.join(""),[u,h,f]=Xy(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:f,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}s(t){t.sort(yh.u);const i=[];for(let r=0;r<t.length;r++){const s=t[r],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new Xe(n,o,a,c);i.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,r,s){return this.c.findMatchesLineByLine(t,i,r,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,i){const r=t.startLineNumber,s=t.startColumn,[n,o,a]=Xy(i);let c;if(i.length>0){const l=n+1;l===1?c=new Xe(r,s,r,s+o):c=new Xe(r,s,r+l-1,a+1)}else c=new Xe(r,s,r,s);return c}static _getInverseEditRanges(t){const i=[];let r=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=r,u=s+(c.range.startColumn-n.range.endColumn)):(l=r+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const f=c.eolCount+1;f===1?h=new Xe(l,u,l,u+c.firstLineLength):h=new Xe(l,u,l+f-1,c.lastLineLength+1)}else h=new Xe(l,u,l,u);r=h.endLineNumber,s=h.endColumn,i.push(h),n=c}return i}static t(t,i){const r=Xe.compareRangesUsingEnds(t.range,i.range);return r===0?t.sortIndex-i.sortIndex:r}static u(t,i){const r=Xe.compareRangesUsingEnds(t.range,i.range);return r===0?i.sortIndex-t.sortIndex:-r}},CB=class{constructor(e,t,i,r,s,n,o,a,c){this.a=e,this.b=t,this.c=i,this.d=r,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,i=this.c+this.e;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this.k(e),i=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=i.length;s<n;s++){const o=i[s].buffer.replace(/\r\n|\r|\n/g,t),a=Us(o);i[s]=new Jo(o,a)}const r=new EB(i,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:r,disposable:r}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},uD=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&fT(e)&&(this.b=dT,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=pB(this.e,e);this.a.push(new Jo(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=h6(e)),this.k||(this.k=d6(e)))}finish(e=!0){return this.o(),new CB(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=Us(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},xB=class extends Y{constructor(e,t,i){super(),this._source=e,this.b=t,this.c=i,this.a=void 0}f(e){const t=e.getLineCount();return new Xe(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new uD;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:r}=t.create(1);this.b=i,this.D(r)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new uD;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:r,disposable:s}=i.create(1);return this.D(s),r})),this.a}findInInputs(e){const i=new fk(e,!1,!1,null).parseSearchRequest();if(!i)return[];const r=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(r,i,!0,5e3)}findInOutputs(e){const i=new fk(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(r=>{const s=r.findMatchesLineByLine(this.f(r),i,!0,5e3);if(s.length!==0)return{textBuffer:r,matches:s}}).filter(r=>!!r):[]}};function hD(e,t){let i=-1;const r=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==i&&s.length>0&&(r.push([...s]),s=[]),s.push(o),i=o.range.endLineNumber}),s.length>0&&r.push([...s]),r.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new XM(a.join(`
`)+`
`,o.map(u=>new Xe(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var yK=Object.freeze({id:"application",order:100,title:d(4400,null),type:"object"}),kB=Object.freeze({id:"workbench",order:7,title:d(4401,null),type:"object"}),$B=Object.freeze({id:"security",scope:1,title:d(4402,null),type:"object",order:7}),SK=Object.freeze({id:"problems",title:d(4403,null),type:"object",order:101}),IB=Object.freeze({id:"window",order:8,title:d(4404,null),type:"object"}),DB={ConfigurationMigration:"base.contributions.configuration.migration"},PB=class{constructor(){this.migrations=[],this.a=new P,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},Og=new PB;Nt.add(DB.ConfigurationMigration,Og);var dD=class extends Y{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,i){super(),this.a=t,this.b=i,this.D(this.b.onDidChangeWorkspaceFolders(async r=>{for(const s of r.added)await this.f(s,Og.migrations)})),this.c(Og.migrations),this.D(Og.onDidRegisterConfigurationMigration(r=>this.c(r)))}async c(t){await this.f(void 0,t);for(const i of this.b.getWorkspace().folders)await this.f(i,t)}async f(t,i){await Promise.all([i.map(r=>this.g(r,t?.uri))])}async g(t,i){const r=this.a.inspect(t.key,{resource:i}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=r[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,i,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,i,l);for(const f of h??[])c.push([f,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:i,overrideIdentifiers:h},o)))}}async h(t,i,r,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[i];if(u)return n?u.overrides?.find(({identifiers:h})=>Ci(h,n))?.value:u.value},a=await t.migrateFn(r,o);return Array.isArray(a)?a:[[t.key,a]]}};dD=__decorate([__param(0,Ki),__param(1,Zh)],dD);var fD=class extends Y{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new Vr,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!ai&&(await this.b.getEnvironment())?.os!==1)return;Nt.as(hn.Configuration).registerConfiguration({...$B,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(4405,null)},default:[],markdownDescription:d(4406,null),scope:3},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(4407,null),scope:3}}})}};fD=__decorate([__param(0,yk)],fD);var dh="window.newWindowProfile",pD=class extends Y{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,i){super(),this.c=t,this.f=i,this.g(),this.D(this.c.onDidChangeProfiles(r=>this.g())),this.h(),this.j(),this.D(i.onDidChangeConfiguration(r=>{r.source!==7&&r.affectsConfiguration(dh)&&this.h()})),this.D(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=Nt.as(hn.Configuration),i={...IB,properties:{[dh]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(r=>r.name),null],enumItemLabels:[...this.c.profiles.map(()=>""),d(4408,null)],description:d(4409,null),scope:1}}};this.a?t.updateConfigurations({add:[i],remove:[this.a]}):t.registerConfiguration(i),this.a=i}h(){const t=this.f.getValue(dh);this.b=t?this.c.profiles.find(i=>i.name===t):void 0}j(){const t=this.f.getValue(dh);if(!t)return;const i=this.b?this.c.profiles.find(r=>r.id===this.b.id):void 0;t!==i?.name&&this.f.updateValue(dh,i?.name)}};pD=__decorate([__param(0,a_),__param(1,Ki)],pD);var kK=U("editorResolverService"),AB=Nt.as(hn.Configuration),TB={...kB,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(15370,null),additionalProperties:{type:"string"}}}};AB.registerConfiguration(TB);var Ky;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(Ky||(Ky={}));var gD;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(gD||(gD={}));function RB(e,t){if(new Set([B.extension,B.webviewPanel,B.vscodeWorkspaceTrust,B.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(We.sep)>=0?`${t.scheme}:${t.path}`:Ji(t);return ka(e,s,{ignoreCase:!0})}var LB=class Sh{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,i,r,s,n,o,a){this.q=r,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new wt,this.h=new Map,this.j=new P,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new P,this.onDidOpenNotebookDocument=this.m.event,this.n=new P,this.onDidCloseNotebookDocument=this.n.event,this.o=new P,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new Ur("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(V.MainThreadNotebook),this.c=t.getProxy(V.MainThreadNotebookDocuments),this.d=t.getProxy(V.MainThreadNotebookEditors),this.i=i.converter,i.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,f=this.g.get(l)?.getCell(u);if(f)return f.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),Sh.C(i)}getEditorById(t){const i=this.h.get(t);if(!i)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return i}getIdByEditor(t){for(const[i,r]of this.h)if(r.apiEditor===t)return i}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,i){const r=this.g.get(t);if(!r&&!i)throw new Error(`NO notebook document for '${t}'`);return r}static w(t,i){if(!i)return;const r=i.filenamePattern.map(s=>lp.from(s)).filter(s=>s!==void 0);if(i.filenamePattern&&!r){console.warn(`Notebook content provider view options file name pattern is invalid ${i.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:i.displayName,filenamePattern:r,priority:i.exclusive?Ky.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,i,r){const s=Sh.a++,n=typeof r.onDidChangeCellStatusBarItems=="function"?Sh.a++:void 0;this.f.set(s,r),this.b.$registerNotebookCellStatusBarItemProvider(s,n,i);let o;return n!==void 0&&(o=r.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Ee(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const i=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&Sn.from(t.content)});return y.revive(i)}async openNotebookDocument(t){const i=this.g.get(t);if(i)return i.apiNotebook;const r=await this.c.$tryOpenNotebook(t),s=this.g.get(y.revive(r));return ia(s?.apiNotebook)}async showNotebookDocument(t,i){let r;typeof i=="object"?r={position:Ut.from(i.viewColumn),preserveFocus:i.preserveFocus,selections:i.selections&&i.selections.map(ns.from),pinned:typeof i.preview=="boolean"?!i.preview:void 0,label:typeof i.asRepl=="string"?i.asRepl:typeof i.asRepl=="object"?i.asRepl.label:void 0}:r={preserveFocus:!1,pinned:!0};const s=i?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,r),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,i,r,s){const n=this.f.get(t),o=y.revive(i),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(r);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new ae,h=this.p.add([u]),g=(Array.isArray(l)?l:[l]).map(m=>q0.from(m,this.i,u));return{cacheId:h,items:g}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,i,r,s,n){if(al(i))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:i,serializer:r,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},i,V0.from(s),Sh.w(t,n)),se(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(i.buffer,r);return new ei(Sn.from(n))}async $notebookToData(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(Sn.to(i.value),r);return re.wrap(n)}async $saveNotebook(t,i,r,s,n){const o=y.revive(i),a=this.y.get(t);this.D(`enter saveNotebook(versionId: ${r}, ${o.toString()})`);try{if(!a)throw new e4("NO serializer found");const c=this.g.get(o);if(!c)throw new e4("Document NOT found");if(c.versionId!==r)throw new e4("Document version mismatch, expected: "+r+", actual: "+c.versionId);if(!this.s.value.isWritableFileSystem(o.scheme))throw new ld(d(3045,null,this.A(o)),6);const l={metadata:yS(c.apiNotebook.metadata,m=>!(a.options?.transientDocumentMetadata??{})[m]),cells:[]};for(const m of c.apiNotebook.getCells()){const w=new zd(m.kind,m.document.getText(),m.document.languageId,m.mime,a.options?.transientOutputs?[]:[...m.outputs],m.metadata,m.executionSummary);w.metadata=yS(m.metadata,S=>!(a.options?.transientCellMetadata??{})[S]),l.cells.push(w)}if(await this.z(o,s),n.isCancellationRequested)throw new oi;const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new oi;this.D(`serialized versionId: ${r} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${r} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),f=await this.s.value.stat(o),g={name:h.basename(o),isFile:(f.type&uo.File)!==0,isDirectory:(f.type&uo.Directory)!==0,isSymbolicLink:(f.type&uo.SymbolicLink)!==0,mtime:f.mtime,ctime:f.ctime,size:f.size,readonly:!!((f.permissions??0)&Sa.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((f.permissions??0)&Sa.Locked),etag:N7({mtime:f.mtime,size:f.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${r}, ${o.toString()})`),g}catch(c){if(c instanceof ld)return{...c,message:c.message};throw c}}async $searchInNotebooks(t,i,r,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new Qc;await(async(f,g,m)=>{await Promise.all(f.map(async w=>await Promise.all(w.filenamePatterns.map(S=>{const C={_reason:m._reason,folderQueries:m.folderQueries,includePattern:m.includePattern,excludePattern:m.excludePattern,maxResults:m.maxResults,type:1,filePattern:S};return this.t.doInternalFileSearchWithCustomCallback(C,g,k=>{k.forEach(A=>{a.has(A)||s.some(H=>w.isFromSettings&&!H.isFromSettings?!1:H.filenamePatterns.some(K=>RB(K,A)))||a.add(A)})}).catch(k=>{if(k.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw k})}))))})(r,n,i);const l=new wt;let u=!1;const h=Array.from(a).map(async f=>{const g=[];try{if(n.isCancellationRequested)return;if(i.maxResults&&[...l.values()].reduce((C,k)=>C+k.cellResults.length,0)>i.maxResults){u=!0;return}const m=[],w=this.g.get(f);if(w)w.apiNotebook.getCells().forEach(k=>m.push({input:k.document.getText(),outputs:k.outputs.flatMap(A=>A.items.map(G=>G.data.toString()))}));else{const C=await this.s.value.readFile(f),k=re.fromString(C.toString()),A=await o.deserializeNotebook(k.buffer,n);if(n.isCancellationRequested)return;Sn.from(A).cells.forEach(H=>m.push({input:H.source,outputs:H.outputs.flatMap(K=>K.items.map(F=>F.valueBytes.toString()))}))}if(n.isCancellationRequested)return;m.forEach((C,k)=>{const A=i.contentPattern.pattern,G=new xB(C.input,void 0,C.outputs),H=G.findInInputs(A),K=G.findInOutputs(A),F=K.flatMap(z=>hD(z.matches,z.textBuffer)).map((z,Z)=>(z.webviewIndex=Z,z));if(H.length>0||K.length>0){const z={index:k,contentResults:hD(H,G.inputTextBuffer),webviewResults:F};g.push(z)}});const S={resource:f,cellResults:g};l.set(f,S);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,i){const r=await this.s.value.stat(t);if(typeof i?.mtime=="number"&&typeof i.etag=="string"&&i.etag!==YR&&typeof r.mtime=="number"&&typeof r.size=="number"&&i.mtime<r.mtime&&i.etag!==N7({mtime:i.mtime,size:r.size}))throw new ld(d(3046,null),3,i)}A(t){return t.scheme===B.file?t.fsPath:t.toString()}B(t,i,r){if(this.h.has(i))throw new Error(`editor with id ALREADY EXSIST: ${i}`);const s=new zy(i,this.d,t,r.visibleRanges.map(ns.to),r.selections.map(ns.to),typeof r.viewColumn=="number"?Ut.to(r.viewColumn):void 0,r.viewType);this.h.set(i,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const r of t.value.removedDocuments){const s=y.revive(r),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const r=[];for(const s of t.value.addedDocuments){const n=y.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new dB(this.c,this.q,this.r,n,s);r.push(...s.cells.map(a=>qy.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:r}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const r of t.value.addedEditors){if(this.h.has(r.id))return;const s=y.revive(r.documentUri),n=this.g.get(s);n&&this.B(n,r.id,r)}const i=[];if(t.value.removedEditors)for(const r of t.value.removedEditors){const s=this.h.get(r);s&&(this.h.delete(r),this.k?.id===s.id&&(this.k=void 0),i.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const r=new Set;this.l.forEach(s=>r.add(s.id));for(const s of this.h.values()){const n=r.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const i=j.String.with("notebookType","A notebook type"),r=new we("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[i,new j("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>re.wrap(n))],new me("Notebook Data",n=>Sn.to(n.value))),s=new we("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[i,new j("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new ei(Sn.from(n)))],new me("Bytes",n=>n.buffer));t.registerApiCommand(r),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},e4=class extends Error{constructor(e){super(e),this.name="NotebookSaveError"}},NB=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=i,this.f=r,this.a=new el}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,r)=>{const s=function(o){t.call(i,o)};return s.extension=e,this.a.event(s,void 0,r)}}async $participateInSave(e,t,i){const r=y.revive(e),s=this.c.getNotebookDocument(r);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:np.to(t)},i,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!i.isCancellationRequested&&u&&(u instanceof Co?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=Wi.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new ei(o))}},MB=class{constructor(e){this.c=e,this.a=new P,this.onDidSaveNotebookDocument=this.a.event,this.b=new P,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,i,r){const n=this.c.getNotebookDocument(y.revive(e)).acceptModelChanged(t.value,i,r);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(y.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(y.revive(e));this.a.fire(t.apiNotebook)}},t4=class{constructor(t,i){this.c=t,this.d=i,this.a=new P,this.b=new P,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,i){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,i);const r=this.d.getEditorById(t);i.visibleRanges&&r._acceptVisibleRanges(i.visibleRanges.ranges.map(ns.to)),i.selections&&r._acceptSelections(i.selections.selections.map(ns.to)),i.visibleRanges&&this.b.fire({notebookEditor:r.apiEditor,visibleRanges:r.apiEditor.visibleRanges}),i.selections&&this.a.fire(Object.freeze({notebookEditor:r.apiEditor,selections:r.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const i in t)this.d.getEditorById(i)._acceptViewColumn(Ut.to(t[i]))}};t4=__decorate([__param(0,De)],t4);var Mc;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(Mc||(Mc={}));var IK=U("INotebookExecutionService"),OB=100,mD;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(mD||(mD={}));var DK=U("INotebookKernelService"),PK=U("INotebookKernelHistoryService"),i4=class{constructor(t,i,r,s,n){this.l=i,this.m=r,this.n=s,this.o=n,this.b=new wt,this.c=new wt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.q=0,this.r={},this.a=t.getProxy(V.MainThreadNotebookKernels);const o=new we("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new j("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.m.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.m.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return"skipIfAlreadySelected"in c?{notebookEditorId:l,skipIfAlreadySelected:c.skipIfAlreadySelected}:{notebookEditorId:l}}return c})],me.Void),a=new we("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[j.Uri],new me("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.n.registerApiCommand(o),this.n.registerApiCommand(a)}createNotebookController(t,i,r,s,n,o){for(const H of this.j.values())if(H.controller.id===i&&qe.equals(t.identifier,H.extensionId))throw new Error(`notebook controller with id '${i}' ALREADY exist`);const a=this.k++,c=this;this.o.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${i}`);const l=()=>console.warn(`NO execute handler from notebook controller '${g.id}' of extension: '${t.identifier}'`);let u=!1;const h=new P,f=new P,g={id:Fg(t.identifier,i),notebookType:r,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(up.from):[]};let m=n??l,w,S;this.a.$addKernel(a,g).catch(H=>{console.log(H),u=!0});let C=0;const k=()=>{if(u)return;const H=++C;Promise.resolve().then(()=>{H===C&&this.a.$updateKernel(a,g)})},A=new wt,G={get id(){return i},get notebookType(){return g.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return g.label},set label(H){g.label=H??t.displayName??t.name,k()},get detail(){return g.detail??""},set detail(H){g.detail=H,k()},get description(){return g.description??""},set description(H){g.description=H,k()},get supportedLanguages(){return g.supportedLanguages},set supportedLanguages(H){g.supportedLanguages=H,k()},get supportsExecutionOrder(){return g.supportsExecutionOrder??!1},set supportsExecutionOrder(H){g.supportsExecutionOrder=H,k()},get rendererScripts(){return g.preloads?g.preloads.map(up.to):[]},get executeHandler(){return m},set executeHandler(H){m=H??l},get interruptHandler(){return w},set interruptHandler(H){w=H,g.supportsInterrupt=!!H,k()},set variableProvider(H){T(t,"notebookVariableProvider"),S=H,g.hasVariableProvider=!!H,H?.onDidChangeVariables(K=>c.a.$variablesUpdated(K.uri)),k()},get variableProvider(){return S},createNotebookCellExecution(H){if(u)throw new Error("notebook controller is DISPOSED");if(!A.has(H.notebook.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(A.keys()).map(K=>K.toString())),new Error(`notebook controller is NOT associated to notebook: ${H.notebook.uri.toString()}`);return c._createNotebookCellExecution(H,Fg(t.identifier,this.id))},createNotebookExecution(H){if(T(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!A.has(H.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(A.keys()).map(K=>K.toString())),new Error(`notebook controller is NOT associated to notebook: ${H.uri.toString()}`);return c._createNotebookExecution(H,Fg(t.identifier,this.id))},dispose:()=>{u||(this.o.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),f.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(H,K){K===kf.Hidden&&T(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,H.uri,K)},onDidReceiveMessage:f.event,postMessage(H,K){return T(t,"notebookMessaging"),c.a.$postMessage(a,K&&c.m.getIdByEditor(K),H)},asWebviewUri(H){return T(t,"notebookMessaging"),Yu(H,c.l.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:G,onDidReceiveMessage:f,onDidChangeSelection:h,associatedNotebooks:A}),G}getIdByController(t){for(const[i,r]of this.j)if(r.controller===t)return Fg(r.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,i){const r=this.g++,s=this;this.o.trace(`NotebookControllerDetectionTask[${r}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(r,i);const n={dispose:()=>{this.f.delete(r),s.a.$removeKernelDetectionTask(r)}};return this.f.set(r,n),n}registerKernelSourceActionProvider(t,i,r){const s=this.i++,n=typeof r.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,r),this.o.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,i);let a;return n!==void 0&&(a=r.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,i){const r=this.h.get(t);if(r){const s=new ae;return(await r.provideNotebookKernelSourceActions(i)??[]).map(o=>z0.from(o,this.n.converter,s))}return[]}$acceptNotebookAssociation(t,i,r){const s=this.j.get(t);if(s){const n=this.m.getNotebookDocument(y.revive(i));r?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.o.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),r),s.onDidChangeSelection.fire({selected:r,notebook:n.apiNotebook})}}async $executeCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getNotebookDocument(y.revive(i)),o=[];for(const a of r){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.o.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.o.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getNotebookDocument(y.revive(i));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of r){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),r.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,i,r,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.m.getNotebookDocument(y.revive(r)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.r[s],!h)return}else this.r={};const f=n==="named"?au.Named:au.Indexed,g=u.provideVariables(l.apiNotebook,h,f,o,a);let m=0;for await(const w of g){if(a.isCancellationRequested)return;const S={id:this.q++,name:w.variable.name,value:w.variable.value,type:w.variable.type,interfaces:w.variable.interfaces,language:w.variable.language,expression:w.variable.expression,hasNamedChildren:w.hasNamedChildren,indexedChildrenCount:w.indexedChildrenCount,extensionId:c.extensionId.value};if(this.r[S.id]=w.variable,this.a.$receiveVariable(i,S),m++>=OB)return}}$acceptKernelMessageFromRenderer(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getEditorById(i);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:r}))}_createNotebookCellExecution(t,i){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.m.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new FB(i,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===Wr.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,i){const r=this.m.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=r.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(r.uri))throw new Error(`duplicate notebook execution for ${r.uri}`);const n=new jB(i,r,this.a),o=n.onDidChangeState(()=>{n.state===js.Resolved&&(n.dispose(),o.dispose(),this.c.delete(r.uri))});return this.c.set(r.uri,[n,o]),n.asApiObject()}};i4=__decorate([__param(4,De)],i4);var Wr;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Wr||(Wr={}));var FB=class O3 extends Y{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.m=i,this.n=r,this.b=O3.a++,this.c=new P,this.onDidChangeState=this.c.event,this.f=Wr.Init,this.g=this.D(new rt),this.h=new HB(10,s=>this.r(s)),this.j=i.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async q(t){await this.h.addItem(t)}async r(t){const i=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new ei(i))}s(){if(this.f===Wr.Init)throw new Error("Must call start before modifying cell output");if(this.f===Wr.Resolved)throw new Error("Cannot modify cell output after calling resolve")}t(t){let i=this.m;if(t&&(i=this.m.notebook.getCellFromApiCell(t)),!i)throw new Error("INVALID cell");return i.handle}w(t){return t.map(i=>{const r=Gd.ensureUniqueMimeTypes(i.items,!0);return r===i.items?En.from(i):En.from({items:r,id:i.id,metadata:i.metadata})})}async y(t,i,r){const s=this.t(i),n=this.w(nr(t));return this.q({editType:Mc.Output,cellHandle:s,append:r,outputs:n})}async z(t,i,r){return t=Gd.ensureUniqueMimeTypes(nr(t),!0),this.q({editType:Mc.OutputItems,items:t.map(lc.from),outputId:i.id,append:r})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(r){t.j=r,t.r([{editType:Mc.ExecutionState,executionOrder:t.j}])},start(r){if(t.f===Wr.Resolved||t.f===Wr.Started)throw new Error("Cannot call start again");t.f=Wr.Started,t.c.fire(),t.r({editType:Mc.ExecutionState,runStartTime:r})},end(r,s,n){if(t.f===Wr.Resolved)throw new Error("Cannot call resolve twice");t.f=Wr.Resolved,t.c.fire(),t.h.flush();const o=UB(n);t.n.$completeExecution(t.b,new ei({runEndTime:s,lastRunSuccess:r,error:o}))},clearOutput(r){return t.s(),t.y([],r,!1)},appendOutput(r,s){return t.s(),t.y(r,s,!0)},replaceOutput(r,s){return t.s(),t.y(r,s,!1)},appendOutputItems(r,s){return t.s(),t.z(r,s,!0)},replaceOutputItems(r,s){return t.s(),t.z(r,s,!1)}})}};function UB(e){const t=s=>s?{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character}:void 0,i=s=>({uri:s.uri,position:s.position,label:s.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(s=>i(s)):e.stack,location:t(e.location),uri:e.uri}:void 0}var js;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(js||(js={}));var jB=class F3 extends Y{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.h=i,this.j=r,this.b=F3.a++,this.c=new P,this.onDidChangeState=this.c.event,this.f=js.Init,this.g=this.D(new rt),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===js.Resolved||this.f===js.Started)throw new Error("Cannot call start again");this.f=js.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===js.Resolved)throw new Error("Cannot call resolve twice");this.f=js.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},HB=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new Vr,this.b=Date.now(),Qi(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Fg(e,t){return`${e.value}/${t}`}var WB=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(V.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const r=this.c.getEditorById(e);this.a.get(t)?.fire({editor:r.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(r=>r.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(r,s,n)=>this.d(t).event(r,s,n),postMessage:(r,s)=>{zy.apiEditorsToExtHost.has(r)&&([r,s]=[s,r]);const n=s&&zy.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,r)}}}d(e){let t=this.a.get(e);return t||(t=new P({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},_B=class{constructor(e){this.b=new Map,this.a=e.getProxy(V.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(T(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,i),this.a.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),se(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,r){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,i,r)}async $readProfile(e,t,i){const r=this.b.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.readProfile(Oe(t)?t:y.revive(t),i)}},BB=class U3{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(V.MainThreadQuickDiff)}$provideOriginalResource(t,i,r){const s=y.revive(i),n=this.c.get(t);return n?ti(()=>n.provideOriginalResource(s,r)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,i,r,s,n,o){const a=U3.a++;this.c.set(a,r);const c=qe.toKey(t.identifier);return this.b.$registerQuickDiffProvider(a,Lo.from(i,this.d),`${c}.${s}`,n,o),{dispose:()=>{this.b.$unregisterQuickDiffProvider(a),this.c.delete(a)}}}};function qB(e,t,i){const r=e.getProxy(V.MainThreadQuickOpen);class s{constructor(l,u){this.e=new Map,this.f=0,this.a=l,this.b=u}showQuickPick(l,u,h,f=Be.None){this.c=void 0;const g=Promise.resolve(u),m=++this.f,w=r.$show(m,{title:h?.title,placeHolder:h?.placeHolder,prompt:h?.prompt,matchOnDescription:h?.matchOnDescription,matchOnDetail:h?.matchOnDetail,ignoreFocusLost:h?.ignoreFocusOut,canPickMany:h?.canPickMany},f),S={},C=w.then(()=>S);return Promise.race([C,g]).then(k=>{if(k!==S)return g.then(A=>{const G=[];for(let H=0;H<A.length;H++){const K=A[H];typeof K=="string"?G.push({label:K,handle:H}):K.kind===ou.Separator?G.push({type:"separator",label:K.label}):(K.tooltip&&T(l,"quickPickItemTooltip"),G.push({label:K.label,iconPathDto:xn.from(K.iconPath),description:K.description,detail:K.detail,picked:K.picked,alwaysShow:K.alwaysShow,tooltip:ue.fromStrict(K.tooltip),resourceUri:K.resourceUri,handle:H}))}return h&&typeof h.onDidSelectItem=="function"&&(this.c=H=>{h.onDidSelectItem(A[H])}),r.$setItems(m,G),w.then(H=>{if(typeof H=="number")return A[H];if(Array.isArray(H))return H.map(K=>A[K])})})}).then(void 0,k=>{if(!qr(k))return r.$setError(m,k),Promise.reject(k)})}$onItemSelected(l){this.c?.(l)}showInput(l,u=Be.None){return this.d=l?.validateInput,r.$input(l,typeof this.d=="function",u).then(void 0,h=>{if(!qr(h))return Promise.reject(h)})}async $validateInput(l){if(!this.d)return;const u=await this.d(l);if(!u||typeof u=="string")return u;let h;switch(u.severity){case Za.Info:h=St.Info;break;case Za.Warning:h=St.Warning;break;case Za.Error:h=St.Error;break;default:h=u.message?St.Error:St.Ignore;break}return{content:u.message,severity:h}}async showWorkspaceFolderPick(l,u=Be.None){const h=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[l]);if(!h)return;const f=await this.a.getWorkspaceFolders2();if(f)return f.find(g=>g.uri.toString()===h.uri.toString())}createQuickPick(l){const u=new o(l,()=>this.e.delete(u._id));return this.e.set(u._id,u),u}createInputBox(l){const u=new a(l,()=>this.e.delete(u._id));return this.e.set(u._id,u),u}$onDidChangeValue(l,u){this.e.get(l)?._fireDidChangeValue(u)}$onDidAccept(l){this.e.get(l)?._fireDidAccept()}$onDidChangeActive(l,u){const h=this.e.get(l);h instanceof o&&h._fireDidChangeActive(u)}$onDidChangeSelection(l,u){const h=this.e.get(l);h instanceof o&&h._fireDidChangeSelection(u)}$onDidTriggerButton(l,u,h){this.e.get(l)?._fireDidTriggerButton(u,h)}$onDidTriggerItemButton(l,u,h){const f=this.e.get(l);f instanceof o&&f._fireDidTriggerItemButton(u,h)}$onDidHide(l){this.e.get(l)?._fireDidHide()}}class n{static{this.a=1}constructor(l,u){this.y=l,this.z=u,this._id=o.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new P,this.r=new P,this.s=new P,this.t=new P,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(l){this.b=l,this.A({title:l})}get step(){return this.c}set step(l){this.c=l,this.A({step:l})}get totalSteps(){return this.d}set totalSteps(l){this.d=l,this.A({totalSteps:l})}get enabled(){return this.g}set enabled(l){this.g=l,this.A({enabled:l})}get busy(){return this.j}set busy(l){this.j=l,this.A({busy:l})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(l){this.k=l,this.A({ignoreFocusOut:l})}get value(){return this.l}set value(l){this.l=l,this.A({value:l})}get valueSelection(){return this.m}set valueSelection(l){this.m=l,this.A({valueSelection:l})}get placeholder(){return this.n}set placeholder(l){this.n=l,this.A({placeholder:l})}get buttons(){return this.o}set buttons(l){l.some(u=>typeof u.location=="number"||typeof u.toggle=="object"&&typeof u.toggle.checked=="boolean")&&T(this.y,"quickInputButtonLocation"),this.o=l.slice(),this.p.clear(),l.forEach((u,h)=>{const f=u===nu.Back?-1:h;this.p.set(f,u)}),this.A({buttons:l.map((u,h)=>({iconPathDto:xn.from(u.iconPath),tooltip:u.tooltip,handle:u===nu.Back?-1:h,location:typeof u.location=="number"?u.location:void 0,toggle:typeof u.toggle=="object"&&typeof u.toggle.checked=="boolean"?{checked:u.toggle.checked}:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(l){this.l=l,this.r.fire(l)}_fireDidTriggerButton(l,u){const h=this.p.get(l);h&&(u!==void 0&&h.toggle&&(h.toggle.checked=u),this.s.fire(h))}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=or(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),r.$dispose(this._id))}A(l){if(!this.w){for(const u of Object.keys(l)){const h=l[u];this.v[u]=h===void 0?null:h}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){r.$createOrUpdate(this.v),this.v={id:this._id}}}class o extends n{constructor(l,u){super(l,u),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.M=new P,this.N=[],this.O=new P,this.P=new P,this.onDidChangeActive=this.M.event,this.onDidChangeSelection=this.O.event,this.onDidTriggerItemButton=this.P.event,this.x.push(this.M,this.O,this.P),this.A({type:"quickPick"})}get items(){return this.C}set items(l){this.C=l.slice(),this.D.clear(),this.E.clear(),l.forEach((h,f)=>{this.D.set(f,h),this.E.set(h,f)});const u=[];for(let h=0;h<l.length;h++){const f=l[h];f.kind===ou.Separator?u.push({type:"separator",label:f.label}):(f.tooltip&&T(this.y,"quickPickItemTooltip"),u.push({handle:h,label:f.label,iconPathDto:xn.from(f.iconPath),description:f.description,detail:f.detail,picked:f.picked,alwaysShow:f.alwaysShow,tooltip:ue.fromStrict(f.tooltip),resourceUri:f.resourceUri,buttons:f.buttons?.map((g,m)=>({iconPathDto:xn.from(g.iconPath),tooltip:g.tooltip,handle:m}))}))}this.A({items:u})}get canSelectMany(){return this.F}set canSelectMany(l){this.F=l,this.A({canSelectMany:l})}get matchOnDescription(){return this.G}set matchOnDescription(l){this.G=l,this.A({matchOnDescription:l})}get matchOnDetail(){return this.H}set matchOnDetail(l){this.H=l,this.A({matchOnDetail:l})}get sortByLabel(){return this.I}set sortByLabel(l){this.I=l,this.A({sortByLabel:l})}get keepScrollPosition(){return this.J}set keepScrollPosition(l){this.J=l,this.A({keepScrollPosition:l})}get prompt(){return this.L}set prompt(l){this.L=l,this.A({prompt:l})}get activeItems(){return this.K}set activeItems(l){this.K=l.filter(u=>this.E.has(u)),this.A({activeItems:this.K.map(u=>this.E.get(u))})}get selectedItems(){return this.N}set selectedItems(l){this.N=l.filter(u=>this.E.has(u)),this.A({selectedItems:this.N.map(u=>this.E.get(u))})}_fireDidChangeActive(l){const u=mt(l.map(h=>this.D.get(h)));this.K=u,this.M.fire(u)}_fireDidChangeSelection(l){const u=mt(l.map(h=>this.D.get(h)));this.N=u,this.O.fire(u)}_fireDidTriggerItemButton(l,u){const h=this.D.get(l);if(!h||!h.buttons||!h.buttons.length)return;const f=h.buttons[u];f&&this.P.fire({button:f,item:h})}}class a extends n{constructor(l,u){super(l,u),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(l){this.C=l,this.A({password:l})}get prompt(){return this.D}set prompt(l){this.D=l,this.A({prompt:l})}get validationMessage(){return this.E}set validationMessage(l){this.E=l,l?typeof l=="string"?this.A({validationMessage:l,severity:St.Error}):this.A({validationMessage:l.message,severity:l.severity??St.Error}):this.A({validationMessage:void 0,severity:St.Ignore})}}return new s(t,i)}var vD=new It(()=>{const e=zp.Collator(void 0,{numeric:!0,sensitivity:"base"}).value;return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),TK=new It(()=>({collator:zp.Collator(void 0,{numeric:!0}).value})),RK=new It(()=>({collator:zp.Collator(void 0,{numeric:!0,sensitivity:"accent"}).value}));function zB(e,t,i=!1){const r=e||"",s=t||"",n=vD.value.collator.compare(r,s);return vD.value.collatorIsNumeric&&n===0&&r!==s?r<s?-1:1:n}function VB(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function Ug(e,t,i=!1){const r=e.split(ar),s=t.split(ar),n=r.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return zB(r[l],s[l],i);if(a)return-1;if(c)return 1;const u=VB(r[l],s[l],i);if(u!==0)return u}}function wD(e){return e instanceof y}function GB(e,t){return e.scheme===B.file&&t.scheme===B.file&&Qs?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function r4(e){if(e)return typeof e.iconPath=="string"?y.file(e.iconPath):y.isUri(e.iconPath)||vt.isThemeIcon(e.iconPath)?e.iconPath:void 0}function hs(e){if(e){if(y.isUri(e))return e;if(vt.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function bD(e){const t=hs(e.authorIcon),i=Array.isArray(e.tooltip)?ue.fromMany(e.tooltip):e.tooltip?ue.from(e.tooltip):void 0,r=e.references?.map(s=>({...s,icon:hs(s.icon)}));return{...e,authorIcon:t,references:r,tooltip:i}}function s4(e){return e?{...e,icon:hs(e.icon)}:void 0}function n4(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const i=typeof e.iconPath=="string"?e.iconPath:y.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,r=typeof t.iconPath=="string"?t.iconPath:y.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return Ug(i,r)}function JB(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=n4(e,t),i!==0)return i;if(e.light&&t.light)i=n4(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(i!==0)return i;if(e.dark&&t.dark)i=n4(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}function QB(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let i=0;i<e.arguments.length;i++){const r=e.arguments[i],s=t.arguments[i];if(r!==s&&!(wD(r)&&wD(s)&&GB(r,s)))return r<s?-1:1}return 0}function yD(e,t){let i=Ug(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(i!==0)return i;if(e.command&&t.command)i=QB(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(i!==0)return i;if(e.decorations&&t.decorations)i=JB(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(i!==0)return i;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=Ug(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(i!==0)return i;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=Ug(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function ZB(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function XB(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?ZB(e.arguments,t.arguments):e.arguments===t.arguments)}function YB(e,t){return wi(e,t,XB)}var KB=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return T(this.l,"scmValidation"),this.h}set validateInput(e){if(T(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return T(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,i,r,s){this.l=e,this.m=r,this.n=s,this.d="",this.f=new P,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=i}showValidationMessage(e,t){T(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,gw.from(t))}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},eq=class j3{static{this.d=0}get disposed(){return this.m}get id(){return this.x}get label(){return this.y}set label(t){this.y=t,this.u.$updateGroupLabel(this.w,this.handle,t)}get contextValue(){return this.q}set contextValue(t){this.q=t,this.u.$updateGroup(this.w,this.handle,this.features)}get hideWhenEmpty(){return this.t}set hideWhenEmpty(t){this.t=t,this.u.$updateGroup(this.w,this.handle,this.features)}get features(){return{contextValue:this.contextValue,hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,i,r,s,n,o,a){this.u=t,this.v=i,this.w=r,this.x=s,this.y=n,this.multiDiffEditorEnableViewChanges=o,this.z=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new P,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new P,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.t=void 0,this.handle=j3.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,i){const r=this.j.get(t);return r?ti(()=>this.v.executeCommand(r.command,...r.arguments||[],i)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(yD),r=G4(this.p,t,yD).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const z=new ae;h=this.v.converter.toInternal(c.command,z),this.k.set(l,z)}else this.j.set(l,c.command);const f=Je(this.z,"scmMultiDiffEditor"),g=f?c.multiDiffEditorOriginalUri:void 0,m=f?c.multiFileDiffEditorModifiedUri:void 0,w=r4(c.decorations),S=c.decorations&&r4(c.decorations.light)||w,C=c.decorations&&r4(c.decorations.dark)||w,k=[S,C],A=c.decorations&&c.decorations.tooltip||"",G=c.decorations&&!!c.decorations.strikeThrough,H=c.decorations&&!!c.decorations.faded,K=c.contextValue||"";return{rawResource:[l,u,k,A,G,H,K,h,g,m],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=r.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=r.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},o4=class H3{static{this.d=0}#e;get id(){return this.F}get label(){return this.G}get rootUri(){return this.H}get contextValue(){return T(this.D,"scmProviderOptions"),this.h}set contextValue(t){T(this.D,"scmProviderOptions"),this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.handle,{contextValue:t}))}get inputBox(){return this.j}get count(){return this.k}set count(t){this.k!==t&&(this.k=t,this.#e.$updateSourceControl(this.handle,{count:t}))}get quickDiffProvider(){return this.l}set quickDiffProvider(t){this.l=t;let i;Je(this.D,"quickDiffProvider")&&(i=t?.label),this.#e.$updateSourceControl(this.handle,{hasQuickDiffProvider:!!t,quickDiffLabel:i})}get secondaryQuickDiffProvider(){return T(this.D,"quickDiffProvider"),this.m}set secondaryQuickDiffProvider(t){T(this.D,"quickDiffProvider"),this.m=t;const i=t?.label;this.#e.$updateSourceControl(this.handle,{hasSecondaryQuickDiffProvider:!!t,secondaryQuickDiffLabel:i})}get historyProvider(){return T(this.D,"scmHistoryProvider"),this.n}set historyProvider(t){T(this.D,"scmHistoryProvider"),this.n=t,this.o.value=new ae,this.#e.$updateSourceControl(this.handle,{hasHistoryProvider:!!t}),t&&(this.o.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const i=s4(t?.currentHistoryItemRef),r=s4(t?.currentHistoryItemRemoteRef),s=s4(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.handle,i,r,s)})),this.o.value.add(t.onDidChangeHistoryItemRefs(i=>{if(i.added.length===0&&i.modified.length===0&&i.removed.length===0)return;const r=i.added.map(o=>({...o,icon:hs(o.icon)})),s=i.modified.map(o=>({...o,icon:hs(o.icon)})),n=i.removed.map(o=>({...o,icon:hs(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.handle,{added:r,modified:s,removed:n,silent:i.silent})})))}get artifactProvider(){return T(this.D,"scmArtifactProvider"),this.p}set artifactProvider(t){T(this.D,"scmArtifactProvider"),this.p=t,this.q.value=new ae,this.#e.$updateSourceControl(this.handle,{hasArtifactProvider:!!t}),t&&this.q.value.add(t.onDidChangeArtifacts(i=>{i.length!==0&&this.#e.$onDidChangeArtifacts(this.handle,i)}))}get commitTemplate(){return this.t}set commitTemplate(t){t!==this.t&&(this.t=t,this.#e.$updateSourceControl(this.handle,{commitTemplate:t}))}get acceptInputCommand(){return this.v}set acceptInputCommand(t){this.u.value=new ae,this.v=t;const i=this.E.converter.toInternal(t,this.u.value);this.#e.$updateSourceControl(this.handle,{acceptInputCommand:i})}get actionButton(){return T(this.D,"scmActionButton"),this.x}set actionButton(t){if(T(this.D,"scmActionButton"),kl(this.x,t))return;const i=this.w;this.w=new ae,this.x=t;const r=t!==void 0?{command:{...this.E.converter.toInternal(t.command,this.w),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(s=>s.map(n=>this.E.converter.toInternal(n,this.w))),enabled:t.enabled}:null;this.#e.$updateSourceControl(this.handle,{actionButton:r}).finally(()=>i.dispose())}get statusBarCommands(){return this.z}set statusBarCommands(t){if(this.z&&t&&YB(this.z,t))return;const i=this.y;this.y=new ae,this.z=t;const r=(t||[]).map(s=>this.E.converter.toInternal(s,this.y));this.#e.$updateSourceControl(this.handle,{statusBarCommands:r}).finally(()=>i.dispose())}get selected(){return this.A}constructor(t,i,r,s,n,o,a,c,l,u){this.D=t,this.E=s,this.F=n,this.G=o,this.H=a,this.f=new P,this.onDidDispose=this.f.event,this.g=new Map,this.h=void 0,this.k=void 0,this.l=void 0,this.m=void 0,this.o=new ms,this.q=new ms,this.t=void 0,this.u=new ms,this.v=void 0,this.w=new ae,this.y=new ae,this.z=void 0,this.A=!1,this.B=new P,this.onDidChangeSelection=this.B.event,this.C=new Xc,this.handle=H3.d++,this.I=new Map,this.J=new Set,this.#e=r;const h=y.from({scheme:B.vscodeSourceControl,path:`${n}/scm${this.handle}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.j=new KB(t,i,this.#e,this.handle,h),this.#e.$registerSourceControl(this.handle,u?.handle,n,o,a,hs(c),l,h),this.onDidDisposeParent=u?u.onDidDispose:Ke.None}createResourceGroup(t,i,r){const s=Je(this.D,"scmMultiDiffEditor")&&r?.multiDiffEditorEnableViewChanges===!0,n=new eq(this.#e,this.E,this.handle,t,i,s,this.D),o=Ke.once(n.onDidDispose)(()=>this.I.delete(n));return this.I.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],i=[];for(const[r,s]of this.I){s.dispose();const n=r.onDidUpdateResourceStates(()=>{this.J.add(r),this.eventuallyUpdateResourceStates()});Ke.once(r.onDidDispose)(()=>{this.J.delete(r),n.dispose(),this.g.delete(r.handle),this.#e.$unregisterGroup(this.handle,r.handle)}),t.push([r.handle,r.id,r.label,r.features,r.multiDiffEditorEnableViewChanges]);const o=r._takeResourceStateSnapshot();o.length>0&&i.push([r.handle,o]),this.g.set(r.handle,r)}this.#e.$registerGroups(this.handle,t,i),this.I.clear()}eventuallyUpdateResourceStates(){const t=[];this.J.forEach(i=>{const r=i._takeResourceStateSnapshot();r.length!==0&&t.push([i.handle,r])}),t.length>0&&this.#e.$spliceResourceStates(this.handle,t),this.J.clear()}getResourceGroup(t){return this.g.get(t)}setSelectionState(t){this.A=t,this.B.fire(t)}async provideArtifacts(t,i){const r=new ae,n=(await this.artifactProvider?.provideArtifacts(t,i))?.map(o=>({...o,icon:hs(o.icon),command:o.command?this.E.converter.toInternal(o.command,r):void 0}));return this.C.get(t)?.dispose(),this.C.set(t,r),n}dispose(){this.u.dispose(),this.w.dispose(),this.y.dispose(),this.o.dispose(),this.q.dispose(),this.C.dispose(),this.g.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.handle),this.f.fire(),this.f.dispose()}};__decorate([ib(100)],o4.prototype,"eventuallyAddResourceGroups",null),__decorate([ib(100)],o4.prototype,"eventuallyUpdateResourceStates",null);var a4=class{get onDidChangeActiveProvider(){return this.j.event}constructor(t,i,r,s){this.l=i,this.m=r,this.n=s,this.g=new Map,this.h=new Ks,this.j=new P,this.d=t.getProxy(V.MainThreadSCM),this.f=t.getProxy(V.MainThreadTelemetry),i.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.g.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.g.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.g.get(n.handle);return o||n}return n}})}createSourceControl(t,i,r,s,n,o,a){this.n.trace("ExtHostSCM#createSourceControl",t.identifier.value,i,r,s),this.f.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const c=a?Dt.find(this.g.values(),h=>h===a):void 0,l=new o4(t,this.m,this.d,this.l,i,r,s,n,o,c);this.g.set(l.handle,l);const u=this.h.get(t.identifier)||[];return u.push(l),this.h.set(t.identifier,u),l}getLastInputBox(t){this.n.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const i=this.h.get(t.identifier),r=i&&i[i.length-1];return r&&r.inputBox}$provideOriginalResource(t,i,r){const s=y.revive(i);this.n.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.g.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):ti(()=>n.quickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$provideSecondaryOriginalResource(t,i,r){const s=y.revive(i);this.n.trace("ExtHostSCM#$provideSecondaryOriginalResource",t,s.toString());const n=this.g.get(t);return!n||!n.secondaryQuickDiffProvider||!n.secondaryQuickDiffProvider.provideOriginalResource?Promise.resolve(null):ti(()=>n.secondaryQuickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$onInputBoxValueChange(t,i){this.n.trace("ExtHostSCM#$onInputBoxValueChange",t);const r=this.g.get(t);return r&&r.inputBox.$onInputBoxValueChange(i),Promise.resolve(void 0)}$executeResourceCommand(t,i,r,s){this.n.trace("ExtHostSCM#$executeResourceCommand",t,i,r);const n=this.g.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(i);return o?o.$executeResourceCommand(r,s):Promise.resolve(void 0)}$validateInput(t,i,r){this.n.trace("ExtHostSCM#$validateInput",t);const s=this.g.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):ti(()=>s.inputBox.validateInput(i,r)).then(n=>{if(!n)return Promise.resolve(void 0);const o=ue.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.n.trace("ExtHostSCM#$setSelectedSourceControl",t),this.k===t||(t!==void 0&&this.g.get(t)?.setSelectionState(!0),this.k!==void 0&&this.g.get(this.k)?.setSelectionState(!1),this.k=t),Promise.resolve(void 0)}async $resolveHistoryItem(t,i,r){try{const n=await this.g.get(t)?.historyProvider?.resolveHistoryItem(i,r);return n?bD(n):void 0}catch(s){this.n.error("ExtHostSCM#$resolveHistoryItem",s);return}}async $resolveHistoryItemChatContext(t,i,r){try{return await this.g.get(t)?.historyProvider?.resolveHistoryItemChatContext(i,r)??void 0}catch(s){this.n.error("ExtHostSCM#$resolveHistoryItemChatContext",s);return}}async $resolveHistoryItemChangeRangeChatContext(t,i,r,s,n){try{return await this.g.get(t)?.historyProvider?.resolveHistoryItemChangeRangeChatContext?.(i,r,s,n)??void 0}catch(o){this.n.error("ExtHostSCM#$resolveHistoryItemChangeRangeChatContext",o);return}}async $resolveHistoryItemRefsCommonAncestor(t,i,r){try{return await this.g.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(i,r)??void 0}catch(s){this.n.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,i,r){try{return(await this.g.get(t)?.historyProvider?.provideHistoryItemRefs(i,r))?.map(o=>({...o,icon:hs(o.icon)}))??void 0}catch(s){this.n.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,i,r){try{return(await this.g.get(t)?.historyProvider?.provideHistoryItems(i,r))?.map(o=>bD(o))??void 0}catch(s){this.n.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,i,r,s){try{return await this.g.get(t)?.historyProvider?.provideHistoryItemChanges(i,r,s)??void 0}catch(n){this.n.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}async $provideArtifactGroups(t,i){try{return(await this.g.get(t)?.artifactProvider?.provideArtifactGroups(i))?.map(n=>({...n,icon:hs(n.icon)}))}catch(r){this.n.error("ExtHostSCM#$provideArtifactGroups",r);return}}async $provideArtifacts(t,i,r){try{return this.g.get(t)?.provideArtifacts(i,r)}catch(s){this.n.error("ExtHostSCM#$provideArtifacts",s);return}}};a4=__decorate([__param(3,De)],a4);var tq=class W3{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(V.MainThreadShare)}async $provideShare(t,i,r){return await this.c.get(t)?.provideShare({selection:O.to(i.selection),resourceUri:y.revive(i.resourceUri)},r)??void 0}registerShareProvider(t,i){const r=W3.a++;return this.c.set(r,i),this.b.$registerShareProvider(r,Lo.from(t,this.d),i.id,i.label,i.priority),{dispose:()=>{this.b.$unregisterShareProvider(r),this.c.delete(r)}}}},iq=class _3{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(V.MainThreadSpeech)}async $createSpeechToTextSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new ae,o=new rt;this.d.set(i,o);const a=await s.provideSpeechToTextSession(o.token,r?{language:r}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new ae,o=new rt;this.d.set(i,o);const a=await s.provideTextToSpeechSession(o.token,r?{language:r}:void 0);a&&(this.f.set(i,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,i){this.f.get(t)?.synthesize(i)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,i){const r=this.c.get(t);if(!r)return;const s=new ae,n=new rt;this.d.set(i,n);const o=await r.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(i,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,i,r){const s=_3.a++;return this.c.set(s,r),this.b.$registerProvider(s,i,{extension:t,displayName:t.value}),se(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},rq=class sm{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new Zl("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new Zl("statusBarItem.warningForeground")]])}#e;#t;constructor(t,i,r,s,n,o=gn.Left,a,c){if(this.v=c,this.i=!1,this.k="",this.r=new ae,this.#e=t,this.#t=i,n&&s){this.c=CM(s.identifier,n);const l=r.get(this.c);l&&(o=l.alignLeft?gn.Left:gn.Right,a=l.priority,this.j=!0,this.name=l.name,this.text=l.text,this.tooltip=l.tooltip,this.command=l.command,this.accessibilityInformation=l.accessibilityInformation)}else this.c=String(sm.a++);this.e=s,this.f=n,this.g=o,this.h=this.w(a)}w(t){if(Hn(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get entryId(){return this.c}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.n}get tooltip(){return this.l}get tooltip2(){return this.e&&T(this.e,"statusBarItemTooltip"),this.m}get color(){return this.o}get backgroundColor(){return this.p}get command(){return this.s?.fromApi}get accessibilityInformation(){return this.u}set text(t){this.k=t,this.x()}set name(t){this.n=t,this.x()}set tooltip(t){this.l=t,this.x()}set tooltip2(t){this.e&&T(this.e,"statusBarItemTooltip"),this.m=t,this.x()}set color(t){this.o=t,this.x()}set backgroundColor(t){t&&!sm.b.has(t.id)&&(t=void 0),this.p=t,this.x()}set command(t){this.s?.fromApi!==t&&(this.q&&this.r.add(this.q),this.q=new ae,typeof t=="string"?this.s={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.q)}:t?this.s={fromApi:t,internal:this.#t.toInternal(t,this.q)}:this.s=void 0,this.x())}set accessibilityInformation(t){this.u=t,this.x()}show(){this.j=!0,this.x()}hide(){clearTimeout(this.t),this.j=!1,this.#e.$disposeEntry(this.c)}x(){this.i||!this.j||(clearTimeout(this.t),this.t=setTimeout(()=>{this.t=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let i;this.n?i=this.n:i=d(3047,null,this.e.displayName||this.e.name);let r=this.o;this.p&&(r=sm.b.get(this.p.id));let s,n;typeof this.m=="function"?(s=ue.fromStrict(this.l),n=!0):(s=ue.fromStrict(this.m??this.l),n=!1),this.#e.$setEntry(this.c,t,this.e?.identifier.value,i,this.k,s,n,this.s?.internal,r,this.p,this.g===gn.Left,this.h,this.u),this.r.clear()},0))}dispose(){this.hide(),this.v?.(),this.i=!0}},sq=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",gn.Left,Number.MIN_VALUE),this.a.name=d(3048,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Ee(()=>{const i=this.b.indexOf(t);i>=0&&(this.b.splice(i,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},nq=class{constructor(e,t){this.e=new Map,this.f=new Map,this.a=e.getProxy(V.MainThreadStatusBar),this.b=t,this.c=new sq(this)}$acceptStaticEntries(e){for(const t of e)this.f.set(t.entryId,t)}async $provideTooltip(e,t){const i=this.e.get(e);if(!i)return;const r=typeof i.tooltip2=="function"?await i.tooltip2(t):i.tooltip2;return t.isCancellationRequested?void 0:ue.fromStrict(r)}createStatusBarEntry(e,t,i,r){const s=new rq(this.a,this.b,this.f,e,t,i,r,()=>this.e.delete(s.entryId));return this.e.set(s.entryId,s),s}setStatusBarMessage(e,t){const i=this.c.setMessage(e);let r;return typeof t=="number"?r=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Ee(()=>{i.dispose(),clearTimeout(r)})}},oq=class extends Y{constructor(e,t){super(),this.n=t,this.a=new P,this.b=new P,this.c=new P,this.f=new P,this.g=new P,this.h=new P,this.j=new P,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(V.MainThreadTextEditors),this.D(this.n.onDidChangeVisibleTextEditors(i=>this.j.fire(i))),this.D(this.n.onDidChangeActiveTextEditor(i=>this.h.fire(i)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let r;typeof t=="number"?r={position:Ut.from(t),preserveFocus:i}:typeof t=="object"?r={position:Ut.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?O.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:r={preserveFocus:!1};const s=await this.m.$tryShowTextDocument(e.uri,r),n=s&&this.n.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new vU(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const r=t.selections.selections.map(Nr.to);i._acceptSelections(r)}if(t.visibleRanges){const r=mt(t.visibleRanges.map(O.to));i._acceptVisibleRanges(r)}if(t.options&&this.b.fire({textEditor:i.value,options:{...t.options,lineNumbers:nc.to(t.options.lineNumbers)}}),t.selections){const r=Ua.fromValue(t.selections.source),s=t.selections.selections.map(Nr.to);this.a.fire({textEditor:i.value,selections:s,kind:r})}if(t.visibleRanges){const r=mt(t.visibleRanges.map(O.to));this.c.fire({textEditor:i.value,visibleRanges:r})}}$acceptEditorPositionData(e){for(const t in e){const i=this.n.getEditor(t);if(!i)throw new Error("Unknown text editor");const r=Ut.to(e[t]);i.value.viewColumn!==r&&(i._acceptViewColumn(r),this.f.fire({textEditor:i.value,viewColumn:r}))}}$acceptEditorDiffInformation(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(!t){i._acceptDiffInformation(void 0),this.g.fire({textEditor:i.value,diffInformation:void 0});return}const r=this,s=t.map(n=>{const o=y.revive(n.original),a=y.revive(n.modified),c=n.changes.map(l=>{const[u,h,f,g]=l;let m;return u===h?m=ja.Addition:f===g?m=ja.Deletion:m=ja.Modification,{original:{startLineNumber:u,endLineNumberExclusive:h},modified:{startLineNumber:f,endLineNumberExclusive:g},kind:m}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return r.n.getDocument(a)?.version!==n.documentVersion}})});i._acceptDiffInformation(s),this.g.fire({textEditor:i.value,diffInformation:s})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},c4=class{constructor(t){this.a=new Ef(bn.Dark),this.b=new P}get activeColorTheme(){return this.a}$onColorThemeChange(t){let i;switch(t){case"light":i=bn.Light;break;case"hcDark":i=bn.HighContrast;break;case"hcLight":i=bn.HighContrastLight;break;default:i=bn.Dark}this.a=new Ef(i),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};c4=__decorate([__param(0,Ne)],c4);var MK=U("IExtHostTimeline"),aq=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(V.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,r)=>{if(i&&i.$mid===12)if(this.b.get(i.source)&&r&&Je(r,"timeline")){const s=i.uri===void 0?void 0:y.revive(i.uri);return this.c.get(i.source)?.get(SD(s))?.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,r){return this.b.get(e)?.provider.provideTimeline(y.revive(t),i,r)}registerTimelineProvider(e,t,i,r){const s=new ae,n=this.d(t.id,r,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const f=n(c,l);return{...h,source:t.id,items:h.items.map(f)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},i)}d(e,t,i){return(r,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=SD(r);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,f;o.iconPath&&(a instanceof Ii?f={id:a.id,color:a.color}:y.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let g;return ki.isMarkdownString(c.tooltip)?g=ue.from(c.tooltip):Oe(c.tooltip)?g=c.tooltip:ki.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),g=ue.from(c.detail)):Oe(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),g=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,i):void 0,icon:u,iconDark:h,themeIcon:f,tooltip:g,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),se(()=>{for(const r of this.c.values())r.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function SD(e){return e?.toString()}var OK=d(4651,null),FK=Bu("default-view-icon",ie.window,d(4652,null)),jg;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(jg||(jg={}));var ED;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(ED||(ED={}));var cq=class extends Y{constructor(){super(...arguments),this.c=this.D(new P),this.onDidRegister=this.c.event,this.f=this.D(new P),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,i){const r=this.get(e.id);if(r)return r;const s=e;return s.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},EP(this.g,t,[]).push(s),i?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const i=this.g.get(t),r=i?.indexOf(e);if(r!==-1){i?.splice(r,1),i.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(i=>i?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};Nt.add(jg.ViewContainersRegistry,new cq);var Hg;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(Hg||(Hg={}));function lq(e,t){const i=e.group??Hg.More,r=t.group??Hg.More;return i!==r?i.localeCompare(r):(e.order??5)-(t.order??5)}var uq=class extends Y{constructor(){super(...arguments),this.c=this.D(new P),this.onViewsRegistered=this.c.event,this.f=this.D(new P),this.onViewsDeregistered=this.f.event,this.g=this.D(new P),this.onDidChangeContainer=this.g.event,this.h=this.D(new P),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new t5}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:i})=>this.q(t,i)),this.c.fire(e)}deregisterViews(e,t){const i=this.r(e,t);i.length&&this.f.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this.m.keys())if(i!==t){const r=this.r(e,i);r.length&&(this.q(r,t),this.g.fire({views:r,from:i,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const i=(this.m.get(t)||[]).filter(r=>r.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(r=>r.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),se(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[r,s]of t)this.n.add(e,s),i.set(r,se(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),i}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,i=>t.push(i)),t.sort(lq)}q(e,t){let i=this.m.get(t);i||(i=[],this.m.set(t,i),this.j.push(t));for(const r of e){if(this.getView(r.id)!==null)throw new Error(d(4653,null,r.id));i.push(r)}}r(e,t){const i=this.m.get(t);if(!i)return[];const r=[],s=[];for(const n of i)e.includes(n)?r.push(n):s.push(n);return r.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),r}};Nt.add(jg.ViewsRegistry,new uq);var UK=U("viewDescriptorService"),CD;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(CD||(CD={}));var xD;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(xD||(xD={}));var Hs=class extends Error{constructor(e){super(d(4654,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},hq=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function kD(e,t){if(Oe(e))return{label:e};if(e&&typeof e=="object"&&e.label){let i;if(Array.isArray(e.highlights)&&(i=e.highlights.filter(r=>r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"),i=i.length?i:void 0),Oe(e.label))return{label:e.label,highlights:i};if(ki.isMarkdownString(e.label))return T(t,"treeItemMarkdownLabel"),{label:ue.from(e.label),highlights:i}}}var dq=class extends Y{constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=new Map,this.b=new hq;function r(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>r(s)?this.q(s):Array.isArray(s)&&s.length>0?s.map(n=>r(n)?this.q(n):n):s})}registerTreeDataProvider(e,t,i){const r=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>r.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const r=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:r,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return T(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return T(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){rn(h)&&T(i,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&Fv.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,f)=>a.reveal(h,f),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.D(u),u}async $getChildren(e,t){const i=this.a.get(e);if(!i)return Promise.reject(new Hs(e));if(!t){const s=await i.getChildren();return s?[[0,...s]]:void 0}const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=await i.getChildren(n);o&&r.push([s,...o])}return r}async $handleDrop(e,t,i,r,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new Hs(e));const l=dc.toDataTransfer(i,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,r,s)}async j(e,t,i,r,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(i,e,r);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,i,r){const s=this.a.get(e);if(!s)return Promise.reject(new Hs(e));const n=await this.j(new qa,s,t,r,i);if(!(!n||r.isCancellationRequested))return dc.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new Hs(e);return t.hasResolve}$resolve(e,t,i){const r=this.a.get(e);if(!r)throw new Hs(e);return r.resolveTreeItem(t,i)}$setExpanded(e,t,i){const r=this.a.get(e);if(!r)throw new Hs(e);r.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const r=this.a.get(e);if(!r)throw new Hs(e);r.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.a.get(e);if(!i){if(!t)return;throw new Hs(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.a.get(e);if(!i)throw new Hs(e);i.setCheckboxState(t)}m(e,t,i){const r=this.D(new fq(e,t,this.f,this.g.converter,this.h,i));return this.a.set(e,r),r}q(e){const t=this.a.get(e.$treeViewId),i=e;return t&&i.$treeItemHandle?t.getExtensionElement(i.$treeItemHandle):t&&e.$focusedTreeItem?t.focusedElement:null}},fq=class Eh extends Y{static{this.a="0"}static{this.b="1"}static{this.f=Symbol("extHostTreeViewRoot")}get visible(){return this.t}get selectedElements(){return this.u.map(t=>this.getExtensionElement(t)).filter(t=>!Tt(t))}get focusedElement(){return this.w?this.getExtensionElement(this.w):void 0}constructor(t,i,r,s,n,o){if(super(),this.N=t,this.O=r,this.P=s,this.Q=n,this.R=o,this.j=void 0,this.m=new Map,this.q=new Map,this.s=new Map,this.t=!1,this.u=[],this.w=void 0,this.y=this.D(new P),this.onDidExpandElement=this.y.event,this.z=this.D(new P),this.onDidCollapseElement=this.z.event,this.C=this.D(new P),this.onDidChangeSelection=this.C.event,this.F=this.D(new P),this.onDidChangeActiveItem=this.F.event,this.G=this.D(new P),this.onDidChangeVisibility=this.G.event,this.H=this.D(new P),this.onDidChangeCheckboxState=this.H.event,this.I=this.D(new P),this.J=Promise.resolve(),this.L=Promise.resolve(),this.M=new Set,this.X="",this.Y="",this.gb=new rt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.Y=h.name);this.g=i.treeDataProvider,this.h=i.dragAndDropController,this.g.onDidChangeTreeData&&this.D(this.g.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.I.fire({message:!1,element:u})}));let a,c;const l=Ke.debounce(this.I.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(f=>c=f),this.J=this.J.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.D(l(({message:u,elements:h})=>{h.length&&(h=zs(h),this.L=this.L.then(()=>{const f=c;a=null;const g=Array.from(this.M);return this.M.clear(),this.U("start",h,g),this.hb(h).then(()=>(this.U("done",h,g),this.Bb(g),f())).catch(m=>{const w=m instanceof Error?m.message:JSON.stringify(m);return this.U("error",h,g),this.Bb(g),this.Q.error(`Unable to refresh tree view ${this.N}: ${w}`),f()})})),u&&this.O.$setMessage(this.N,ue.fromStrict(this.X)??"")}))}S(t){const i=[];for(const s of t){if(!s){i.push("<root>");continue}const n=this.q.get(s);n&&i.push(n.item.handle)}const r=this.j?.map(s=>s.item.handle)??[];return{changed:i,roots:r}}U(t,i,r){if(this.W())try{const s=this.S(i);s.clearing=r.map(a=>a.item.handle);const n=s.changed.length,o=r.length;this.Q.debug(`[TreeView:${this.N}] refresh ${t} changed=${n} nodesToClear=${o} elements.size=${this.m.size} nodes.size=${this.q.size} handles=${JSON.stringify(s)}`)}catch{this.Q.debug(`[TreeView:${this.N}] refresh ${t} (snapshot failed)`)}}W(){try{const t=this.Q.getLevel();return t===de.Debug||t===de.Trace}catch{return!1}}async getChildren(t){const i=t?this.getExtensionElement(t):void 0;if(t&&!i)return this.Q.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let r=this.db(t);return r||(r=await this.fb(i)),r?r.map(s=>s.item):void 0}getExtensionElement(t){return this.m.get(t)}reveal(t,i){i=i||{select:!0,focus:!1};const r=Tt(i.select)?!0:i.select,s=Tt(i.focus)?!1:i.focus,n=Tt(i.expand)?!1:i.expand;return typeof this.g.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.J.then(()=>this.ab(t)).then(o=>this.cb(t,o[o.length-1]).then(a=>this.O.$reveal(this.N,{item:a.item,parentChain:o.map(c=>c.item)},{select:r,focus:s,expand:n})),o=>this.Q.error(o)):this.O.$reveal(this.N,void 0,{select:r,focus:s,expand:n})}get message(){return this.X}set message(t){this.X=t,this.I.fire({message:!0,element:!1})}get title(){return this.Y}set title(t){this.Y=t,this.O.$setTitle(this.N,t,this.Z)}get description(){return this.Z}set description(t){this.Z=t,this.O.$setTitle(this.N,this.Y,t)}get badge(){return this.$}set badge(t){this.$?.value===t?.value&&this.$?.tooltip===t?.tooltip||(this.$=hp.from(t),this.O.$setBadge(this.N,t))}setExpanded(t,i){const r=this.getExtensionElement(t);r&&(i?this.y.fire(Object.freeze({element:r})):this.z.fire(Object.freeze({element:r})))}setSelectionAndFocus(t,i){const r=!wi(this.u,t);this.u=t;const s=this.w!==i;this.w=i,r&&this.C.fire(Object.freeze({selection:this.selectedElements})),s&&this.F.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.t&&(this.t=t,this.G.fire(Object.freeze({visible:this.t})))}async setCheckboxState(t){const i=(await Promise.all(t.map(async r=>{const s=this.getExtensionElement(r.treeItemHandle);return s?{extensionItem:s,treeItem:await this.g.getTreeItem(s),newState:r.newState?is.Checked:is.Unchecked}:Promise.resolve(void 0)}))).filter(r=>r!==void 0);i.forEach(r=>{r.treeItem.checkboxState=r.newState?is.Checked:is.Unchecked}),this.H.fire({items:i.map(r=>[r.extensionItem,r.newState])})}async handleDrag(t,i,r){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.h?.handleDrag||s.length===0))return await this.h.handleDrag(s,i,r),i}get hasHandleDrag(){return!!this.h?.handleDrag}async onDrop(t,i,r){const s=i?this.getExtensionElement(i):void 0;if(!(!s&&i||!this.h?.handleDrop))return ti(()=>this.h?.handleDrop?this.h.handleDrop(s,t,r):void 0)}get hasResolve(){return!!this.g.resolveTreeItem}async resolveTreeItem(t,i){if(!this.g.resolveTreeItem)return;const r=this.m.get(t);if(r){const s=this.q.get(r);if(s){const n=await this.g.resolveTreeItem(s.extensionItem,r,i)??s.extensionItem;return this.pb(n),s.item.tooltip=this.mb(n.tooltip),s.item.command=this.nb(s.disposableStore,n.command),s.item}}}ab(t){return this.bb(t).then(i=>i?this.ab(i).then(r=>this.cb(i,r[r.length-1]).then(s=>(r.push(s),r))):Promise.resolve([]))}bb(t){const i=this.q.get(t);return i?Promise.resolve(i.parent?this.m.get(i.parent.item.handle):void 0):ti(()=>this.g.getParent(t))}cb(t,i){const r=this.q.get(t);return r?Promise.resolve(r):ti(()=>this.g.getTreeItem(t)).then(s=>this.sb(t,s,i,!0)).then(s=>this.getChildren(i?i.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.q.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.R.identifier.value}`)}))}db(t){if(t){let i;if(typeof t=="string"){const r=this.getExtensionElement(t);i=r?this.q.get(r):void 0}else i=t;return i&&i.children||void 0}return this.j}eb(t){return t??Eh.f}async fb(t){this.zb(t);const i=this.eb(t);let r=this.s.get(i)??0;r++,this.s.set(i,r);const s=new rt(this.gb.token);try{const n=await this.g.getChildren(t);if(this.s.get(i)!==r)return;const o=t?this.q.get(t):void 0;if(s.token.isCancellationRequested)return;const a=mt(n||[]),c=await Promise.all(mt(a).map(u=>this.g.getTreeItem(u)));if(this.s.get(i)!==r||s.token.isCancellationRequested)return;const l=c.map((u,h)=>u?this.lb(a[h],u,o):null);return this.s.get(i)!==r?void 0:mt(l)}finally{s.dispose()}}hb(t){if(t.some(r=>!r))return this.gb.dispose(!0),this.gb=new rt,this.zb(),this.O.$refresh(this.N);{const r=this.ib(t);if(r.length)return this.jb(r)}return Promise.resolve(void 0)}ib(t){const i=new Set,r=t.map(n=>this.q.get(n));for(const n of r)if(n&&!i.has(n.item.handle)){let o=n;for(;o&&o.parent&&r.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.m.get(o.parent.item.handle);o=a?this.q.get(a):void 0}o&&!o.parent&&i.add(n.item.handle)}const s=[];return i.forEach(n=>{const o=this.m.get(n);if(o){const a=this.q.get(o);a&&(!a.parent||!i.has(a.parent.item.handle))&&s.push(n)}}),s}jb(t){const i={};return Promise.all(t.map(r=>this.kb(r).then(s=>{s&&(i[r]=s.item)}))).then(()=>Object.keys(i).length?this.O.$refresh(this.N,i):void 0)}kb(t){const i=this.getExtensionElement(t);if(i){const r=this.q.get(i);if(r)return this.zb(i),ti(()=>this.g.getTreeItem(i)).then(s=>{if(s){const n=this.qb(i,s,r.parent);return this.xb(i,n,r,r.parent),r.dispose(),n}return null})}return Promise.resolve(null)}lb(t,i,r){const s=i.id?`${Eh.b}/${i.id}`:void 0;if(s){const o=this.m.get(s);if(o){if(o!==t)throw new Error(d(3051,null,i.id));const a=this.q.get(o);if(a){const c=this.qb(t,i,r);return this.xb(t,c,a,r),a.dispose(),c}}}const n=this.qb(t,i,r);return this.wb(t,n),this.yb(n,r),n}mb(t){return ki.isMarkdownString(t)?ue.from(t):t}nb(t,i){return i?{...this.P.toInternal(i,t),originalId:i.command}:void 0}ob(t){if(t.checkboxState===void 0)return;let i,r,s;return typeof t.checkboxState=="number"?i=t.checkboxState:(i=t.checkboxState.state,r=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:i===is.Checked,tooltip:r,accessibilityInformation:s}}pb(t){if(!uf.isTreeItem(t,this.R))throw new Error(`Extension ${this.R.identifier.value} has provided an invalid tree item.`)}qb(t,i,r){this.pb(i);const s=this.D(new ae),n=this.sb(t,i,r),o=this.tb(i);return{item:{handle:n,parentHandle:r?r.item.handle:void 0,label:kD(i.label,this.R),description:i.description,resourceUri:i.resourceUri,tooltip:this.mb(i.tooltip),command:this.nb(s,i.command),contextValue:i.contextValue,icon:o,iconDark:this.ub(i)||o,themeIcon:this.rb(i),collapsibleState:Tt(i.collapsibleState)?Io.None:i.collapsibleState,accessibilityInformation:i.accessibilityInformation,checkbox:this.ob(i)},extensionItem:i,parent:r,children:void 0,disposableStore:s,dispose(){s.dispose()}}}rb(t){return t.iconPath instanceof Ii?t.iconPath:void 0}sb(t,{id:i,label:r,resourceUri:s},n,o){if(i)return`${Eh.b}/${i}`;const a=kD(r,this.R),c=n?n.item.handle:Eh.a;let l="";a&&(rn(a.label)?l=a.label.value:l=a.label);let u=l||(s?Ji(s):"");u=u.indexOf("/")!==-1?u.replace("/","//"):u;const h=this.q.has(t)?this.q.get(t).item.handle:void 0,f=this.db(n)||[];let g,m=0;do{if(g=`${c}/${m}:${u}`,o||!this.m.has(g)||h===g)break;m++}while(m<=f.length);return g}tb(t){if(t.iconPath&&!(t.iconPath instanceof Ii))return typeof t.iconPath=="string"||y.isUri(t.iconPath)?this.vb(t.iconPath):this.vb(t.iconPath.light)}ub(t){if(t.iconPath&&!(t.iconPath instanceof Ii)&&t.iconPath.dark)return this.vb(t.iconPath.dark)}vb(t){return y.isUri(t)?t:y.file(t)}wb(t,i){this.m.set(i.item.handle,t),this.q.set(t,i)}xb(t,i,r,s){this.m.delete(i.item.handle),this.q.delete(t),i.item.handle!==r.item.handle&&this.m.delete(r.item.handle),this.wb(t,i);const n=this.db(s)||[],o=n.filter(a=>a.item.handle===r.item.handle)[0];o&&n.splice(n.indexOf(o),1,i)}yb(t,i){i?(i.children||(i.children=[]),i.children.push(t)):(this.j||(this.j=[]),this.j.push(t))}zb(t){if(t){const i=this.q.get(t);if(i){if(i.children)for(const r of i.children){this.M.add(r);const s=this.m.get(r.item.handle);s&&(this.zb(s),this.q.delete(s),this.m.delete(r.item.handle))}i.children=void 0}}else this.Ab()}Ab(){this.j=void 0,this.q.forEach(t=>{this.M.add(t)}),this.q.clear(),this.m.clear(),this.s.clear()}Bb(t){or(t)}Cb(){this.j=void 0,this.m.clear(),or(this.q.values()),this.q.clear(),or(this.M),this.M.clear(),this.s.clear()}dispose(){super.dispose(),this.gb.dispose(),this.Cb(),this.O.$disposeTree(this.N)}},pq=class B3{static{this.a=new Set([B.http,B.https])}constructor(t){this.c=new Map,this.b=t.getProxy(V.MainThreadUriOpeners)}registerExternalUriOpener(t,i,r,s){if(this.c.has(i))throw new Error(`Opener with id '${i}' already registered`);const n=s.schemes.find(o=>!B3.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(i,r),this.b.$registerUriOpener(i,s.schemes,t,s.label),se(()=>{this.c.delete(i),this.b.$unregisterUriOpener(i)})}async $canOpenUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=y.revive(i);return s.canOpenExternalUri(n,r)}async $openUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(y.revive(i.resolvedUri),{sourceUri:y.revive(i.sourceUri)},r)}},gq=class extends Y{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,i,r){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.D(new P),this.onDidDispose=this.#d.event,this.#h=this.D(new P),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#r=i,this.#i=r.viewType,this.#n=r.panelOptions,this.#o=r.viewColumn,this.#s=r.title,this.#l=r.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#r.dispose(),super.dispose())}get webview(){return this.c(),this.#r}get viewType(){return this.c(),this.#i}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,y.isUri(e)?this.#t.$setIconPath(this.#e,{light:e,dark:e}):this.#t.$setIconPath(this.#e,e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Ut.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},mq=class q3 extends Y{static c(){return ci()}constructor(t,i,r){super(),this.j=i,this.m=r,this.g=new Map,this.h=new Map,this.f=t.getProxy(V.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,i,r,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:Ut.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=Ac(t),l=q3.c();this.f.$createWebviewPanel(dg(t),l,i,{title:r,panelOptions:vq(n),webviewOptions:y8(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,i,r,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const i=Object.keys(t);i.sort((r,s)=>{const n=t[r],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const r of i){const s=this.getWebviewPanel(r);if(!s)continue;const n=t[r];s._updateViewState({active:n.active,visible:n.visible,viewColumn:Ut.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,i,r){if(this.h.has(i))throw new Error(`Serializer for '${i}' already registered`);return this.h.set(i,{serializer:r,extension:t}),this.f.$registerSerializer(i,{serializeBuffersForPostMessage:Ac(t)}),new Ee(()=>{this.h.delete(i),this.f.$unregisterSerializer(i)})}async $deserializeWebviewPanel(t,i,r,s){const n=this.h.get(i);if(!n)throw new Error(`No serializer found for '${i}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,r.webviewOptions,a),l=this.createNewWebviewPanel(t,i,r.title,s,r.panelOptions,c,r.active);await o.deserializeWebviewPanel(l,r.state)}createNewWebviewPanel(t,i,r,s,n,o,a){const c=new gq(t,this.f,o,{viewType:i,title:r,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function vq(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var wq=class extends Y{#e;#t;#i;#r;#n;#s;#a;#o;#c;constructor(e,t,i,r,s,n){super(),this.#n=!1,this.#l=this.D(new P),this.onDidChangeVisibility=this.#l.event,this.#u=this.D(new P),this.onDidDispose=this.#u.event,this.#i=i,this.#a=r,this.#e=e,this.#t=t,this.#r=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#r.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#r}get viewType(){return this.#i}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=hp.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},bq=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(V.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,r){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:i,extension:e}),this.a.$registerWebviewViewProvider(dg(e),t,{retainContextWhenHidden:r?.retainContextWhenHidden,serializeBuffersForPostMessage:Ac(e)}),new Ee(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new wq(e,this.a,t,i,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:r},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},l4=class extends Y{constructor(t){super(),this.b=0,this.c=new Map,this.f=0,this.g=new Map,this.a=t.getProxy(V.MainThreadChatContext)}async $provideChatContext(t,i){this.g.delete(t);const r=this.n(t);if(!r.provideChatContextExplicit)throw new Error("provideChatContext not implemented");const s=await r.provideChatContextExplicit(i)??[],n=[];for(const o of s){const a=this.h(t,o);n.push({handle:a,icon:o.icon,label:o.label,modelDescription:o.modelDescription,value:o.value})}return n}h(t,i){const r=this.f++;return this.g.has(t)||this.g.set(t,new Map),this.g.get(t).set(r,i),r}async $provideChatContextForResource(t,i,r){const s=this.n(t);if(!s.provideChatContextForResource)throw new Error("provideChatContextForResource not implemented");const n=await s.provideChatContextForResource({resource:y.revive(i.resource)},r);if(!n)return;const a={handle:this.h(t,n),icon:n.icon,label:n.label,modelDescription:n.modelDescription,value:i.withValue?n.value:void 0};if(i.withValue&&!a.value&&s.resolveChatContext){const c=await s.resolveChatContext(n,r);a.value=c?.value}return a}async j(t,i,r,s){const o=await t.resolveChatContext(r,s)??i;return{handle:i.handle,icon:o.icon,label:o.label,modelDescription:o.modelDescription,value:o.value}}async $resolveChatContext(t,i,r){const s=this.n(t);if(!s.resolveChatContext)throw new Error("resolveChatContext not implemented");const n=this.g.get(t)?.get(i.handle);if(!n)throw new Error("Chat context item not found");return this.j(s,i,n,r)}registerChatContextProvider(t,i,r){const s=this.b++,n=new ae;return this.m(s,r,n),this.c.set(s,{provider:r,disposables:n}),this.a.$registerChatContextProvider(s,`${i}`,t?Lo.from(t):void 0,{},{supportsResource:!!r.provideChatContextForResource,supportsResolve:!!r.resolveChatContext}),{dispose:()=>{this.c.delete(s),this.a.$unregisterChatContextProvider(s),n.dispose()}}}m(t,i,r){!i.onDidChangeWorkspaceChatContext||!i.provideWorkspaceChatContext||r.add(i.onDidChangeWorkspaceChatContext(async()=>{const s=await i.provideWorkspaceChatContext(Be.None),n=[];for(const o of s??[]){const a={icon:o.icon,label:o.label,modelDescription:o.modelDescription,value:o.value,handle:this.f++},c=await this.j(i,a,o,Be.None);n.push(c)}this.a.$updateWorkspaceContextItems(t,n)}))}n(t){if(!this.c.has(t))throw new Error("Chat context provider not found");return this.c.get(t).provider}dispose(){super.dispose();for(const{disposables:t}of this.c.values())t.dispose()}};l4=__decorate([__param(0,Ne)],l4);function yq(e){const t=e.get(Mt),i=e.get(ma),r=e.get(Hp),s=e.get(Dn),n=e.get(os),o=e.get(Wp),a=e.get(Rs),c=e.get(Jh),l=e.get(Ne),u=e.get(Lw),h=e.get(Mw),f=e.get(ro),g=e.get(De),m=e.get(Hw),w=e.get(Hu),S=e.get(_p),C=e.get(Bp),k=e.get(vb),A=e.get(Qu),G=e.get(yb),H=e.get(qp),K=e.get(sb),F=e.get(cb),z=e.get(Kb),Z=e.get(R$);l.set(te.ExtHostFileSystemInfo,i),l.set(te.ExtHostLogLevelServiceShape,f),l.set(te.ExtHostWorkspace,n),l.set(te.ExtHostConfiguration,a),l.set(te.ExtHostExtensionService,s),l.set(te.ExtHostStorage,u),l.set(te.ExtHostTunnelService,m),l.set(te.ExtHostWindow,S),l.set(te.ExtHostUrls,C),l.set(te.ExtHostSecretState,k),l.set(te.ExtHostTelemetry,o),l.set(te.ExtHostEditorTabs,A),l.set(te.ExtHostManagedSockets,G),l.set(te.ExtHostProgress,H),l.set(te.ExtHostAuthentication,K),l.set(te.ExtHostChatProvider,F),l.set(te.ExtHostDataChannels,Z);const Le=l.set(te.ExtHostDecorations,e.get(Rk)),it=l.set(te.ExtHostDocumentsAndEditors,e.get(kc)),Pe=l.set(te.ExtHostCommands,e.get(zo)),q=l.set(te.ExtHostTerminalService,e.get(Ec)),W=l.set(te.ExtHostTerminalShellIntegration,e.get(k$)),_=l.set(te.ExtHostDebugService,e.get(y$)),J=l.set(te.ExtHostSearch,e.get(x$)),X=l.set(te.ExtHostTask,e.get(l$)),pe=l.set(te.ExtHostOutputService,e.get(Tk)),$e=l.set(te.ExtHostLocalization,e.get(bb)),Ie=l.set(te.ExtHostDocuments,new OW(l,it)),lt=l.set(te.ExtHostDocumentContentProviders,new NW(l,it,g)),At=l.set(te.ExtHostDocumentSaveParticipant,new MW(g,Ie,l.getProxy(V.MainThreadBulkEdits))),Qe=l.set(te.ExtHostNotebook,new LB(l,Pe,it,Ie,r,J,g)),Et=l.set(te.ExtHostNotebookDocuments,new MB(Qe)),ui=l.set(te.ExtHostNotebookEditors,new t4(g,Qe)),Wt=l.set(te.ExtHostNotebookKernels,new i4(l,t,Qe,Pe,g)),ir=l.set(te.ExtHostNotebookRenderers,new WB(l,Qe)),_s=l.set(te.ExtHostNotebookDocumentSaveParticipant,new NB(g,Qe,l.getProxy(V.MainThreadBulkEdits))),ni=l.set(te.ExtHostEditors,new oq(l,it)),_c=l.set(te.ExtHostTreeViews,new dq(l.getProxy(V.MainThreadTreeViews),Pe,g)),gs=l.set(te.ExtHostEditorInsets,new dW(l.getProxy(V.MainThreadEditorInsets),ni,t.remote)),zi=l.set(te.ExtHostDiagnostics,new dy(l,g,i,it)),_e=l.set(te.ExtHostLanguages,new uB(l,Ie,Pe.converter,c)),Ae=l.set(te.ExtHostLanguageFeatures,new KW(l,c,Ie,Pe,zi,g,w,o)),Bs=l.set(te.ExtHostCodeMapper,new fW(l)),br=l.set(te.ExtHostFileSystem,new qW(l,Ae)),rr=l.set(te.ExtHostFileSystemEventService,new JW(l,g,it)),Br=l.set(te.ExtHostQuickOpen,qB(l,n,Pe)),Xo=l.set(te.ExtHostSCM,new a4(l,Pe,Ie,g)),Ch=l.set(te.ExtHostQuickDiff,new BB(l,c)),Bc=l.set(te.ExtHostShare,new tq(l,c)),qc=l.set(te.ExtHostComments,pW(l,Pe,Ie)),Yo=l.set(te.ExtHostLabelService,new ZW(l)),vi=l.set(te.ExtHostTheming,new c4(l)),Fn=l.set(te.ExtHostTimeline,new aq(l,Pe)),ht=l.set(te.ExtHostWebviews,new CW(l,t.remote,n,g,w)),Vt=l.set(te.ExtHostWebviewPanels,new mq(l,ht,n)),nm=l.set(te.ExtHostCustomEditors,new PW(l,Ie,h,ht,Vt)),om=l.set(te.ExtHostWebviewViews,new bq(l,ht)),yr=l.set(te.ExtHostTesting,e.get(tg)),zc=l.set(te.ExtHostUriOpeners,new pq(l)),D=l.set(te.ExtHostProfileContentHandlers,new _B(l)),N=l.set(te.ExtHostChatOutputRenderer,new nW(l,ht));l.set(te.ExtHostInteractive,new QW(l,Qe,it,Pe,g));const M=l.set(te.ExtHostLanguageModelTools,new lB(l,F)),ce=l.set(te.ExtHostChatSessions,new uy(Pe,F,l,g)),ge=l.set(te.ExtHostChatAgents2,new tW(l,g,Pe,Ie,it,F,zi,M)),_t=l.set(te.ExtHostChatContext,new l4(l)),Ze=l.set(te.ExtHostAiRelatedInformation,new GH(l)),hi=l.set(te.ExtHostAiEmbeddingVector,new UW(l)),$t=l.set(te.ExtHostAiSettingsSearch,new JH(l)),Gt=l.set(te.ExtHostStatusBar,new nq(l,Pe.converter)),sr=l.set(te.ExtHostSpeech,new iq(l)),dt=l.set(te.ExtHostEmbeddings,new FW(l));l.set(te.ExtHostMcp,e.get(Kb));const Jt=Object.values(te);l.assertRegistered(Jt);const di=new ay(l,it),Vi=new lW(l),be=new _y(l,g),Re=new LW(l),ct=new aW(l);return KH.register(Pe),function(E,gt,Ko){function ee(v){return(b,$,he)=>{const He=v(Ct=>{try{b.call($,Ct)}catch(cP){lm(new J6(E.identifier,cP,"FAILED to handle event"))}});return he?.push(He),He}}const je=function(){let v=!E.isUnderDevelopment;function b(){v||(g.info(`Extension '${E.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),v=!0)}return function $(he){if(Array.isArray(he))he.forEach($);else if(typeof he=="string")b();else{const He=he;typeof He.scheme>"u"&&b(),typeof He.exclusive=="boolean"&&T(E,"documentFiltersExclusive")}return he}}(),z3={getSession(v,b,$){return(typeof $?.forceNewSession=="object"&&$.forceNewSession.learnMore||typeof $?.createIfNone=="object"&&$.createIfNone.learnMore)&&T(E,"authLearnMore"),$?.authorizationServer&&T(E,"authIssuers"),K.getSession(E,v,b,$)},getAccounts(v){return K.getAccounts(v)},async hasSession(v,b){return T(E,"authSession"),!!await K.getSession(E,v,b,{silent:!0})},get onDidChangeSessions(){return ee(K.getExtensionScopedSessionsEvent(E.identifier.value))},registerAuthenticationProvider(v,b,$,he){return he?.supportedAuthorizationServers&&T(E,"authIssuers"),K.registerAuthenticationProvider(v,b,$,he)}},V3={registerCommand(v,b,$){return Pe.registerCommand(!0,v,b,$,void 0,E)},registerTextEditorCommand(v,b,$){return Pe.registerCommand(!0,v,(...he)=>{const He=ni.getActiveTextEditor();if(!He){g.warn("Cannot execute "+v+" because there is no active text editor.");return}return He.edit(Ct=>{b.apply($,[He,Ct,...he])}).then(Ct=>{Ct||g.warn("Edits from command "+v+" were not applied.")},Ct=>{g.warn("An error occurred while running command "+v,Ct)})},void 0,void 0,E)},registerDiffInformationCommand:(v,b,$)=>(T(E,"diffCommand"),Pe.registerCommand(!0,v,async(...he)=>{const He=it.activeEditor(!0);if(!He){g.warn("Cannot execute "+v+" because there is no active text editor.");return}const Ct=await ni.getDiffInformation(He.id);b.apply($,[Ct,...he])},void 0,void 0,E)),executeCommand(v,...b){return Pe.executeCommand(v,...b)},getCommands(v=!1){return Pe.getCommands(v)}},_4={get machineId(){return t.telemetryInfo.machineId},get devDeviceId(){return T(E,"devDeviceId"),t.telemetryInfo.devDeviceId??t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Vi.value},get shell(){return q.getDefaultShell(!1)},get onDidChangeShell(){return ee(q.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return ee(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return T(E,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return T(E,"telemetry"),ee(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return Px(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(v,b){return Dx.validateSender(v),o.instantiateLogger(E,v,b)},async openExternal(v,b){return S.openUri(v,{allowTunneling:t.remote.isRemote??(t.remote.authority?await m.hasTunnelProvider():!1),allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(v){if(v.scheme===t.environment.appUriScheme)return C.createAppUri(v);try{return await S.asExternalUri(v,{allowTunneling:!!t.remote.authority})}catch(b){if(_m(v,B.http)||_m(v,B.https))return v;throw b}},get remoteName(){return Jm(t.remote.authority)},get remoteAuthority(){return T(E,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return g.getLevel()},get onDidChangeLogLevel(){return ee(g.onDidChangeLogLevel)},get appQuality(){return T(E,"resolvers"),t.quality},get appCommit(){return T(E,"resolvers"),t.commit},getDataChannel(v){return T(E,"dataChannels"),Z.createDataChannel(E,v)}};t.environment.extensionTestsLocationURI||Object.freeze(_4);const G3={createTestController(v,b,$){return yr.createTestController(E,v,b,$)},createTestObserver(){return T(E,"testObserver"),yr.createTestObserver()},runTests(v){return T(E,"testObserver"),yr.runTests(v)},registerTestFollowupProvider(v){return T(E,"testObserver"),yr.registerTestFollowupProvider(v)},get onDidChangeTestResults(){return T(E,"testObserver"),ee(yr.onResultsChanged)},get testResults(){return T(E,"testObserver"),yr.results}},xh=t.remote.isRemote?Ao.Workspace:Ao.UI,J3={getExtension(v,b){Je(E,"extensionsAny")||(b=!1);const $=gt.mine.getExtensionDescription(v);if($)return new ju(s,E.identifier,$,xh,!1);if(b){const he=gt.all.getExtensionDescription(v);if(he)return new ju(s,E.identifier,he,xh,!0)}},get all(){const v=[];for(const b of gt.mine.getAllExtensionDescriptions())v.push(new ju(s,E.identifier,b,xh,!1));return v},get allAcrossExtensionHosts(){T(E,"extensionsAny");const v=new eo(gt.mine.getAllExtensionDescriptions().map($=>$.identifier)),b=[];for(const $ of gt.all.getAllExtensionDescriptions()){const he=!v.has($.identifier);b.push(new ju(s,E.identifier,$,xh,he))}return b},get onDidChange(){return Je(E,"extensionsAny")?ee(Ke.any(gt.mine.onDidChange,gt.all.onDidChange)):ee(gt.mine.onDidChange)}},Q3={createDiagnosticCollection(v){return zi.createDiagnosticCollection(E.identifier,v)},get onDidChangeDiagnostics(){return ee(zi.onDidChangeDiagnostics)},getDiagnostics:v=>zi.getDiagnostics(v),getLanguages(){return _e.getLanguages()},setTextDocumentLanguage(v,b){return _e.changeLanguage(v.uri,b)},match(v,b){const $=B0.from(v);let he;return z$($)&&(he=Qe.notebookDocuments.find(He=>He.apiNotebook.getCells().find(Ct=>Ct.document===b))?.apiNotebook),q$($,b.uri,b.languageId,!0,he?.uri,he?.notebookType)},registerCodeActionsProvider(v,b,$){return Ae.registerCodeActionProvider(E,je(v),b,$)},registerDocumentPasteEditProvider(v,b,$){return Ae.registerDocumentPasteEditProvider(E,je(v),b,$)},registerCodeLensProvider(v,b){return Ae.registerCodeLensProvider(E,je(v),b)},registerDefinitionProvider(v,b){return Ae.registerDefinitionProvider(E,je(v),b)},registerDeclarationProvider(v,b){return Ae.registerDeclarationProvider(E,je(v),b)},registerImplementationProvider(v,b){return Ae.registerImplementationProvider(E,je(v),b)},registerTypeDefinitionProvider(v,b){return Ae.registerTypeDefinitionProvider(E,je(v),b)},registerHoverProvider(v,b){return Ae.registerHoverProvider(E,je(v),b,E.identifier)},registerEvaluatableExpressionProvider(v,b){return Ae.registerEvaluatableExpressionProvider(E,je(v),b,E.identifier)},registerInlineValuesProvider(v,b){return Ae.registerInlineValuesProvider(E,je(v),b,E.identifier)},registerDocumentHighlightProvider(v,b){return Ae.registerDocumentHighlightProvider(E,je(v),b)},registerMultiDocumentHighlightProvider(v,b){return Ae.registerMultiDocumentHighlightProvider(E,je(v),b)},registerLinkedEditingRangeProvider(v,b){return Ae.registerLinkedEditingRangeProvider(E,je(v),b)},registerReferenceProvider(v,b){return Ae.registerReferenceProvider(E,je(v),b)},registerRenameProvider(v,b){return Ae.registerRenameProvider(E,je(v),b)},registerNewSymbolNamesProvider(v,b){return T(E,"newSymbolNamesProvider"),Ae.registerNewSymbolNamesProvider(E,je(v),b)},registerDocumentSymbolProvider(v,b,$){return Ae.registerDocumentSymbolProvider(E,je(v),b,$)},registerWorkspaceSymbolProvider(v){return Ae.registerWorkspaceSymbolProvider(E,v)},registerDocumentFormattingEditProvider(v,b){return Ae.registerDocumentFormattingEditProvider(E,je(v),b)},registerDocumentRangeFormattingEditProvider(v,b){return Ae.registerDocumentRangeFormattingEditProvider(E,je(v),b)},registerOnTypeFormattingEditProvider(v,b,$,...he){return Ae.registerOnTypeFormattingEditProvider(E,je(v),b,[$].concat(he))},registerDocumentSemanticTokensProvider(v,b,$){return Ae.registerDocumentSemanticTokensProvider(E,je(v),b,$)},registerDocumentRangeSemanticTokensProvider(v,b,$){return Ae.registerDocumentRangeSemanticTokensProvider(E,je(v),b,$)},registerSignatureHelpProvider(v,b,$,...he){return typeof $=="object"?Ae.registerSignatureHelpProvider(E,je(v),b,$):Ae.registerSignatureHelpProvider(E,je(v),b,typeof $>"u"?[]:[$,...he])},registerCompletionItemProvider(v,b,...$){return Ae.registerCompletionItemProvider(E,je(v),b,$)},registerInlineCompletionItemProvider(v,b,$){return b.handleDidShowCompletionItem&&T(E,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&T(E,"inlineCompletionsAdditions"),$&&T(E,"inlineCompletionsAdditions"),Ae.registerInlineCompletionsProvider(E,je(v),b,$)},get inlineCompletionsUnificationState(){return T(E,"inlineCompletionsAdditions"),Ae.inlineCompletionsUnificationState},onDidChangeCompletionsUnificationState(v,b,$){return T(E,"inlineCompletionsAdditions"),ee(Ae.onDidChangeInlineCompletionsUnificationState)(v,b,$)},registerDocumentLinkProvider(v,b){return Ae.registerDocumentLinkProvider(E,je(v),b)},registerColorProvider(v,b){return Ae.registerColorProvider(E,je(v),b)},registerFoldingRangeProvider(v,b){return Ae.registerFoldingRangeProvider(E,je(v),b)},registerSelectionRangeProvider(v,b){return Ae.registerSelectionRangeProvider(E,v,b)},registerCallHierarchyProvider(v,b){return Ae.registerCallHierarchyProvider(E,v,b)},registerTypeHierarchyProvider(v,b){return Ae.registerTypeHierarchyProvider(E,v,b)},setLanguageConfiguration:(v,b)=>Ae.setLanguageConfiguration(E,v,b),getTokenInformationAtPosition(v,b){return T(E,"tokenInformation"),_e.tokenAtPosition(v,b)},registerInlayHintsProvider(v,b){return Ae.registerInlayHintsProvider(E,v,b)},createLanguageStatusItem(v,b){return _e.createLanguageStatusItem(E,v,b)},registerDocumentDropEditProvider(v,b,$){return Ae.registerDocumentOnDropEditProvider(E,v,b,$)}},Z3={get activeTextEditor(){return ni.getActiveTextEditor()},get visibleTextEditors(){return ni.getVisibleTextEditors()},get activeTerminal(){return q.activeTerminal},get terminals(){return q.terminals},async showTextDocument(v,b,$){y.isUri(v)&&v.scheme===B.vscodeRemote&&!v.authority&&w.report("workspace.showTextDocument",E,"A URI of 'vscode-remote' scheme requires an authority.");const he=await(y.isUri(v)?Promise.resolve(B4.openTextDocument(v)):Promise.resolve(v));return ni.showTextDocument(he,b,$)},createTextEditorDecorationType(v){return ni.createTextEditorDecorationType(E,v)},onDidChangeActiveTextEditor(v,b,$){return ee(ni.onDidChangeActiveTextEditor)(v,b,$)},onDidChangeVisibleTextEditors(v,b,$){return ee(ni.onDidChangeVisibleTextEditors)(v,b,$)},onDidChangeTextEditorSelection(v,b,$){return ee(ni.onDidChangeTextEditorSelection)(v,b,$)},onDidChangeTextEditorOptions(v,b,$){return ee(ni.onDidChangeTextEditorOptions)(v,b,$)},onDidChangeTextEditorVisibleRanges(v,b,$){return ee(ni.onDidChangeTextEditorVisibleRanges)(v,b,$)},onDidChangeTextEditorViewColumn(v,b,$){return ee(ni.onDidChangeTextEditorViewColumn)(v,b,$)},onDidChangeTextEditorDiffInformation(v,b,$){return T(E,"textEditorDiffInformation"),ee(ni.onDidChangeTextEditorDiffInformation)(v,b,$)},onDidCloseTerminal(v,b,$){return ee(q.onDidCloseTerminal)(v,b,$)},onDidOpenTerminal(v,b,$){return ee(q.onDidOpenTerminal)(v,b,$)},onDidChangeActiveTerminal(v,b,$){return ee(q.onDidChangeActiveTerminal)(v,b,$)},onDidChangeTerminalDimensions(v,b,$){return T(E,"terminalDimensions"),ee(q.onDidChangeTerminalDimensions)(v,b,$)},onDidChangeTerminalState(v,b,$){return ee(q.onDidChangeTerminalState)(v,b,$)},onDidWriteTerminalData(v,b,$){return T(E,"terminalDataWriteEvent"),ee(q.onDidWriteTerminalData)(v,b,$)},onDidExecuteTerminalCommand(v,b,$){return T(E,"terminalExecuteCommandEvent"),ee(q.onDidExecuteTerminalCommand)(v,b,$)},onDidChangeTerminalShellIntegration(v,b,$){return ee(W.onDidChangeTerminalShellIntegration)(v,b,$)},onDidStartTerminalShellExecution(v,b,$){return ee(W.onDidStartTerminalShellExecution)(v,b,$)},onDidEndTerminalShellExecution(v,b,$){return ee(W.onDidEndTerminalShellExecution)(v,b,$)},get state(){return S.getState()},onDidChangeWindowState(v,b,$){return ee(S.onDidChangeWindowState)(v,b,$)},showInformationMessage(v,...b){return be.showMessage(E,St.Info,v,b[0],b.slice(1))},showWarningMessage(v,...b){return be.showMessage(E,St.Warning,v,b[0],b.slice(1))},showErrorMessage(v,...b){return be.showMessage(E,St.Error,v,b[0],b.slice(1))},showQuickPick(v,b,$){return Br.showQuickPick(E,v,b,$)},showWorkspaceFolderPick(v){return Br.showWorkspaceFolderPick(v)},showInputBox(v,b){return Br.showInput(v,b)},showOpenDialog(v){return Re.showOpenDialog(v)},showSaveDialog(v){return Re.showSaveDialog(v)},createStatusBarItem(v,b,$){let he,He,Ct;return typeof v=="string"?(he=v,He=b,Ct=$):(He=v,Ct=b),Gt.createStatusBarEntry(E,he,He,Ct)},setStatusBarMessage(v,b){return Gt.setStatusBarMessage(v,b)},withScmProgress(v){return w.report("window.withScmProgress",E,"Use 'withProgress' instead."),H.withProgress(E,{location:vn.SourceControl},(b,$)=>v({report(he){}}))},withProgress(v,b){return H.withProgress(E,v,b)},createOutputChannel(v,b){return pe.createOutputChannel(v,b,E)},createWebviewPanel(v,b,$,he){return Vt.createWebviewPanel(E,v,b,$,he)},createWebviewTextEditorInset(v,b,$,he){return T(E,"editorInsets"),gs.createWebviewEditorInset(v,b,$,he,E)},createTerminal(v,b,$){return typeof v=="object"?"pty"in v?q.createExtensionTerminal(v):q.createTerminalFromOptions(v):q.createTerminal(v,b,$)},registerTerminalLinkProvider(v){return q.registerLinkProvider(v)},registerTerminalProfileProvider(v,b){return q.registerProfileProvider(E,v,b)},registerTerminalCompletionProvider(v,...b){return T(E,"terminalCompletionProvider"),q.registerTerminalCompletionProvider(E,v,...b)},registerTerminalQuickFixProvider(v,b){return T(E,"terminalQuickFixProvider"),q.registerTerminalQuickFixProvider(v,E.identifier.value,b)},registerTreeDataProvider(v,b){return _c.registerTreeDataProvider(v,b,E)},createTreeView(v,b){return _c.createTreeView(v,b,E)},registerWebviewPanelSerializer:(v,b)=>Vt.registerWebviewPanelSerializer(E,v,b),registerCustomEditorProvider:(v,b,$={})=>nm.registerCustomEditorProvider(E,v,b,$),registerFileDecorationProvider(v){return Le.registerFileDecorationProvider(v,E)},registerUriHandler(v){return C.registerUriHandler(E,v)},createQuickPick(){return Br.createQuickPick(E)},createInputBox(){return Br.createInputBox(E)},get activeColorTheme(){return vi.activeColorTheme},onDidChangeActiveColorTheme(v,b,$){return ee(vi.onDidChangeActiveColorTheme)(v,b,$)},registerWebviewViewProvider(v,b,$){return om.registerWebviewViewProvider(E,v,b,$?.webviewOptions)},get activeNotebookEditor(){return Qe.activeNotebookEditor},onDidChangeActiveNotebookEditor(v,b,$){return ee(Qe.onDidChangeActiveNotebookEditor)(v,b,$)},get visibleNotebookEditors(){return Qe.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return ee(Qe.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(v,b,$){return ee(ui.onDidChangeNotebookEditorSelection)(v,b,$)},onDidChangeNotebookEditorVisibleRanges(v,b,$){return ee(ui.onDidChangeNotebookEditorVisibleRanges)(v,b,$)},showNotebookDocument(v,b){return Qe.showNotebookDocument(v,b)},registerExternalUriOpener(v,b,$){return T(E,"externalUriOpener"),zc.registerExternalUriOpener(E.identifier,v,b,$)},registerProfileContentHandler(v,b){return T(E,"profileContentHandlers"),D.registerProfileContentHandler(E,v,b)},registerQuickDiffProvider(v,b,$,he,He){return T(E,"quickDiffProvider"),Ch.registerQuickDiffProvider(E,je(v),b,$,he,He)},get tabGroups(){return A.tabGroups},registerShareProvider(v,b){return T(E,"shareProvider"),Bc.registerShareProvider(je(v),b)},get nativeHandle(){return T(E,"nativeWindowHandle"),S.nativeHandle},createChatStatusItem:v=>(T(E,"chatStatusItem"),ct.createChatStatusItem(E,v))},B4={get rootPath(){return w.report("workspace.rootPath",E,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(v){throw new Un("rootPath")},getWorkspaceFolder(v){return n.getWorkspaceFolder(v)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(v){throw new Un("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(v){throw new Un("workspaceFile")},updateWorkspaceFolders:(v,b,...$)=>n.updateWorkspaceFolders(E,v,b||0,...$),onDidChangeWorkspaceFolders:function(v,b,$){return ee(n.onDidChangeWorkspace)(v,b,$)},asRelativePath:(v,b)=>n.getRelativePath(v,b),findFiles:(v,b,$,he)=>n.findFiles(v,b,$,E.identifier,he),findFiles2:(v,b,$)=>(T(E,"findFiles2"),n.findFiles2(v,b,E.identifier,$)),findTextInFiles:(v,b,$,he)=>{T(E,"findTextInFiles");let He,Ct;return typeof b=="object"?(He=b,Ct=$):(He={},Ct=b,he=$),n.findTextInFiles(v,He||{},Ct,E.identifier,he)},findTextInFiles2:(v,b,$)=>(T(E,"findTextInFiles2"),T(E,"textSearchProvider2"),n.findTextInFiles2(v,b,E.identifier,$)),save:v=>n.save(v),saveAs:v=>n.saveAs(v),saveAll:v=>n.saveAll(v),applyEdit(v,b){return di.applyWorkspaceEdit(v,E,b)},createFileSystemWatcher:(v,b,$,he)=>{const He={ignoreCreateEvents:!!b,ignoreChangeEvents:!!$,ignoreDeleteEvents:!!he};return rr.createFileSystemWatcher(n,Ko,i,E,v,He)},get textDocuments(){return Ie.getAllDocumentData().map(v=>v.document)},set textDocuments(v){throw new Un("textDocuments")},openTextDocument(v,b){let $;if(b=b??v,typeof v=="string")$=Promise.resolve(y.file(v));else if(y.isUri(v))$=Promise.resolve(v);else if(!b||typeof b=="object")$=Ie.createDocumentData(b);else throw new Error("illegal argument - uriOrFileNameOrOptions");return $.then(he=>(g.trace(`openTextDocument from ${E.identifier}`),he.scheme===B.vscodeRemote&&!he.authority&&w.report("workspace.openTextDocument",E,"A URI of 'vscode-remote' scheme requires an authority."),Ie.ensureDocumentData(he,b).then(He=>He.document)))},onDidOpenTextDocument:(v,b,$)=>ee(Ie.onDidAddDocument)(v,b,$),onDidCloseTextDocument:(v,b,$)=>ee(Ie.onDidRemoveDocument)(v,b,$),onDidChangeTextDocument:(v,b,$)=>Je(E,"textDocumentChangeReason")?ee(Ie.onDidChangeDocumentWithReason)(v,b,$):ee(Ie.onDidChangeDocument)(v,b,$),onDidSaveTextDocument:(v,b,$)=>ee(Ie.onDidSaveDocument)(v,b,$),onWillSaveTextDocument:(v,b,$)=>ee(At.getOnWillSaveTextDocumentEvent(E))(v,b,$),get notebookDocuments(){return Qe.notebookDocuments.map(v=>v.apiNotebook)},async openNotebookDocument(v,b){let $;if(y.isUri(v))$=v,await Qe.openNotebookDocument(v);else if(typeof v=="string")$=y.revive(await Qe.createNotebookDocument({viewType:v,content:b}));else throw new Error("Invalid arguments");return Qe.getNotebookDocument($).apiNotebook},onDidSaveNotebookDocument(v,b,$){return ee(Et.onDidSaveNotebookDocument)(v,b,$)},onDidChangeNotebookDocument(v,b,$){return ee(Et.onDidChangeNotebookDocument)(v,b,$)},onWillSaveNotebookDocument(v,b,$){return ee(_s.getOnWillSaveNotebookDocumentEvent(E))(v,b,$)},get onDidOpenNotebookDocument(){return ee(Qe.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return ee(Qe.onDidCloseNotebookDocument)},registerNotebookSerializer(v,b,$,he){return Qe.registerNotebookSerializer(E,v,b,$,Je(E,"notebookLiveShare")?he:void 0)},onDidChangeConfiguration:(v,b,$)=>ee(Ko.onDidChangeConfiguration)(v,b,$),getConfiguration(v,b){return b=arguments.length===1?void 0:b,Ko.getConfiguration(v,b,E)},registerTextDocumentContentProvider(v,b){return lt.registerTextDocumentContentProvider(v,b)},registerTaskProvider:(v,b)=>(w.report("window.registerTaskProvider",E,"Use the corresponding function on the 'tasks' namespace instead"),X.registerTaskProvider(E,v,b)),registerFileSystemProvider(v,b,$){return bm(br.registerFileSystemProvider(E,v,b,$),r.addFileSystemProvider(v,b,$))},get fs(){return r.value},registerFileSearchProvider:(v,b)=>(T(E,"fileSearchProvider"),J.registerFileSearchProviderOld(v,b)),registerTextSearchProvider:(v,b)=>(T(E,"textSearchProvider"),J.registerTextSearchProviderOld(v,b)),registerAITextSearchProvider:(v,b)=>(T(E,"aiTextSearchProvider"),T(E,"textSearchProvider2"),J.registerAITextSearchProvider(v,b)),registerFileSearchProvider2:(v,b)=>(T(E,"fileSearchProvider2"),J.registerFileSearchProvider(v,b)),registerTextSearchProvider2:(v,b)=>(T(E,"textSearchProvider2"),J.registerTextSearchProvider(v,b)),registerRemoteAuthorityResolver:(v,b)=>(T(E,"resolvers"),s.registerRemoteAuthorityResolver(v,b)),registerResourceLabelFormatter:v=>(T(E,"resolvers"),Yo.$registerResourceLabelFormatter(v)),getRemoteExecServer:v=>(T(E,"resolvers"),s.getRemoteExecServer(v)),onDidCreateFiles:(v,b,$)=>ee(rr.onDidCreateFile)(v,b,$),onDidDeleteFiles:(v,b,$)=>ee(rr.onDidDeleteFile)(v,b,$),onDidRenameFiles:(v,b,$)=>ee(rr.onDidRenameFile)(v,b,$),onWillCreateFiles:(v,b,$)=>ee(rr.getOnWillCreateFileEvent(E))(v,b,$),onWillDeleteFiles:(v,b,$)=>ee(rr.getOnWillDeleteFileEvent(E))(v,b,$),onWillRenameFiles:(v,b,$)=>ee(rr.getOnWillRenameFileEvent(E))(v,b,$),openTunnel:v=>(T(E,"tunnels"),m.openTunnel(E,v).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return T(E,"tunnels"),m.getTunnels()},onDidChangeTunnels:(v,b,$)=>(T(E,"tunnels"),ee(m.onDidChangeTunnels)(v,b,$)),registerPortAttributesProvider:(v,b)=>(T(E,"portsAttributes"),m.registerPortsAttributesProvider(v,b)),registerTunnelProvider:(v,b)=>(T(E,"tunnelFactory"),m.registerTunnelProvider(v,b)),registerTimelineProvider:(v,b)=>(T(E,"timeline"),Fn.registerTimelineProvider(v,b,E.identifier,Pe.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:v=>(T(E,"workspaceTrust"),n.requestWorkspaceTrust(v)),onDidGrantWorkspaceTrust:(v,b,$)=>ee(n.onDidGrantWorkspaceTrust)(v,b,$),registerEditSessionIdentityProvider:(v,b)=>(T(E,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(v,b)),onWillCreateEditSessionIdentity:(v,b,$)=>(T(E,"editSessionIdentityProvider"),ee(n.getOnWillCreateEditSessionIdentityEvent(E))(v,b,$)),registerCanonicalUriProvider:(v,b)=>(T(E,"canonicalUriProvider"),n.registerCanonicalUriProvider(v,b)),getCanonicalUri:(v,b,$)=>(T(E,"canonicalUriProvider"),n.provideCanonicalUri(v,b,$)),decode(v,b){return n.decode(v,b)},encode(v,b){return n.encode(v,b)}},X3={get inputBox(){return w.report("scm.inputBox",E,"Use 'SourceControl.inputBox' instead"),Xo.getLastInputBox(E)},createSourceControl(v,b,$,he,He,Ct){return(he||He||Ct)&&T(E,"scmProviderOptions"),Xo.createSourceControl(E,v,b,$,he,He,Ct)}},Y3={createCommentController(v,b){return qc.createCommentController(E,v,b)}},K3={get activeDebugSession(){return _.activeDebugSession},get activeDebugConsole(){return _.activeDebugConsole},get breakpoints(){return _.breakpoints},get activeStackItem(){return _.activeStackItem},registerDebugVisualizationProvider(v,b){return T(E,"debugVisualization"),_.registerDebugVisualizationProvider(E,v,b)},registerDebugVisualizationTreeProvider(v,b){return T(E,"debugVisualization"),_.registerDebugVisualizationTree(E,v,b)},onDidStartDebugSession(v,b,$){return ee(_.onDidStartDebugSession)(v,b,$)},onDidTerminateDebugSession(v,b,$){return ee(_.onDidTerminateDebugSession)(v,b,$)},onDidChangeActiveDebugSession(v,b,$){return ee(_.onDidChangeActiveDebugSession)(v,b,$)},onDidReceiveDebugSessionCustomEvent(v,b,$){return ee(_.onDidReceiveDebugSessionCustomEvent)(v,b,$)},onDidChangeBreakpoints(v,b,$){return ee(_.onDidChangeBreakpoints)(v,b,$)},onDidChangeActiveStackItem(v,b,$){return ee(_.onDidChangeActiveStackItem)(v,b,$)},registerDebugConfigurationProvider(v,b,$){return _.registerDebugConfigurationProvider(v,b,$||lg.Initial)},registerDebugAdapterDescriptorFactory(v,b){return _.registerDebugAdapterDescriptorFactory(E,v,b)},registerDebugAdapterTrackerFactory(v,b){return _.registerDebugAdapterTrackerFactory(v,b)},startDebugging(v,b,$){return!$||typeof $=="object"&&"configuration"in $?_.startDebugging(v,b,{parentSession:$}):_.startDebugging(v,b,$||{})},stopDebugging(v){return _.stopDebugging(v)},addBreakpoints(v){return _.addBreakpoints(v)},removeBreakpoints(v){return _.removeBreakpoints(v)},asDebugSourceUri(v,b){return _.asDebugSourceUri(v,b)}},eP={registerTaskProvider:(v,b)=>X.registerTaskProvider(E,v,b),fetchTasks:v=>X.fetchTasks(v),executeTask:v=>X.executeTask(E,v),get taskExecutions(){return X.taskExecutions},onDidStartTask:(v,b,$)=>{const he=He=>{Je(E,"taskExecutionTerminal")||He?.execution?.terminal!==void 0&&(He.execution.terminal=void 0);const Ct={...He,execution:He.execution};return v.call(b,Ct)};return ee(X.onDidStartTask)(he,b,$)},onDidEndTask:(v,b,$)=>ee(X.onDidEndTask)(v,b,$),onDidStartTaskProcess:(v,b,$)=>ee(X.onDidStartTaskProcess)(v,b,$),onDidEndTaskProcess:(v,b,$)=>ee(X.onDidEndTaskProcess)(v,b,$),onDidStartTaskProblemMatchers:(v,b,$)=>(T(E,"taskProblemMatcherStatus"),ee(X.onDidStartTaskProblemMatchers)(v,b,$)),onDidEndTaskProblemMatchers:(v,b,$)=>(T(E,"taskProblemMatcherStatus"),ee(X.onDidEndTaskProblemMatchers)(v,b,$))},tP={createNotebookController(v,b,$,he,He){return Wt.createNotebookController(E,v,b,$,he,Je(E,"notebookMessaging")?He:void 0)},registerNotebookCellStatusBarItemProvider:(v,b)=>Qe.registerNotebookCellStatusBarItemProvider(E,v,b),createRendererMessaging(v){return ir.createRendererMessaging(E,v)},createNotebookControllerDetectionTask(v){return T(E,"notebookKernelSource"),Wt.createNotebookControllerDetectionTask(E,v)},registerKernelSourceActionProvider(v,b){return T(E,"notebookKernelSource"),Wt.registerKernelSourceActionProvider(E,v,b)}},iP={t(...v){if(typeof v[0]=="string"){const b=v.shift(),$=!v||typeof v[0]!="object"?v:v[0];return $e.getMessage(E.identifier.value,{message:b,args:$})}return $e.getMessage(E.identifier.value,v[0])},get bundle(){return $e.getBundle(E.identifier.value)},get uri(){return $e.getBundleUri(E.identifier.value)}},rP={transferActiveChat(v){return T(E,"interactive"),ge.transferActiveChat(v)}},sP={getRelatedInformation(v,b){return T(E,"aiRelatedInformation"),Ze.getRelatedInformation(E,v,b)},registerRelatedInformationProvider(v,b){return T(E,"aiRelatedInformation"),Ze.registerRelatedInformationProvider(E,v,b)},registerEmbeddingVectorProvider(v,b){return T(E,"aiRelatedInformation"),hi.registerEmbeddingVectorProvider(E,v,b)},registerSettingsSearchProvider(v){return T(E,"aiSettingsSearch"),$t.registerSettingsSearchProvider(E,v)}},nP={registerMappedEditsProvider(v,b){return T(E,"mappedEditsProvider"),{dispose(){}}},registerMappedEditsProvider2(v){return T(E,"mappedEditsProvider"),Bs.registerMappedEditsProvider(E,v)},createChatParticipant(v,b){return ge.createChatAgent(E,v,b)},createDynamicChatParticipant(v,b,$){return T(E,"chatParticipantPrivate"),ge.createDynamicChatAgent(E,v,b,$)},registerChatParticipantDetectionProvider(v){return T(E,"chatParticipantPrivate"),ge.registerChatParticipantDetectionProvider(E,v)},registerRelatedFilesProvider(v,b){return T(E,"chatEditing"),ge.registerRelatedFilesProvider(E,v,b)},onDidDisposeChatSession:(v,b,$)=>(T(E,"chatParticipantPrivate"),ee(ge.onDidDisposeChatSession)(v,b,$)),registerChatSessionItemProvider:(v,b)=>(T(E,"chatSessionsProvider"),ce.registerChatSessionItemProvider(E,v,b)),registerChatSessionContentProvider(v,b,$,he){return T(E,"chatSessionsProvider"),ce.registerChatSessionContentProvider(E,v,$,b,he)},registerChatOutputRenderer:(v,b)=>(T(E,"chatOutputRenderer"),N.registerChatOutputRenderer(E,v,b)),registerChatContextProvider(v,b,$){return T(E,"chatContextProvider"),_t.registerChatContextProvider(v?je(v):void 0,`${E.id}-${b}`,$)},registerCustomAgentsProvider(v){return T(E,"chatParticipantPrivate"),ge.registerCustomAgentsProvider(E,v)}},oP={selectChatModels:v=>F.selectLanguageModels(E,v??{}),onDidChangeChatModels:(v,b,$)=>F.onDidChangeProviders(v,b,$),registerLanguageModelChatProvider:(v,b)=>F.registerLanguageModelChatProvider(E,v,b),get isModelProxyAvailable(){return T(E,"languageModelProxy"),F.isModelProxyAvailable},onDidChangeModelProxyAvailability:(v,b,$)=>(T(E,"languageModelProxy"),F.onDidChangeModelProxyAvailability(v,b,$)),getModelProxy:()=>(T(E,"languageModelProxy"),F.getModelProxy(E)),registerLanguageModelProxyProvider:v=>(T(E,"chatParticipantPrivate"),F.registerLanguageModelProxyProvider(E,v)),get embeddingModels(){return T(E,"embeddings"),dt.embeddingsModels},onDidChangeEmbeddingModels:(v,b,$)=>(T(E,"embeddings"),dt.onDidChange(v,b,$)),registerEmbeddingsProvider(v,b){return T(E,"embeddings"),dt.registerEmbeddingsProvider(E,v,b)},async computeEmbeddings(v,b,$){return T(E,"embeddings"),dt.computeEmbeddings(v,b,$)},registerTool(v,b){return M.registerTool(E,v,b)},invokeTool(v,b,$){return M.invokeTool(E,v,b,$)},get tools(){return M.getTools(E)},fileIsIgnored(v,b){return F.fileIsIgnored(E,v,b)},registerIgnoredFileProvider(v){return F.registerIgnoredFileProvider(E,v)},registerMcpServerDefinitionProvider(v,b){return z.registerMcpConfigurationProvider(E,v,b)},onDidChangeChatRequestTools(...v){return T(E,"chatParticipantAdditions"),ee(ge.onDidChangeChatRequestTools)(...v)}},aP={registerSpeechProvider(v,b){return T(E,"speech"),sr.registerProvider(E.identifier,v,b)}};return{version:t.version,ai:sP,authentication:z3,commands:V3,comments:Y3,chat:nP,debug:K3,env:_4,extensions:J3,interactive:rP,l10n:iP,languages:Q3,lm:oP,notebooks:tP,scm:X3,speech:aP,tasks:eP,tests:G3,window:Z3,workspace:B4,Breakpoint:Ga,TerminalOutputAnchor:wv,ChatResultFeedbackKind:lu,ChatVariableLevel:c0,ChatCompletionItem:qM,ChatReferenceDiagnostic:y0,CallHierarchyIncomingCall:a9,CallHierarchyItem:yv,CallHierarchyOutgoingCall:c9,CancellationError:oi,CancellationTokenSource:rt,CandidatePortSource:Nm,CodeAction:Bl,CodeActionKind:pt,CodeActionTriggerKind:_l,CodeLens:ef,Color:Wa,ColorInformation:af,ColorPresentation:cf,ColorThemeKind:bn,CommentMode:Bv,CommentState:qv,CommentThreadCollapsibleState:tu,CommentThreadState:iu,CommentThreadApplicability:ru,CommentThreadFocus:su,CompletionItem:sf,CompletionItemKind:fe,CompletionItemTag:zl,CompletionList:Na,CompletionTriggerKind:La,ConfigurationTarget:za,CustomExecution:Ov,DebugAdapterExecutable:pf,DebugAdapterInlineImplementation:Yl,DebugAdapterNamedPipeServer:gf,DebugAdapterServer:Xl,DebugConfigurationProviderTriggerKind:lg,DebugConsoleMode:Sf,DebugVisualization:FM,DecorationRangeBehavior:ko,Diagnostic:qd,DiagnosticRelatedInformation:Fl,DiagnosticSeverity:ii,DiagnosticTag:wo,Disposable:Ee,DocumentHighlight:Yd,DocumentHighlightKind:Hl,MultiDocumentHighlight:Kd,DocumentLink:of,DocumentSymbol:Wl,EndOfLine:Tr,EnvironmentVariableMutatorType:Ta,EvaluatableExpression:mf,InlineValueText:vf,InlineValueVariableLookup:wf,InlineValueEvaluatableExpression:bf,InlineCompletionTriggerKind:Kl,InlineCompletionsDisposeReasonKind:Is,EventEmitter:P,ExtensionKind:Ao,ExtensionMode:Xa,ExternalUriOpenerPriority:Yv,FileChangeType:Ja,FileDecoration:Gv,FileDecoration2:Gv,FileSystemError:Ft,FileType:uo,FilePermission:Sa,FoldingRange:_v,FoldingRangeKind:Ds,FunctionBreakpoint:Po,InlineCompletionItem:$v,InlineCompletionList:Iv,Hover:Zd,VerboseHover:Xd,HoverVerbosityAction:bv,IndentAction:sy,Location:ji,MarkdownString:ki,OverviewRulerLane:hb,ParameterInformation:Sv,PortAutoForwardAction:e0,Position:xe,ProcessExecution:Ba,ProgressLocation:vn,QuickInputButtonLocation:Vv,QuickInputButtons:nu,Range:Se,RelativePattern:Va,Selection:Kr,SelectionRange:ql,SemanticTokens:Qa,SemanticTokensBuilder:OM,SemanticTokensEdit:p9,SemanticTokensEdits:yf,SemanticTokensLegend:zv,ShellExecution:$o,ShellQuoting:Mv,SignatureHelp:Cv,SignatureHelpTriggerKind:xv,SignatureInformation:Ev,SnippetString:So,SourceBreakpoint:Do,StandardTokenType:yn,StatusBarAlignment:gn,SymbolInformation:jl,SymbolKind:st,SymbolTag:Ul,Task:lf,TaskEventKind:Lv,TaskGroup:Ql,TaskPanelKind:Nv,TaskRevealKind:Rv,TaskScope:mn,TerminalLink:xM,TerminalQuickFixTerminalCommand:$M,TerminalQuickFixOpener:kM,TerminalLocation:Av,TerminalProfile:IM,TerminalExitReason:Dv,TerminalShellExecutionCommandLineConfidence:Jl,TerminalCompletionItem:DM,TerminalCompletionItemKind:Tv,TerminalCompletionList:PM,TerminalShellType:Pv,TextDocumentSaveReason:Fa,TextEdit:pn,SnippetTextEdit:fv,TextEditorCursorStyle:pr,TextEditorChangeKind:ja,TextEditorLineNumbersStyle:Rr,TextEditorRevealType:nf,TextEditorSelectionChangeKind:Ua,SyntaxTokenType:Ha,TextDocumentChangeReason:Gl,ThemeColor:Zl,ThemeIcon:Ii,TreeItem:uf,TreeItemCheckboxState:is,TreeItemCollapsibleState:Io,TypeHierarchyItem:t0,UIKind:tl,Uri:y,ViewColumn:Vl,WorkspaceEdit:Co,DocumentPasteTriggerKind:jv,DocumentDropEdit:Uv,DocumentDropOrPasteEditKind:wn,DocumentPasteEdit:RM,InlayHint:rf,InlayHintLabelPart:tf,InlayHintKind:kv,RemoteAuthorityResolverError:Aa,ResolvedAuthority:EM,ManagedResolvedAuthority:Qd,SourceControlInputBoxValidationType:_a,ExtensionRuntime:$f,TimelineItem:Zv,NotebookRange:Yr,NotebookCellKind:bo,NotebookCellExecutionState:Jv,NotebookCellData:zd,NotebookData:i9,NotebookRendererScript:g9,NotebookCellStatusBarAlignment:Cf,NotebookEditorRevealType:xf,NotebookCellOutput:Gd,NotebookCellOutputItem:r9,CellErrorStackFrame:UM,NotebookCellStatusBarItem:jM,NotebookControllerAffinity:Qv,NotebookControllerAffinity2:kf,NotebookEdit:Vd,NotebookKernelSourceAction:HM,NotebookVariablesRequestKind:au,PortAttributes:_M,LinkedEditingRanges:WM,TestResultState:Xv,TestRunRequest:If,TestMessage:Df,TestMessageStackFrame:BM,TestTag:cu,TestRunProfileKind:Ya,TextSearchCompleteMessageType:Dp,DataTransfer:qa,DataTransferItem:hf,TestCoverageCount:Pf,FileCoverage:Tf,StatementCoverage:v9,BranchCoverage:w9,DeclarationCoverage:b9,WorkspaceTrustState:Kv,LanguageStatusSeverity:Ra,QuickPickItemKind:ou,InputBoxValidationSeverity:Za,TabInputText:i0,TabInputTextDiff:Rf,TabInputTextMerge:y9,TabInputCustom:r0,TabInputNotebook:s0,TabInputNotebookDiff:n0,TabInputWebview:S9,TabInputTerminal:E9,TabInputInteractiveWindow:C9,TabInputChat:x9,TabInputTextMultiDiff:k9,TelemetryTrustedValue:lv,LogLevel:de,EditSessionIdentityMatch:ny,InteractiveSessionVoteDirection:o0,ChatCopyKind:a0,ChatSessionChangedFile:VM,ChatEditingSessionActionOutcome:rs,InteractiveEditorResponseFeedbackKind:u0,DebugStackFrame:d9,DebugThread:f9,RelatedInformationType:C0,SpeechToTextStatus:k0,TextToSpeechStatus:$0,PartialAcceptTriggerKind:xo,InlineCompletionEndOfLifeReasonKind:Ma,InlineCompletionDisplayLocationKind:Oa,KeywordRecognitionStatus:I0,ChatImageMimeType:E0,ChatResponseMarkdownPart:Lf,ChatResponseFileTreePart:Mf,ChatResponseAnchorPart:hu,ChatResponseProgressPart:f0,ChatResponseProgressPart2:Of,ChatResponseThinkingProgressPart:Ka,ChatResponseReferencePart:To,ChatResponseReferencePart2:To,ChatResponseCodeCitationPart:jf,ChatResponseCodeblockUriPart:Uf,ChatResponseWarningPart:du,ChatResponseTextEditPart:fu,ChatResponseNotebookEditPart:Wf,ChatResponseMarkdownWithVulnerabilitiesPart:uu,ChatResponseCommandButtonPart:Ff,ChatResponseConfirmationPart:Nf,ChatResponseMovePart:Hf,ChatResponseExtensionsPart:p0,ChatResponseExternalEditPart:d0,ChatResponsePullRequestPart:g0,ChatPrepareToolInvocationPart:pu,ChatResponseMultiDiffPart:h0,ChatResponseReferencePartStatusKind:w0,ChatResponseClearToPreviousToolInvocationReason:b0,ChatRequestTurn:_f,ChatRequestTurn2:_f,ChatResponseTurn:$9,ChatResponseTurn2:zM,ChatToolInvocationPart:m0,ChatLocation:Lr,ChatSessionStatus:v0,ChatRequestEditorData:I9,ChatRequestNotebookData:D9,ChatReferenceBinaryData:P9,ChatRequestEditedFileEventKind:l0,LanguageModelChatMessageRole:Hi,LanguageModelChatMessage:A9,LanguageModelChatMessage2:T9,LanguageModelToolResultPart:ec,LanguageModelToolResultPart2:ec,LanguageModelTextPart:kt,LanguageModelTextPart2:kt,LanguageModelPartAudience:Bf,ToolResultAudience:Bf,LanguageModelToolCallPart:Ro,LanguageModelThinkingPart:tc,LanguageModelError:Ps,LanguageModelToolResult:qf,LanguageModelToolResult2:R9,LanguageModelDataPart:ri,LanguageModelDataPart2:ri,LanguageModelToolExtensionSource:L9,LanguageModelToolMCPSource:N9,ExtendedLanguageModelToolResult:GM,LanguageModelChatToolMode:zf,LanguageModelPromptTsxPart:ss,NewSymbolName:NM,NewSymbolNameTag:Wv,NewSymbolNameTriggerKind:eu,ExcludeSettingOptions:Ts,TextSearchContext2:mw,TextSearchMatch2:kn,AISearchKeyword:vw,TextSearchCompleteMessageTypeNew:Dp,ChatErrorLevel:S0,McpHttpServerDefinition:O9,McpHttpServerDefinition2:O9,McpStdioServerDefinition:M9,McpStdioServerDefinition2:M9,McpToolAvailability:Vf,SettingsSearchResultKind:x0}}}var Wg,u4=class{constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.i=o,this.j=a,this.a=new Map,this.b=[]}async install(){this.k(),bi("code/extHost/willWaitForConfig");const t=await this.g.getConfigProvider();bi("code/extHost/didWaitForConfig");const i=await this.h.getExtensionPathIndex();this.register(new Sq(this.c,i,this.d,t,this.j)),this.register(this.f.createInstance(h4)),this.i.remote.isRemote&&this.register(this.f.createInstance(d4,i,this.i.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const i of t.nodeModuleName)this.a.set(i,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(i=>t.alternativeModuleName(i))}};u4=__decorate([__param(2,Kn),__param(3,Rs),__param(4,Dn),__param(5,Mt),__param(6,De)],u4);var h4=class{static{Wg=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Wg.a.size){const i=Zn(this.c(t.environment.appRoot.fsPath)),r="[a-z0-9_.-]",s=`@${r}+\\/${r}+|${r}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${i}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const i=this.b.exec(this.c(t));if(!i)return;const[,r,s,n]=i,o=Wg.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),r+o+n}c(t){return t.replace(/\\/g,"/")}};h4=Wg=__decorate([__param(0,Mt)],h4);var Sq=class{constructor(e,t,i,r,s){this.c=e,this.d=t,this.e=i,this.f=r,this.g=s,this.nodeModuleName="vscode",this.a=new Ks}load(e,t){const i=this.d.findSubstr(t);if(i){let r=this.a.get(i.identifier);return r||(r=this.c(i,this.e,this.f),this.a.set(i.identifier,r)),r}if(!this.b){let r="";this.d.forEach((s,n)=>r+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${r}`),this.b=this.c(lM,this.e,this.f)}return this.b}},d4=class{constructor(t,i,r){this.e=t,this.f=i,this.nodeModuleName=["open","opn"],this.d=r.getProxy(V.MainThreadTelemetry);const s=r.getProxy(V.MainThreadWindow);this.c=(n,o)=>{const a=y.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,i,r){const s=this.e.findSubstr(i);return s&&(this.a=s.identifier.value,this.h()),this.b=r(t),this.c}g(t,i){return this.i(),this.b(t,i)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};d4=__decorate([__param(2,Ne)],d4);var f4=class{constructor(t,i){this.a=t.getProxy(V.MainThreadConsole),this.b=i.consoleForward.includeStack,this.c=i.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,i){const r=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){r.e(t,i,s,arguments)}})}e(t,i,r,s){this.a.$logExtensionHostMessage({type:"__$console",severity:i,arguments:Cq(s,this.b)}),this.c&&this.f(t,r,s)}};f4=__decorate([__param(0,Ne),__param(1,Mt)],f4);var Eq=1e5;function Cq(e,t){const i=[];if(e.length)for(let r=0;r<e.length;r++){let s=e[r];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}i.push(s)}if(t){const r=new Error().stack;r&&i.push({__$stack:r.split(`
`).slice(3).join(`
`)})}try{const r=O2(i);return r.length>Eq?"Output omitted for a large object that exceeds the limits":r}catch(r){return`Output omitted for an object that cannot be inspected ('${r.toString()}')`}}var p4=class extends f4{constructor(t,i){super(t,i)}f(t,i,r){i.apply(console,r)}};p4=__decorate([__param(0,Ne),__param(1,Mt)],p4);var xq=class extends u4{k(){}getModule(e,t){for(const i of this.b){const r=i(e);if(r){e=r;break}}if(this.a.has(e))return this.a.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}},kq=class extends Cb{constructor(){super(...arguments),this.extensionRuntime=$f.Webworker}async wb(){this.h.createInstance(p4);const e=this.h.invokeFunction(yq);this.r=this.h.createInstance(xq,e,{mine:this.J,all:this.L}),await this.r.install(),performance.mark("code/extHost/didInitAPI"),await this.Eb()}xb(e){return e.browser}async yb(e,t,i){t=t.with({path:$q(t.path,".js")});const r=e?.identifier.value;r&&performance.mark(`code/extHost/willFetchExtensionCode/${r}`);const s=y.revive(await this.z.$asBrowserUri(t)),n=await fetch(s.toString(!0));if(r&&performance.mark(`code/extHost/didFetchExtensionCode/${r}`),n.status!==200)throw new Error(n.statusText);const o=await n.text(),a=`${t.toString(!0)}#vscode-extension`,c=`${o}
//# sourceURL=${a}`;let l;try{l=new Function("module","exports","require",c)}catch(g){throw console.error(r?`Loading code for extension ${r} failed: ${g.message}`:`Loading code failed: ${g.message}`),console.error(`${t.toString(!0)}${typeof g.line=="number"?` line ${g.line}`:""}${typeof g.column=="number"?` column ${g.column}`:""}`),console.error(g),g}e&&await this.u.initializeLocalizedMessages(e);const u={},h={exports:u},f=g=>{const m=this.r.getModule(g,t);if(m===void 0)throw new Error(`Cannot load module '${g}'`);return m};try{return i.codeLoadingStart(),r&&performance.mark(`code/extHost/willLoadExtensionCode/${r}`),l(h,u,f),h.exports!==u?h.exports:u}finally{r&&performance.mark(`code/extHost/didLoadExtensionCode/${r}`),i.codeLoadingStop()}}zb(e,t,i){throw new Error("ESM modules are not supported in the web worker extension host")}async $setRemoteEnvironment(e){}async Eb(e=5e3){if(!this.f.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await Qi(10)}};function $q(e,t){return Oh(e)?e:e+t}Ge(De,new Gr(iy,[!0],!0)),Ge(sb,nb,0),Ge(Dn,kq,0),Ge(Mw,Ow,0),Ge(Wp,new Gr(Bw,[!0],!0));var $D=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");var ID=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function DD(e){return/^(file|vscode-remote):/i.test(e)}var PD=fetch.bind(self);function Iq(e){self.fetch=async function(t,i){return t instanceof Request||DD(String(t))&&(t=(await e(y.parse(String(t)))).toString(!0)),PD(t,i)},self.XMLHttpRequest=class extends XMLHttpRequest{open(t,i,r,s,n){(async()=>(DD(i.toString())&&(i=(await e(y.parse(i.toString()))).toString(!0)),super.open(t,i,r??!0,s,n)))()}}}if(self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0,self.Worker){const e=self.Worker;Worker=function(t,i){if(/^file:/i.test(t.toString()))t=E6.uriToBrowserUri(y.parse(t.toString())).toString(!0);else if(/^vscode-remote:/i.test(t.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");const s=`(${function(c){function l(f){return typeof f=="string"||f instanceof URL?String(f).replace(/^file:\/\//i,"vscode-file://vscode-app"):f}const u=fetch.bind(self);self.fetch=function(f,g){return f instanceof Request?u(f,g):u(l(f),g)},self.XMLHttpRequest=class extends XMLHttpRequest{open(f,g,m,w,S){return super.open(f,l(g),m??!0,w,S)}};const h=importScripts.bind(self);self.importScripts=(...f)=>{h(...f.map(l))},h(c)}.toString()}('${t}'))`;i=i||{},i.name=`${name} -> ${i.name||Si(t.toString())}`;const n=new Blob([s],{type:"application/javascript"}),o=URL.createObjectURL(n);return new e(o,i)}}else self.Worker=class extends iU{constructor(e,t){super(ID,e,{name:Si(e.toString()),...t})}};var Dq=new class{constructor(){this.pid=void 0}exit(e){$D()}},Pq=class{constructor(){const e=new MessageChannel,t=new P;let i=!1;ID(e.port2,[e.port2]),e.port1.onmessage=r=>{const{data:s}=r;if(!(s instanceof ArrayBuffer)){console.warn("UNKNOWN data received",s);return}const n=re.wrap(new Uint8Array(s,0,s.byteLength));if(hA(n,2)){i=!0,AD("received terminate message from renderer");return}t.fire(n)},this.protocol={onMessage:t.event,send:r=>{if(!i){const s=r.buffer.buffer.slice(r.buffer.byteOffset,r.buffer.byteOffset+r.buffer.byteLength);e.port1.postMessage(s,[s])}}}}};function Aq(e){return new Promise(t=>{const i=e.onMessage(r=>{i.dispose();const s=JSON.parse(r.toString());e.send(y5(0)),t({protocol:e,initData:s})});e.send(y5(1))})}var AD=e=>$D();function Tq(e){return!!e&&typeof e=="object"&&e.type==="vscode.init"&&e.data instanceof Map}function Rq(){bi("code/extHost/willConnectToRenderer");const e=new Pq;return{onmessage(t){Tq(t)&&Aq(e.protocol).then(i=>{bi("code/extHost/didWaitForInitData");const r=new eU(i.protocol,i.initData,Dq,null,t.data);Iq(s=>r.asBrowserUri(s)),AD=s=>r.terminate(s)})}}}var Lq=Rq();self.onmessage=e=>Lq.onmessage(e.data);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/2064368b65eca34492249241745ca3b9d4b7bc5d/core/vs/workbench/api/worker/extensionHostWorkerMain.js.map
